<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="pragma" content="no-cache">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="google" value="notranslate">
    <link rel="icon" href="images/data-arrived.ico">
    <title>Açık Teyit</title>
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="js/vendor.js"></script>
    <script>if (window.module) module = window.module;</script>
    <link rel="stylesheet" href="css/vendor.css">
  </head>
  <body ontouchstart>
    <div class="pusher" id="main-output"> 
      <div class="ui centered grid">
        <div class="row">
          <div class="column" style="padding-top: 10%"><img class="ui small centered image" src="scadajs-logo-long.svg"></div>
        </div>
      </div>
      <div class="ui active big text loader" id="main-output">
        <p>Loading Application... </p>
        <div class="ui progress teal" id="percentProgress">
          <div class="bar" style="min-width: 0 !important;">
            <div class="progress"></div>
          </div>
        </div>
      </div>
    </div>
    <div id="dynamic-script"></div>
    <script>var addScript;
addScript = function(scriptData){
  var newdiv, script, e;
  newdiv = document.createElement('div');
  script = document.createElement('script');
  script.innerHTML = scriptData;
  newdiv.appendChild(script);
  try {
    return document.getElementById('dynamic-script').appendChild(newdiv);
  } catch (e$) {
    e = e$;
    return console.warn("This is a workaround in templates/load-app.ls because window.onload is not firing in electron.");
  }
};
$.ajax({
  url: 'js/app.js',
  type: 'GET',
  success: function(data){
    console.log("page loaded. data length: ", data.length);
    return addScript(data);
  },
  error: function(e){
    var msg;
    msg = "something went wrong while loading page: ";
    console.log(msg, e);
    return $('#loading-error').show();
  },
  xhr: function(){
    var xhr;
    $('#percentProgress').progress({
      showActivity: false
    });
    $('#loading-error').hide();
    xhr = new window.XMLHttpRequest();
    xhr.upload.addEventListener('progress', function(ev){
      var percentComplete;
      if (ev.lengthComputable) {
        percentComplete = ev.loaded / ev.total;
        return console.log("Upload complete % " + percentComplete * 100);
      }
    }, false);
    xhr.addEventListener('progress', function(ev){
      var percentComplete, percentInt;
      if (ev.lengthComputable) {
        percentComplete = ev.loaded / ev.total;
        percentInt = parseInt(percentComplete * 100);
        $('#percent').text(percentInt);
        return $('#percentProgress').progress("set progress", percentInt);
      }
    }, false);
    return xhr;
  }
});
    </script>
  </body>
</html>