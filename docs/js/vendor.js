function pushSafe(ref){
var proto = ref.proto;
proto.push2=function(keypath,value){
var ref;

var rest = [], len = arguments.length - 2;
while ( len-- > 0 ) rest[ len ] = arguments[ len + 2 ];return this.get(keypath)||this.set(keypath,[]),(ref = this).push.apply(ref, [ keypath,value ].concat( rest ))}}!(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a){ return a(o,!0); }if(i){ return i(o,!0); }var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++){ s(r[o]); }return s})({1:[(function(require,module,exports){!(function(global,factory){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document){ throw new Error("jQuery requires a window with a document"); }return factory(w)}:factory(global)})("undefined"!=typeof window?window:this,(function(window,noGlobal){"use strict";var arr=[],document=window.document,getProto=Object.getPrototypeOf,slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),support={};function DOMEval(code,doc){var script=(doc=doc||document).createElement("script");script.text=code,doc.head.appendChild(script).parentNode.removeChild(script)}var jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g,fcamelCase=function(all,letter){return letter.toUpperCase()};function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}jQuery.fn=jQuery.prototype={jquery:"3.2.1",constructor:jQuery,length:0,toArray:function(){return slice.call(this)},get:function(num){return null==num?slice.call(this):num<0?this[num+this.length]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,(function(elem,i){return callback.call(elem,i,elem)})))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){
var arguments$1 = arguments;
var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++){ if(null!=(options=arguments$1[i])){ for(name in options){ src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Array.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy)); } } }return target},jQuery.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){var type=jQuery.type(obj);return("number"===type||"string"===type)&&!isNaN(obj-parseFloat(obj))},isPlainObject:function(obj){var proto,Ctor;return!(!obj||"[object Object]"!==toString.call(obj))&&(!(proto=getProto(obj))||"function"==typeof(Ctor=hasOwn.call(proto,"constructor")&&proto.constructor)&&fnToString.call(Ctor)===ObjectFunctionString)},isEmptyObject:function(obj){var name;for(name in obj){ return!1; }return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){DOMEval(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){ for(length=obj.length;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++){ ; } }else { for(i in obj){ if(!1===callback.call(obj[i],i,obj[i])){ break; } } }return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArrayLike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++){ first[i++]=second[j]; }return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++){ !callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]); }return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){ for(length=elems.length;i<length;i++){ null!=(value=callback(elems[i],i,arg))&&ret.push(value); } }else { for(i in elems){ null!=(value=callback(elems[i],i,arg))&&ret.push(value); } }return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)){ return args=slice.call(arguments,2),(proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,proxy }},now:Date.now,support:support}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}));var Sizzle=(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++){ if(list[i]===elem){ return i; } }return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){return asCodePoint?"\0"===ch?"ï¿½":ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ":"\\"+ch},unloadHandler=function(){setDocument()},disabledAncestor=addCombinator((function(elem){return!0===elem.disabled&&("form"in elem||"label"in elem)}),{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];){ ; }target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType){ return results; }if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector))){ if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))){ return results; }if(elem.id===m){ return results.push(elem),results }}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){ return results.push(elem),results }}else{if(match[2]){ return push.apply(results,context.getElementsByTagName(selector)),results; }if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){ return push.apply(results,context.getElementsByClassName(m)),results }} }if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType){ newContext=context,newSelector=selector; }else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rcssescape,fcssescape):context.setAttribute("id",nid=expando),i=(groups=tokenize(selector)).length;i--;){ groups[i]="#"+nid+" "+toSelector(groups[i]); }newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){ try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")} }}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return!1}finally{el.parentNode&&el.parentNode.removeChild(el),el=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;){ Expr.attrHandle[arr[i]]=handler }}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(diff){ return diff; }if(cur){ for(;cur=cur.nextSibling;){ if(cur===b){ return-1; } } }return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){return"form"in elem?elem.parentNode&&!1===elem.disabled?"label"in elem?"label"in elem.parentNode?elem.parentNode.disabled===disabled:elem.disabled===disabled:elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled:elem.disabled===disabled:"label"in elem&&elem.disabled===disabled}}function createPositionalPseudo(fn){return markFunction((function(argument){return argument=+argument,markFunction((function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;){ seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j])) }}))}))}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(docElem=(document=doc).documentElement,documentIsHTML=!isXML(document),preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow&&(subWindow.addEventListener?subWindow.addEventListener("unload",unloadHandler,!1):subWindow.attachEvent&&subWindow.attachEvent("onunload",unloadHandler)),support.attributes=assert((function(el){return el.className="i",!el.getAttribute("className")})),support.getElementsByTagName=assert((function(el){return el.appendChild(document.createComment("")),!el.getElementsByTagName("*").length})),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert((function(el){return docElem.appendChild(el).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length})),support.getById?(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[]}}):(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){if((node=elem.getAttributeNode("id"))&&node.value===id){ return[elem]; }for(elems=context.getElementsByName(id),i=0;elem=elems[i++];){ if((node=elem.getAttributeNode("id"))&&node.value===id){ return[elem] } }}return[]}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];){ 1===elem.nodeType&&tmp.push(elem); }return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML){ return context.getElementsByClassName(className) }},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert((function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",el.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),el.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),el.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),el.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),el.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")})),assert((function(el){el.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden"),el.appendChild(input).setAttribute("name","D"),el.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),2!==el.querySelectorAll(":enabled").length&&rbuggyQSA.push(":enabled",":disabled"),docElem.appendChild(el).disabled=!0,2!==el.querySelectorAll(":disabled").length&&rbuggyQSA.push(":enabled",":disabled"),el.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")}))),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert((function(el){support.disconnectedMatch=matches.call(el,"*"),matches.call(el,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)})),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b){ for(;b=b.parentNode;){ if(b===a){ return!0; } } }return!1},sortOrder=hasCompare?function(a,b){if(a===b){ return hasDuplicate=!0,0; }var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b){ return hasDuplicate=!0,0; }var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){ return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0; }if(aup===bup){ return siblingCheck(a,b); }for(cur=a;cur=cur.parentNode;){ ap.unshift(cur); }for(cur=b;cur=cur.parentNode;){ bp.unshift(cur); }for(;ap[i]===bp[i];){ i++; }return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){ try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType){ return ret }}catch(e){} }return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];){ elem===results[i]&&(j=duplicates.push(i)); }for(;j--;){ results.splice(duplicates[j],1) }}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent){ return elem.textContent; }for(elem=elem.firstChild;elem;elem=elem.nextSibling){ ret+=getText(elem) }}else if(3===nodeType||4===nodeType){ return elem.nodeValue }}else { for(;node=elem[i++];){ ret+=getText(node); } }return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,(function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")}))},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];){ if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType){ return!1; } }start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(diff=(nodeIndex=(cache=(uniqueCache=(outerCache=(node=parent)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1])&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();){ if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break} }}else if(useCache&&(diff=nodeIndex=(cache=(uniqueCache=(outerCache=(node=elem)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1]),!1===diff){ for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((uniqueCache=(outerCache=node[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]=[dirruns,diff]),node!==elem));){ ; } }return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction((function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;){ seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i]) }})):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction((function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction((function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;){ (elem=unmatched[i])&&(seed[i]=!(matches[i]=elem)) }})):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}})),has:markFunction((function(selector){return function(elem){return Sizzle(selector,elem).length>0}})),contains:markFunction((function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}})),lang:markFunction((function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){ return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-") }}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}})),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){ if(elem.nodeType<6){ return!1; } }return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(matchIndexes,length){return[length-1]})),eq:createPositionalPseudo((function(matchIndexes,length,argument){return[argument<0?argument+length:argument]})),even:createPositionalPseudo((function(matchIndexes,length){for(var i=0;i<length;i+=2){ matchIndexes.push(i); }return matchIndexes})),odd:createPositionalPseudo((function(matchIndexes,length){for(var i=1;i<length;i+=2){ matchIndexes.push(i); }return matchIndexes})),lt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;){ matchIndexes.push(i); }return matchIndexes})),gt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;){ matchIndexes.push(i); }return matchIndexes}))}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){ Expr.pseudos[i]=createInputPseudo(i); }for(i in{submit:!0,reset:!0}){ Expr.pseudos[i]=createButtonPseudo(i); }function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++){ selector+=tokens[i].value; }return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&"parentNode"===key,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];){ if(1===elem.nodeType||checkNonElements){ return matcher(elem,context,xml); } }return!1}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];){ if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml)){ return!0 } }}else { for(;elem=elem[dir];){ if(1===elem.nodeType||checkNonElements){ if(uniqueCache=(outerCache=elem[expando]||(elem[expando]={}))[elem.uniqueID]||(outerCache[elem.uniqueID]={}),skip&&skip===elem.nodeName.toLowerCase()){ elem=elem[dir]||elem; }else{if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){ return newCache[2]=oldCache[2]; }if(uniqueCache[key]=newCache,newCache[2]=matcher(elem,context,xml)){ return!0 }} } } }return!1}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;){ if(!matchers[i](elem,context,xml)){ return!1; } }return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++){ (elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i))); }return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction((function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||(function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++){ Sizzle(selector,contexts[i],results); }return results})(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter){ for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;){ (elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)); } }if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;){ (elem=matcherOut[i])&&temp.push(matcherIn[i]=elem); }postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;){ (elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem)) }}}else { matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut) }}))}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator((function(elem){return elem===checkContext}),implicitRelative,!0),matchAnyContext=addCombinator((function(elem){return indexOf(checkContext,elem)>-1}),implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++){ if(matcher=Expr.relative[tokens[i].type]){ matchers=[addCombinator(elementMatcher(matchers),matcher)]; }else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++){ ; }return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)} }return elementMatcher(matchers)}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){ return parseOnly?0:cached.slice(0); }for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter){ !(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length)); }if(!matched){ break }}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;){ (cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached); }(cached=compilerCache(selector,(function(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];){ if(matcher(elem,context||document,xml)){results.push(elem);break} }outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];){ matcher(unmatched,setMatched,context,xml); }if(seed){if(matchedCount>0){ for(;i--;){ unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results)); } }setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher})(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if((tokens=match[0]=match[0].slice(0)).length>2&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0])){ return results; }compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);){ if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens))){ return push.apply(results,seed),results; }break} }}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert((function(el){return 1&el.compareDocumentPosition(document.createElement("fieldset"))})),assert((function(el){return el.innerHTML="<a href='#'></a>","#"===el.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(elem,name,isXML){if(!isXML){ return elem.getAttribute(name,"type"===name.toLowerCase()?1:2) }})),support.attributes&&assert((function(el){return el.innerHTML="<input/>",el.firstChild.setAttribute("value",""),""===el.firstChild.getAttribute("value")}))||addHandle("value",(function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase()){ return elem.defaultValue }})),assert((function(el){return null==el.getAttribute("disabled")}))||addHandle(booleans,(function(elem,name,isXML){var val;if(!isXML){ return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null }})),Sizzle})(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains,jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;){ if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until)){ break; }matched.push(elem)} }return matched},siblings=function(n,elem){for(var matched=[];n;n=n.nextSibling){ 1===n.nodeType&&n!==elem&&matched.push(n); }return matched},rneedsContext=jQuery.expr.match.needsContext;function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()}var rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){return jQuery.isFunction(qualifier)?jQuery.grep(elements,(function(elem,i){return!!qualifier.call(elem,i,elem)!==not})):qualifier.nodeType?jQuery.grep(elements,(function(elem){return elem===qualifier!==not})):"string"!=typeof qualifier?jQuery.grep(elements,(function(elem){return indexOf.call(qualifier,elem)>-1!==not})):risSimple.test(qualifier)?jQuery.filter(qualifier,elements,not):(qualifier=jQuery.filter(qualifier,elements),jQuery.grep(elements,(function(elem){return indexOf.call(qualifier,elem)>-1!==not&&1===elem.nodeType})))}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,(function(elem){return 1===elem.nodeType})))},jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if("string"!=typeof selector){ return this.pushStack(jQuery(selector).filter((function(){
var this$1 = this;
for(i=0;i<len;i++){ if(jQuery.contains(self[i],this$1)){ return!0 } }}))); }for(ret=this.pushStack([]),i=0;i<len;i++){ jQuery.find(selector,self[i],ret); }return len>1?jQuery.uniqueSort(ret):ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(jQuery.fn.init=function(selector,context,root){
var this$1 = this;
var match,elem;if(!selector){ return this; }if(root=root||rootjQuery,"string"==typeof selector){if(!(match="<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context){ return!context||context.jquery?(context||root).find(selector):this.constructor(context).find(selector); }if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){ for(match in context){ jQuery.isFunction(this$1[match])?this$1[match](context[match]):this$1.attr(match,context[match]); } }return this}return(elem=document.getElementById(match[2]))&&(this[0]=elem,this.length=1),this}return selector.nodeType?(this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==root.ready?root.ready(selector):selector(jQuery):jQuery.makeArray(selector,this)}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;){ ; }return cur}jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter((function(){
var this$1 = this;
for(var i=0;i<l;i++){ if(jQuery.contains(this$1,targets[i])){ return!0 } }}))},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets="string"!=typeof selectors&&jQuery(selectors);if(!rneedsContext.test(selectors)){ for(;i<l;i++){ for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){ if(cur.nodeType<11&&(targets?targets.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break} } } }return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return nodeName(elem,"iframe")?elem.contentDocument:(nodeName(elem,"template")&&(elem=elem.content||elem),jQuery.merge([],elem.childNodes))}},(function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.uniqueSort(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}}));var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject,noValue){var method;try{value&&jQuery.isFunction(method=value.promise)?method.call(value).done(resolve).fail(reject):value&&jQuery.isFunction(method=value.then)?method.call(value,resolve,reject):resolve.apply(void 0,[value].slice(noValue))}catch(value){reject.apply(void 0,[value])}}jQuery.Callbacks=function(options){options="string"==typeof options?(function(options){var object={};return jQuery.each(options.match(rnothtmlwhite)||[],(function(_,flag){object[flag]=!0})),object})(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){for(locked=locked||options.once,fired=firing=!0;queue.length;firingIndex=-1){ for(memory=queue.shift();++firingIndex<list.length;){ !1===list[firingIndex].apply(memory[0],memory[1])&&options.stopOnFalse&&(firingIndex=list.length,memory=!1); } }options.memory||(memory=!1),firing=!1,locked&&(list=memory?[]:"")},self={add:function(){return list&&(memory&&!firing&&(firingIndex=list.length-1,queue.push(memory)),(function add(args){jQuery.each(args,(function(_,arg){jQuery.isFunction(arg)?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==jQuery.type(arg)&&add(arg)}))})(arguments),memory&&!firing&&fire()),this},remove:function(){return jQuery.each(arguments,(function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;){ list.splice(index,1),index<=firingIndex&&firingIndex-- }})),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){return list&&(list=[]),this},disable:function(){return locked=queue=[],list=memory="",this},disabled:function(){return!list},lock:function(){return locked=queue=[],memory||firing||(list=memory=""),this},locked:function(){return!!locked},fireWith:function(context,args){return locked||(args=[context,(args=args||[]).slice?args.slice():args],queue.push(args),firing||fire()),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},catch:function(fn){return promise.then(null,fn)},pipe:function(){var fns=arguments;return jQuery.Deferred((function(newDefer){jQuery.each(tuples,(function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]]((function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject):newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)}))})),fns=null})).promise()},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(!(depth<maxDepth)){if((returned=handler.apply(that,args))===deferred.promise()){ throw new TypeError("Thenable self-resolution"); }then=returned&&("object"==typeof returned||"function"==typeof returned)&&returned.then,jQuery.isFunction(then)?special?then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special)):(maxDepth++,then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))):(handler!==Identity&&(that=void 0,args=[returned]),(special||deferred.resolveWith)(that,args))}},process=special?mightThrow:function(){try{mightThrow()}catch(e){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(e,process.stackTrace),depth+1>=maxDepth&&(handler!==Thrower&&(that=void 0,args=[e]),deferred.rejectWith(that,args))}};depth?process():(jQuery.Deferred.getStackHook&&(process.stackTrace=jQuery.Deferred.getStackHook()),window.setTimeout(process))}}return jQuery.Deferred((function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith)),tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity)),tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower))})).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return jQuery.each(tuples,(function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add,stateString&&list.add((function(){state=stateString}),tuples[3-i][2].disable,tuples[0][2].lock),list.add(tuple[3].fire),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?void 0:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith})),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this,resolveValues[i]=arguments.length>1?slice.call(arguments):value,--remaining||master.resolveWith(resolveContexts,resolveValues)}};if(remaining<=1&&(adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject,!remaining),"pending"===master.state()||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then))){ return master.then(); }for(;i--;){ adoptValue(resolveValues[i],updateFunc(i),master.reject); }return master.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){window.console&&window.console.warn&&error&&rerrorNames.test(error.name)&&window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack)},jQuery.readyException=function(error){window.setTimeout((function(){throw error}))};var readyList=jQuery.Deferred();function completed(){document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed),jQuery.ready()}jQuery.fn.ready=function(fn){return readyList.then(fn).catch((function(error){jQuery.readyException(error)})),this},jQuery.extend({isReady:!1,readyWait:1,ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||readyList.resolveWith(document,[jQuery]))}}),jQuery.ready.then=readyList.then,"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed));var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){ for(i in chainable=!0,key){ access(elems,fn,i,key[i],!0,emptyGet,raw); } }else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn)){ for(;i<len;i++){ fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key))); } }return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet},acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(owner){var value=owner[this.expando];return value||(value={},acceptData(owner)&&(owner.nodeType?owner[this.expando]=value:Object.defineProperty(owner,this.expando,{value:value,configurable:!0}))),value},set:function(owner,data,value){var prop,cache=this.cache(owner);if("string"==typeof data){ cache[jQuery.camelCase(data)]=value; }else { for(prop in data){ cache[jQuery.camelCase(prop)]=data[prop]; } }return cache},get:function(owner,key){return void 0===key?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)]},access:function(owner,key,value){return void 0===key||key&&"string"==typeof key&&void 0===value?this.get(owner,key):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,cache=owner[this.expando];if(void 0!==cache){if(void 0!==key){i=(key=Array.isArray(key)?key.map(jQuery.camelCase):(key=jQuery.camelCase(key))in cache?[key]:key.match(rnothtmlwhite)||[]).length;for(;i--;){ delete cache[key[i]] }}(void 0===key||jQuery.isEmptyObject(cache))&&(owner.nodeType?owner[this.expando]=void 0:delete owner[this.expando])}},hasData:function(owner){var cache=owner[this.expando];return void 0!==cache&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data,dataUser=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType){ if(name="data-"+key.replace(rmultiDash,"-$&").toLowerCase(),"string"==typeof(data=elem.getAttribute(name))){try{data=(function(data){return"true"===data||"false"!==data&&("null"===data?null:data===+data+""?+data:rbrace.test(data)?JSON.parse(data):data)})(data)}catch(e){}dataUser.set(elem,key,data)}else { data=void 0; } }return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=dataUser.get(elem),1===elem.nodeType&&!dataPriv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;){ attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])); }dataPriv.set(elem,"hasDataAttrs",!0)}return data}return"object"==typeof key?this.each((function(){dataUser.set(this,key)})):access(this,(function(value){var data;if(elem&&void 0===value){ return void 0!==(data=dataUser.get(elem,key))?data:void 0!==(data=dataAttr(elem,key))?data:void 0; }this.each((function(){dataUser.set(this,key,value)}))}),null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each((function(){dataUser.remove(this,key)}))}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem){ return type=(type||"fx")+"queue",queue=dataPriv.get(elem,type),data&&(!queue||Array.isArray(data)?queue=dataPriv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[] }},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,(function(){jQuery.dequeue(elem,type)}),hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add((function(){dataPriv.remove(elem,[type+"queue",key])}))})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each((function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)}))},dequeue:function(type){return this.each((function(){jQuery.dequeue(this,type)}))},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;){ (tmp=dataPriv.get(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve)); }return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"],isHiddenWithinTree=function(elem,el){return"none"===(elem=el||elem).style.display||""===elem.style.display&&jQuery.contains(elem.ownerDocument,elem)&&"none"===jQuery.css(elem,"display")},swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){ old[name]=elem.style[name],elem.style[name]=options[name]; }for(name in ret=callback.apply(elem,args||[]),options){ elem.style[name]=old[name]; }return ret};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||"px"!==unit&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3],valueParts=valueParts||[],initialInUnit=+initial||1;do{initialInUnit/=scale=scale||".5",jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&1!==scale&&--maxIterations)}return valueParts&&(initialInUnit=+initialInUnit||+initial||0,adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2],tween&&(tween.unit=unit,tween.start=initialInUnit,tween.end=adjusted)),adjusted}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];return display||(temp=doc.body.appendChild(doc.createElement(nodeName)),display=jQuery.css(temp,"display"),temp.parentNode.removeChild(temp),"none"===display&&(display="block"),defaultDisplayMap[nodeName]=display,display)}function showHide(elements,show){for(var display,elem,values=[],index=0,length=elements.length;index<length;index++){ (elem=elements[index]).style&&(display=elem.style.display,show?("none"===display&&(values[index]=dataPriv.get(elem,"display")||null,values[index]||(elem.style.display="")),""===elem.style.display&&isHiddenWithinTree(elem)&&(values[index]=getDefaultDisplay(elem))):"none"!==display&&(values[index]="none",dataPriv.set(elem,"display",display))); }for(index=0;index<length;index++){ null!=values[index]&&(elements[index].style.display=values[index]); }return elements}jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each((function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()}))}});var rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,rscriptType=/^$|\/(?:java|ecma)script/i,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function getAll(context,tag){var ret;return ret=void 0!==context.getElementsByTagName?context.getElementsByTagName(tag||"*"):void 0!==context.querySelectorAll?context.querySelectorAll(tag||"*"):[],void 0===tag||tag&&nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++){ dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval")) }}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var div,input,rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;i<l;i++){ if((elem=elems[i])||0===elem){ if("object"===jQuery.type(elem)){ jQuery.merge(nodes,elem.nodeType?[elem]:elem); }else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2],j=wrap[0];j--;){ tmp=tmp.lastChild; }jQuery.merge(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}else { nodes.push(context.createTextNode(elem)); } } }for(fragment.textContent="",i=0;elem=nodes[i++];){ if(selection&&jQuery.inArray(elem,selection)>-1){ ignored&&ignored.push(elem); }else if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts){ for(j=0;elem=tmp[j++];){ rscriptType.test(elem.type||"")&&scripts.push(elem); } } }return fragment}div=document.createDocumentFragment().appendChild(document.createElement("div")),(input=document.createElement("input")).setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue;var documentElement=document.documentElement,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types){ on(elem,type,selector,data,types[type],one); }return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn){ fn=returnFalse; }else if(!fn){ return elem; }return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each((function(){jQuery.event.add(this,types,fn,data,selector)}))}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(elemData){ for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),selector&&jQuery.find.matchesSelector(documentElement,selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0!==jQuery&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),t=(types=(types||"").match(rnothtmlwhite)||[""]).length;t--;){ type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||elem.addEventListener&&elem.addEventListener(type,eventHandle)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0) } }},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnothtmlwhite)||[""]).length;t--;){ if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;){ handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj)); }origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else { for(type in events){ jQuery.event.remove(elem,type+types[t],handler,selector,!0); } } }jQuery.isEmptyObject(events)&&dataPriv.remove(elem,"handle events")}},dispatch:function(nativeEvent){
var arguments$1 = arguments;
var i,j,ret,matched,handleObj,handlerQueue,event=jQuery.event.fix(nativeEvent),args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};for(args[0]=event,i=1;i<arguments.length;i++){ args[i]=arguments$1[i]; }if(event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();){ for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();){ event.rnamespace&&!event.rnamespace.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation())); } }return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){
var this$1 = this;
var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!("click"===event.type&&event.button>=1)){ for(;cur!==this;cur=cur.parentNode||this){ if(1===cur.nodeType&&("click"!==event.type||!0!==cur.disabled)){for(matchedHandlers=[],matchedSelectors={},i=0;i<delegateCount;i++){ void 0===matchedSelectors[sel=(handleObj=handlers[i]).selector+" "]&&(matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this$1).index(cur)>-1:jQuery.find(sel,this$1,null,[cur]).length),matchedSelectors[sel]&&matchedHandlers.push(handleObj); }matchedHandlers.length&&handlerQueue.push({elem:cur,handlers:matchedHandlers})} } }return cur=this,delegateCount<handlers.length&&handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)}),handlerQueue},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:!0,configurable:!0,get:jQuery.isFunction(hook)?function(){if(this.originalEvent){ return hook(this.originalEvent) }}:function(){if(this.originalEvent){ return this.originalEvent[name] }},set:function(value){Object.defineProperty(this,name,{enumerable:!0,configurable:!0,writable:!0,value:value})}})},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){ return this.focus(),!1 }},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){ return this.blur(),!1 }},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&nodeName(this,"input")){ return this.click(),!1 }},_default:function(event){return nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){ return new jQuery.Event(src,props); }src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse,this.target=src.target&&3===src.target.nodeType?src.target.parentNode:src.target,this.currentTarget=src.currentTarget,this.relatedTarget=src.relatedTarget):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(event){var button=event.button;return null==event.which&&rkeyEvent.test(event.type)?null!=event.charCode?event.charCode:event.keyCode:!event.which&&void 0!==button&&rmouseEvent.test(event.type)?1&button?1:2&button?3:4&button?2:0:event.which}},jQuery.event.addProp),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}})),jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){
var this$1 = this;
var handleObj,type;if(types&&types.preventDefault&&types.handleObj){ return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this; }if("object"==typeof types){for(type in types){ this$1.off(type,selector,types[type]); }return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each((function(){jQuery.event.remove(this,types,fn,selector)}))}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return nodeName(elem,"table")&&nodeName(11!==content.nodeType?content:content.firstChild,"tr")&&jQuery(">tbody",elem)[0]||elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(dataPriv.hasData(src)&&(pdataOld=dataPriv.access(src),pdataCur=dataPriv.set(dest,pdataOld),events=pdataOld.events)){ for(type in delete pdataCur.handle,pdataCur.events={},events){ for(i=0,l=events[type].length;i<l;i++){ jQuery.event.add(dest,type,events[type][i]); } } }dataUser.hasData(src)&&(udataOld=dataUser.access(src),udataCur=jQuery.extend({},udataOld),dataUser.set(dest,udataCur))}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value)){ return collection.each((function(index){var self=collection.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),domManip(self,args,callback,ignored)})); }if(l&&(first=(fragment=buildFragment(args,collection[0].ownerDocument,!1,collection,ignored)).firstChild,1===fragment.childNodes.length&&(fragment=first),first||ignored)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++){ node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(collection[i],node,i); }if(hasScripts){ for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++){ node=scripts[i],rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):DOMEval(node.textContent.replace(rcleanScript,""),doc)) } }}return collection}function remove(elem,selector,keepData){for(var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;null!=(node=nodes[i]);i++){ keepData||1!==node.nodeType||jQuery.cleanData(getAll(node)),node.parentNode&&(keepData&&jQuery.contains(node.ownerDocument,node)&&setGlobalEval(getAll(node,"script")),node.parentNode.removeChild(node)); }return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,src,dest,nodeName,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem))){ for(destElements=getAll(clone),i=0,l=(srcElements=getAll(elem)).length;i<l;i++){ src=srcElements[i],dest=destElements[i],void 0,"input"===(nodeName=dest.nodeName.toLowerCase())&&rcheckableType.test(src.type)?dest.checked=src.checked:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue); } }if(dataAndEvents){ if(deepDataAndEvents){ for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;i<l;i++){ cloneCopyEvent(srcElements[i],destElements[i]); } }else { cloneCopyEvent(elem,clone); } }return(destElements=getAll(clone,"script")).length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},cleanData:function(elems){for(var data,elem,type,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++){ if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){ for(type in data.events){ special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle); } }elem[dataPriv.expando]=void 0}elem[dataUser.expando]&&(elem[dataUser.expando]=void 0)} }}}),jQuery.fn.extend({detach:function(selector){return remove(this,selector,!0)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,(function(value){return void 0===value?jQuery.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=value)}))}),null,value,arguments.length)},append:function(){return domManip(this,arguments,(function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)}))},prepend:function(){return domManip(this,arguments,(function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}}))},before:function(){return domManip(this,arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)}))},after:function(){return domManip(this,arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)}))},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){ 1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent=""); }return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map((function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)}))},html:function(value){return access(this,(function(value){
var this$1 = this;
var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType){ return elem.innerHTML; }if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){ 1===(elem=this$1[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value); }elem=0}catch(e){}}elem&&this.empty().append(value)}),null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,(function(elem){var parent=this.parentNode;jQuery.inArray(this,ignored)<0&&(jQuery.cleanData(getAll(this)),parent&&parent.replaceChild(elem,this))}),ignored)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(name,original){jQuery.fn[name]=function(selector){
var this$1 = this;
for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;i<=last;i++){ elems=i===last?this$1:this$1.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get()); }return this.pushStack(ret)}}));var rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){var view=elem.ownerDocument.defaultView;return view&&view.opener||(view=window),view.getComputedStyle(elem)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return(computed=computed||getStyles(elem))&&(""!==(ret=computed.getPropertyValue(name)||computed[name])||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(!conditionFn()){ return(this.get=hookFn).apply(this,arguments); }delete this.get}}}!(function(){function computeStyleTests(){if(div){div.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",div.innerHTML="",documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal="1%"!==divStyle.top,reliableMarginLeftVal="2px"===divStyle.marginLeft,boxSizingReliableVal="4px"===divStyle.width,div.style.marginRight="50%",pixelMarginRightVal="4px"===divStyle.marginRight,documentElement.removeChild(container),div=null}}var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",container.appendChild(div),jQuery.extend(support,{pixelPosition:function(){return computeStyleTests(),pixelPositionVal},boxSizingReliable:function(){return computeStyleTests(),boxSizingReliableVal},pixelMarginRight:function(){return computeStyleTests(),pixelMarginRightVal},reliableMarginLeft:function(){return computeStyleTests(),reliableMarginLeftVal}}))})();var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rcustomProp=/^--/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function finalPropName(name){var ret=jQuery.cssProps[name];return ret||(ret=jQuery.cssProps[name]=(function(name){if(name in emptyStyle){ return name; }for(var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;i--;){ if((name=cssPrefixes[i]+capName)in emptyStyle){ return name } }})(name)||name),ret}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i,val=0;for(i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0;i<4;i+=2){ "margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))); }return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox,styles=getStyles(elem),val=curCSS(elem,name,styles),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);return rnumnonpx.test(val)?val:(valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),"auto"===val&&(val=elem["offset"+name[0].toUpperCase()+name.slice(1)]),(val=parseFloat(val)||0)+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px")}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),isCustomProp=rcustomProp.test(name),style=elem.style;if(isCustomProp||(name=finalPropName(origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value){ return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name]; }"string"===(type=typeof value)&&(ret=rcssNum.exec(value))&&ret[1]&&(value=adjustCSS(elem,name,ret),type="number"),null!=value&&value==value&&("number"===type&&(value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(isCustomProp?style.setProperty(name,value):style[name]=value))}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return rcustomProp.test(name)||(name=finalPropName(origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||isFinite(num)?num||0:val):val}}),jQuery.each(["height","width"],(function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){ return!rdisplayswap.test(jQuery.css(elem,"display"))||elem.getClientRects().length&&elem.getBoundingClientRect().width?getWidthOrHeight(elem,name,extra):swap(elem,cssShow,(function(){return getWidthOrHeight(elem,name,extra)})) }},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles);return subtract&&(matches=rcssNum.exec(value))&&"px"!==(matches[3]||"px")&&(elem.style[name]=value,value=jQuery.css(elem,name)),setPositiveNumber(0,value,subtract)}}})),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,(function(elem,computed){if(computed){ return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},(function(){return elem.getBoundingClientRect().left})))+"px" }})),jQuery.each({margin:"",padding:"",border:"Width"},(function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++){ expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]; }return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)})),jQuery.fn.extend({css:function(name,value){return access(this,(function(elem,name,value){var styles,len,map={},i=0;if(Array.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++){ map[name[i]]=jQuery.css(elem,name[i],!1,styles); }return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)}),name,value,arguments.length>1)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||jQuery.easing._default,this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return 1!==tween.elem.nodeType||null!=tween.elem[tween.prop]&&null==tween.elem.style[tween.prop]?tween.elem[tween.prop]:(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):1!==tween.elem.nodeType||null==tween.elem.style[jQuery.cssProps[tween.prop]]&&!jQuery.cssHooks[tween.prop]?tween.elem[tween.prop]=tween.now:jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,inProgress,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function schedule(){inProgress&&(!1===document.hidden&&window.requestAnimationFrame?window.requestAnimationFrame(schedule):window.setTimeout(schedule,jQuery.fx.interval),jQuery.fx.tick())}function createFxNow(){return window.setTimeout((function(){fxNow=void 0})),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth){ attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type; }return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;index<length;index++){ if(tween=collection[index].call(animation,prop,value)){ return tween } }}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(stopped){ return!1; }for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++){ animation.tweens[index].run(percent); }return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(length||deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){ return this; }for(stopped=!0;index<length;index++){ animation.tweens[index].run(1); }return gotoEnd?(deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation,gotoEnd])):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!(function(props,specialEasing){var index,name,easing,value,hooks;for(index in props){ if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],Array.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks){ for(index in value=hooks.expand(value),delete props[name],value){ index in props||(props[index]=value[index],specialEasing[index]=easing); } }else { specialEasing[name]=easing } }})(props,animation.opts.specialEasing);index<length;index++){ if(result=Animation.prefilters[index].call(animation,elem,props,animation.opts)){ return jQuery.isFunction(result.stop)&&(jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)),result; } }return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);return adjustCSS(tween.elem,prop,rcssNum.exec(value),tween),tween}]},tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.match(rnothtmlwhite);for(var prop,index=0,length=props.length;index<length;index++){ prop=props[index],Animation.tweeners[prop]=Animation.tweeners[prop]||[],Animation.tweeners[prop].unshift(callback) }},prefilters:[function(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");for(prop in opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always((function(){anim.always((function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()}))}))),props){ if(value=props[prop],rfxtypes.test(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop]){ continue; }hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)} }if((propTween=!jQuery.isEmptyObject(props))||!jQuery.isEmptyObject(orig)){ for(prop in isBox&&1===elem.nodeType&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],null==(restoreDisplay=dataShow&&dataShow.display)&&(restoreDisplay=dataPriv.get(elem,"display")),"none"===(display=jQuery.css(elem,"display"))&&(restoreDisplay?display=restoreDisplay:(showHide([elem],!0),restoreDisplay=elem.style.display||restoreDisplay,display=jQuery.css(elem,"display"),showHide([elem]))),("inline"===display||"inline-block"===display&&null!=restoreDisplay)&&"none"===jQuery.css(elem,"float")&&(propTween||(anim.done((function(){style.display=restoreDisplay})),null==restoreDisplay&&(display=style.display,restoreDisplay="none"===display?"":display)),style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always((function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}))),propTween=!1,orig){ propTween||(dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay}),toggle&&(dataShow.hidden=!hidden),hidden&&showHide([elem],!0),anim.done((function(){for(prop in hidden||showHide([elem]),dataPriv.remove(elem,"fxshow"),orig){ jQuery.style(elem,prop,orig[prop]) }}))),propTween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=propTween.start,hidden&&(propTween.end=propTween.start,propTween.start=0)) } }}],prefilter:function(callback,prepend){prepend?Animation.prefilters.unshift(callback):Animation.prefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return jQuery.fx.off?opt.duration=0:"number"!=typeof opt.duration&&(opt.duration in jQuery.fx.speeds?opt.duration=jQuery.fx.speeds[opt.duration]:opt.duration=jQuery.fx.speeds._default),null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||dataPriv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each((function(){
var this$1 = this;
var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){ data[index]&&data[index].stop&&stopQueue(data[index]); }else { for(index in data){ data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]); } }for(index=timers.length;index--;){ timers[index].elem!==this$1||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1)); }!dequeue&&gotoEnd||jQuery.dequeue(this,type)}))},finish:function(type){return!1!==type&&(type=type||"fx"),this.each((function(){
var this$1 = this;
var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;){ timers[index].elem===this$1&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1)); }for(index=0;index<length;index++){ queue[index]&&queue[index].finish&&queue[index].finish.call(this$1); }delete data.finish}))}}),jQuery.each(["toggle","show","hide"],(function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}})),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();i<timers.length;i++){ (timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1); }timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){inProgress||(inProgress=!0,schedule())},jQuery.fx.stop=function(){inProgress=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,(function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}}))},(function(){var input=document.createElement("input"),opt=document.createElement("select").appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,(input=document.createElement("input")).value="t",input.type="radio",support.radioValue="t"===input.value})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each((function(){jQuery.removeAttr(this,name)}))}}),jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType){ return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:void 0)),void 0!==value?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:null==(ret=jQuery.find.attr(elem,name))?void 0:ret) }},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&1===elem.nodeType){ for(;name=attrNames[i++];){ elem.removeAttribute(name) } }}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();return isXML||(handle=attrHandle[lowercaseName],attrHandle[lowercaseName]=ret,ret=null!=getter(elem,name,isXML)?lowercaseName:null,attrHandle[lowercaseName]=handle),ret}}));var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;function stripAndCollapse(value){return(value.match(rnothtmlwhite)||[]).join(" ")}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each((function(){delete this[jQuery.propFix[name]||name]}))}}),jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType){ return 1===nType&&jQuery.isXMLDoc(elem)||(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name] }},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null},set:function(elem){var parent=elem.parentNode;parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){ return this.each((function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})); }if("string"==typeof value&&value){ for(classes=value.match(rnothtmlwhite)||[];elem=this[i++];){ if(curValue=getClass(elem),cur=1===elem.nodeType&&" "+stripAndCollapse(curValue)+" "){for(j=0;clazz=classes[j++];){ cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" "); }curValue!==(finalValue=stripAndCollapse(cur))&&elem.setAttribute("class",finalValue)} } }return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){ return this.each((function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})); }if(!arguments.length){ return this.attr("class",""); }if("string"==typeof value&&value){ for(classes=value.match(rnothtmlwhite)||[];elem=this[i++];){ if(curValue=getClass(elem),cur=1===elem.nodeType&&" "+stripAndCollapse(curValue)+" "){for(j=0;clazz=classes[j++];){ for(;cur.indexOf(" "+clazz+" ")>-1;){ cur=cur.replace(" "+clazz+" "," "); } }curValue!==(finalValue=stripAndCollapse(cur))&&elem.setAttribute("class",finalValue)} } }return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each((function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})):this.each((function(){var className,i,self,classNames;if("string"===type){ for(i=0,self=jQuery(this),classNames=value.match(rnothtmlwhite)||[];className=classNames[i++];){ self.hasClass(className)?self.removeClass(className):self.addClass(className); } }else { void 0!==value&&"boolean"!==type||((className=getClass(this))&&dataPriv.set(this,"__className__",className),this.setAttribute&&this.setAttribute("class",className||!1===value?"":dataPriv.get(this,"__className__")||"")) }}))},hasClass:function(selector){var className,elem,i=0;for(className=" "+selector+" ";elem=this[i++];){ if(1===elem.nodeType&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){ return!0; } }return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each((function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":Array.isArray(val)&&(val=jQuery.map(val,(function(value){return null==value?"":value+""}))),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))}))):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:stripAndCollapse(jQuery.text(elem))}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type,values=one?null:[],max=one?index+1:options.length;for(i=index<0?max:one?index:0;i<max;i++){ if(((option=options[i]).selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one){ return value; }values.push(value)} }return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;){ ((option=options[i]).selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1)&&(optionSet=!0); }return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(elem,value){if(Array.isArray(value)){ return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1 }}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}));var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>-1&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode){ eventPath.push(cur),tmp=cur; }tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();){ event.type=i>1?bubbleType:special.bindType||type,(handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault()); }return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&!1!==special._default.apply(eventPath.pop(),data)||!acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&((tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0});jQuery.event.trigger(e,null,elem)}}),jQuery.fn.extend({trigger:function(type,data){return this.each((function(){jQuery.event.trigger(type,data,this)}))},triggerHandler:function(type,data){var elem=this[0];if(elem){ return jQuery.event.trigger(type,data,elem,!0) }}}),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}})),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),support.focusin="onfocusin"in window,support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},(function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;attaches?dataPriv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),dataPriv.remove(doc,fix))}}}));var location=window.location,nonce=jQuery.now(),rquery=/\?/;jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data){ return null; }try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=void 0}return xml&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(Array.isArray(obj)){ jQuery.each(obj,(function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v&&null!=v?i:"")+"]",v,traditional,add)})); }else if(traditional||"object"!==jQuery.type(obj)){ add(prefix,obj); }else { for(name in obj){ buildParams(prefix+"["+name+"]",obj[name],traditional,add) } }}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(null==value?"":value)};if(Array.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){ jQuery.each(a,(function(){add(this.name,this.value)})); }else { for(prefix in a){ buildParams(prefix,a[prefix],traditional,add); } }return s.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this})).filter((function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))})).map((function(i,elem){var val=jQuery(this).val();return null==val?null:Array.isArray(val)?jQuery.map(val,(function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})):{name:elem.name,value:val.replace(rCRLF,"\r\n")}})).get()}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(jQuery.isFunction(func)){ for(;dataType=dataTypes[i++];){ "+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func) } }}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],(function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)})),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){ void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]); }return deep&&jQuery.extend(!0,target,deep),target}originAnchor.href=location.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(location.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){ for(responseHeaders={};match=rheaders.exec(responseHeadersString);){ responseHeaders[match[1].toLowerCase()]=match[2]; } }match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return completed?responseHeadersString:null},setRequestHeader:function(name,value){return null==completed&&(name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return null==completed&&(s.mimeType=type),this},statusCode:function(map){var code;if(map){ if(completed){ jqXHR.always(map[jqXHR.status]); }else { for(code in map){ statusCode[code]=[statusCode[code],map[code]]; } } }return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR),s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""],null==s.crossDomain){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url,urlAnchor.href=urlAnchor.href,s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),completed){ return jqXHR; }for(i in(fireGlobals=jQuery.event&&s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url.replace(rhash,""),s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(r20,"+")):(uncached=s.url.slice(cacheURL.length),s.data&&(cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(cacheURL=cacheURL.replace(rantiCache,"$1"),uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce+++uncached),s.url=cacheURL+uncached),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers){ jqXHR.setRequestHeader(i,s.headers[i]); }if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||completed)){ return jqXHR.abort(); }if(strAbort="abort",completeDeferred.add(s.complete),jqXHR.done(s.success),jqXHR.fail(s.error),transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){if(jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),completed){ return jqXHR; }s.async&&s.timeout>0&&(timeoutTimer=window.setTimeout((function(){jqXHR.abort("timeout")}),s.timeout));try{completed=!1,transport.send(requestHeaders,done)}catch(e){if(completed){ throw e; }done(-1,e)}}else { done(-1,"No Transport"); }function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;completed||(completed=!0,timeoutTimer&&window.clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=(function(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];){ dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")); }if(ct){ for(type in contents){ if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break} } }if(dataTypes[0]in responses){ finalDataType=dataTypes[0]; }else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType){ return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType] }})(s,jqXHR,responses)),response=(function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){ for(conv in s.converters){ converters[conv.toLowerCase()]=s.converters[conv]; } }for(current=dataTypes.shift();current;){ if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift()){ if("*"===current){ current=prev; }else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current])){ for(conv2 in converters){ if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break} } }if(!0!==conv){ if(conv&&s.throws){ response=conv(response); }else { try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}} } }} } }return{state:"success",data:response}})(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],(function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}})),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;return this[0]&&(jQuery.isFunction(html)&&(html=html.call(this[0])),wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map((function(){for(var elem=this;elem.firstElementChild;){ elem=elem.firstElementChild; }return elem})).append(this)),this},wrapInner:function(html){return jQuery.isFunction(html)?this.each((function(i){jQuery(this).wrapInner(html.call(this,i))})):this.each((function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)}))},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each((function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)}))},unwrap:function(selector){return this.parent(selector).not("body").each((function(){jQuery(this).replaceWith(this.childNodes)})),this}}),jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)},jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport((function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){ return{send:function(headers,complete){var i,xhr=options.xhr();if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields){ for(i in options.xhrFields){ xhr[i]=options.xhrFields[i]; } }for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers){ xhr.setRequestHeader(i,headers[i]); }callback=function(type){return function(){callback&&(callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null,"abort"===type?xhr.abort():"error"===type?"number"!=typeof xhr.status?complete(0,"error"):complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"text"!==(xhr.responseType||"text")||"string"!=typeof xhr.responseText?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders()))}},xhr.onload=callback(),errorCallback=xhr.onerror=callback("error"),void 0!==xhr.onabort?xhr.onabort=errorCallback:xhr.onreadystatechange=function(){4===xhr.readyState&&window.setTimeout((function(){callback&&errorCallback()}))},callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){ throw e }}},abort:function(){callback&&callback()}} }})),jQuery.ajaxPrefilter((function(s){s.crossDomain&&(s.contents.script=!1)})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")})),jQuery.ajaxTransport("script",(function(s){var script,callback;if(s.crossDomain){ return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}} }}));var body,oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",(function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0]){ return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always((function(){void 0===overwritten?jQuery(window).removeProp(callbackName):window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0})),"script" }})),support.createHTMLDocument=((body=document.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===body.childNodes.length),jQuery.parseHTML=function(data,context,keepScripts){return"string"!=typeof data?[]:("boolean"==typeof context&&(keepScripts=context,context=!1),context||(support.createHTMLDocument?((base=(context=document.implementation.createHTMLDocument("")).createElement("base")).href=document.location.href,context.head.appendChild(base)):context=document),parsed=rsingleTag.exec(data),scripts=!keepScripts&&[],parsed?[context.createElement(parsed[1])]:(parsed=buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes)));var base,parsed,scripts},jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");return off>-1&&(selector=stripAndCollapse(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done((function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)})).always(callback&&function(jqXHR,status){self.each((function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])}))}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}})),jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,(function(fn){return elem===fn.elem})).length},jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1?(curTop=(curPosition=curElem.position()).top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,jQuery.extend({},curOffset))),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length){ return void 0===options?this:this.each((function(i){jQuery.offset.setOffset(this,options,i)})); }var doc,docElem,rect,win,elem=this[0];return elem?elem.getClientRects().length?(rect=elem.getBoundingClientRect(),docElem=(doc=elem.ownerDocument).documentElement,win=doc.defaultView,{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset={top:parentOffset.top+jQuery.css(offsetParent[0],"borderTopWidth",!0),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",!0)}),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var offsetParent=this.offsetParent;offsetParent&&"static"===jQuery.css(offsetParent,"position");){ offsetParent=offsetParent.offsetParent; }return offsetParent||documentElement}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,(function(elem,method,val){var win;if(jQuery.isWindow(elem)?win=elem:9===elem.nodeType&&(win=elem.defaultView),void 0===val){ return win?win[prop]:elem[method]; }win?win.scrollTo(top?win.pageXOffset:val,top?val:win.pageYOffset):elem[method]=val}),method,val,arguments.length)}})),jQuery.each(["top","left"],(function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,(function(elem,computed){if(computed){ return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed }}))})),jQuery.each({Height:"height",Width:"width"},(function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},(function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,(function(elem,type,value){var doc;return jQuery.isWindow(elem)?0===funcName.indexOf("outer")?elem["inner"+name]:elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)}),type,chainable?margin:void 0,chainable)}}))})),jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}}),jQuery.holdReady=function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},jQuery.isArray=Array.isArray,jQuery.parseJSON=JSON.parse,jQuery.nodeName=nodeName,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return jQuery}));var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery}))}),{}],2:[(function(require,module,exports){var jquery;jquery=require("jquery"),window.jQuery=window.$=jquery}),{jquery:1}]},{},[2]),(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a){ return a(o,!0); }if(i){ return i(o,!0); }var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++){ s(r[o]); }return s})({1:[(function(require,module,exports){(function(global){!(function(global,factory){"object"==typeof exports&&void 0!==module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(function(){var current=global.Ractive,exports=factory();global.Ractive=exports,exports.noConflict=function(){return global.Ractive=current,exports}})()})(this,(function(){"use strict";function hasOwn(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function toPairs(obj){void 0===obj&&(obj={});var pairs=[];for(var key in obj){ hasOwn(obj,key)&&pairs.push([key,obj[key]]); }return pairs}Object.assign||(Object.assign=function(target){
var arguments$1 = arguments;
for(var sources=[],len=arguments.length-1;len-- >0;){ sources[len]=arguments$1[len+1]; }if(null==target){ throw new TypeError("Cannot convert undefined or null to object"); }for(var to=Object(target),sourcesLength=sources.length,index=0;index<sourcesLength;index++){var nextSource=sources[index];for(var nextKey in nextSource){ Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey]) }}return to});var obj=Object,assign=obj.assign,create=obj.create,defineProperty=obj.defineProperty,defineProperties=obj.defineProperties,keys=obj.keys,toString=Object.prototype.toString,isArray=Array.isArray;function isEqual(a,b){return null===a&&null===b||!isObjectType(a)&&!isObjectType(b)&&a===b}function isNumeric(thing){return!isNaN(parseFloat(thing))&&isFinite(thing)}function isObject(thing){return thing&&"[object Object]"===toString.call(thing)}function isObjectLike(thing){return!(!thing||!isObjectType(thing)&&!isFunction(thing))}function isObjectType(thing){return"object"==typeof thing}function isFunction(thing){return"function"==typeof thing}function isString(thing){return"string"==typeof thing}function isNumber(thing){return"number"==typeof thing}if(Array.prototype.find||defineProperty(Array.prototype,"find",{value:function(callback,thisArg){if(null===this||void 0===this){ throw new TypeError("Array.prototype.find called on null or undefined"); }if(!isFunction(callback)){ throw new TypeError(callback+" is not a function"); }for(var array=Object(this),arrayLength=array.length>>>0,index=0;index<arrayLength;index++){ if(hasOwn(array,index)&&callback.call(thisArg,array[index],index,array)){ return array[index] } }},configurable:!0,writable:!0}),"undefined"!=typeof window&&window.Node&&window.Node.prototype&&!window.Node.prototype.contains&&(Node.prototype.contains=function(node){
var this$1 = this;
if(!node){ throw new TypeError("node required"); }do{if(this$1===node){ return!0 }}while(node=node&&node.parentNode);return!1}),"undefined"!=typeof window&&window.performance&&!window.performance.now){window.performance=window.performance||{};var nowOffset=Date.now();window.performance.now=function(){return Date.now()-nowOffset}}if("undefined"!=typeof window&&!window.Promise){var PENDING={},FULFILLED={},REJECTED={},Promise$1=window.Promise=function(callback){var dispatchHandlers,fulfilledHandlers=[],rejectedHandlers=[],state=PENDING,makeResolver=function(newState){return function(value){state===PENDING&&(dispatchHandlers=makeDispatcher((state=newState)===FULFILLED?fulfilledHandlers:rejectedHandlers,value),wait(dispatchHandlers))}},fulfill=makeResolver(FULFILLED),reject=makeResolver(REJECTED);try{callback(fulfill,reject)}catch(err){reject(err)}return{then:function(onFulfilled,onRejected){var promise2=new Promise$1(function(fulfill,reject){var processResolutionHandler=function(handler,handlers,forward){isFunction(handler)?handlers.push((function(p1result){try{resolve$1(promise2,handler(p1result),fulfill,reject)}catch(err){reject(err)}})):handlers.push(forward)};processResolutionHandler(onFulfilled,fulfilledHandlers,fulfill),processResolutionHandler(onRejected,rejectedHandlers,reject),state!==PENDING&&wait(dispatchHandlers)});return promise2},catch:function(onRejected){return this.then(null,onRejected)}}};Promise$1.all=function(promises){return new Promise$1(function(fulfil,reject){var pending,i,result=[];if(promises.length){var processPromise=function(promise,i){promise&&isFunction(promise.then)?promise.then((function(value){result[i]=value,--pending||fulfil(result)}),reject):(result[i]=promise,--pending||fulfil(result))};for(pending=i=promises.length;i--;){ processPromise(promises[i],i) }}else { fulfil(result) }})},Promise$1.resolve=function(value){return new Promise$1(function(fulfill){fulfill(value)})},Promise$1.reject=function(reason){return new Promise$1(function(fulfill,reject){reject(reason)})};var wait=function(callback){setTimeout(callback,0)},makeDispatcher=function(handlers,result){return function(){for(var handler=void 0;handler=handlers.shift();){ handler(result) }}},resolve$1=function(promise,x,fulfil,reject){var then;if(x===promise){ throw new TypeError("A promise's fulfillment handler cannot return the same promise"); }if(x instanceof Promise$1){ x.then(fulfil,reject); }else if(x&&(isObjectType(x)||isFunction(x))){try{then=x.then}catch(e){return void reject(e)}if(isFunction(then)){var called;try{then.call(x,(function(y){called||(called=!0,resolve$1(promise,y,fulfil,reject))}),(function(r){called||(called=!0,reject(r))}))}catch(e){if(!called){ return reject(e),void(called=!0) }}}else { fulfil(x) }}else { fulfil(x) }}}if(!("undefined"==typeof window||window.requestAnimationFrame&&window.cancelAnimationFrame)){var lastTime=0;window.requestAnimationFrame=function(callback){var currentTime=Date.now(),timeToNextCall=Math.max(0,16-(currentTime-lastTime)),id=window.setTimeout((function(){callback(currentTime+timeToNextCall)}),timeToNextCall);return lastTime=currentTime+timeToNextCall,id},window.cancelAnimationFrame=function(id){clearTimeout(id)}}var defaults={el:void 0,append:!1,delegate:!0,enhance:!1,template:null,allowExpressions:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,contextLines:0,data:create(null),helpers:create(null),computed:create(null),syncComputedChildren:!1,resolveInstanceMembers:!1,warnAboutAmbiguity:!1,adapt:[],isolated:!0,twoway:!0,lazy:!1,noIntro:!1,noOutro:!1,transitionsEnabled:!0,complete:void 0,nestedTransitions:!0,css:null,noCssTransform:!1},easing={linear:function(pos){return pos},easeIn:function(pos){return Math.pow(pos,3)},easeOut:function(pos){return Math.pow(pos-1,3)+1},easeInOut:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)}},win="undefined"!=typeof window?window:null,doc=win?document:null,isClient=!!doc,hasConsole="undefined"!=typeof console&&isFunction(console.warn)&&isFunction(console.warn.apply),svg=!!doc&&doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),vendors=["o","ms","moz","webkit"];function noop(){}var log,printWarning,welcome,alreadyWarned={};if(hasConsole){var welcomeIntro=["%cRactive.js %c0.10.5 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];welcome=function(){if(!1!==Ractive.WELCOME_MESSAGE){var message="WELCOME_MESSAGE"in Ractive?Ractive.WELCOME_MESSAGE:"You're running Ractive 0.10.5 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://ractive.js.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",hasGroup=!!console.groupCollapsed;hasGroup&&console.groupCollapsed.apply(console,welcomeIntro),console.log(message),hasGroup&&console.groupEnd(welcomeIntro),welcome=noop}else { welcome=noop }},printWarning=function(message,args){if(welcome(),isObjectType(args[args.length-1])){var name,node,options=args.pop(),ractive=options?options.ractive:null;if(ractive){ ractive.component&&(name=ractive.component.name)&&(message="<"+name+"> "+message),(node=options.node||ractive.fragment&&ractive.fragment.rendered&&ractive.find("*"))&&args.push(node) }}console.warn.apply(console,["%cRactive.js: %c"+message,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(args))},log=function(){console.log.apply(console,arguments)}}else { printWarning=log=welcome=noop; }function format(message,args){return message.replace(/%s/g,(function(){return args.shift()}))}function fatal(message){
var arguments$1 = arguments;
for(var args=[],len=arguments.length-1;len-- >0;){ args[len]=arguments$1[len+1]; }throw message=format(message,args),new Error(message)}function warn(message){
var arguments$1 = arguments;
for(var args=[],len=arguments.length-1;len-- >0;){ args[len]=arguments$1[len+1]; }message=format(message,args),printWarning(message,args)}function warnOnce(message){
var arguments$1 = arguments;
for(var args=[],len=arguments.length-1;len-- >0;){ args[len]=arguments$1[len+1]; }message=format(message,args),alreadyWarned[message]||(alreadyWarned[message]=!0,printWarning(message,args))}function warnIfDebug(){Ractive.DEBUG&&warn.apply(null,arguments)}function warnOnceIfDebug(){Ractive.DEBUG&&warnOnce.apply(null,arguments)}var badArguments="Bad arguments",noRegistryFunctionReturn='A function was specified for "%s" %s, but no %s was returned',missingPlugin=function(name,type){return'Missing "'+name+'" '+type+" plugin. You may need to download a plugin via http://ractive.js.org/integrations/#"+type+"s"};function findInViewHierarchy(registryName,ractive,name){var instance=findInstance(registryName,ractive,name);return instance?instance[registryName][name]:null}function findInstance(registryName,ractive,name){for(;ractive;){if(name in ractive[registryName]){ return ractive; }if(ractive.isolated){ return null; }ractive=ractive.parent}}function interpolate(from,to,ractive,type){if(from===to){ return null; }if(type){var interpol=findInViewHierarchy("interpolators",ractive,type);if(interpol){ return interpol(from,to)||null; }fatal(missingPlugin(type,"interpolator"))}return interpolators.number(from,to)||interpolators.array(from,to)||interpolators.object(from,to)||null}var interpolators={number:function(from,to){if(!isNumeric(from)||!isNumeric(to)){ return null; }var delta=(to=+to)-(from=+from);return delta?function(t){return from+t*delta}:function(){return from}},array:function(from,to){var len,i;if(!isArray(from)||!isArray(to)){ return null; }var intermediate=[],interpolators=[];for(i=len=Math.min(from.length,to.length);i--;){ interpolators[i]=interpolate(from[i],to[i]); }for(i=len;i<from.length;i+=1){ intermediate[i]=from[i]; }for(i=len;i<to.length;i+=1){ intermediate[i]=to[i]; }return function(t){for(var i=len;i--;){ intermediate[i]=interpolators[i](t); }return intermediate}},object:function(from,to){if(!isObject(from)||!isObject(to)){ return null; }var properties=[],intermediate={},interpolators={},loop=function(prop){hasOwn(from,prop)&&(hasOwn(to,prop)?(properties.push(prop),interpolators[prop]=interpolate(from[prop],to[prop])||function(){return to[prop]}):intermediate[prop]=from[prop])};for(var prop in from){ loop(prop); }for(var prop$1 in to){ hasOwn(to,prop$1)&&!hasOwn(from,prop$1)&&(intermediate[prop$1]=to[prop$1]); }var len=properties.length;return function(t){for(var i=len;i--;){var prop=properties[i];intermediate[prop]=interpolators[prop](t)}return intermediate}}},refPattern=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,splitPattern=/([^\\](?:\\\\)*)\./,escapeKeyPattern=/\\|\./g,unescapeKeyPattern=/((?:\\)+)\1|\\(\.)/g;function escapeKey(key){return isString(key)?key.replace(escapeKeyPattern,"\\$&"):key}function normalise(ref){return ref?ref.replace(refPattern,".$1"):""}function splitKeypath(keypath){var match,result=[];for(keypath=normalise(keypath);match=splitPattern.exec(keypath);){var index=match.index+match[1].length;result.push(keypath.substr(0,index)),keypath=keypath.substr(index+1)}return result.push(keypath),result}function unescapeKey(key){return isString(key)?key.replace(unescapeKeyPattern,"$1$2"):key}function addToArray(array,value){-1===array.indexOf(value)&&array.push(value)}function arrayContains(array,value){for(var i=0,c=array.length;i<c;i++){ if(array[i]==value){ return!0; } }return!1}function ensureArray(x){return isString(x)?[x]:void 0===x?[]:x}function lastItem(array){return array[array.length-1]}function removeFromArray(array,member){if(array){var index=array.indexOf(member);-1!==index&&array.splice(index,1)}}function combine(){
var arguments$1 = arguments;
for(var arrays=[],len=arguments.length;len--;){ arrays[len]=arguments$1[len]; }for(var res=arrays.concat.apply([],arrays),i=res.length;i--;){var idx=res.indexOf(res[i]);~idx&&idx<i&&res.splice(i,1)}return res}function toArray(arrayLike){for(var array=[],i=arrayLike.length;i--;){ array[i]=arrayLike[i]; }return array}function findMap(array,fn){for(var len=array.length,i=0;i<len;i++){var result=fn(array[i]);if(result){ return result }}}function buildNewIndices(one,two,comparator){var oldArray=one,newArray=two;comparator&&(oldArray=oldArray.map(comparator),newArray=newArray.map(comparator));var oldLength=oldArray.length,usedIndices={},firstUnusedIndex=0;return oldArray.map((function(item){var index,start=firstUnusedIndex;do{if(-1===(index=newArray.indexOf(item,start))){ return-1; }start=index+1}while(!0===usedIndices[index]&&start<oldLength);return index===firstUnusedIndex&&(firstUnusedIndex+=1),usedIndices[index]=!0,index}))}var fnBind=Function.prototype.bind;function bind(fn,context){if(!/this/.test(fn.toString())){ return fn; }var bound=fnBind.call(fn,context);for(var prop in fn){ bound[prop]=fn[prop]; }return bound}var shuffleTasks={early:[],mark:[]},registerQueue={early:[],mark:[]},noVirtual={virtual:!1},ModelBase=function(parent){this.deps=[],this.children=[],this.childByKey={},this.links=[],this.bindings=[],parent&&(this.parent=parent,this.root=parent.root)},ModelBase__proto__=ModelBase.prototype;function maybeBind(model,value,shouldBind){return shouldBind&&isFunction(value)&&model.parent&&model.parent.isRoot?(model.boundValue||(model.boundValue=bind(value._r_unbound||value,model.parent.ractive)),model.boundValue):value}function updateFromBindings(model){model.updateFromBindings(!0)}function fireShuffleTasks(stage){if(stage){var tasks=shuffleTasks[stage];shuffleTasks[stage]=[];for(var i=tasks.length;i--;){ tasks[i](); }var register=registerQueue[stage];for(registerQueue[stage]=[],i=register.length;i--;){ register[i].model.register(register[i].item) }}else { fireShuffleTasks("early"),fireShuffleTasks("mark") }}function shuffle(model,newIndices,link,unsafe){model.shuffling=!0;for(var i=newIndices.length;i--;){var idx=newIndices[i];i!==idx&&(i in model.childByKey&&model.childByKey[i].rebind(~idx?model.joinKey(idx):void 0,model.childByKey[i],!unsafe))}var upstream=model.source().length!==model.source().value.length;for(model.links.forEach((function(l){return l.shuffle(newIndices)})),link||fireShuffleTasks("early"),i=model.deps.length;i--;){ model.deps[i].shuffle&&model.deps[i].shuffle(newIndices); }model[link?"marked":"mark"](),link||fireShuffleTasks("mark"),upstream&&model.notifyUpstream(),model.shuffling=!1}ModelBase__proto__.addShuffleTask=function(task,stage){void 0===stage&&(stage="early"),shuffleTasks[stage].push(task)},ModelBase__proto__.addShuffleRegister=function(item,stage){void 0===stage&&(stage="early"),registerQueue[stage].push({model:this,item:item})},ModelBase__proto__.downstreamChanged=function(){},ModelBase__proto__.findMatches=function(keys$$1){var matches,i,len=keys$$1.length,existingMatches=[this],loop=function(){var key=keys$$1[i];"*"===key?(matches=[],existingMatches.forEach((function(model){matches.push.apply(matches,model.getValueChildren(model.get()))}))):matches=existingMatches.map((function(model){return model.joinKey(key)})),existingMatches=matches};for(i=0;i<len;i+=1){ loop(); }return matches},ModelBase__proto__.getKeypath=function(ractive){if(ractive!==this.ractive&&this._link){ return this._link.target.getKeypath(ractive); }if(!this.keypath){var parent=this.parent&&this.parent.getKeypath(ractive);this.keypath=parent?this.parent.getKeypath(ractive)+"."+escapeKey(this.key):escapeKey(this.key)}return this.keypath},ModelBase__proto__.getValueChildren=function(value){var children,this$1=this;isArray(value)?(children=[],"length"in this&&this.length!==value.length&&children.push(this.joinKey("length")),value.forEach((function(m,i){children.push(this$1.joinKey(i))}))):isObject(value)||isFunction(value)?children=keys(value).map((function(key){return this$1.joinKey(key)})):null!=value&&(children=[]);var computed=this.computed;return computed&&children.push.apply(children,keys(computed).map((function(k){return this$1.joinKey(k)}))),children},ModelBase__proto__.getVirtual=function(shouldCapture){
var this$1 = this;
var value=this.get(shouldCapture,{virtual:!1});if(isObject(value)){for(var result=isArray(value)?[]:create(null),keys$$1=keys(value),i=keys$$1.length;i--;){var child=this$1.childByKey[keys$$1[i]];child?child._link?result[keys$$1[i]]=child._link.getVirtual():result[keys$$1[i]]=child.getVirtual():result[keys$$1[i]]=value[keys$$1[i]]}for(i=this.children.length;i--;){var child$1=this$1.children[i];child$1.key in result||!child$1._link||(result[child$1.key]=child$1._link.getVirtual())}if(this.computed){ for(i=(keys$$1=keys(this.computed)).length;i--;){ result[keys$$1[i]]=this$1.computed[keys$$1[i]].get(); } }return result}return value},ModelBase__proto__.has=function(key){var this$1=this;if(this._link){ return this._link.has(key); }var value=this.get(!1,noVirtual);if(!value){ return!1; }if(key=unescapeKey(key),(isFunction(value)||isObject(value))&&key in value){ return!0; }var computed=this.computed;return!!(computed&&key in this.computed)||((computed=this.root.ractive&&this.root.ractive.computed)&&keys(computed).forEach((function(k){if(computed[k].pattern&&computed[k].pattern.test(this$1.getKeypath())){ return!0 }})),!1)},ModelBase__proto__.joinAll=function(keys$$1,opts){for(var model=this,i=0;i<keys$$1.length;i+=1){if(opts&&!1===opts.lastLink&&i+1===keys$$1.length&&model.childByKey[keys$$1[i]]&&model.childByKey[keys$$1[i]]._link){ return model.childByKey[keys$$1[i]]; }model=model.joinKey(keys$$1[i],opts)}return model},ModelBase__proto__.notifyUpstream=function(startPath){for(var this$1=this,parent=this.parent,path=startPath||[this.key];parent;){ parent.patterns&&parent.patterns.forEach((function(o){return o.notify(path.slice())})),path.unshift(parent.key),parent.links.forEach((function(l){return l.notifiedUpstream(path,this$1.root)})),parent.deps.forEach((function(d){return d.handleChange(path)})),parent.downstreamChanged(startPath),parent=parent.parent }},ModelBase__proto__.rebind=function(next,previous,safe){
var this$1 = this;
this._link&&this._link.rebind(next,previous,!1);for(var i=this.deps.length;i--;){ this$1.deps[i].rebind&&this$1.deps[i].rebind(next,previous,safe); }for(i=this.links.length;i--;){var link=this$1.links[i];link.owner&&link.owner._link&&link.relinking(next,safe)}for(i=this.children.length;i--;){var child=this$1.children[i];child.rebind(next?next.joinKey(child.key):void 0,child,safe)}for(i=this.bindings.length;i--;){ this$1.bindings[i].rebind(next,previous,safe) }},ModelBase__proto__.reference=function(){"refs"in this?this.refs++:this.refs=1},ModelBase__proto__.register=function(dep){this.deps.push(dep)},ModelBase__proto__.registerLink=function(link){addToArray(this.links,link)},ModelBase__proto__.registerPatternObserver=function(observer){(this.patterns||(this.patterns=[])).push(observer),this.register(observer)},ModelBase__proto__.registerTwowayBinding=function(binding){this.bindings.push(binding)},ModelBase__proto__.unreference=function(){"refs"in this&&this.refs--},ModelBase__proto__.unregister=function(dep){removeFromArray(this.deps,dep)},ModelBase__proto__.unregisterLink=function(link){removeFromArray(this.links,link)},ModelBase__proto__.unregisterPatternObserver=function(observer){removeFromArray(this.patterns,observer),this.unregister(observer)},ModelBase__proto__.unregisterTwowayBinding=function(binding){removeFromArray(this.bindings,binding)},ModelBase__proto__.updateFromBindings=function(cascade){
var this$1 = this;
for(var i=this.bindings.length;i--;){var value=this$1.bindings[i].getValue();value!==this$1.value&&this$1.set(value)}if(!this.bindings.length){var oneway=(function(list){var i=list.length;for(;i--;){ if(list[i].bound){var owner=list[i].owner;if(owner){var value="checked"===owner.name?owner.node.checked:owner.node.value;return{value:value}}} }})(this.deps);oneway&&oneway.value!==this.value&&this.set(oneway.value)}cascade&&(this.children.forEach(updateFromBindings),this.links.forEach(updateFromBindings),this._link&&this._link.updateFromBindings(cascade))};var captureGroup,stack=[];function startCapturing(){stack.push(captureGroup=[])}function stopCapturing(){var dependencies=stack.pop();return captureGroup=stack[stack.length-1],dependencies}function capture(model){captureGroup&&captureGroup.push(model)}function bind$1(x){x.bind()}function cancel(x){x.cancel()}function destroyed(x){x.destroyed()}function handleChange(x){x.handleChange()}function mark(x){x.mark()}function markForce(x){x.mark(!0)}function marked(x){x.marked()}function markedAll(x){x.markedAll()}function render(x){x.render()}function shuffled(x){x.shuffled()}function teardown(x){x.teardown()}function unbind(x){x.unbind()}function unrender(x){x.unrender()}function update(x){x.update()}function toString$1(x){return x.toString()}function toEscapedString(x){return x.toString(!0)}function rebindMatch(template,next,previous,fragment){var keypath=template.r||template;if(!keypath||!isString(keypath)){ return next; }if("."===keypath||"@"===keypath[0]||(next||previous).isKey||(next||previous).isKeypath){ return next; }var parts=keypath.split("/"),keys=splitKeypath(parts[parts.length-1]),last=keys[keys.length-1],model=next||previous;model&&1===keys.length&&last!==model.key&&fragment&&(keys=(function(name,fragment){for(;fragment;){var z=fragment.aliases;if(z&&z[name]){for(var aliases=(fragment.owner.iterations?fragment.owner:fragment).owner.template.z,i=0;i<aliases.length;i++){ if(aliases[i].n===name){var alias=aliases[i].x;if(!alias.r){ return!1; }var parts=alias.r.split("/");return splitKeypath(parts[parts.length-1])} }return}fragment=fragment.componentParent||fragment.parent}})(last,fragment)||keys);for(var i=keys.length,match=!0,shuffling=!1;model&&i--;){ model.shuffling&&(shuffling=!0),keys[i]!=model.key&&(match=!1),model=model.parent; }return!next&&match&&shuffling?previous:next&&!match&&shuffling?previous:next}var Missing={key:"@missing",animate:noop,applyValue:noop,get:noop,getKeypath:function(){return this.key},joinAll:function(){return this},joinKey:function(){return this},mark:noop,registerLink:noop,shufle:noop,set:noop,unregisterLink:noop};Missing.parent=Missing;var LinkModel=(function(ModelBase){function LinkModel(parent,owner,target,key){ModelBase.call(this,parent),this.owner=owner,this.target=target,this.key=void 0===key?owner.key:key,owner&&owner.isLink&&(this.sourcePath=owner.sourcePath+"."+this.key),target&&target.registerLink(this),parent&&(this.isReadonly=parent.isReadonly),this.isLink=!0}ModelBase&&(LinkModel.__proto__=ModelBase);var LinkModel__proto__=LinkModel.prototype=Object.create(ModelBase&&ModelBase.prototype);return LinkModel__proto__.constructor=LinkModel,LinkModel__proto__.animate=function(from,to,options,interpolator){return this.target.animate(from,to,options,interpolator)},LinkModel__proto__.applyValue=function(value){this.boundValue&&(this.boundValue=null),this.target.applyValue(value)},LinkModel__proto__.attach=function(fragment){var model=resolveReference(fragment,this.key);model?this.relinking(model,!1):this.owner.unlink()},LinkModel__proto__.detach=function(){this.relinking(Missing,!1)},LinkModel__proto__.get=function(shouldCapture,opts){void 0===opts&&(opts={}),shouldCapture&&(capture(this),opts.unwrap=!("unwrap"in opts)||opts.unwrap);var bind=!("shouldBind"in opts)||opts.shouldBind;return opts.shouldBind=this.mapping&&this.target.parent&&this.target.parent.isRoot,maybeBind(this,this.target.get(!1,opts),bind)},LinkModel__proto__.getKeypath=function(ractive){return ractive&&ractive!==this.root.ractive?this.target.getKeypath(ractive):ModelBase.prototype.getKeypath.call(this,ractive)},LinkModel__proto__.handleChange=function(){this.deps.forEach(handleChange),this.links.forEach(handleChange),this.notifyUpstream()},LinkModel__proto__.isDetached=function(){return this.virtual&&this.target===Missing},LinkModel__proto__.joinKey=function(key){if(void 0===key||""===key){ return this; }if(!hasOwn(this.childByKey,key)){var child=new LinkModel(this,this,this.target.joinKey(key),key);this.children.push(child),this.childByKey[key]=child}return this.childByKey[key]},LinkModel__proto__.mark=function(force){this.target.mark(force)},LinkModel__proto__.marked=function(){this.boundValue&&(this.boundValue=null),this.links.forEach(marked),this.deps.forEach(handleChange)},LinkModel__proto__.markedAll=function(){this.children.forEach(markedAll),this.marked()},LinkModel__proto__.notifiedUpstream=function(startPath,root){var this$1=this;if(this.links.forEach((function(l){return l.notifiedUpstream(startPath,this$1.root)})),this.deps.forEach(handleChange),startPath&&this.rootLink&&this.root!==root){var path=startPath.slice(1);path.unshift(this.key),this.notifyUpstream(path)}},LinkModel__proto__.relinked=function(){this.target.registerLink(this),this.children.forEach((function(c){return c.relinked()}))},LinkModel__proto__.relinking=function(target,safe){var this$1=this;this.rootLink&&this.sourcePath&&(target=rebindMatch(this.sourcePath,target,this.target)),target&&this.target!==target&&(this.target&&this.target.unregisterLink(this),this.target=target,this.children.forEach((function(c){c.relinking(target.joinKey(c.key),safe)})),this.rootLink&&this.addShuffleTask((function(){this$1.relinked(),safe||(this$1.markedAll(),this$1.notifyUpstream())})))},LinkModel__proto__.set=function(value){this.boundValue&&(this.boundValue=null),this.target.set(value)},LinkModel__proto__.shuffle=function(newIndices){this.shuffling||(this.target.shuffling?shuffle(this,newIndices,!0):this.target.shuffle?this.target.shuffle(newIndices):this.target.mark())},LinkModel__proto__.source=function(){return this.target.source?this.target.source():this.target},LinkModel__proto__.teardown=function(){this._link&&this._link.teardown(),this.target.unregisterLink(this),this.children.forEach(teardown)},LinkModel})(ModelBase);function fromExpression(body,length){void 0===length&&(length=0);for(var args=new Array(length);length--;){ args[length]="_"+length; }return new Function([],"return function ("+args.join(",")+"){return("+body+");};")()}ModelBase.prototype.link=function(model,keypath,options){var lnk=this._link||new LinkModel(this.parent,this,model,this.key);return lnk.implicit=options&&options.implicit,lnk.mapping=options&&options.mapping,lnk.sourcePath=keypath,lnk.rootLink=!0,this._link&&this._link.relinking(model,!1),this.rebind(lnk,this,!1),fireShuffleTasks(),this._link=lnk,lnk.markedAll(),this.notifyUpstream(),lnk},ModelBase.prototype.unlink=function(){if(this._link){var ln=this._link;this._link=void 0,ln.rebind(this,ln,!1),fireShuffleTasks(),ln.teardown(),this.notifyUpstream()}};var functions=create(null);function getFunction(str,i){return functions[str]?functions[str]:functions[str]=(body=str,length=i,throwNoParse(fromExpression,"new expression function",TEMPLATE_INSTRUCTIONS),fromExpression(body,length));var body,length}function addFunctions(template){if(template){var exp=template.e;exp&&keys(exp).forEach((function(str){functions[str]||(functions[str]=exp[str])}))}}var TEMPLATE_VERSION=4,leadingWhitespace=/^\s+/,ParseError=function(message){this.name="ParseError",this.message=message;try{throw new Error(message)}catch(e){this.stack=e.stack}};ParseError.prototype=Error.prototype;var Parser=function(str,options){var item,lineStart=0;this.str=str,this.options=options||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map((function(line){var lineEnd=lineStart+line.length+1;return lineStart=lineEnd,lineEnd}),0),this.init&&this.init(str,options);for(var items=[];this.pos<this.str.length&&(item=this.read());){ items.push(item); }this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(items,options):items};Parser.prototype={read:function(converters){
var this$1 = this;
var i,item;converters||(converters=this.converters);var pos=this.pos,len=converters.length;for(i=0;i<len;i+=1){ if(this$1.pos=pos,item=converters[i](this$1)){ return item; } }return null},getContextMessage:function(pos,message){var ref=this.getLinePos(pos),lineNum=ref[0],columnNum=ref[1];if(-1===this.options.contextLines){ return[lineNum,columnNum,message+" at line "+lineNum+" character "+columnNum]; }var line=this.lines[lineNum-1],contextUp="",contextDown="";if(this.options.contextLines){var start=lineNum-1-this.options.contextLines<0?0:lineNum-1-this.options.contextLines;contextUp=this.lines.slice(start,lineNum-1-start).join("\n").replace(/\t/g,"  "),contextDown=this.lines.slice(lineNum,lineNum+this.options.contextLines).join("\n").replace(/\t/g,"  "),contextUp&&(contextUp+="\n"),contextDown&&(contextDown="\n"+contextDown)}var numTabs=0,annotation=contextUp+line.replace(/\t/g,(function(match,char){return char<columnNum&&(numTabs+=1),"  "}))+"\n"+new Array(columnNum+numTabs).join(" ")+"^----"+contextDown;return[lineNum,columnNum,message+" at line "+lineNum+" character "+columnNum+":\n"+annotation]},getLinePos:function(char){
var this$1 = this;
for(var lineNum=0,lineStart=0;char>=this.lineEnds[lineNum];){ lineStart=this$1.lineEnds[lineNum],lineNum+=1; }return[lineNum+1,char-lineStart+1,char]},error:function(message){var ref=this.getContextMessage(this.pos,message),lineNum=ref[0],columnNum=ref[1],msg=ref[2],error=new ParseError(msg);throw error.line=lineNum,error.character=columnNum,error.shortMessage=message,error},matchString:function(string){if(this.str.substr(this.pos,string.length)===string){ return this.pos+=string.length,string }},matchPattern:function(pattern){var match;if(match=pattern.exec(this.remaining())){ return this.pos+=match[0].length,match[1]||match[0] }},sp:function(){this.matchPattern(leadingWhitespace)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)},warn:function(message){warnIfDebug(this.getContextMessage(this.pos,message)[2])}},Parser.extend=function(proto){
var this$1 = this;
var Child=function(str,options){Parser.call(this,str,options)};for(var key in Child.prototype=create(this$1.prototype),proto){ hasOwn(proto,key)&&(Child.prototype[key]=proto[key]); }return Child.extend=Parser.extend,Child};var TEXT=1,INTERPOLATOR=2,TRIPLE=3,SECTION=4,INVERTED=5,CLOSING=6,ELEMENT=7,PARTIAL=8,COMMENT=9,DELIMCHANGE=10,ANCHOR=11,ATTRIBUTE=13,CLOSING_TAG=14,COMPONENT=15,YIELDER=16,INLINE_PARTIAL=17,DOCTYPE=18,ALIAS=19,AWAIT=55,NUMBER_LITERAL=20,STRING_LITERAL=21,ARRAY_LITERAL=22,OBJECT_LITERAL=23,BOOLEAN_LITERAL=24,REGEXP_LITERAL=25,GLOBAL=26,KEY_VALUE_PAIR=27,REFERENCE=30,REFINEMENT=31,MEMBER=32,PREFIX_OPERATOR=33,BRACKETED=34,CONDITIONAL=35,INFIX_OPERATOR=36,INVOCATION=40,SECTION_IF=50,SECTION_UNLESS=51,SECTION_EACH=52,SECTION_WITH=53,SECTION_IF_WITH=54,ELSE=60,ELSEIF=61,THEN=62,CATCH=63,EVENT=70,DECORATOR=71,TRANSITION=72,BINDING_FLAG=73,DELEGATE_FLAG=74,delimiterChangePattern=/^[^\s=]+/,whitespacePattern=/^\s+/;var regexpPattern=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;function readNumberLiteral(parser){var result;return(result=parser.matchPattern(regexpPattern))?{t:REGEXP_LITERAL,v:result}:null}var pattern=/[-/\\^$*+?.()|[\]{}]/g;function escapeRegExp(str){return str.replace(pattern,"\\$&")}var regExpCache={};function getLowestIndex(haystack,needles){return haystack.search(regExpCache[needles.join()]||(regExpCache[needles.join()]=new RegExp(needles.map(escapeRegExp).join("|"))))}var booleanAttributes={allowfullscreen:1,async:1,autofocus:1,autoplay:1,checked:1,compact:1,controls:1,declare:1,default:1,defaultchecked:1,defaultmuted:1,defaultselected:1,defer:1,disabled:1,enabled:1,formnovalidate:1,hidden:1,indeterminate:1,inert:1,ismap:1,itemscope:1,loop:1,multiple:1,muted:1,nohref:1,noresize:1,noshade:1,novalidate:1,nowrap:1,open:1,pauseonexit:1,readonly:1,required:1,reversed:1,scoped:1,seamless:1,selected:1,sortable:1,translate:1,truespeed:1,typemustmatch:1,visible:1},voidElements={area:1,base:1,br:1,col:1,command:1,doctype:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},htmlEntities={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},controlCharacters=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],entityPattern=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+keys(htmlEntities).join("|")+"));?","g"),codePointSupport=isFunction(String.fromCodePoint),codeToChar=codePointSupport?String.fromCodePoint:String.fromCharCode;function decodeCharacterReferences(html){return html.replace(entityPattern,(function(match,entity){var code;return(code="#"!==entity[0]?htmlEntities[entity]:"x"===entity[1]?parseInt(entity.substring(2),16):parseInt(entity.substring(1),10))?codeToChar(function(code){if(!code){ return invalid; }if(10===code){ return 32; }if(code<128){ return code; }if(code<=159){ return controlCharacters[code-128]; }if(code<55296){ return code; }if(code<=57343){ return invalid; }if(code<=65535){ return code; }if(!codePointSupport){ return invalid; }if(code>=65536&&code<=131071){ return code; }if(code>=131072&&code<=196607){ return code; }return invalid}(code)):match}))}var lessThan=/</g,greaterThan=/>/g,amp=/&/g,invalid=65533;function escapeHtml(str){return str.replace(amp,"&amp;").replace(lessThan,"&lt;").replace(greaterThan,"&gt;")}var expectedExpression="Expected a JavaScript expression",expectedParen="Expected closing paren",numberPattern=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;function readNumberLiteral$1(parser){var result;return(result=parser.matchPattern(numberPattern))?{t:NUMBER_LITERAL,v:result}:null}var stringMiddlePattern=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,escapeSequencePattern=/^\\(?:[`'"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,lineContinuationPattern=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;function makeQuotedStringMatcher(okQuote){return function(parser){for(var next,literal='"',done=!1;!done;){ (next=parser.matchPattern(stringMiddlePattern)||parser.matchPattern(escapeSequencePattern)||parser.matchString(okQuote))?literal+='"'===next?'\\"':"\\'"===next?"'":next:(next=parser.matchPattern(lineContinuationPattern))?literal+="\\u"+("000"+next.charCodeAt(1).toString(16)).slice(-4):done=!0; }return literal+='"',JSON.parse(literal)}}var singleMatcher=makeQuotedStringMatcher('"'),doubleMatcher=makeQuotedStringMatcher("'");function readStringLiteral(parser){var start=parser.pos,quote=parser.matchString("'")||parser.matchString('"');if(quote){var string=("'"===quote?singleMatcher:doubleMatcher)(parser);return parser.matchString(quote)?{t:STRING_LITERAL,v:string}:(parser.pos=start,null)}return null}var stringMiddlePattern$1=/^[^`"\\\$]+?(?:(?=[`"\\\$]))/,escapes=/[\r\n\t\b\f]/g;function getString(literal){return JSON.parse('"'+literal.replace(escapes,escapeChar)+'"')}function escapeChar(c){switch(c){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f"}}var name=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,spreadPattern=/^\s*\.{3}/,legalReference=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,relaxedName=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*(?:\.(?:[a-zA-Z_$][-\/a-zA-Z_$0-9]*))*/,identifier=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function readKey(parser){var token;return(token=readStringLiteral(parser))?identifier.test(token.v)?token.v:'"'+token.v.replace(/"/g,'\\"')+'"':(token=readNumberLiteral$1(parser))?token.v:(token=parser.matchPattern(name))?token:null}function readKeyValuePairs(parser){var start=parser.pos,pair=(function(parser){var spread,start=parser.pos;parser.sp();var refKey="'"!==parser.nextChar()&&'"'!==parser.nextChar();refKey&&(spread=parser.matchPattern(spreadPattern));var key=spread?readExpression(parser):readKey(parser);if(null===key){ return parser.pos=start,null; }if(parser.sp(),refKey&&(","===parser.nextChar()||"}"===parser.nextChar())){spread||name.test(key)||parser.error("Expected a valid reference, but found '"+key+"' instead.");var pair={t:KEY_VALUE_PAIR,k:key,v:{t:REFERENCE,n:key}};return spread&&(pair.p=!0),pair}if(!parser.matchString(":")){ return parser.pos=start,null; }parser.sp();var value=readExpression(parser);return null===value?(parser.pos=start,null):{t:KEY_VALUE_PAIR,k:key,v:value}})(parser);if(null===pair){ return null; }var pairs=[pair];if(parser.matchString(",")){var keyValuePairs=readKeyValuePairs(parser);return keyValuePairs?pairs.concat(keyValuePairs):(parser.pos=start,null)}return pairs}function readLiteral(parser){return readNumberLiteral$1(parser)||(function(parser){var remaining=parser.remaining();return"true"===remaining.substr(0,4)?(parser.pos+=4,{t:BOOLEAN_LITERAL,v:"true"}):"false"===remaining.substr(0,5)?(parser.pos+=5,{t:BOOLEAN_LITERAL,v:"false"}):null})(parser)||readStringLiteral(parser)||(function(parser){if(!parser.matchString("`")){ return null; }for(var next,literal="",done=!1,parts=[];!done;){ if(next=parser.matchPattern(stringMiddlePattern$1)||parser.matchPattern(escapeSequencePattern)||parser.matchString("$")||parser.matchString('"')){ if('"'===next){ literal+='\\"'; }else if("\\`"===next){ literal+="`"; }else if("$"===next){ if(parser.matchString("{")){parts.push({t:STRING_LITERAL,v:getString(literal)}),literal="",parser.sp();var expr=readExpression(parser);expr||parser.error("Expected valid expression"),parts.push({t:BRACKETED,x:expr}),parser.sp(),parser.matchString("}")||parser.error("Expected closing '}' after interpolated expression")}else { literal+="$"; } }else { literal+=next; } }else{ (next=parser.matchPattern(lineContinuationPattern))?literal+="\\u"+("000"+next.charCodeAt(1).toString(16)).slice(-4):done=!0; } }if(literal.length&&parts.push({t:STRING_LITERAL,v:getString(literal)}),parser.matchString("`")||parser.error("Expected closing '`'"),1===parts.length){ return parts[0]; }for(var part,result=parts.pop();part=parts.pop();){ result={t:INFIX_OPERATOR,s:"+",o:[part,result]}; }return{t:BRACKETED,x:result}})(parser)||(function(parser){var start=parser.pos;if(parser.sp(),!parser.matchString("{")){ return parser.pos=start,null; }var keyValuePairs=readKeyValuePairs(parser);return parser.sp(),parser.matchString("}")?{t:OBJECT_LITERAL,m:keyValuePairs}:(parser.pos=start,null)})(parser)||(function(parser){var start=parser.pos;if(parser.sp(),!parser.matchString("[")){ return parser.pos=start,null; }var expressionList=readExpressionList(parser,!0);return parser.matchString("]")?{t:ARRAY_LITERAL,m:expressionList}:(parser.pos=start,null)})(parser)||readNumberLiteral(parser)}var readTypeOf,globals=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,keywords=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,prefixPattern=/^(?:\@\.|\@|~\/|(?:\^\^\/(?:\^\^\/)*(?:\.\.\/)*)|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,specials=/^(key|index|keypath|rootpath|this|global|shared|context|event|node|local|style|helpers|last)/;function readReference(parser){var prefix,name$$1,global,reference,lastDotIndex,startPos=parser.pos;name$$1=!(prefix=parser.matchPattern(prefixPattern)||"")&&parser.relaxedNames&&parser.matchPattern(relaxedName)||parser.matchPattern(legalReference);var actual=prefix.length+(name$$1&&name$$1.length||0);if("@."===prefix&&(prefix="@",name$$1=name$$1?"this."+name$$1:"this"),!name$$1&&prefix&&(name$$1=prefix,prefix=""),!name$$1){ return null; }if("@"===prefix){ if(specials.test(name$$1)){ if(!~name$$1.indexOf("event")&&!~name$$1.indexOf("node")||parser.inEvent){if(~name$$1.indexOf("context")){ return parser.pos=parser.pos-(name$$1.length-7),{t:BRACKETED,x:{t:REFERENCE,n:"@context"}} }}else { parser.error("@event and @node are only valid references within an event directive"); } }else { parser.error("Unrecognized special reference @"+name$$1); } }if(!prefix&&!parser.relaxedNames&&keywords.test(name$$1)){ return parser.pos=startPos,null; }if(!prefix&&globals.test(name$$1)){ return global=globals.exec(name$$1)[0],parser.pos=startPos+global.length,{t:GLOBAL,v:global}; }if(reference=(prefix||"")+normalise(name$$1),parser.matchString("(")){ if(-1!==(lastDotIndex=reference.lastIndexOf("."))&&"]"!==name$$1[name$$1.length-1]){ if(0===lastDotIndex){ reference=".",parser.pos=startPos; }else{var refLength=reference.length;reference=reference.substr(0,lastDotIndex),parser.pos=startPos+(actual-(refLength-lastDotIndex))} }else { parser.pos-=1; } }return{t:REFERENCE,n:reference.replace(/^this\./,"./").replace(/^this$/,".")}}function readPrimary(parser){return readLiteral(parser)||readReference(parser)||(function(parser){if(!parser.matchString("(")){ return null; }parser.sp();var expr=readExpression(parser);return expr||parser.error(expectedExpression),parser.sp(),parser.matchString(")")||parser.error(expectedParen),{t:BRACKETED,x:expr}})(parser)}function readRefinement(parser){if(parser.strictRefinement||parser.sp(),parser.matchString(".")){parser.sp();var name$$1=parser.matchPattern(name);if(name$$1){ return{t:REFINEMENT,n:name$$1}; }parser.error("Expected a property name")}if(parser.matchString("[")){parser.sp();var expr=readExpression(parser);return expr||parser.error(expectedExpression),parser.sp(),parser.matchString("]")||parser.error("Expected ']'"),{t:REFINEMENT,x:expr}}return null}function readMemberOrInvocation(parser){var expression=readPrimary(parser);if(!expression){ return null; }for(;expression;){var refinement=readRefinement(parser);if(refinement){ expression={t:MEMBER,x:expression,r:refinement}; }else{if(!parser.matchString("(")){ break; }parser.sp();var expressionList=readExpressionList(parser,!0);parser.sp(),parser.matchString(")")||parser.error(expectedParen),expression={t:INVOCATION,x:expression},expressionList&&(expression.o=expressionList)}}return expression}var makePrefixSequenceMatcher=function(symbol,fallthrough){return function(parser){var expression;return(expression=fallthrough(parser))?expression:parser.matchString(symbol)?(parser.sp(),(expression=readExpression(parser))||parser.error(expectedExpression),{s:symbol,o:expression,t:PREFIX_OPERATOR}):null}};!(function(){var i,len,fallthrough,prefixOperators="! ~ + - typeof".split(" ");for(fallthrough=readMemberOrInvocation,i=0,len=prefixOperators.length;i<len;i+=1){ fallthrough=makePrefixSequenceMatcher(prefixOperators[i],fallthrough); }readTypeOf=fallthrough})();var readLogicalOr,readTypeof=readTypeOf,makeInfixSequenceMatcher=function(symbol,fallthrough){return function(parser){if(parser.inUnquotedAttribute&&(">"===symbol||"/"===symbol)){ return fallthrough(parser); }var start,left,right;if(!(left=fallthrough(parser))){ return null; }for(;;){if(start=parser.pos,parser.sp(),!parser.matchString(symbol)){ return parser.pos=start,left; }if("in"===symbol&&/[a-zA-Z_$0-9]/.test(parser.remaining().charAt(0))){ return parser.pos=start,left; }if(parser.sp(),!(right=fallthrough(parser))){ return parser.pos=start,left; }left={t:INFIX_OPERATOR,s:symbol,o:[left,right]}}}};!(function(){var i,len,fallthrough,infixOperators="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");for(fallthrough=readTypeof,i=0,len=infixOperators.length;i<len;i+=1){ fallthrough=makeInfixSequenceMatcher(infixOperators[i],fallthrough); }readLogicalOr=fallthrough})();var readLogicalOr$1=readLogicalOr;function readExpression(parser){if(!1===parser.allowExpressions){var ref=readReference(parser);return parser.sp(),ref}return (function(parser){var expression=readLogicalOr$1(parser);if(!expression){ return null; }var start=parser.pos;if(parser.sp(),!parser.matchString("?")){ return parser.pos=start,expression; }parser.sp();var ifTrue=readExpression(parser);ifTrue||parser.error(expectedExpression),parser.sp(),parser.matchString(":")||parser.error('Expected ":"'),parser.sp();var ifFalse=readExpression(parser);return ifFalse||parser.error(expectedExpression),{t:CONDITIONAL,o:[expression,ifTrue,ifFalse]}})(parser)}function readExpressionList(parser,spread){var isSpread,expressions=[],pos=parser.pos;do{parser.sp(),spread&&(isSpread=parser.matchPattern(spreadPattern));var expr=readExpression(parser);if(null===expr&&expressions.length){ parser.error(expectedExpression); }else if(null===expr){ return parser.pos=pos,null; }isSpread&&(expr.p=!0),expressions.push(expr),parser.sp()}while(parser.matchString(","));return expressions}function readExpressionOrReference(parser,expectedFollowers){var start=parser.pos,expression=readExpression(parser);if(!expression){var ref=parser.matchPattern(/^(\w+)/);return ref?{t:REFERENCE,n:ref}:null}for(var i=0;i<expectedFollowers.length;i+=1){ if(parser.remaining().substr(0,expectedFollowers[i].length)===expectedFollowers[i]){ return expression; } }return parser.pos=start,readReference(parser)}function flattenExpression(expression){var refs,count=0;!(function extractRefs(node,refs){node.t===REFERENCE&&isString(node.n)&&(~refs.indexOf(node.n)||refs.unshift(node.n));var list=node.o||node.m;if(list){ if(isObject(list)){ extractRefs(list,refs); }else { for(var i=list.length;i--;){ extractRefs(list[i],refs); } } }node.k&&node.t===KEY_VALUE_PAIR&&!isString(node.k)&&extractRefs(node.k,refs);node.x&&extractRefs(node.x,refs);node.r&&extractRefs(node.r,refs);node.v&&extractRefs(node.v,refs)})(expression,refs=[]);var stringified=stringify(expression);return{r:refs,s:(function(expr){for(var vars=[],i=count-1;i>=0;i--){ vars.push("x$"+i); }return vars.length?"(function(){var "+vars.join(",")+";return("+expr+");})()":expr})(stringified)};function stringify(node){if(isString(node)){ return node; }switch(node.t){case BOOLEAN_LITERAL:case GLOBAL:case NUMBER_LITERAL:case REGEXP_LITERAL:return node.v;case STRING_LITERAL:return JSON.stringify(String(node.v));case ARRAY_LITERAL:return node.m&&hasSpread(node.m)?"[].concat("+makeSpread(node.m,"[","]",stringify)+")":"["+(node.m?node.m.map(stringify).join(","):"")+"]";case OBJECT_LITERAL:return node.m&&hasSpread(node.m)?"Object.assign({},"+makeSpread(node.m,"{","}",stringifyPair)+")":"{"+(node.m?node.m.map((function(n){return n.k+":"+stringify(n.v)})).join(","):"")+"}";case PREFIX_OPERATOR:return("typeof"===node.s?"typeof ":node.s)+stringify(node.o);case INFIX_OPERATOR:return stringify(node.o[0])+("in"===node.s.substr(0,2)?" "+node.s+" ":node.s)+stringify(node.o[1]);case INVOCATION:if(node.o&&hasSpread(node.o)){var id=count++;return"(x$"+id+"="+stringify(node.x)+").apply(x$"+id+","+stringify({t:ARRAY_LITERAL,m:node.o})+")"}return stringify(node.x)+"("+(node.o?node.o.map(stringify).join(","):"")+")";case BRACKETED:return"("+stringify(node.x)+")";case MEMBER:return stringify(node.x)+stringify(node.r);case REFINEMENT:return node.n?"."+node.n:"["+stringify(node.x)+"]";case CONDITIONAL:return stringify(node.o[0])+"?"+stringify(node.o[1])+":"+stringify(node.o[2]);case REFERENCE:return"_"+refs.indexOf(node.n);default:throw new Error("Expected legal JavaScript")}}function stringifyPair(node){return node.p?stringify(node.k):node.k+":"+stringify(node.v)}function makeSpread(list,open,close,fn){var out=list.reduce((function(a,c){return c.p?a.str+=(a.open?close+",":a.str.length?",":"")+fn(c):a.str+=""+(a.str.length?a.open?",":","+open:open)+fn(c),a.open=!c.p,a}),{open:!1,str:""});return out.open&&(out.str+=close),out.str}}function hasSpread(list){for(var i=0;i<list.length;i++){ if(list[i].p){ return!0; } }return!1}function refineExpression(expression,mustache){var referenceExpression;if(expression){for(;expression.t===BRACKETED&&expression.x;){ expression=expression.x; }if(expression.t===REFERENCE){ ~expression.n.indexOf("@context")?mustache.x=flattenExpression(expression):mustache.r=expression.n; }else{ (referenceExpression=(function(expression){var refinement,members=[];for(;expression.t===MEMBER&&expression.r.t===REFINEMENT;){ (refinement=expression.r).x?refinement.x.t===REFERENCE?members.unshift(refinement.x):members.unshift(flattenExpression(refinement.x)):members.unshift(refinement.n),expression=expression.x; }if(expression.t!==REFERENCE){ return null; }return{r:expression.n,m:members}})(expression))?mustache.rx=referenceExpression:mustache.x=flattenExpression(expression); }return mustache}}var attributeNamePattern=/^[^\s"'>\/=(]+/,onPattern=/^on/,eventPattern=/^on-([a-zA-Z\*\.$_]((?:[a-zA-Z\*\.$_0-9\-]|\\-)+))$/,reservedEventNames=/^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/,decoratorPattern=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,transitionPattern=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,boundPattern=/^((bind|class)-(([-a-zA-Z0-9_])+))$/,directives={lazy:{t:BINDING_FLAG,v:"l"},twoway:{t:BINDING_FLAG,v:"t"},"no-delegation":{t:DELEGATE_FLAG}},unquotedAttributeValueTextPattern=/^[^\s"'=<>\/`]+/,proxyEvent=/^[^\s"'=<>@\[\]()]*/,whitespace=/^\s+/,slashes=/\\/g;function readAttributeValue(parser){var start=parser.pos;if(/[=\/>\s]/.test(parser.nextChar())||parser.error("Expected `=`, `/`, `>` or whitespace"),parser.sp(),!parser.matchString("=")){ return parser.pos=start,null; }parser.sp();var valueStart=parser.pos,startDepth=parser.sectionDepth,value=readQuotedAttributeValue(parser,"'")||readQuotedAttributeValue(parser,'"')||(function(parser){parser.inAttribute=!0;var tokens=[],token=readMustache(parser)||readUnquotedAttributeValueToken(parser);for(;token;){ tokens.push(token),token=readMustache(parser)||readUnquotedAttributeValueToken(parser); }if(!tokens.length){ return null; }return parser.inAttribute=!1,tokens})(parser);return null===value&&parser.error("Expected valid attribute value"),parser.sectionDepth!==startDepth&&(parser.pos=valueStart,parser.error("An attribute value must contain as many opening section tags as closing section tags")),value.length?1===value.length&&isString(value[0])?decodeCharacterReferences(value[0]):value:""}function readUnquotedAttributeValueToken(parser){var text,index,start=parser.pos;return(text=parser.matchPattern(unquotedAttributeValueTextPattern))?(-1!==(index=getLowestIndex(text,parser.tags.map((function(t){return t.open}))))&&(text=text.substr(0,index),parser.pos=start+text.length),text):null}function readQuotedAttributeValue(parser,quoteMark){var start=parser.pos;if(!parser.matchString(quoteMark)){ return null; }parser.inAttribute=quoteMark;for(var tokens=[],token=readMustache(parser)||readQuotedStringToken(parser,quoteMark);null!==token;){ tokens.push(token),token=readMustache(parser)||readQuotedStringToken(parser,quoteMark); }return parser.matchString(quoteMark)?(parser.inAttribute=!1,tokens):(parser.pos=start,null)}function readQuotedStringToken(parser,quoteMark){var haystack=parser.remaining(),needles=parser.tags.map((function(t){return t.open}));needles.push(quoteMark);var index=getLowestIndex(haystack,needles);return-1===index&&parser.error("Quoted attribute value must have a closing quote"),index?(parser.pos+=index,haystack.substr(0,index)):null}function readAttributeOrDirective(parser){var match,directive,attribute=(function(parser){var name,i,nearest,idx;if(parser.sp(),!(name=parser.matchPattern(attributeNamePattern))){ return null; }for(nearest=name.length,i=0;i<parser.tags.length;i++){ ~(idx=name.indexOf(parser.tags[i].open))&&idx<nearest&&(nearest=idx); }return nearest<name.length&&(parser.pos-=name.length-nearest,!(name=name.substr(0,nearest)))?null:{n:name}})(parser);if(!attribute){ return null; }if(directive=directives[attribute.n]){ attribute.t=directive.t,directive.v&&(attribute.v=directive.v),delete attribute.n,parser.sp(),"="===parser.nextChar()&&(attribute.f=readAttributeValue(parser)); }else if(match=decoratorPattern.exec(attribute.n)){ attribute.n=match[1],attribute.t=DECORATOR,readArguments(parser,attribute); }else if(match=transitionPattern.exec(attribute.n)){ attribute.n=match[1],attribute.t=TRANSITION,readArguments(parser,attribute),attribute.v="in-out"===match[2]?"t0":"in"===match[2]?"t1":"t2"; }else if(match=eventPattern.exec(attribute.n)){ attribute.n=(function(str){for(var result=[],s=0,i=0;i<str.length;i++){ "-"===str[i]&&"\\"!==str[i-1]&&(result.push(str.substring(s,i).replace(slashes,"")),s=i+1); }return result.push(str.substring(s).replace(slashes,"")),result})(match[1]),attribute.t=EVENT,parser.matchString("(")&&(attribute.a=flattenExpression({t:ARRAY_LITERAL,m:readExpressionList(parser)}),parser.matchString(")")||parser.error("Expected closing ')'")),parser.inEvent=!0,!(function(parser,attribute){var start=parser.pos;parser.matchString("=")||parser.error("Missing required directive arguments");var quote=parser.matchString("'")||parser.matchString('"');parser.sp();var proxy=parser.matchPattern(proxyEvent);if(void 0!==proxy){ if(quote){if(parser.sp(),parser.matchString(quote)){ return(attribute.f=proxy)||!0; }parser.pos=start}else{if(parser.matchPattern(whitespace)){ return(attribute.f=proxy)||!0; }parser.pos=start} }else { parser.pos=start }})(parser,attribute)?readArguments(parser,attribute,!0):reservedEventNames.test(attribute.f)&&(parser.pos-=attribute.f.length,parser.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)")),parser.inEvent=!1; }else if(match=boundPattern.exec(attribute.n)){var bind="bind"===match[2];attribute.n=bind?match[3]:match[1],attribute.t=ATTRIBUTE,readArguments(parser,attribute,!1,!0),!attribute.f&&bind&&(attribute.f=[{t:INTERPOLATOR,r:match[3]}])}else{parser.sp();var value="="===parser.nextChar()?readAttributeValue(parser):null;if(attribute.f=null!=value?value:attribute.f,parser.sanitizeEventAttributes&&onPattern.test(attribute.n)){ return{exclude:!0}; }attribute.f=attribute.f||(""===attribute.f?"":0),attribute.t=ATTRIBUTE}return attribute}function readArguments(parser,attribute,required,single){if(void 0===required&&(required=!1),void 0===single&&(single=!1),parser.sp(),parser.matchString("=")){parser.sp();var quote=parser.matchString('"')||parser.matchString("'"),spread=parser.spreadArgs;parser.spreadArgs=!0,parser.inUnquotedAttribute=!quote;var expr=single?readExpressionOrReference(parser,[quote||" ","/",">"]):{m:readExpressionList(parser),t:ARRAY_LITERAL};if(parser.inUnquotedAttribute=!1,parser.spreadArgs=spread,quote&&(parser.sp(),parser.matchString(quote)!==quote&&parser.error("Expected matching quote '"+quote+"'")),single){var interpolator={t:INTERPOLATOR};refineExpression(expr,interpolator),attribute.f=[interpolator]}else { attribute.f=flattenExpression(expr) }}else { required&&parser.error("Missing required directive arguments") }}var delimiterChangeToken={t:DELIMCHANGE,exclude:!0};function readMustache(parser){var mustache,i;if(!1===parser.interpolate[parser.inside]){ return null; }for(i=0;i<parser.tags.length;i+=1){ if(mustache=readMustacheOfType(parser,parser.tags[i])){ return mustache; } }return parser.inTag&&!parser.inAttribute&&(mustache=readAttributeOrDirective(parser))?(parser.sp(),mustache):void 0}function readMustacheOfType(parser,tag){var mustache,i,start=parser.pos;if(parser.matchString("\\"+tag.open)){if(0===start||"\\"!==parser.str[start-1]){ return tag.open }}else if(!parser.matchString(tag.open)){ return null; }if(mustache=(function(parser){if(!parser.matchString("=")){ return null; }var start=parser.pos;parser.sp();var opening=parser.matchPattern(delimiterChangePattern);if(!opening){ return parser.pos=start,null; }if(!parser.matchPattern(whitespacePattern)){ return null; }var closing=parser.matchPattern(delimiterChangePattern);return closing?(parser.sp(),parser.matchString("=")?[opening,closing]:(parser.pos=start,null)):(parser.pos=start,null)})(parser)){ return parser.matchString(tag.close)?(tag.open=mustache[0],tag.close=mustache[1],parser.sortMustacheTags(),delimiterChangeToken):null; }if(parser.sp(),parser.matchString("/")){parser.pos-=1;var rewind=parser.pos;if(readNumberLiteral(parser)){ parser.pos=rewind; }else{if(parser.pos=rewind-tag.close.length,parser.inAttribute){ return parser.pos=start,null; }parser.error("Attempted to close a section that wasn't open")}}for(i=0;i<tag.readers.length;i+=1){ if(mustache=(0,tag.readers[i])(parser,tag)){ return tag.isStatic&&(mustache.s=1),parser.includeLinePositions&&(mustache.q=parser.getLinePos(start)),mustache; } }return parser.pos=start,null}var legalAlias=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,asRE=/^as/i;function readAliases(parser){var alias,aliases=[],start=parser.pos;if(parser.sp(),alias=readAlias(parser)){for(alias.x=refineExpression(alias.x,{}),aliases.push(alias),parser.sp();parser.matchString(",");){ (alias=readAlias(parser))||parser.error("Expected another alias."),alias.x=refineExpression(alias.x,{}),aliases.push(alias),parser.sp(); }return aliases}return parser.pos=start,null}function readAlias(parser){var start=parser.pos;parser.sp();var expr=readExpression(parser);if(!expr){ return parser.pos=start,null; }parser.sp(),parser.matchPattern(asRE),parser.sp();var alias=parser.matchPattern(legalAlias);return alias?{n:alias,x:expr}:(parser.pos=start,null)}function readClosing(parser,tag){var start=parser.pos;if(!parser.matchString(tag.open)){ return null; }if(parser.sp(),!parser.matchString("/")){ return parser.pos=start,null; }parser.sp();var remaining=parser.remaining(),index=remaining.indexOf(tag.close);if(-1!==index){var closing={t:CLOSING,r:remaining.substr(0,index).split(" ")[0]};return parser.pos+=index,parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'"),closing}return parser.pos=start,null}var patterns={else:/^\s*else\s*/,elseif:/^\s*elseif\s+/,then:/^\s*then\s*/,catch:/^\s*catch\s*/},types={else:ELSE,elseif:ELSEIF,then:THEN,catch:CATCH};function readInlineBlock(parser,tag,type){var start=parser.pos;if(!parser.matchString(tag.open)){ return null; }if(!parser.matchPattern(patterns[type])){ return parser.pos=start,null; }var res={t:types[type]};if("elseif"===type){ res.x=readExpression(parser); }else if("catch"===type||"then"===type){var nm=parser.matchPattern(name);nm&&(res.n=nm)}return parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'"),res}var handlebarsBlockCodes={each:SECTION_EACH,if:SECTION_IF,with:SECTION_IF_WITH,unless:SECTION_UNLESS},indexRefPattern=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,keyIndexRefPattern=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,handlebarsBlockPattern=new RegExp("^("+keys(handlebarsBlockCodes).join("|")+")\\b");var OPEN_COMMENT="\x3c!--",CLOSE_COMMENT="--\x3e";var leadingLinebreak=/^[ \t\f\r\n]*\r?\n/,trailingLinebreak=/\r?\n[ \t\f\r\n]*$/;function isSection(item){return(item.t===SECTION||item.t===INVERTED)&&item.f}function trimWhitespace(items,leadingPattern,trailingPattern){var item;leadingPattern&&isString(item=items[0])&&((item=item.replace(leadingPattern,""))?items[0]=item:items.shift()),trailingPattern&&isString(item=lastItem(items))&&((item=item.replace(trailingPattern,""))?items[items.length-1]=item:items.pop())}var contiguousWhitespace=/[ \t\f\r\n]+/g,leadingWhitespace$1=/^[ \t\f\r\n]+/,trailingWhitespace=/[ \t\f\r\n]+$/,leadingNewLine=/^(?:\r\n|\r|\n)/,trailingNewLine=/(?:\r\n|\r|\n)$/;function cleanup(items,stripComments,preserveWhitespace,removeLeadingWhitespace,removeTrailingWhitespace,whiteSpaceElements){if(!isString(items)){var i,item,previousItem,nextItem,preserveWhitespaceInsideFragment,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment;for(!(function(items){var i,current,backOne,backTwo,lastSectionItem,item;for(i=1;i<items.length;i+=1){ current=items[i],backOne=items[i-1],backTwo=items[i-2],isString(current)&&((item=backOne).t===COMMENT||item.t===DELIMCHANGE)&&isString(backTwo)&&trailingLinebreak.test(backTwo)&&leadingLinebreak.test(current)&&(items[i-2]=backTwo.replace(trailingLinebreak,"\n"),items[i]=current.replace(leadingLinebreak,"")),isSection(current)&&isString(backOne)&&trailingLinebreak.test(backOne)&&isString(current.f[0])&&leadingLinebreak.test(current.f[0])&&(items[i-1]=backOne.replace(trailingLinebreak,"\n"),current.f[0]=current.f[0].replace(leadingLinebreak,"")),isString(current)&&isSection(backOne)&&isString(lastSectionItem=lastItem(backOne.f))&&trailingLinebreak.test(lastSectionItem)&&leadingLinebreak.test(current)&&(backOne.f[backOne.f.length-1]=lastSectionItem.replace(trailingLinebreak,"\n"),items[i]=current.replace(leadingLinebreak,"")) }})(items),i=items.length;i--;){ (item=items[i]).exclude?items.splice(i,1):stripComments&&item.t===COMMENT&&items.splice(i,1); }for(trimWhitespace(items,removeLeadingWhitespace?leadingWhitespace$1:null,removeTrailingWhitespace?trailingWhitespace:null),i=items.length;i--;){if(removeLeadingWhitespaceInsideFragment=removeTrailingWhitespaceInsideFragment=!1,(item=items[i]).f){var isPreserveWhitespaceElement=item.t===ELEMENT&&(whiteSpaceElements[item.e.toLowerCase()]||whiteSpaceElements[item.e]);preserveWhitespaceInsideFragment=preserveWhitespace||isPreserveWhitespaceElement,!preserveWhitespace&&isPreserveWhitespaceElement&&trimWhitespace(item.f,leadingNewLine,trailingNewLine),preserveWhitespaceInsideFragment||(previousItem=items[i-1],nextItem=items[i+1],(!previousItem||isString(previousItem)&&trailingWhitespace.test(previousItem))&&(removeLeadingWhitespaceInsideFragment=!0),(!nextItem||isString(nextItem)&&leadingWhitespace$1.test(nextItem))&&(removeTrailingWhitespaceInsideFragment=!0)),cleanup(item.f,stripComments,preserveWhitespaceInsideFragment,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment,whiteSpaceElements)}item.l&&(cleanup(item.l,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment,whiteSpaceElements),item.l.forEach((function(s){return s.l=1})),item.l.unshift(i+1,0),items.splice.apply(items,item.l),delete item.l),item.m&&(cleanup(item.m,stripComments,preserveWhitespace,removeLeadingWhitespaceInsideFragment,removeTrailingWhitespaceInsideFragment,whiteSpaceElements),item.m.length<1&&delete item.m)}for(i=items.length;i--;){ isString(items[i])&&(isString(items[i+1])&&(items[i]=items[i]+items[i+1],items.splice(i+1,1)),preserveWhitespace||(items[i]=items[i].replace(contiguousWhitespace," ")),""===items[i]&&items.splice(i,1)) }}}var closingTagPattern=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;function readClosingTag(parser){var tag,start=parser.pos;return parser.matchString("</")?(tag=parser.matchPattern(closingTagPattern))?parser.inside&&tag!==parser.inside?(parser.pos=start,null):{t:CLOSING_TAG,e:tag}:(parser.pos-=2,void parser.error("Illegal closing tag")):null}function hyphenateCamel(camelCaseStr){return camelCaseStr.replace(/([A-Z])/g,(function(match,$1){return"-"+$1.toLowerCase()}))}var tagNamePattern=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,anchorPattern=/^[a-zA-Z_$][-a-zA-Z0-9_$]*/,validTagNameFollower=/^[\s\n\/>]/,exclude={exclude:!0},disallowedContents={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};function canContain(name,remaining){var match=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(remaining),disallowed=disallowedContents[name];return!match||!disallowed||!~disallowed.indexOf(match[1].toLowerCase())}function readAnchorClose(parser,name){var pos=parser.pos;return parser.matchString("</")?(parser.matchString("#"),parser.sp(),parser.matchString(name)?(parser.sp(),!!parser.matchString(">")||(parser.pos=pos,null)):(parser.pos=pos,null)):null}var inlines=/^\s*(elseif|else|then|catch)\s*/;function readInline(parser,tag){var pos=parser.pos;if(parser.matchString(tag.open)){ return!!parser.matchPattern(inlines)||void(parser.pos=pos) }}var partialDefinitionSectionPattern=/^\s*#\s*partial\s+/;function insertExpressions(obj,expr){keys(obj).forEach((function(key){if(function(key,obj){return"s"===key&&isArray(obj.r)}(key,obj)){ return (function(obj,expr){var s=obj.s,r=obj.r;expr[s]||(expr[s]=fromExpression(s,r.length))})(obj,expr); }var ref=obj[key];(function(ref){return isArray(ref)||isObject(ref)})(ref)&&insertExpressions(ref,expr)}))}var shared={},STANDARD_READERS=[function(parser,tag){var aliases,type=parser.matchString(">")||parser.matchString("yield"),partial={t:">"===type?PARTIAL:YIELDER};if(!type){ return null; }if(parser.sp(),">"===type||!(aliases=parser.matchString("with"))){parser.relaxedNames=parser.strictRefinement=!0;var expression=readExpression(parser);if(parser.relaxedNames=parser.strictRefinement=!1,!expression&&">"===type){ return null; }expression&&(refineExpression(expression,partial),parser.sp(),">"!==type&&(aliases=parser.matchString("with")))}if(parser.sp(),aliases||">"===type){if((aliases=readAliases(parser))&&aliases.length){ partial.z=aliases; }else{var context=readExpression(parser);context&&(partial.c={},refineExpression(context,partial.c))}">"===type||partial.c||partial.z||parser.error("Expected a context or one or more aliases")}return parser.sp(),parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'"),partial},function(parser,tag){if(!parser.matchString("&")){ return null; }parser.sp();var expression=readExpression(parser);if(!expression){ return null; }parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'");var triple={t:TRIPLE};return refineExpression(expression,triple),triple},function(parser,tag){var expression,section,child,children,hasElse,block,unlessBlock,closed,i,expectedClose,hasThen,hasCatch,inlineThen,pos,aliasOnly=!1,start=parser.pos;if(parser.matchString("^")){if(parser.matchString("^/")){ return parser.pos=start,null; }section={t:SECTION,f:[],n:SECTION_UNLESS}}else{if(!parser.matchString("#")){ return null; }section={t:SECTION,f:[]},parser.matchString("partial")&&(parser.pos=start-parser.standardDelimiters[0].length,parser.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(block=parser.matchString("await"))?(expectedClose=block,section.t=AWAIT):(block=parser.matchPattern(handlebarsBlockPattern))&&(expectedClose=block,section.n=handlebarsBlockCodes[block])}if(parser.sp(),"with"===block){var aliases=readAliases(parser);aliases&&(aliasOnly=!0,section.z=aliases,section.t=ALIAS)}else if("each"===block){var alias=readAlias(parser);alias&&(section.z=[{n:alias.n,x:{r:"."}}],expression=alias.x)}if(!aliasOnly){if(expression||(expression=readExpression(parser)),expression||parser.error("Expected expression"),"each"===block&&parser.matchString(",")){var aliases$1=readAliases(parser);aliases$1&&(section.z&&aliases$1.unshift(section.z[0]),section.z=aliases$1)}var extra;"each"!==block&&block||!(i=parser.matchPattern(indexRefPattern))?"await"===block&&parser.matchString("then")&&(parser.sp(),hasThen=!0,(inlineThen=parser.matchPattern(name))||(inlineThen=!0)):(extra=parser.matchPattern(keyIndexRefPattern))?section.i=i+","+extra:section.i=i,!block&&expression.n&&(expectedClose=expression.n)}parser.sp(),parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'"),parser.sectionDepth+=1,children=section.f;do{if(pos=parser.pos,child=readClosing(parser,tag)){ expectedClose&&child.r!==expectedClose&&(block?(parser.pos=pos,parser.error("Expected "+tag.open+"/"+expectedClose+tag.close)):child.r&&parser.warn("Expected "+tag.open+"/"+expectedClose+tag.close+" but found "+tag.open+"/"+child.r+tag.close)),parser.sectionDepth-=1,closed=!0; }else if(!aliasOnly&&((child=readInlineBlock(parser,tag,"elseif"))||(child=readInlineBlock(parser,tag,"else"))||"await"===block&&((child=readInlineBlock(parser,tag,"then"))||(child=readInlineBlock(parser,tag,"catch"))))){if(section.n===SECTION_UNLESS&&parser.error("{{else}} not allowed in {{#unless}}"),hasElse&&(child.t===ELSE?parser.error("there can only be one {{else}} block, at the end of a section"):child.t===ELSEIF&&parser.error("illegal {{elseif...}} after {{else}}")),!unlessBlock&&(inlineThen||!hasThen)&&!hasCatch){ if("await"===block){var s={f:children};section.f=[s],inlineThen?(s.t=THEN,!0!==inlineThen&&(s.n=inlineThen)):s.t=SECTION}else { unlessBlock=[]; } }var mustache={t:SECTION,f:children=[]};child.t===ELSE?("await"===block?(section.f.push(mustache),mustache.t=ELSE):(mustache.n=SECTION_UNLESS,unlessBlock.push(mustache)),hasElse=!0):child.t===ELSEIF?(mustache.n=SECTION_IF,refineExpression(child.x,mustache),unlessBlock.push(mustache)):child.t===THEN?(hasElse&&parser.error("{{then}} block must appear before any {{else}} block"),hasCatch&&parser.error("{{then}} block must appear before any {{catch}} block"),hasThen&&parser.error("there can only be one {{then}} block per {{#await}}"),mustache.t=THEN,hasThen=!0,child.n&&(mustache.n=child.n),section.f.push(mustache)):child.t===CATCH&&(hasElse&&parser.error("{{catch}} block must appear before any {{else}} block"),hasCatch&&parser.error("there can only be one {{catch}} block per {{#await}}"),mustache.t=CATCH,hasCatch=!0,mustache.n=child.n,section.f.push(mustache))}else{if(!(child=parser.read(READERS))){ break; }children.push(child)}}while(!closed);if(unlessBlock&&(section.l=unlessBlock),aliasOnly||refineExpression(expression,section),"await"===block&&(inlineThen||!hasThen)&&!hasCatch&&!hasElse){var s$1={f:section.f};section.f=[s$1],inlineThen?(s$1.t=THEN,!0!==inlineThen&&(s$1.n=inlineThen)):s$1.t=SECTION}return section.f.length||delete section.f,section},function(parser,tag){var expression,err,start=parser.pos;try{expression=readExpressionOrReference(parser,[tag.close])}catch(e){err=e}if(!expression){if("!"===parser.str.charAt(start)){ return parser.pos=start,null; }if(err){ throw err }}if(!parser.matchString(tag.close)&&(parser.error("Expected closing delimiter '"+tag.close+"' after reference"),!expression)){if("!"===parser.nextChar()){ return null; }parser.error("Expected expression or legal reference")}var interpolator={t:INTERPOLATOR};return refineExpression(expression,interpolator),interpolator},function(parser,tag){if(!parser.matchString("!")){ return null; }var index=parser.remaining().indexOf(tag.close);return-1!==index?(parser.pos+=index+tag.close.length,{t:COMMENT}):void 0}],TRIPLE_READERS=[function(parser,tag){var expression=readExpression(parser);if(!expression){ return null; }parser.matchString(tag.close)||parser.error("Expected closing delimiter '"+tag.close+"'");var triple={t:TRIPLE};return refineExpression(expression,triple),triple}],READERS=[readMustache,function(parser){var start=parser.pos;if(parser.textOnlyMode||!parser.matchString(OPEN_COMMENT)){ return null; }var remaining=parser.remaining(),endIndex=remaining.indexOf(CLOSE_COMMENT);-1===endIndex&&parser.error("Illegal HTML - expected closing comment sequence ('--\x3e')");var content=remaining.substr(0,endIndex);parser.pos+=endIndex+3;var comment={t:COMMENT,c:content};return parser.includeLinePositions&&(comment.q=parser.getLinePos(start)),comment},function(parser){var attribute,selfClosing,children,partials,hasPartials,child,closed,pos,remaining,closingTag,anchor,start=parser.pos;if(parser.inside||parser.inAttribute||parser.textOnlyMode){ return null; }if(!parser.matchString("<")){ return null; }if("/"===parser.nextChar()){ return null; }var element={};if(parser.includeLinePositions&&(element.q=parser.getLinePos(start)),parser.matchString("!")){ return element.t=DOCTYPE,parser.matchPattern(/^doctype/i)||parser.error("Expected DOCTYPE declaration"),element.a=parser.matchPattern(/^(.+?)>/),element; }if(anchor=parser.matchString("#")){ parser.sp(),element.t=ANCHOR,element.n=parser.matchPattern(anchorPattern); }else if(element.t=ELEMENT,element.e=parser.matchPattern(tagNamePattern),!element.e){ return null; }for(validTagNameFollower.test(parser.nextChar())||parser.error("Illegal tag name"),parser.sp(),parser.inTag=!0;attribute=readMustache(parser);){ !1!==attribute&&(element.m||(element.m=[]),element.m.push(attribute)),parser.sp(); }if(parser.inTag=!1,parser.sp(),parser.matchString("/")&&(selfClosing=!0),!parser.matchString(">")){ return null; }var lowerCaseName=(element.e||element.n).toLowerCase(),preserveWhitespace=parser.preserveWhitespace;if(!selfClosing&&(anchor||!voidElements[element.e.toLowerCase()])){anchor||(parser.elementStack.push(lowerCaseName),lowerCaseName in parser.interpolate&&(parser.inside=lowerCaseName)),children=[],partials=create(null);do{if(pos=parser.pos,!(remaining=parser.remaining())){if("script"===parser.inside){closed=!0;break}parser.error("Missing end "+(parser.elementStack.length>1?"tags":"tag")+" ("+parser.elementStack.reverse().map((function(x){return"</"+x+">"})).join("")+")")}if(anchor||canContain(lowerCaseName,remaining)){ if(!anchor&&(closingTag=readClosingTag(parser))){closed=!0;var closingTagName=closingTag.e.toLowerCase();if(closingTagName!==lowerCaseName&&(parser.pos=pos,!~parser.elementStack.indexOf(closingTagName))){var errorMessage="Unexpected closing tag";voidElements[closingTagName.toLowerCase()]&&(errorMessage+=" (<"+closingTagName+"> is a void element - it cannot contain children)"),parser.error(errorMessage)}}else if(anchor&&readAnchorClose(parser,element.n)){ closed=!0; }else{var tag={open:parser.standardDelimiters[0],close:parser.standardDelimiters[1]};readClosing(parser,tag)||readInline(parser,tag)?(closed=!0,parser.pos=pos):(child=parser.read(PARTIAL_READERS))?(partials[child.n]&&(parser.pos=pos,parser.error("Duplicate partial definition")),cleanup(child.f,parser.stripComments,preserveWhitespace,!preserveWhitespace,!preserveWhitespace,parser.whiteSpaceElements),partials[child.n]=child.f,hasPartials=!0):(child=parser.read(READERS))?children.push(child):closed=!0} }else { closed=!0 }}while(!closed);children.length&&(element.f=children),hasPartials&&(element.p=partials),parser.elementStack.pop()}if(parser.inside=null,parser.sanitizeElements&&-1!==parser.sanitizeElements.indexOf(lowerCaseName)){ return exclude; }if(element.m&&"input"!==lowerCaseName&&"select"!==lowerCaseName&&"textarea"!==lowerCaseName&&"option"!==lowerCaseName){for(var classes,styles,cls,style,a,attrs=element.m,i=0;i<attrs.length;){ (a=attrs[i]).t===ATTRIBUTE?0!==a.n.indexOf("class-")||a.f?0===a.n.indexOf("style-")&&isString(a.f)?((styles||(styles=[])).push(hyphenateCamel(a.n.slice(6))+": "+a.f+";"),attrs.splice(i,1)):"class"===a.n&&isString(a.f)?((classes||(classes=[])).push(a.f),attrs.splice(i,1)):"style"===a.n&&isString(a.f)?((styles||(styles=[])).push(a.f+";"),attrs.splice(i,1)):"class"===a.n?(cls=a,i++):"style"===a.n?(style=a,i++):!~a.n.indexOf(":")&&"value"!==a.n&&"contenteditable"!==a.n&&isString(a.f)?(a.g=1,i++):i++:((classes||(classes=[])).push(a.n.slice(6)),attrs.splice(i,1)):i++; }classes?cls&&isString(cls.f)?cls.f+=" "+classes.join(" "):attrs.unshift({t:ATTRIBUTE,n:"class",f:classes.join(" "),g:1}):cls&&isString(cls.f)&&(cls.g=1),styles?style&&isString(style.f)?style.f+="; "+styles.join(" "):attrs.unshift({t:ATTRIBUTE,n:"style",f:styles.join(" "),g:1}):style&&isString(style.f)&&(style.g=1)}return element},function(parser){var index,disallowed,barrier,remaining=parser.remaining();return parser.textOnlyMode?index=getLowestIndex(remaining,disallowed=(disallowed=parser.tags.map((function(t){return t.open}))).concat(parser.tags.map((function(t){return"\\"+t.open})))):(barrier=parser.inside?"</"+parser.inside:"<",parser.inside&&!parser.interpolate[parser.inside]?index=remaining.indexOf(barrier):(disallowed=(disallowed=parser.tags.map((function(t){return t.open}))).concat(parser.tags.map((function(t){return"\\"+t.open}))),!0===parser.inAttribute?disallowed.push('"',"'","=","<",">","`"):parser.inAttribute?disallowed.push(parser.inAttribute):disallowed.push(barrier),index=getLowestIndex(remaining,disallowed))),index?(-1===index&&(index=remaining.length),parser.pos+=index,parser.inside&&"textarea"!==parser.inside||parser.textOnlyMode?remaining.substr(0,index):decodeCharacterReferences(remaining.substr(0,index))):null}],PARTIAL_READERS=[function(parser){var child,closed,start=parser.pos,delimiters=parser.standardDelimiters;if(!parser.matchString(delimiters[0])){ return null; }if(!parser.matchPattern(partialDefinitionSectionPattern)){ return parser.pos=start,null; }var name=parser.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/);name||parser.error("expected legal partial name"),parser.sp(),parser.matchString(delimiters[1])||parser.error("Expected closing delimiter '"+delimiters[1]+"'");var content=[],open=delimiters[0],close=delimiters[1];do{(child=readClosing(parser,{open:open,close:close}))?("partial"!==child.r&&parser.error("Expected "+open+"/partial"+close),closed=!0):((child=parser.read(READERS))||parser.error("Expected "+open+"/partial"+close),content.push(child))}while(!closed);return{t:INLINE_PARTIAL,n:name,f:content}}],preserveWhitespaceElements={pre:1,script:1,style:1,textarea:1},defaultInterpolate={textarea:!0,script:!0,style:!0,template:!0},StandardParser=Parser.extend({init:function(str,options){var tripleDelimiters=options.tripleDelimiters||shared.defaults.tripleDelimiters,staticDelimiters=options.staticDelimiters||shared.defaults.staticDelimiters,staticTripleDelimiters=options.staticTripleDelimiters||shared.defaults.staticTripleDelimiters;this.standardDelimiters=options.delimiters||shared.defaults.delimiters,this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:STANDARD_READERS},{isStatic:!1,isTriple:!0,open:tripleDelimiters[0],close:tripleDelimiters[1],readers:TRIPLE_READERS},{isStatic:!0,isTriple:!1,open:staticDelimiters[0],close:staticDelimiters[1],readers:STANDARD_READERS},{isStatic:!0,isTriple:!0,open:staticTripleDelimiters[0],close:staticTripleDelimiters[1],readers:TRIPLE_READERS}],this.contextLines=options.contextLines||shared.defaults.contextLines,this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate=assign({},defaultInterpolate,shared.defaults.interpolate,options.interpolate),!0===options.sanitize&&(options.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=!1!==options.stripComments,this.preserveWhitespace=!isObjectType(options.preserveWhitespace)&&options.preserveWhitespace,this.sanitizeElements=options.sanitize&&options.sanitize.elements,this.sanitizeEventAttributes=options.sanitize&&options.sanitize.eventAttributes,this.includeLinePositions=options.includeLinePositions,this.textOnlyMode=options.textOnlyMode,this.csp=options.csp,this.allowExpressions=options.allowExpressions,options.expression&&(this.converters=[readExpression]),options.attributes&&(this.inTag=!0),this.whiteSpaceElements=assign({},options.preserveWhitespace,preserveWhitespaceElements)},postProcess:function(result,options){if(options.expression){var expr=flattenExpression(result[0]);return expr.e=fromExpression(expr.s,expr.r.length),expr}if(!result.length){ return{t:[],v:TEMPLATE_VERSION}; }if(this.sectionDepth>0&&this.error("A section was left open"),cleanup(result[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace,this.whiteSpaceElements),!1!==this.csp){var expr$1={};insertExpressions(result[0].t,expr$1),keys(expr$1).length&&(result[0].e=expr$1)}return result[0]},converters:[function(parser){for(var fragment=[],partials=create(null),hasPartials=!1,preserveWhitespace=parser.preserveWhitespace;parser.pos<parser.str.length;){var partial,pos=parser.pos,item=void 0;(partial=parser.read(PARTIAL_READERS))?(partials[partial.n]&&(parser.pos=pos,parser.error("Duplicated partial definition")),cleanup(partial.f,parser.stripComments,preserveWhitespace,!preserveWhitespace,!preserveWhitespace,parser.whiteSpaceElements),partials[partial.n]=partial.f,hasPartials=!0):(item=parser.read(READERS))?fragment.push(item):parser.error("Unexpected template content")}var result={v:TEMPLATE_VERSION,t:fragment};return hasPartials&&(result.p=partials),result}],sortMustacheTags:function(){this.tags.sort((function(a,b){return b.open.length-a.open.length}))}});function parse(template,options){return new StandardParser(template,options||{}).result}var parseOptions=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","sanitize","stripComments","contextLines","allowExpressions","attributes"],TEMPLATE_INSTRUCTIONS="Either preparse or use a ractive runtime source that includes the parser. ",COMPUTATION_INSTRUCTIONS="Either include a version of Ractive that can parse or convert your computation strings to functions.";function throwNoParse(method,error,instructions){method||fatal("Missing Ractive.parse - cannot parse "+error+". "+instructions)}function createFunctionFromString(str,bindTo){throwNoParse(parse,'compution string "${str}"',COMPUTATION_INSTRUCTIONS);var tpl=parse(str,{expression:!0});return function(){return tpl.e.apply(bindTo,tpl.r.map((function(r){return bindTo.get(r)})))}}var parser={fromId:function(id,options){if(!doc){if(options&&options.noThrow){ return; }throw new Error("Cannot retrieve template #"+id+" as Ractive is not running in a browser.")}var template;if(id&&(id=id.replace(/^#/,"")),!(template=doc.getElementById(id))){if(options&&options.noThrow){ return; }throw new Error("Could not find template element with id #"+id)}if("SCRIPT"!==template.tagName.toUpperCase()){if(options&&options.noThrow){ return; }throw new Error("Template element with id #"+id+", must be a <script> element")}return"textContent"in template?template.textContent:template.innerHTML},isParsed:function(template){return!isString(template)},getParseOptions:function(ractive){return ractive.defaults&&(ractive=ractive.defaults),parseOptions.reduce((function(val,key){return val[key]=ractive[key],val}),{})},parse:function(template,options){throwNoParse(parse,"template",TEMPLATE_INSTRUCTIONS);var parsed=parse(template,options);return addFunctions(parsed),parsed},parseFor:function(template,ractive){return this.parse(template,this.getParseOptions(ractive))}};function getComputationSignature(ractive,key,signature){var getter,setter,getterString,getterUseStack,setterString;return isFunction(signature)&&(getter=bind(signature,ractive),getterString=signature.toString(),getterUseStack=!0),isString(signature)&&(getter=createFunctionFromString(signature,ractive),getterString=signature),isObjectType(signature)&&(isString(signature.get)?(getter=createFunctionFromString(signature.get,ractive),getterString=signature.get):isFunction(signature.get)?(getter=bind(signature.get,ractive),getterString=signature.get.toString(),getterUseStack=!0):fatal("`%s` computation must have a `get()` method",key),isFunction(signature.set)&&(setter=bind(signature.set,ractive),setterString=signature.set.toString())),{getter:getter,setter:setter,getterString:getterString,setterString:setterString,getterUseStack:getterUseStack}}var batch,TransitionManager=function(callback,parent){this.callback=callback,this.parent=parent,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,parent&&parent.addChild(this)},TransitionManager__proto__=TransitionManager.prototype;function check(tm){!tm.ready||tm.outros.length||tm.outroChildren||(tm.outrosComplete||(tm.outrosComplete=!0,tm.parent&&!tm.parent.outrosComplete?tm.parent.decrementOutros(tm):tm.detachNodes()),tm.intros.length||tm.totalChildren||(isFunction(tm.callback)&&tm.callback(),tm.parent&&!tm.notifiedTotal&&(tm.notifiedTotal=!0,tm.parent.decrementTotal())))}TransitionManager__proto__.add=function(transition){var list=transition.isIntro?this.intros:this.outros;transition.starting=!0,list.push(transition)},TransitionManager__proto__.addChild=function(child){this.children.push(child),this.totalChildren+=1,this.outroChildren+=1},TransitionManager__proto__.decrementOutros=function(){this.outroChildren-=1,check(this)},TransitionManager__proto__.decrementTotal=function(){this.totalChildren-=1,check(this)},TransitionManager__proto__.detachNodes=function(){
var this$1 = this;
for(var len=this.detachQueue.length,i=0;i<len;i++){ this$1.detachQueue[i].detach(); }len=this.children.length;for(var i$1=0;i$1<len;i$1++){ this$1.children[i$1].detachNodes(); }this.detachQueue=[]},TransitionManager__proto__.ready=function(){this.detachQueue.length&&(function(manager){var queue=manager.detachQueue,outros=(function collectAllOutros(manager,_list){var list=_list;if(list){for(var i=manager.children.length;i--;){ list=collectAllOutros(manager.children[i],list); }return manager.outros.length&&(list=list.concat(manager.outros)),list}list=[];for(var parent=manager;parent.parent;){ parent=parent.parent; }return collectAllOutros(parent,list)})(manager);if(outros.length){var node,trans,i=queue.length,j=0,nqueue=manager.detachQueue=[];start:for(;i--;){for(node=queue[i].node,j=outros.length;j--;){ if((trans=outros[j].element.node)===node||trans.contains(node)||node.contains(trans)){nqueue.push(queue[i]);continue start} }queue[i].detach()}}else { manager.detachNodes() }})(this)},TransitionManager__proto__.remove=function(transition){removeFromArray(transition.isIntro?this.intros:this.outros,transition),check(this)},TransitionManager__proto__.start=function(){this.children.forEach((function(c){return c.start()})),this.intros.concat(this.outros).forEach((function(t){return t.start()})),this.ready=!0,check(this)};var runloop={active:function(){return!!batch},start:function(){var fulfilPromise,promise=new Promise(function(f){return fulfilPromise=f});return batch={previousBatch:batch,transitionManager:new TransitionManager(fulfilPromise,batch&&batch.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],promise:promise},promise},end:function(){!(function flushChanges(){var which=batch.immediateObservers;batch.immediateObservers=[];which.forEach(dispatch);var i=batch.fragments.length;which=batch.fragments;batch.fragments=[];for(;i--;){ which[i].update(); }batch.transitionManager.ready();which=batch.deferredObservers;batch.deferredObservers=[];which.forEach(dispatch);var tasks=batch.tasks;batch.tasks=[];for(i=0;i<tasks.length;i+=1){ tasks[i](); }if(batch.fragments.length||batch.immediateObservers.length||batch.deferredObservers.length||batch.tasks.length){ return flushChanges() }})(),batch.previousBatch||batch.transitionManager.start(),batch=batch.previousBatch},addFragment:function(fragment){addToArray(batch.fragments,fragment)},addFragmentToRoot:function(fragment){if(batch){for(var b=batch;b.previousBatch;){ b=b.previousBatch; }addToArray(b.fragments,fragment)}},addObserver:function(observer,defer){batch?addToArray(defer?batch.deferredObservers:batch.immediateObservers,observer):observer.dispatch()},registerTransition:function(transition){transition._manager=batch.transitionManager,batch.transitionManager.add(transition)},detachWhenReady:function(thing){batch.transitionManager.detachQueue.push(thing)},scheduleTask:function(task,postRender){var _batch;if(batch){for(_batch=batch;postRender&&_batch.previousBatch;){ _batch=_batch.previousBatch; }_batch.tasks.push(task)}else { task() }},promise:function(){if(!batch){ return Promise.resolve(); }for(var target=batch;target.previousBatch;){ target=target.previousBatch; }return target.promise||Promise.resolve()}};function dispatch(observer){observer.dispatch()}var tickers=[],running=!1;function tick(){runloop.start();var i,now=performance.now();for(i=0;i<tickers.length;i+=1){ tickers[i].tick(now)||tickers.splice(i--,1); }runloop.end(),tickers.length?requestAnimationFrame(tick):running=!1}var Ticker=function(options){this.duration=options.duration,this.step=options.step,this.complete=options.complete,this.easing=options.easing,this.start=performance.now(),this.end=this.start+this.duration,this.running=!0,tickers.push(this),running||requestAnimationFrame(tick)},Ticker__proto__=Ticker.prototype;Ticker__proto__.tick=function(now){if(!this.running){ return!1; }if(now>this.end){ return this.step&&this.step(1),this.complete&&this.complete(1),!1; }var elapsed=now-this.start,eased=this.easing(elapsed/this.duration);return this.step&&this.step(eased),!0},Ticker__proto__.stop=function(){this.abort&&this.abort(),this.running=!1};var prefixers={};function getPrefixer(rootKeypath){var rootDot;return prefixers[rootKeypath]||(rootDot=rootKeypath?rootKeypath+".":"",prefixers[rootKeypath]=function(relativeKeypath,value){var obj;return isString(relativeKeypath)?((obj={})[rootDot+relativeKeypath]=value,obj):isObjectType(relativeKeypath)?rootDot?(function(obj,prefix){var prefixed={};if(!prefix){ return obj; }for(var key in prefix+=".",obj){ hasOwn(obj,key)&&(prefixed[prefix+key]=obj[key]); }return prefixed})(relativeKeypath,rootKeypath):relativeKeypath:void 0}),prefixers[rootKeypath]}var shared$1={},Model=(function(ModelBase){function Model(parent,key){ModelBase.call(this,parent),this.ticker=null,parent&&(this.key=unescapeKey(key),this.isReadonly=parent.isReadonly,parent.value&&(this.value=parent.value[this.key],isArray(this.value)&&(this.length=this.value.length),this.adapt()))}ModelBase&&(Model.__proto__=ModelBase);var Model__proto__=Model.prototype=Object.create(ModelBase&&ModelBase.prototype);return Model__proto__.constructor=Model,Model__proto__.adapt=function(){
var this$1 = this;
var adaptors=this.root.adaptors,len=adaptors.length;if(this.rewrap=!1,0!==len){var i,value=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,ractive=this.root.ractive,keypath=this.getKeypath();if(this.wrapper){if(!(this.wrapperValue!==value&&(!this.wrapper.reset||!1===this.wrapper.reset(value)))){ return delete this.newWrapperValue,void(this.value=this.wrapper.get()); }if(this.wrapper.teardown(),delete this.wrapper,delete this.wrapperValue,void 0!==this.value){var parentValue=this.parent.value||this.parent.createBranch(this.key);parentValue[this.key]!==value&&(parentValue[this.key]=value),this.value=value}}for(i=0;i<len;i+=1){var adaptor=adaptors[i];if(adaptor.filter(value,keypath,ractive)){this$1.wrapper=adaptor.wrap(ractive,value,keypath,getPrefixer(keypath)),this$1.wrapperValue=value,this$1.wrapper.__model=this$1,this$1.value=this$1.wrapper.get();break}}}},Model__proto__.animate=function(from,to,options,interpolator){var fulfilPromise,this$1=this;this.ticker&&this.ticker.stop();var promise=new Promise(function(fulfil){return fulfilPromise=fulfil});return this.ticker=new Ticker({duration:options.duration,easing:options.easing,step:function(t){var value=interpolator(t);this$1.applyValue(value),options.step&&options.step(t,value)},complete:function(){this$1.applyValue(to),options.complete&&options.complete(to),this$1.ticker=null,fulfilPromise(to)}}),promise.stop=this.ticker.stop,promise},Model__proto__.applyValue=function(value,notify){if(void 0===notify&&(notify=!0),!isEqual(value,this.value)){if(this.boundValue&&(this.boundValue=null),this.parent.wrapper&&this.parent.wrapper.set){ this.parent.wrapper.set(this.key,value),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value),this.adapt(); }else if(this.wrapper){ this.newWrapperValue=value,this.adapt(); }else{var parentValue=this.parent.value||this.parent.createBranch(this.key);if(!isObjectLike(parentValue)){ return void warnIfDebug("Attempted to set a property of a non-object '"+this.getKeypath()+"'"); }parentValue[this.key]=value,this.value=value,this.adapt()}isArray(value)?(this.length=value.length,this.isArray=!0):this.isArray=!1,this.links.forEach(handleChange),this.children.forEach(mark),this.deps.forEach(handleChange),notify&&this.notifyUpstream(),this.parent.isArray&&("length"===this.key?this.parent.length=value:this.parent.joinKey("length").mark())}},Model__proto__.compute=function(key,computed){var registry=this.computed||(this.computed={});return registry[key]?(registry[key].signature=getComputationSignature(this.root.ractive,key,computed),registry[key].mark()):registry[key]=new shared$1.Computation(this,getComputationSignature(this.root.ractive,key,computed),key),registry[key]},Model__proto__.createBranch=function(key){var branch=isNumeric(key)?[]:{};return this.applyValue(branch,!1),branch},Model__proto__.get=function(shouldCapture,opts){return this._link?this._link.get(shouldCapture,opts):(shouldCapture&&capture(this),opts&&opts.virtual?this.getVirtual(!1):maybeBind(this,(opts&&"unwrap"in opts?!1!==opts.unwrap:shouldCapture)&&this.wrapper?this.wrapperValue:this.value,!opts||!1!==opts.shouldBind))},Model__proto__.joinKey=function(key,opts){
var this$1 = this;
var child,computed;if(this._link){ return!opts||!1===opts.lastLink||void 0!==key&&""!==key?this._link.joinKey(key):this; }if(void 0===key||""===key){ return this; }if(!(child=hasOwn(this.childByKey,key)?this.childByKey[key]:this.computed&&this.computed[key])){ if(this.isRoot&&this.ractive&&(computed=this.ractive.computed[key])){ child=this.compute(key,computed); }else if(!this.isRoot&&this.root.ractive){var registry=this.root.ractive.computed;for(var k in registry){ (computed=registry[k]).pattern&&computed.pattern.test(this$1.getKeypath()+"."+key)&&(child=this$1.compute(key,computed)) }} }return child||(child=new Model(this,key),this.children.push(child),this.childByKey[key]=child),!child._link||opts&&!1===opts.lastLink?child:child._link},Model__proto__.mark=function(force){if(this._link){ return this._link.mark(force); }var old=this.value,value=this.retrieve();!force&&isEqual(value,old)||(this.value=value,this.boundValue&&(this.boundValue=null),(old!==value||this.rewrap)&&(this.wrapper&&(this.newWrapperValue=value),this.adapt()),isArray(value)?(this.length=value.length,this.isArray=!0):this.isArray=!1,this.children.forEach(force?markForce:mark),this.links.forEach(marked),this.deps.forEach(handleChange))},Model__proto__.merge=function(array,comparator){var newIndices=buildNewIndices(this.value===array?(function(model){for(var array=[],i=0;i<model.length;i++){ array[i]=(model.childByKey[i]||{}).value; }return array})(this):this.value,array,comparator);this.parent.value[this.key]=array,this.shuffle(newIndices,!0)},Model__proto__.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},Model__proto__.set=function(value){this.ticker&&this.ticker.stop(),this.applyValue(value)},Model__proto__.shuffle=function(newIndices,unsafe){shuffle(this,newIndices,!1,unsafe)},Model__proto__.source=function(){return this},Model__proto__.teardown=function(){var this$1=this;this._link&&(this._link.teardown(),this._link=null),this.children.forEach(teardown),this.wrapper&&this.wrapper.teardown(),this.computed&&keys(this.computed).forEach((function(k){return this$1.computed[k].teardown()}))},Model})(ModelBase);var data={},SharedModel=(function(Model){function SharedModel(value,name){Model.call(this,null,"@"+name),this.key="@"+name,this.value=value,this.isRoot=!0,this.root=this,this.adaptors=[]}Model&&(SharedModel.__proto__=Model);var SharedModel__proto__=SharedModel.prototype=Object.create(Model&&Model.prototype);return SharedModel__proto__.constructor=SharedModel,SharedModel__proto__.getKeypath=function(){return this.key},SharedModel__proto__.retrieve=function(){return this.value},SharedModel})(Model),SharedModel$1=new SharedModel(data,"shared"),GlobalModel=new SharedModel(void 0!==global?global:window,"global");function resolveReference(fragment,ref){var initialFragment=fragment;if("."===ref){ return fragment.findContext(); }if("~"===ref[0]){ return fragment.ractive.viewmodel.joinAll(splitKeypath(ref.slice(2))); }if("."===ref[0]||"^"===ref[0]){for(var frag=fragment,parts=ref.split("/"),explicitContext="^^"===parts[0];frag&&!frag.context;){ frag=up(frag); }for(var context$1=frag&&frag.context;frag&&"^^"===parts[0];){for(parts.shift(),frag=frag.isIteration?frag.parent.parent:up(frag);frag&&!frag.context;){ frag=up(frag); }context$1=frag&&frag.context}if(!context$1&&explicitContext){ throw new Error("Invalid context parent reference ('"+ref+"'). There is not context at that level."); }for(;"."===parts[0]||".."===parts[0];){".."===parts.shift()&&(context$1=context$1.parent)}return"."===(ref=parts.join("/"))[0]&&(ref=ref.slice(1)),context$1.joinAll(splitKeypath(ref))}var keys$$1=splitKeypath(ref);if(keys$$1.length){var base=keys$$1.shift();if("@"===base[0]){if("@this"===base||"@"===base){ return fragment.ractive.viewmodel.getRactiveModel().joinAll(keys$$1); }if("@index"===base||"@key"===base){keys$$1.length&&badReference(base);var repeater=findIter(fragment);return repeater&&repeater["get"+("i"===base[1]?"Index":"Key")]()}if("@last"===base){var repeater$1=findIter(fragment);return repeater$1&&repeater$1.parent.getLast()}if("@global"===base){ return GlobalModel.joinAll(keys$$1); }if("@shared"===base){ return SharedModel$1.joinAll(keys$$1); }if("@keypath"===base||"@rootpath"===base){for(var root="r"===ref[1]?fragment.ractive.root:null,f=fragment;f&&(!f.context||f.isRoot&&f.ractive.component&&(root||!f.ractive.isolated));){ f=f.isRoot?f.componentParent:f.parent; }return f.getKeypath(root)}if("@context"===base){ return new ContextModel(fragment.getContext()); }if("@local"===base){ return fragment.getContext()._data.joinAll(keys$$1); }if("@style"===base){ return fragment.ractive.constructor._cssModel.joinAll(keys$$1); }if("@helpers"===base){ return fragment.ractive.viewmodel.getHelpers().joinAll(keys$$1); }throw new Error("Invalid special reference '"+base+"'")}if(base&&!keys$$1.length){var helpers=fragment.ractive.viewmodel.getHelpers();if(helpers.has(base)){ return helpers.joinKey(base) }}var context=(function(fragment){for(var frag=fragment;frag&&!frag.context&&!frag.aliases;){ frag=frag.parent; }return frag})(fragment);if(context){ if(context.context){if((context=context.context).has(base)){ return context.joinKey(base).joinAll(keys$$1) }}else { context=fragment.findContext(); } }else { context=fragment.findContext(); }for(var model,createMapping=!1,shouldWarn=fragment.ractive.warnAboutAmbiguity,crossed=0;fragment;){if(fragment.isIteration&&(base===fragment.parent.keyRef?model=fragment.getKey():base===fragment.parent.indexRef&&(model=fragment.getIndex()),model&&keys$$1.length&&badReference(base)),!model&&fragment.aliases&&hasOwn(fragment.aliases,base)&&(model=fragment.aliases[base]),!model&&fragment.context&&fragment.context.has(base)&&(model=fragment.context.joinKey(base),createMapping?shouldWarn&&warnIfDebug("'"+ref+"' resolved but is ambiguous and will create a mapping to a parent component."):shouldWarn&&crossed&&warnIfDebug("'"+ref+"' resolved but is ambiguous.")),model){ return createMapping&&(model=initialFragment.ractive.viewmodel.createLink(base,model,base,{implicit:!0})),keys$$1.length>0&&isFunction(model.joinAll)&&(model=model.joinAll(keys$$1)),model; }fragment.context&&!fragment.aliases&&(crossed=1),(fragment.componentParent||!fragment.parent&&fragment.ractive.component)&&!fragment.ractive.isolated?(fragment=fragment.componentParent||fragment.ractive.component.up,createMapping=!0):fragment=fragment.parent}var instance=initialFragment.ractive;return instance.resolveInstanceMembers&&"data"!==base&&base in instance?instance.viewmodel.getRactiveModel().joinKey(base).joinAll(keys$$1):(shouldWarn&&warnIfDebug("'"+ref+"' is ambiguous and did not resolve."),context.joinKey(base).joinAll(keys$$1))}}function up(fragment){return fragment&&(!fragment.ractive.isolated&&fragment.componentParent||fragment.parent)}function findIter(start){for(var next,fragment=start;!fragment.isIteration&&(next=up(fragment));){ fragment=next; }return fragment.isIteration&&fragment}function badReference(key){throw new Error("An index or key reference ("+key+") cannot have child properties")}var ContextModel=function(context){this.context=context},ContextModel__proto__=ContextModel.prototype;ContextModel__proto__.get=function(){return this.context},ContextModel__proto__.getKeypath=function(){return"@context"};var extern={};function getRactiveContext(ractive){
var arguments$1 = arguments;
for(var assigns=[],len=arguments.length-1;len-- >0;){ assigns[len]=arguments$1[len+1]; }var fragment=ractive.fragment||ractive._fakeFragment||(ractive._fakeFragment=new FakeFragment(ractive));return fragment.getContext.apply(fragment,assigns)}function getContext(){
var arguments$1 = arguments;
for(var assigns=[],len=arguments.length;len--;){ assigns[len]=arguments$1[len]; }return this.ctx||(this.ctx=new extern.Context(this)),assigns.unshift(create(this.ctx)),assign.apply(null,assigns)}var FakeFragment=function(ractive){this.ractive=ractive};FakeFragment.prototype.findContext=function(){return this.ractive.viewmodel};var proto=FakeFragment.prototype;function findParentWithContext(fragment){for(var frag=fragment;frag&&!frag.context;){ frag=frag.parent; }return frag||fragment&&fragment.ractive.fragment}proto.getContext=getContext,proto.find=proto.findComponent=proto.findAll=proto.findAllComponents=noop;var keep=!1;function set(pairs,options){var k=keep,deep=options&&options.deep,shuffle=options&&options.shuffle,promise=runloop.start();options&&"keep"in options&&(keep=options.keep);for(var i=pairs.length;i--;){var model=pairs[i][0],value=pairs[i][1],keypath=pairs[i][2];if(!model){ throw runloop.end(),new Error("Failed to set invalid keypath '"+keypath+"'"); }if(deep){ deepSet(model,value); }else if(shuffle){var array=value,target=model.get();if(array||(array=target),void 0===target){ model.set(array); }else{if(!isArray(target)||!isArray(array)){ throw runloop.end(),new Error("You cannot merge an array with a non-array"); }var comparator=getComparator(shuffle);model.merge(array,comparator)}}else { model.set(value) }}return runloop.end(),keep=k,promise}var star=/\*/;function gather(ractive,keypath,base,isolated){if(!base&&("."===keypath[0]||"^"===keypath[1])){ return warnIfDebug("Attempted to set a relative keypath from a non-relative context. You can use a context object to set relative keypaths."),[]; }var keys$$1=splitKeypath(keypath),model=base||ractive.viewmodel;return star.test(keypath)?model.findMatches(keys$$1):model===ractive.viewmodel?!ractive.component||ractive.isolated||model.has(keys$$1[0])||"@"===keypath[0]||!keypath[0]||isolated?[model.joinAll(keys$$1)]:[resolveReference(ractive.fragment||new FakeFragment(ractive),keypath)]:[model.joinAll(keys$$1)]}function build(ractive,keypath,value,isolated){var sets=[];if(isObject(keypath)){var loop=function(k){hasOwn(keypath,k)&&sets.push.apply(sets,gather(ractive,k,null,isolated).map((function(m){return[m,keypath[k],k]})))};for(var k in keypath){ loop(k) }}else { sets.push.apply(sets,gather(ractive,keypath,null,isolated).map((function(m){return[m,value,keypath]}))); }return sets}var deepOpts={virtual:!1};function deepSet(model,value){var dest=model.get(!1,deepOpts);if(null==dest||!isObjectType(value)){ return model.set(value); }if(!isObjectType(dest)){ return model.set(value); }for(var k in value){ hasOwn(value,k)&&deepSet(model.joinKey(k),value[k]) }}var comparators={};function getComparator(option){if(!0===option){ return null; }if(isFunction(option)){ return option; }if(isString(option)){ return comparators[option]||(comparators[option]=function(thing){return thing[option]}); }throw new Error("If supplied, options.compare must be a string, function, or true")}var errorMessage="Cannot add to a non-numeric value";function add(ractive,keypath,d,options){if(!isString(keypath)||!isNumeric(d)){ throw new Error("Bad arguments"); }return set(build(ractive,keypath,d,options&&options.isolated).map((function(pair){var model=pair[0],add=pair[1],value=model.get();if(!isNumeric(add)||!isNumeric(value)){ throw new Error(errorMessage); }return[model,value+add]})))}function immediate(value){var result=Promise.resolve(value);return defineProperty(result,"stop",{value:noop}),result}var linear=easing.linear;function animate(ractive,model,to,options){options=(function(options,instance){var easing$$1;return(options=options||{}).easing&&(easing$$1=isFunction(options.easing)?options.easing:instance.easing[options.easing]),{easing:easing$$1||linear,duration:"duration"in options?options.duration:400,complete:options.complete||noop,step:options.step||noop,interpolator:options.interpolator}})(options,ractive);var from=model.get();if(isEqual(from,to)){ return options.complete(options.to),immediate(to); }var interpolator=interpolate(from,to,ractive,options.interpolator);return interpolator?model.animate(from,to,options,interpolator):(runloop.start(),model.set(to),runloop.end(),immediate(to))}var initStars={},bubbleStars={};function variants(name,initial){var map=initial?initStars:bubbleStars;if(map[name]){ return map[name]; }var parts=name.split("."),result=[],base=!1;initial&&(parts.unshift("this"),base=!0);for(var max=Math.pow(2,parts.length)-(initial?1:0),i=0;i<max;i++){for(var join=[],j=0;j<parts.length;j++){ join.push(1&i>>j?"*":parts[j]); }result.unshift(join.join("."))}return base&&(parts.length>2?result.push.apply(result,variants(name,!1)):(result.push("*"),result.push(name))),map[name]=result,result}function fireEvent(ractive,eventName,context,args){if(void 0===args&&(args=[]),eventName){ return context.name=eventName,args.unshift(context),(function fireEventAs(ractive,eventNames,context,args,initialFire){void 0===initialFire&&(initialFire=!1);var bubble=!0;if(initialFire||ractive._nsSubs){!(function(ractive,event){ractive.event&&ractive._eventQueue.push(ractive.event),ractive.event=event})(ractive,context);for(var i=eventNames.length;i--;){ eventNames[i]in ractive._subs&&(bubble=notifySubscribers(ractive,ractive._subs[eventNames[i]],context,args)&&bubble); }!(function(ractive){ractive._eventQueue.length?ractive.event=ractive._eventQueue.pop():ractive.event=null})(ractive)}if(ractive.parent&&bubble){if(initialFire&&ractive.component){var fullName=ractive.component.name+"."+eventNames[eventNames.length-1];eventNames=variants(fullName,!1),context&&!context.component&&(context.component=ractive)}bubble=fireEventAs(ractive.parent,eventNames,context,args)}return bubble})(ractive,ractive._nsSubs?variants(eventName,!0):["*",eventName],context,args,!0) }}function notifySubscribers(ractive,subscribers,context,args){for(var originalEvent=null,stopEvent=!1,i=0,len=(subscribers=subscribers.slice()).length;i<len;i+=1){ subscribers[i].off||!1!==subscribers[i].handler.apply(ractive,args)||(stopEvent=!0); }return context&&stopEvent&&(originalEvent=context.event)&&(originalEvent.preventDefault&&originalEvent.preventDefault(),originalEvent.stopPropagation&&originalEvent.stopPropagation()),!stopEvent}var Hook=function(event){this.event=event,this.method="on"+event};function getChildQueue(queue,ractive){return queue[ractive._guid]||(queue[ractive._guid]=[])}Hook.prototype.fire=function(ractive,arg){var context=getRactiveContext(ractive),method=this.method;ractive[method]&&(arg?ractive[method](context,arg):ractive[method](context)),fireEvent(ractive,this.event,context,arg?[arg,ractive]:[ractive])};var HookQueue=function(event){this.hook=new Hook(event),this.inProcess={},this.queue={}},HookQueue__proto__=HookQueue.prototype;HookQueue__proto__.begin=function(ractive){this.inProcess[ractive._guid]=!0},HookQueue__proto__.end=function(ractive){var parent=ractive.parent;parent&&this.inProcess[parent._guid]?getChildQueue(this.queue,parent).push(ractive):(function fire(hookQueue,ractive){var childQueue=getChildQueue(hookQueue.queue,ractive);for(hookQueue.hook.fire(ractive);childQueue.length;){ fire(hookQueue,childQueue.shift()); }delete hookQueue.queue[ractive._guid]})(this,ractive),delete this.inProcess[ractive._guid]};var hooks={};function findAnchors(fragment,name){void 0===name&&(name=null);var res=[];return (function findAnchorsIn(item,name,result){item.isAnchor?name&&item.name!==name||result.push(item):item.items?item.items.forEach((function(i){return findAnchorsIn(i,name,result)})):item.iterations?item.iterations.forEach((function(i){return findAnchorsIn(i,name,result)})):item.fragment&&!item.component&&findAnchorsIn(item.fragment,name,result)})(fragment,name,res),res}function updateAnchors(instance,name){void 0===name&&(name=null);var anchors=findAnchors(instance.fragment,name),idxs={},children=instance._children.byName;anchors.forEach((function(a){var name=a.name;name in idxs||(idxs[name]=0);var idx=idxs[name],child=(children[name]||[])[idx];child&&child.lastBound!==a&&(child.lastBound&&child.lastBound.removeChild(child),a.addChild(child)),idxs[name]++}))}function bubble(){runloop.addFragment(this.instance.fragment)}function findNextNode(){if(this.anchor){ return this.anchor.findNextNode() }}function compute(path,computed){this.computed[path]=computed,(isString(computed)||isFunction(computed))&&(computed=this.computed[path]={get:computed});var keys=splitKeypath(path);if(!~path.indexOf("*")){var last=keys.pop();return this.viewmodel.joinAll(keys).compute(last,computed)}computed.pattern=new RegExp("^"+keys.map((function(k){return k.replace(/\*\*/g,"(.+)").replace(/\*/g,"((?:\\\\.|[^\\.])+)")})).join("\\.")+"$")}function findElement(start,orComponent,name){for(void 0===orComponent&&(orComponent=!0);start&&(start.type!==ELEMENT||name&&start.name!==name)&&(!orComponent||start.type!==COMPONENT&&start.type!==ANCHOR);){ start=start.owner?start.owner:start.component?start.containerFragment||start.component.up:start.parent?start.parent:start.up?start.up:void 0; }return start}function getNewIndices(length,methodName,args){var newIndices=[],spliceArguments=(function(length,methodName,args){switch(methodName){case"splice":for(void 0!==args[0]&&args[0]<0&&(args[0]=length+Math.max(args[0],-length)),void 0===args[0]&&(args[0]=0);args.length<2;){ args.push(length-args[0]); }return isNumber(args[1])||(args[1]=length-args[0]),args[1]=Math.min(args[1],length-args[0]),args;case"sort":case"reverse":return null;case"pop":return length?[length-1,1]:[0,0];case"push":return[length,0].concat(args);case"shift":return[0,length?1:0];case"unshift":return[0,0].concat(args)}})(length,methodName,args);if(!spliceArguments){ return null; }var i,balance=spliceArguments.length-2-spliceArguments[1],removeStart=Math.min(length,spliceArguments[0]),removeEnd=removeStart+spliceArguments[1];for(newIndices.startIndex=removeStart,i=0;i<removeStart;i+=1){ newIndices.push(i); }for(;i<removeEnd;i+=1){ newIndices.push(-1); }for(;i<length;i+=1){ newIndices.push(i+balance); }return newIndices.touchedFrom=0!==balance?spliceArguments[0]:length,newIndices}["construct","config","attachchild","detach","detachchild","insert","complete","reset","render","unrendering","unrender","teardown","destruct","update"].forEach((function(hook){hooks[hook]=new Hook(hook)})),hooks.init=new HookQueue("init");var arrayProto=Array.prototype;function makeArrayMethod(methodName){function model(mdl,args){var array=mdl.get();if(!isArray(array)){if(void 0===array){array=[];var result$1=arrayProto[methodName].apply(array,args),promise$1=runloop.start().then((function(){return result$1}));return mdl.set(array),runloop.end(),promise$1}throw new Error("shuffle array method "+methodName+" called on non-array at "+mdl.getKeypath())}var newIndices=getNewIndices(array.length,methodName,args),result=arrayProto[methodName].apply(array,args),promise=runloop.start().then((function(){return result}));return promise.result=result,newIndices?mdl.shuffle?mdl.shuffle(newIndices):mdl.mark():mdl.set(result),runloop.end(),promise}return{path:function(keypath){
var arguments$1 = arguments;
for(var args=[],len=arguments.length-1;len-- >0;){ args[len]=arguments$1[len+1]; }return model(this.viewmodel.joinAll(splitKeypath(keypath)),args)},model:model}}function update$1(ractive,model,options){model.parent&&model.parent.wrapper&&model.parent.adapt();var promise=runloop.start();return model.mark(options&&options.force),model.notifyUpstream(),runloop.end(),hooks.update.fire(ractive,model),promise}var modelPush=makeArrayMethod("push").model,modelPop=makeArrayMethod("pop").model,modelShift=makeArrayMethod("shift").model,modelUnshift=makeArrayMethod("unshift").model,modelSort=makeArrayMethod("sort").model,modelSplice=makeArrayMethod("splice").model,modelReverse=makeArrayMethod("reverse").model,ContextData=(function(Model){function ContextData(options){Model.call(this,null,null),this.isRoot=!0,this.root=this,this.value={},this.ractive=options.ractive,this.adaptors=[],this.context=options.context}Model&&(ContextData.__proto__=Model);var ContextData__proto__=ContextData.prototype=Object.create(Model&&Model.prototype);return ContextData__proto__.constructor=ContextData,ContextData__proto__.getKeypath=function(){return"@context.data"},ContextData__proto__.rebound=function(){},ContextData})(Model),Context=function(fragment,element){this.fragment=fragment,this.element=element||findElement(fragment),this.node=this.element&&this.element.node,this.ractive=fragment.ractive,this.root=this},Context__proto__=Context.prototype,prototypeAccessors={decorators:{},_data:{}};function build$1(ctx,keypath,value){var sets=[];if(isObject(keypath)){ for(var k in keypath){ hasOwn(keypath,k)&&sets.push([findModel(ctx,k).model,keypath[k]]); } }else { sets.push([findModel(ctx,keypath).model,value]); }return sets}function findModel(ctx,path){var frag=ctx.fragment;return isString(path)?{model:resolveReference(frag,path),instance:frag.ractive}:{model:frag.findContext(),instance:path}}function findEvent(el,name){return el.events&&el.events.find&&el.events.find((function(e){return~e.template.n.indexOf(name)}))}prototypeAccessors.decorators.get=function(){var items={};return this.element?(this.element.decorators.forEach((function(d){return items[d.name]=d.handle})),items):items},prototypeAccessors._data.get=function(){return this.model||(this.root.model=new ContextData({ractive:this.ractive,context:this.root}))},Context__proto__.add=function(keypath,d,options){var num=isNumber(d)?+d:1,opts=isObjectType(d)?d:options;return set(build$1(this,keypath,num).map((function(pair){var model=pair[0],val=pair[1],value=model.get();if(!isNumeric(val)||!isNumeric(value)){ throw new Error("Cannot add non-numeric value"); }return[model,value+val]})),opts)},Context__proto__.animate=function(keypath,value,options){var model=findModel(this,keypath).model;return animate(this.ractive,model,value,options)},Context__proto__.get=function(keypath){if(!keypath){ return this.fragment.findContext().get(!0); }var model=findModel(this,keypath).model;return model?model.get(!0):void 0},Context__proto__.getParent=function(component){var fragment=this.fragment;return fragment.context?fragment=findParentWithContext(fragment.parent||component&&fragment.componentParent):(fragment=findParentWithContext(fragment.parent||component&&fragment.componentParent))&&(fragment=findParentWithContext(fragment.parent||component&&fragment.componentParent)),fragment&&fragment!==this.fragment?fragment.getContext():void 0},Context__proto__.hasListener=function(name,bubble){var base,el=this.fragment.owner.component?this.fragment.owner:this.element||this.fragment.owner;do{if((base=el.component||el).template.t===ELEMENT&&findEvent(base,name)){ return!0; }(el=el.up&&el.up.owner)&&el.component&&(el=el.component)}while(el&&bubble)},Context__proto__.link=function(source,dest){var there=findModel(this,source).model,here=findModel(this,dest).model,promise=runloop.start();return here.link(there,source),runloop.end(),promise},Context__proto__.listen=function(event,handler){var el=this.element;return el.on(event,handler),{cancel:function(){el.off(event,handler)}}},Context__proto__.observe=function(keypath,callback,options){return void 0===options&&(options={}),isObject(keypath)&&(options=callback||{}),options.fragment=this.fragment,this.ractive.observe(keypath,callback,options)},Context__proto__.observeOnce=function(keypath,callback,options){return void 0===options&&(options={}),isObject(keypath)&&(options=callback||{}),options.fragment=this.fragment,this.ractive.observeOnce(keypath,callback,options)},Context__proto__.pop=function(keypath){return modelPop(findModel(this,keypath).model,[])},Context__proto__.push=function(keypath){
var arguments$1 = arguments;
for(var values=[],len=arguments.length-1;len-- >0;){ values[len]=arguments$1[len+1]; }return modelPush(findModel(this,keypath).model,values)},Context__proto__.raise=function(name,event){
var arguments$1 = arguments;
for(var args=[],len=arguments.length-2;len-- >0;){ args[len]=arguments$1[len+2]; }for(var ev,el=this.element;el;){if(el.component&&(el=el.component),ev=findEvent(el,name)){ return ev.fire(ev.element.getContext(event||{},!event||"original"in event?{}:{original:{}}),args); }el=el.up&&el.up.owner}},Context__proto__.readLink=function(keypath,options){return this.ractive.readLink(this.resolve(keypath),options)},Context__proto__.resolve=function(path,ractive){var ref=findModel(this,path),model=ref.model,instance=ref.instance;return model?model.getKeypath(ractive||instance):path},Context__proto__.reverse=function(keypath){return modelReverse(findModel(this,keypath).model,[])},Context__proto__.set=function(keypath,value,options){return set(build$1(this,keypath,value),options)},Context__proto__.shift=function(keypath){return modelShift(findModel(this,keypath).model,[])},Context__proto__.splice=function(keypath,index,drop){
var arguments$1 = arguments;
for(var add=[],len=arguments.length-3;len-- >0;){ add[len]=arguments$1[len+3]; }return add.unshift(index,drop),modelSplice(findModel(this,keypath).model,add)},Context__proto__.sort=function(keypath){return modelSort(findModel(this,keypath).model,[])},Context__proto__.subtract=function(keypath,d,options){var num=isNumber(d)?d:1,opts=isObjectType(d)?d:options;return set(build$1(this,keypath,num).map((function(pair){var model=pair[0],val=pair[1],value=model.get();if(!isNumeric(val)||!isNumeric(value)){ throw new Error("Cannot add non-numeric value"); }return[model,value-val]})),opts)},Context__proto__.toggle=function(keypath,options){var model=findModel(this,keypath).model;return set([[model,!model.get()]],options)},Context__proto__.unlink=function(dest){var here=findModel(this,dest).model,promise=runloop.start();return here.owner&&here.owner._link&&here.owner.unlink(),runloop.end(),promise},Context__proto__.unlisten=function(event,handler){this.element.off(event,handler)},Context__proto__.unshift=function(keypath){
var arguments$1 = arguments;
for(var add=[],len=arguments.length-1;len-- >0;){ add[len]=arguments$1[len+1]; }return modelUnshift(findModel(this,keypath).model,add)},Context__proto__.update=function(keypath,options){return update$1(this.ractive,findModel(this,keypath).model,options)},Context__proto__.updateModel=function(keypath,cascade){var model=findModel(this,keypath).model,promise=runloop.start();return model.updateFromBindings(cascade),runloop.end(),promise},Context__proto__.isBound=function(){return!!this.getBindingModel(this).model},Context__proto__.getBindingPath=function(ractive){var ref=this.getBindingModel(this),model=ref.model,instance=ref.instance;if(model){ return model.getKeypath(ractive||instance) }},Context__proto__.getBinding=function(){var model=this.getBindingModel(this).model;if(model){ return model.get(!0) }},Context__proto__.getBindingModel=function(ctx){var el=ctx.element;return{model:el.binding&&el.binding.model,instance:el.up.ractive}},Context__proto__.setBinding=function(value){return set([[this.getBindingModel(this).model,value]])},Object.defineProperties(Context__proto__,prototypeAccessors),Context.forRactive=getRactiveContext,extern.Context=Context;var query=doc&&doc.querySelector;function getContext$1(node){var instances;if(isString(node)&&query&&(node=query.call(document,node)),node){if(node._ractive){ return node._ractive.proxy.getContext(); }if((instances=node.__ractive_instances__)&&1===instances.length){ return getRactiveContext(instances[0]) }}}var createElement,matches,div,methodNames,unprefixed,prefixed,i,j,makeFunction,html="http://www.w3.org/1999/xhtml",svg$1="http://www.w3.org/2000/svg",namespaces={html:html,mathml:"http://www.w3.org/1998/Math/MathML",svg:svg$1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"};function createDocumentFragment(){return doc.createDocumentFragment()}function getElement(input){var output;if(input&&"boolean"!=typeof input){if(!win||!doc||!input){ return null; }if(input.nodeType){ return input; }if(isString(input)){if(!(output=doc.getElementById(input))&&doc.querySelector){ try{output=doc.querySelector(input)}catch(e){} }if(output&&output.nodeType){ return output }}return input[0]&&input[0].nodeType?input[0]:null}}if(createElement=svg?function(type,ns,extend){return ns&&ns!==html?extend?doc.createElementNS(ns,type,extend):doc.createElementNS(ns,type):extend?doc.createElement(type,extend):doc.createElement(type)}:function(type,ns,extend){if(ns&&ns!==html){ throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://ractive.js.org/support/#svgs for more information"; }return extend?doc.createElement(type,extend):doc.createElement(type)},isClient){for(div=createElement("div"),makeFunction=function(methodName){return function(node,selector){return node[methodName](selector)}},i=(methodNames=["matches","matchesSelector"]).length;i--&&!matches;){ if(unprefixed=methodNames[i],div[unprefixed]){ matches=makeFunction(unprefixed); }else { for(j=vendors.length;j--;){ if(prefixed=vendors[i]+unprefixed.substr(0,1).toUpperCase()+unprefixed.substring(1),div[prefixed]){matches=makeFunction(prefixed);break} } } }matches||(matches=function(node,selector){var parentNode,i;(parentNode=node.parentNode)||(div.innerHTML="",parentNode=div,node=node.cloneNode(),div.appendChild(node));var nodes=parentNode.querySelectorAll(selector);for(i=nodes.length;i--;){ if(nodes[i]===node){ return!0; } }return!1})}else { matches=null; }function detachNode(node){return node&&"unknown"!=typeof node.parentNode&&node.parentNode&&node.parentNode.removeChild(node),node}function safeToStringValue(value){return null==value||isNumber(value)&&isNaN(value)||!value.toString?"":""+value}function safeAttributeString(string){return safeToStringValue(string).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function isUpstream(check,start){for(var model=start;model;){if(model===check||model.owner===check){ return!0; }model=model.target||model.parent}}var Observer=function(ractive,model,callback,options){this.context=options.context||ractive,this.callback=callback,this.ractive=ractive,this.keypath=options.keypath,this.options=options,model&&this.resolved(model),isFunction(options.old)&&(this.oldContext=create(ractive),this.oldFn=options.old),!1!==options.init?(this.dirty=!0,this.dispatch()):updateOld(this),this.dirty=!1},Observer__proto__=Observer.prototype;function updateOld(observer,fresh){var next=fresh&&observer.model?observer.model.get():observer.newValue;observer.oldValue=observer.oldFn?observer.oldFn.call(observer.oldContext,void 0,next,observer.keypath):next}Observer__proto__.cancel=function(){this.cancelled=!0,this.model?this.model.unregister(this):this.resolver.unbind(),removeFromArray(this.ractive._observers,this)},Observer__proto__.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),updateOld(this,!0),this.dirty=!1)},Observer__proto__.handleChange=function(){var this$1=this;if(this.dirty){ this.newValue=this.model.get(); }else{var newValue=this.model.get();if(isEqual(newValue,this.oldValue)){ return; }if(this.newValue=newValue,this.options.strict&&this.newValue===this.oldValue){ return; }runloop.addObserver(this,this.options.defer),this.dirty=!0,this.options.once&&runloop.scheduleTask((function(){return this$1.cancel()}))}},Observer__proto__.rebind=function(next,previous){var this$1=this;if((next=rebindMatch(this.keypath,next,previous))===this.model){ return!1; }this.model&&this.model.unregister(this),next&&next.addShuffleTask((function(){return this$1.resolved(next)}))},Observer__proto__.resolved=function(model){this.model=model,this.oldValue=void 0,this.newValue=model.get(),model.register(this)};var star$1=/\*+/g,PatternObserver=function(ractive,baseModel,keys$$1,callback,options){var this$1=this;this.context=options.context||ractive,this.ractive=ractive,this.baseModel=baseModel,this.keys=keys$$1,this.callback=callback;var pattern=keys$$1.join("\\.").replace(star$1,"(.+)"),baseKeypath=this.baseKeypath=baseModel.getKeypath(ractive);this.pattern=new RegExp("^"+(baseKeypath?baseKeypath+"\\.":"")+pattern+"$"),this.recursive=1===keys$$1.length&&"**"===keys$$1[0],this.recursive&&(this.keys=["*"]),options.old&&(this.oldContext=create(ractive),this.oldFn=options.old),this.oldValues={},this.newValues={},this.defer=options.defer,this.once=options.once,this.strict=options.strict,this.dirty=!1,this.changed=[],this.partial=!1,this.links=options.links,baseModel.findMatches(this.keys).forEach((function(model){this$1.newValues[model.getKeypath(this$1.ractive)]=model.get()})),!1!==options.init?this.dispatch():updateOld$1(this,this.newValues),baseModel.registerPatternObserver(this)},PatternObserver__proto__=PatternObserver.prototype;function updateOld$1(observer,vals,partial){var olds=observer.oldValues;observer.oldFn?(partial||(observer.oldValues={}),keys(vals).forEach((function(k){var args=[olds[k],vals[k],k],parts=observer.pattern.exec(k);parts&&args.push.apply(args,parts.slice(1)),observer.oldValues[k]=observer.oldFn.apply(observer.oldContext,args)}))):partial?keys(vals).forEach((function(k){return olds[k]=vals[k]})):observer.oldValues=vals}function negativeOne(){return-1}PatternObserver__proto__.cancel=function(){this.baseModel.unregisterPatternObserver(this),removeFromArray(this.ractive._observers,this)},PatternObserver__proto__.dispatch=function(){var this$1=this,newValues=this.newValues;this.newValues={},keys(newValues).forEach((function(keypath){var newValue=newValues[keypath],oldValue=this$1.oldValues[keypath];if(!(this$1.strict&&newValue===oldValue||isEqual(newValue,oldValue))){var args=[newValue,oldValue,keypath];if(keypath){var wildcards=this$1.pattern.exec(keypath);wildcards&&(args=args.concat(wildcards.slice(1)))}this$1.callback.apply(this$1.context,args)}})),updateOld$1(this,newValues,this.partial),this.dirty=!1},PatternObserver__proto__.notify=function(key){this.changed.push(key)},PatternObserver__proto__.shuffle=function(newIndices){
var this$1 = this;
if(isArray(this.baseModel.value)){for(var max=this.baseModel.value.length,i=0;i<newIndices.length;i++){ -1!==newIndices[i]&&newIndices[i]!==i&&this$1.changed.push([i]); }for(var i$1=newIndices.touchedFrom;i$1<max;i$1++){ this$1.changed.push([i$1]) }}},PatternObserver__proto__.handleChange=function(){var this$1=this;if(!this.dirty||this.changed.length){if(this.dirty||(this.newValues={}),this.changed.length){var count=0;if(this.recursive){ this.changed.forEach((function(keys$$1){var model=this$1.baseModel.joinAll(keys$$1);model.isLink&&!this$1.links||(count++,this$1.newValues[model.getKeypath(this$1.ractive)]=model.get())})); }else{var ok=this.baseModel.isRoot?this.changed.map((function(keys$$1){return keys$$1.map(escapeKey).join(".")})):this.changed.map((function(keys$$1){return this$1.baseKeypath+"."+keys$$1.map(escapeKey).join(".")}));this.baseModel.findMatches(this.keys).forEach((function(model){var keypath=model.getKeypath(this$1.ractive);ok.filter((function(k){return 0===k.indexOf(keypath)&&(k.length===keypath.length||"."===k[keypath.length])||0===keypath.indexOf(k)&&(k.length===keypath.length||"."===keypath[k.length])})).length&&(count++,this$1.newValues[keypath]=model.get())}))}if(!count){ return; }this.partial=!0}else { this.baseModel.findMatches(this.keys).forEach((function(model){var keypath=model.getKeypath(this$1.ractive);this$1.newValues[keypath]=model.get()})),this.partial=!1; }runloop.addObserver(this,this.defer),this.dirty=!0,this.changed.length=0,this.once&&this.cancel()}};var ArrayObserver=function(ractive,model,callback,options){this.ractive=ractive,this.model=model,this.keypath=model.getKeypath(),this.callback=callback,this.options=options,this.pending=null,model.register(this),!1!==options.init?(this.sliced=[],this.shuffle([]),this.dispatch()):this.sliced=this.slice()},ArrayObserver__proto__=ArrayObserver.prototype;ArrayObserver__proto__.cancel=function(){this.model.unregister(this),removeFromArray(this.ractive._observers,this)},ArrayObserver__proto__.dispatch=function(){this.callback(this.pending),this.pending=null,this.options.once&&this.cancel()},ArrayObserver__proto__.handleChange=function(path){this.pending?runloop.addObserver(this,this.options.defer):path||(this.shuffle(this.sliced.map(negativeOne)),this.handleChange())},ArrayObserver__proto__.shuffle=function(newIndices){var start,this$1=this,newValue=this.slice(),inserted=[],deleted=[],hadIndex={};newIndices.forEach((function(newIndex,oldIndex){hadIndex[newIndex]=!0,newIndex!==oldIndex&&void 0===start&&(start=oldIndex),-1===newIndex&&deleted.push(this$1.sliced[oldIndex])})),void 0===start&&(start=newIndices.length);for(var len=newValue.length,i=0;i<len;i+=1){ hadIndex[i]||inserted.push(newValue[i]); }this.pending={inserted:inserted,deleted:deleted,start:start},this.sliced=newValue},ArrayObserver__proto__.slice=function(){var value=this.model.get();return isArray(value)?value.slice():[]};var onceOptions={init:!1,once:!0};var trim=function(str){return str.trim()},notEmptyString=function(str){return""!==str};var pop=makeArrayMethod("pop").path,push=makeArrayMethod("push").path;var PREFIX="/* Ractive.js component styles */",styleDefinitions=[],isDirty=!1,styleElement=null,useCssText=null;function addCSS(styleDefinition){styleDefinitions.push(styleDefinition),isDirty=!0}function applyCSS(force){var styleElement=style();styleElement&&(force||isDirty)&&(useCssText?styleElement.styleSheet.cssText=getCSS(null):styleElement.innerHTML=getCSS(null),isDirty=!1)}function getCSS(cssIds){var filteredStyleDefinitions=cssIds?styleDefinitions.filter((function(style){return~cssIds.indexOf(style.id)})):styleDefinitions;return filteredStyleDefinitions.forEach((function(d){return d.applied=!0})),filteredStyleDefinitions.reduce((function(styles,style){return styles?styles+"\n\n/* {"+style.id+"} */\n"+style.styles:""}),PREFIX)}function style(){return doc&&!styleElement&&((styleElement=doc.createElement("style")).type="text/css",styleElement.setAttribute("data-ractive-css",""),doc.getElementsByTagName("head")[0].appendChild(styleElement),useCssText=!!styleElement.styleSheet),styleElement}var adaptConfigurator={extend:function(Parent,proto,options){proto.adapt=combine(proto.adapt,ensureArray(options.adapt))},init:function(){}},remove=/\/\*(?:[\s\S]*?)\*\//g,escape=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,value=/\0(\d+)/g;function cleanCss(css,callback,additionalReplaceRules){void 0===additionalReplaceRules&&(additionalReplaceRules=[]);var values=[];return css=css.replace(escape,(function(match){return"\0"+(values.push(match)-1)})).replace(remove,""),additionalReplaceRules.forEach((function(pattern){css=css.replace(pattern,(function(match){return"\0"+(values.push(match)-1)}))})),callback(css,(function(css){return css.replace(value,(function(match,n){return values[n]}))}))}var selectorsPattern=/(?:^|\}|\{|\x01)\s*([^\{\}\0\x01]+)\s*(?=\{)/g,importPattern=/@import\s*\([^)]*\)\s*;?/gi,importEndPattern=/\x01/g,keyframesDeclarationPattern=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,selectorUnitPattern=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,excludePattern=/^(?:@|\d+%)/,dataRvcGuidPattern=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function trim$1(str){return str.trim()}function extractString(unit){return unit.str}function transformCss(css,id){var dataAttr='[data-ractive-css~="{'+id+'}"]';return dataRvcGuidPattern.test(css)?css.replace(dataRvcGuidPattern,dataAttr):cleanCss(css,(function(css,reconstruct){return reconstruct(css=css.replace(importPattern,"$&").replace(selectorsPattern,(function(match,$1){if(excludePattern.test($1)){ return match; }var transformed=$1.split(",").map(trim$1).map((function(selector){return (function(selector,parent){for(var match,selectorUnits=[];match=selectorUnitPattern.exec(selector);){ selectorUnits.push({str:match[0],base:match[1],modifiers:match[2]}); }for(var base=selectorUnits.map(extractString),transformed=[],i=selectorUnits.length;i--;){var appended=base.slice(),unit=selectorUnits[i];appended[i]=unit.base+parent+unit.modifiers||"";var prepended=base.slice();prepended[i]=parent+" "+prepended[i],transformed.push(appended.join(" "),prepended.join(" "))}return transformed.join(", ")})(selector,dataAttr)})).join(", ")+" ";return match.replace($1,transformed)})).replace(importEndPattern,""))}),[keyframesDeclarationPattern])}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function setCSSData(keypath,value,options){var opts=isObjectType(keypath)?value:options,model=this._cssModel;model.locked=!0;var promise=set(build({viewmodel:model},keypath,value,!0),opts);model.locked=!1;var cascade=runloop.start();return this.extensions.forEach((function(e){var model=e._cssModel;model.mark(),model.downstreamChanged("",1)})),runloop.end(),applyChanges(this,!opts||!1!==opts.apply),promise.then((function(){return cascade}))}function applyChanges(component,apply){var local=recomputeCSS(component),child=component.extensions.map((function(e){return applyChanges(e,!1)})).reduce((function(a,c){return c||a}),!1);if(apply&&(local||child)){var def=component._cssDef;(!def||def&&def.applied)&&applyCSS(!0)}return local||child}function recomputeCSS(component){var css=component.css;if(isFunction(css)){var def=component._cssDef,result=evalCSS(component,css),styles=def.transform?transformCss(result,def.id):result;if(def.styles!==styles){ return def.styles=styles,!0 }}}var CSSModel=(function(SharedModel){function CSSModel(component){SharedModel.call(this,component.cssData,"@style"),this.component=component}SharedModel&&(CSSModel.__proto__=SharedModel);var CSSModel__proto__=CSSModel.prototype=Object.create(SharedModel&&SharedModel.prototype);return CSSModel__proto__.constructor=CSSModel,CSSModel__proto__.downstreamChanged=function(path,depth){if(!this.locked){var component=this.component;component.extensions.forEach((function(e){var model=e._cssModel;model.mark(),model.downstreamChanged(path,depth||1)})),depth||applyChanges(component,!0)}},CSSModel})(SharedModel),hasCurly=/\{/,cssConfigurator={name:"css",extend:function(Parent,proto,options,Child){Child._cssIds=(function(start){var cmp=start,ids=[];for(;cmp;){ cmp.prototype.cssId&&ids.push(cmp.prototype.cssId),cmp=cmp.Parent; }return ids})(Parent),defineProperty(Child,"cssData",{configurable:!0,value:assign(create(Parent.cssData),options.cssData||{})}),defineProperty(Child,"_cssModel",{configurable:!0,value:new CSSModel(Child)}),options.css&&initCSS(options,Child,proto)},init:function(Parent,target,options){options.css&&warnIfDebug("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}};function evalCSS(component,css){if(isString(css)){ return css; }var cssData=component.cssData,model=component._cssModel,data=function(path){return model.joinAll(splitKeypath(path)).get()};data.__proto__=cssData;var result=css.call(component,data);return isString(result)?result:""}function initCSS(options,target,proto){var css=!0===options.css?"":isString(options.css)&&!hasCurly.test(options.css)&&getElement(options.css)||options.css,cssProp=css,id=options.cssId||s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4();isObjectType(css)?(css="textContent"in css?css.textContent:css.innerHTML,cssProp=css):isFunction(css)&&(cssProp=css,css=evalCSS(target,css));var def={transform:!options.noCssTransform};defineProperty(target,"_cssDef",{configurable:!0,value:def}),defineProperty(target,"css",{get:function(){return cssProp},set:function(next){var css=evalCSS(target,cssProp=next),styles=def.styles;def.styles=def.transform?transformCss(css,id):css,def.applied&&styles!==def.styles&&applyCSS(!0)}}),def.styles=def.transform?transformCss(css,id):css,def.id=proto.cssId=id,target._cssIds.push(id),addCSS(target._cssDef)}var dataConfigurator={name:"data",extend:function(Parent,proto,options){var key,value;if(options.data&&isObject(options.data)){ for(key in options.data){ (value=options.data[key])&&isObjectType(value)&&(isObject(value)||isArray(value))&&warnIfDebug("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }"); } }proto.data=combine$1(proto.data,options.data)},init:function(Parent,ractive,options){var result=combine$1(Parent.prototype.data,options.data);if(isFunction(result)&&(result=result.call(ractive)),result&&result.constructor===Object){ for(var prop in result){ if(isFunction(result[prop])){var value=result[prop];result[prop]=bind(value,ractive),result[prop]._r_unbound=value} } }return result||{}},reset:function(ractive){var result=this.init(ractive.constructor,ractive,ractive.viewmodel);return ractive.viewmodel.root.set(result),!0}};function emptyData(){return{}}function combine$1(parentValue,childValue){var data;(data=childValue)&&data.constructor!==Object&&(isFunction(data)||(isObjectType(data)?warnIfDebug("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"):fatal("data option must be an object or a function, `"+data+"` is not valid")));var parentIsFn=isFunction(parentValue);childValue||parentIsFn||(childValue=emptyData);var childIsFn=isFunction(childValue);return parentIsFn||childIsFn?function(){return fromProperties(childIsFn?callDataFunction(childValue,this):childValue,parentIsFn?callDataFunction(parentValue,this):parentValue)}:fromProperties(childValue,parentValue)}function callDataFunction(fn,context){var data=fn.call(context);if(data){ return isObjectType(data)||fatal("Data function must return an object"),data.constructor!==Object&&warnOnceIfDebug("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),data }}function fromProperties(primary,secondary){if(primary&&secondary){for(var key in secondary){ key in primary||(primary[key]=secondary[key]); }return primary}return primary||secondary}var templateConfigurator={name:"template",extend:function(Parent,proto,options){if("template"in options){var template=options.template;isFunction(template)?proto.template=template:proto.template=parseTemplate(template,proto)}},init:function(Parent,ractive,options){var template="template"in options?options.template:Parent.prototype.template;if(isFunction(template=template||{v:TEMPLATE_VERSION,t:[]})){var fn=template;template=getDynamicTemplate(ractive,fn),ractive._config.template={fn:fn,result:template}}template=parseTemplate(template,ractive),ractive.template=template.t,template.p&&extendPartials(ractive.partials,template.p)},reset:function(ractive){var result=(function(ractive){var initial=ractive._config.template;if(!initial||!initial.fn){ return; }var result=getDynamicTemplate(ractive,initial.fn);if(result!==initial.result){ return initial.result=result,result }})(ractive);if(result){var parsed=parseTemplate(result,ractive);return ractive.template=parsed.t,extendPartials(ractive.partials,parsed.p,!0),!0}}};function getDynamicTemplate(ractive,fn){return fn.call(ractive,{fromId:parser.fromId,isParsed:parser.isParsed,parse:function(template,options){return void 0===options&&(options=parser.getParseOptions(ractive)),parser.parse(template,options)}})}function parseTemplate(template,ractive){return isString(template)?template=(function(template,ractive){"#"===template[0]&&(template=parser.fromId(template));return parser.parseFor(template,ractive)})(template,ractive):(!(function(template){if(void 0==template){ throw new Error("The template cannot be "+template+"."); }if(!isNumber(template.v)){ throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are."); }if(template.v!==TEMPLATE_VERSION){ throw new Error("Mismatched template version (expected "+TEMPLATE_VERSION+", got "+template.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app") }})(template),addFunctions(template)),template}function extendPartials(existingPartials,newPartials,overwrite){if(newPartials){ for(var key in newPartials){ !overwrite&&hasOwn(existingPartials,key)||(existingPartials[key]=newPartials[key]) } }}var registriesOnDefaults=["computed","helpers"],Registry=function(name,useDefaults){this.name=name,this.useDefaults=useDefaults},Registry__proto__=Registry.prototype;Registry__proto__.extend=function(Parent,proto,options){var parent=this.useDefaults?Parent.defaults:Parent,target=this.useDefaults?proto:proto.constructor;this.configure(parent,target,options)},Registry__proto__.init=function(){},Registry__proto__.configure=function(Parent,target,options){var name=this.name,option=options[name],registry=create(Parent[name]);assign(registry,option),target[name]=registry},Registry__proto__.reset=function(ractive){var registry=ractive[this.name],changed=!1;return keys(registry).forEach((function(key){var item=registry[key];item._fn&&(item._fn.isOwner?registry[key]=item._fn:delete registry[key],changed=!0)})),changed};var registries=["adaptors","components","computed","decorators","easing","events","helpers","interpolators","partials","transitions"].map((function(name){var putInDefaults=registriesOnDefaults.indexOf(name)>-1;return new Registry(name,putInDefaults)}));function wrap(parent,name,method){if(!/_super/.test(method)){ return method; }function wrapper(){var superMethod=(function(parent,name){if(name in parent){var value=parent[name];return isFunction(value)?value:function(){return value}}return noop})(wrapper._parent,name),hasSuper="_super"in this,oldSuper=this._super;this._super=superMethod;var result=method.apply(this,arguments);return hasSuper?this._super=oldSuper:delete this._super,result}return wrapper._parent=parent,wrapper._method=method,wrapper}function getMessage(deprecated,correct,isError){return"options."+deprecated+" has been deprecated in favour of options."+correct+"."+(isError?" You cannot specify both options, please use options."+correct+".":"")}function deprecateOption(options,deprecatedOption,correct){if(deprecatedOption in options){if(correct in options){ throw new Error(getMessage(deprecatedOption,correct,!0)); }warnIfDebug(getMessage(deprecatedOption,correct)),options[correct]=options[deprecatedOption]}}var config={extend:function(Parent,proto,options,Child){return configure("extend",Parent,proto,options,Child)},init:function(Parent,ractive,options){return configure("init",Parent,ractive,options)},reset:function(ractive){return order.filter((function(c){return c.reset&&c.reset(ractive)})).map((function(c){return c.name}))}},custom={adapt:adaptConfigurator,computed:config,css:cssConfigurator,data:dataConfigurator,helpers:config,template:templateConfigurator},defaultKeys=keys(defaults),isStandardKey=makeObj(defaultKeys.filter((function(key){return!custom[key]}))),isBlacklisted=makeObj(defaultKeys.concat(registries.map((function(r){return r.name})),["on","observe","attributes","cssData","use"])),order=[].concat(defaultKeys.filter((function(key){return!registries[key]&&!custom[key]})),registries,custom.template,custom.css);function configure(method,Parent,target,options,Child){for(var key in (function(options){deprecateOption(options,"beforeInit","onconstruct"),deprecateOption(options,"init","onrender"),deprecateOption(options,"complete","oncomplete"),deprecateOption(options,"eventDefinitions","events"),isArray(options.adaptors)&&deprecateOption(options,"adaptors","adapt")})(options),options){ if(hasOwn(isStandardKey,key)){var value=options[key];"el"!==key&&isFunction(value)?warnIfDebug(key+" is a Ractive option that does not expect a function and will be ignored","init"===method?target:null):target[key]=value} }if(target.append&&target.enhance){ throw new Error("Cannot use append and enhance at the same time"); }registries.forEach((function(registry){registry[method](Parent,target,options,Child)})),adaptConfigurator[method](Parent,target,options,Child),templateConfigurator[method](Parent,target,options,Child),cssConfigurator[method](Parent,target,options,Child),(function(parent,target,options){for(var key in options){ if(!isBlacklisted[key]&&hasOwn(options,key)){var member=options[key];isFunction(member)&&((key in proto$8||"on"===key.slice(0,2)&&key.slice(2)in hooks&&key in target)&&!_super.test(member.toString())&&warnIfDebug("Overriding Ractive prototype function '"+key+"' without calling the '"+_super+"' method can be very dangerous."),member=wrap(parent,key,member)),target[key]=member} }})(Parent.prototype,target,options)}var _super=/\b_super\b/;function makeObj(array){var obj={};return array.forEach((function(x){return obj[x]=!0})),obj}var Item=function(options){this.up=options.up,this.ractive=options.up.ractive,this.template=options.template,this.index=options.index,this.type=options.template.t,this.dirty=!1},Item__proto__=Item.prototype;Item__proto__.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},Item__proto__.destroyed=function(){this.fragment&&this.fragment.destroyed()},Item__proto__.find=function(){return null},Item__proto__.findComponent=function(){return null},Item__proto__.findNextNode=function(){return this.up.findNextNode(this)},Item__proto__.rebound=function(update){this.fragment&&this.fragment.rebound(update)},Item__proto__.shuffled=function(){this.fragment&&this.fragment.shuffled()},Item__proto__.valueOf=function(){return this.toString()},Item.prototype.findAll=noop,Item.prototype.findAllComponents=noop;var ContainerItem=(function(Item){function ContainerItem(options){Item.call(this,options)}Item&&(ContainerItem.__proto__=Item);var ContainerItem__proto__=ContainerItem.prototype=Object.create(Item&&Item.prototype);return ContainerItem__proto__.constructor=ContainerItem,ContainerItem__proto__.detach=function(){return this.fragment?this.fragment.detach():createDocumentFragment()},ContainerItem__proto__.find=function(selector){if(this.fragment){ return this.fragment.find(selector) }},ContainerItem__proto__.findAll=function(selector,options){this.fragment&&this.fragment.findAll(selector,options)},ContainerItem__proto__.findComponent=function(name){if(this.fragment){ return this.fragment.findComponent(name) }},ContainerItem__proto__.findAllComponents=function(name,options){this.fragment&&this.fragment.findAllComponents(name,options)},ContainerItem__proto__.firstNode=function(skipParent){return this.fragment&&this.fragment.firstNode(skipParent)},ContainerItem__proto__.toString=function(escape){return this.fragment?this.fragment.toString(escape):""},ContainerItem})(Item),ComputationChild=(function(Model){function ComputationChild(parent,key){Model.call(this,parent,key),this.isReadonly=!this.root.ractive.syncComputedChildren,this.dirty=!0,this.isComputed=!0}Model&&(ComputationChild.__proto__=Model);var ComputationChild__proto__=ComputationChild.prototype=Object.create(Model&&Model.prototype);ComputationChild__proto__.constructor=ComputationChild;var prototypeAccessors$1={setRoot:{}};return prototypeAccessors$1.setRoot.get=function(){return this.parent.setRoot},ComputationChild__proto__.applyValue=function(value){if(Model.prototype.applyValue.call(this,value),!this.isReadonly){for(var source=this.parent;source&&source.shuffle;){ source=source.parent; }source&&source.dependencies.forEach(mark)}this.setRoot&&this.setRoot.set(this.setRoot.value)},ComputationChild__proto__.get=function(shouldCapture,opts){if(shouldCapture&&capture(this),this.dirty){this.dirty=!1;var parentValue=this.parent.get();this.value=parentValue?parentValue[this.key]:void 0,this.wrapper&&(this.newWrapperValue=this.value),this.adapt()}return(opts&&"unwrap"in opts?!1!==opts.unwrap:shouldCapture)&&this.wrapper?this.wrapperValue:this.value},ComputationChild__proto__.handleChange=function(){this.dirty||(this.dirty=!0,this.boundValue&&(this.boundValue=null),this.links.forEach(marked),this.deps.forEach(handleChange),this.children.forEach(handleChange))},ComputationChild__proto__.joinKey=function(key){if(void 0===key||""===key){ return this; }if(!hasOwn(this.childByKey,key)){var child=new ComputationChild(this,key);this.children.push(child),this.childByKey[key]=child}return this.childByKey[key]},Object.defineProperties(ComputationChild__proto__,prototypeAccessors$1),ComputationChild})(Model),Computation=(function(Model){function Computation(parent,signature,key){Model.call(this,parent,key),this.signature=signature,this.isReadonly=!this.signature.setter,this.isComputed=!0,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}Model&&(Computation.__proto__=Model);var Computation__proto__=Computation.prototype=Object.create(Model&&Model.prototype);Computation__proto__.constructor=Computation;var prototypeAccessors$2={setRoot:{}};return prototypeAccessors$2.setRoot.get=function(){if(this.signature.setter){ return this }},Computation__proto__.get=function(shouldCapture,opts){if(shouldCapture&&capture(this),this.dirty){this.dirty=!1;var old=this.value;this.value=this.getValue(),runloop.active()?isEqual(old,this.value)||this.notifyUpstream():(runloop.start(),isEqual(old,this.value)||this.notifyUpstream(),runloop.end()),this.wrapper&&(this.newWrapperValue=this.value),this.adapt()}return maybeBind(this,this.wrapper&&(opts&&"unwrap"in opts?!1!==opts.unwrap:shouldCapture)?this.wrapperValue:this.value,!opts||!1!==opts.shouldBind)},Computation__proto__.getContext=function(){return this.parent.isRoot?this.root.ractive:this.parent.get(!1,noVirtual)},Computation__proto__.getValue=function(){var result;startCapturing();try{result=this.signature.getter.call(this.root.ractive,this.getContext())}catch(err){if(warnIfDebug("Failed to compute "+this.getKeypath()+": "+(err.message||err)),hasConsole){console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var sig=this.signature;console.error(err.name+": "+err.message+"\n\n"+sig.getterString+(sig.getterUseStack?"\n\n"+err.stack:"")),console.groupCollapsed&&console.groupEnd()}}var dependencies=stopCapturing();return this.setDependencies(dependencies),result},Computation__proto__.mark=function(){this.handleChange()},Computation__proto__.rebind=function(next,previous){next!==previous&&this.handleChange()},Computation__proto__.set=function(value){if(this.isReadonly){ throw new Error("Cannot set read-only computed value '"+this.key+"'"); }this.signature.setter(value),this.mark()},Computation__proto__.setDependencies=function(dependencies){
var this$1 = this;
for(var i=this.dependencies.length;i--;){var model=this$1.dependencies[i];~dependencies.indexOf(model)||model.unregister(this$1)}for(i=dependencies.length;i--;){var model$1=dependencies[i];~this$1.dependencies.indexOf(model$1)||model$1.register(this$1)}this.dependencies=dependencies},Computation__proto__.teardown=function(){
var this$1 = this;
for(var i=this.dependencies.length;i--;){ this$1.dependencies[i]&&this$1.dependencies[i].unregister(this$1); }this.parent.computed[this.key]===this&&delete this.parent.computed[this.key],Model.prototype.teardown.call(this)},Object.defineProperties(Computation__proto__,prototypeAccessors$2),Computation})(Model),prototype=Computation.prototype,child=ComputationChild.prototype;prototype.handleChange=child.handleChange,prototype.joinKey=child.joinKey,shared$1.Computation=Computation;var ExpressionProxy=(function(Model){function ExpressionProxy(fragment,template){var this$1=this;Model.call(this,fragment.ractive.viewmodel,null),this.fragment=fragment,this.template=template,this.isReadonly=!0,this.isComputed=!0,this.dirty=!0,this.fn=!1===fragment.ractive.allowExpressions?noop:getFunction(template.s,template.r.length),this.models=this.template.r.map((function(ref){return resolveReference(this$1.fragment,ref)})),this.dependencies=[],this.shuffle=void 0,this.bubble()}Model&&(ExpressionProxy.__proto__=Model);var ExpressionProxy__proto__=ExpressionProxy.prototype=Object.create(Model&&Model.prototype);return ExpressionProxy__proto__.constructor=ExpressionProxy,ExpressionProxy__proto__.bubble=function(actuallyChanged){void 0===actuallyChanged&&(actuallyChanged=!0),this.keypath=void 0,actuallyChanged&&this.handleChange()},ExpressionProxy__proto__.getKeypath=function(){var this$1=this;return this.template?(this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,(function(match,i){if(i>=this$1.models.length){ return match; }var model=this$1.models[i];return model?model.getKeypath():"@undefined"}))),this.keypath):"@undefined"},ExpressionProxy__proto__.getValue=function(){var result,this$1=this;startCapturing();try{var params=this.models.map((function(m){return m?m.get(!0):void 0}));result=this.fn.apply(this.fragment.ractive,params)}catch(err){warnIfDebug("Failed to compute "+this.getKeypath()+": "+(err.message||err))}var dependencies=stopCapturing();return this.dependencies.filter((function(d){return!~dependencies.indexOf(d)})).forEach((function(d){d.unregister(this$1),removeFromArray(this$1.dependencies,d)})),dependencies.filter((function(d){return!~this$1.dependencies.indexOf(d)})).forEach((function(d){d.register(this$1),this$1.dependencies.push(d)})),result},ExpressionProxy__proto__.notifyUpstream=function(){},ExpressionProxy__proto__.rebind=function(next,previous,safe){var idx=this.models.indexOf(previous);~idx&&(next=rebindMatch(this.template.r[idx],next,previous))!==previous&&(previous.unregister(this),this.models.splice(idx,1,next),next&&next.addShuffleRegister(this,"mark")),this.bubble(!safe)},ExpressionProxy__proto__.rebound=function(update){var this$1=this;this.models=this.template.r.map((function(ref){return resolveReference(this$1.fragment,ref)})),update&&this.bubble(!0)},ExpressionProxy__proto__.retrieve=function(){return this.get()},ExpressionProxy__proto__.teardown=function(){var this$1=this;this.fragment=void 0,this.dependencies&&this.dependencies.forEach((function(d){return d.unregister(this$1)})),Model.prototype.teardown.call(this)},ExpressionProxy__proto__.unreference=function(){Model.prototype.unreference.call(this),collect(this)},ExpressionProxy__proto__.unregister=function(dep){Model.prototype.unregister.call(this,dep),collect(this)},ExpressionProxy__proto__.unregisterLink=function(link){Model.prototype.unregisterLink.call(this,link),collect(this)},ExpressionProxy})(Model),prototype$1=ExpressionProxy.prototype,computation=Computation.prototype;function collect(model){model.deps.length||model.refs||model.links.length||model.teardown()}prototype$1.get=computation.get,prototype$1.handleChange=computation.handleChange,prototype$1.joinKey=computation.joinKey,prototype$1.mark=computation.mark,prototype$1.unbind=noop;var ReferenceExpressionProxy=(function(LinkModel){function ReferenceExpressionProxy(fragment,template){LinkModel.call(this,null,null,null,"@undefined"),this.root=fragment.ractive.viewmodel,this.template=template,this.rootLink=!0,this.template=template,this.fragment=fragment,this.rebound()}LinkModel&&(ReferenceExpressionProxy.__proto__=LinkModel);var ReferenceExpressionProxy__proto__=ReferenceExpressionProxy.prototype=Object.create(LinkModel&&LinkModel.prototype);return ReferenceExpressionProxy__proto__.constructor=ReferenceExpressionProxy,ReferenceExpressionProxy__proto__.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},ReferenceExpressionProxy__proto__.rebound=function(){var idx,this$1=this,fragment=this.fragment,template=this.template,base=this.base=resolve(fragment,template);this.proxy&&teardown$1(this);var proxy=this.proxy={rebind:function(next,previous){previous===base?(next=rebindMatch(template,next,previous))!==base&&(this$1.base=base=next):~(idx=members.indexOf(previous))&&(next=rebindMatch(template.m[idx].n,next,previous))!==members[idx]&&members.splice(idx,1,next||Missing),next!==previous&&(previous.unregister(proxy),next&&next.addShuffleTask((function(){return next.register(proxy)})))},handleChange:function(){pathChanged()}};base.register(proxy);var members=this.members=template.m.map((function(tpl){return isString(tpl)?{get:function(){return tpl}}:tpl.t===REFERENCE?((model=resolveReference(fragment,tpl.n)).register(proxy),model):((model=new ExpressionProxy(fragment,tpl)).register(proxy),model);var model})),pathChanged=function(){var model=base.joinAll(members.reduce((function(list,m){var k=m.get();return isArray(k)?list.concat(k):(list.push(escapeKey(String(k))),list)}),[]));model!==this$1.model&&(this$1.model=model,this$1.relinking(model),fireShuffleTasks(),(function refreshPathDeps(proxy){var len=proxy.deps.length;var i,v;for(i=0;i<len;i++){ (v=proxy.deps[i]).pathChanged&&v.pathChanged(),v.fragment&&v.fragment.pathModel&&v.fragment.pathModel.applyValue(proxy.getKeypath()); }len=proxy.children.length;for(i=0;i<len;i++){ refreshPathDeps(proxy.children[i]) }})(this$1))};pathChanged()},ReferenceExpressionProxy__proto__.teardown=function(){teardown$1(this),LinkModel.prototype.teardown.call(this)},ReferenceExpressionProxy__proto__.unreference=function(){LinkModel.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},ReferenceExpressionProxy__proto__.unregister=function(dep){LinkModel.prototype.unregister.call(this,dep),this.deps.length||this.refs||this.teardown()},ReferenceExpressionProxy})(LinkModel);function teardown$1(proxy){proxy.base&&proxy.base.unregister(proxy.proxy),proxy.models&&proxy.models.forEach((function(m){m.unregister&&m.unregister(proxy)}))}var eproto=ExpressionProxy.prototype,proto$1=ReferenceExpressionProxy.prototype;function resolve(fragment,template){return template.r?resolveReference(fragment,template.r):template.x?new ExpressionProxy(fragment,template.x):template.rx?new ReferenceExpressionProxy(fragment,template.rx):void 0}function resolveAliases(aliases,fragment,dest){void 0===dest&&(dest={});for(var i=0;i<aliases.length;i++){ if(!dest[aliases[i].n]){var m=resolve(fragment,aliases[i].x);dest[aliases[i].n]=m,m.reference()} }return dest}proto$1.unreference=eproto.unreference,proto$1.unregister=eproto.unregister,proto$1.unregisterLink=eproto.unregisterLink;var Alias=(function(ContainerItem){function Alias(options){ContainerItem.call(this,options),this.fragment=null}ContainerItem&&(Alias.__proto__=ContainerItem);var Alias__proto__=Alias.prototype=Object.create(ContainerItem&&ContainerItem.prototype);return Alias__proto__.constructor=Alias,Alias__proto__.bind=function(){this.fragment=new Fragment({owner:this,template:this.template.f}),this.fragment.aliases=resolveAliases(this.template.z,this.up),this.fragment.bind()},Alias__proto__.rebound=function(update){var aliases=this.fragment.aliases;for(var k in aliases){ aliases[k].rebound?aliases[k].rebound(update):(aliases[k].unreference(),aliases[k]=0); }resolveAliases(this.template.z,this.up,aliases),this.fragment&&this.fragment.rebound(update)},Alias__proto__.render=function(target,occupants){this.rendered=!0,this.fragment&&this.fragment.render(target,occupants)},Alias__proto__.unbind=function(){
var this$1 = this;
for(var k in this$1.fragment.aliases){ this$1.fragment.aliases[k].unreference(); }this.fragment.aliases={},this.fragment&&this.fragment.unbind()},Alias__proto__.unrender=function(shouldDestroy){this.rendered&&this.fragment&&this.fragment.unrender(shouldDestroy),this.rendered=!1},Alias__proto__.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())},Alias})(ContainerItem),space=/\s+/;function readClass(str){for(var list=str.split(space),i=list.length;i--;){ list[i]||list.splice(i,1); }return list}var textTypes=[void 0,"text","search","url","email","hidden","password","search","reset","submit"];function updateMultipleSelectValue(reset){var value=this.getValue();isArray(value)||(value=[value]);var options=this.node.options,i=options.length;if(reset){ for(;i--;){ options[i].selected=!1; } }else { for(;i--;){var option=options[i],optionValue=option._ractive?option._ractive.value:option.value;option.selected=arrayContains(value,optionValue)} }}function updateSelectValue(reset){var value=this.getValue();if(!this.locked){this.node._ractive.value=value;var options=this.node.options,i=options.length,wasSelected=!1;if(reset){ for(;i--;){ options[i].selected=!1; } }else { for(;i--;){var option=options[i],optionValue=option._ractive?option._ractive.value:option.value;if(option.disabled&&option.selected&&(wasSelected=!0),optionValue==value){ return void(option.selected=!0) }} }wasSelected||(this.node.selectedIndex=-1)}}function updateContentEditableValue(reset){var value=this.getValue();this.locked||(this.node.innerHTML=reset?"":void 0===value?"":value)}function updateRadioValue(reset){var node=this.node,wasChecked=node.checked,value=this.getValue();if(reset){ return node.checked=!1; }node.value=this.node._ractive.value=value,node.checked=this.element.compare(value,this.element.getAttribute("name")),wasChecked&&!node.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function updateValue(reset){if(!this.locked){ if(reset){ this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null; }else{var value=this.getValue();this.node.value=this.node._ractive.value=value,this.node.setAttribute("value",safeToStringValue(value))} }}function updateStringValue(reset){if(!this.locked){ if(reset){ this.node._ractive.value="",this.node.removeAttribute("value"); }else{var value=this.getValue();this.node._ractive.value=value,this.node.value=safeToStringValue(value),this.node.setAttribute("value",safeToStringValue(value))} }}function updateRadioName(reset){this.node.checked=!reset&&this.element.compare(this.getValue(),this.element.binding.getValue())}function updateCheckboxName(reset){var element=this.element,node=this.node,binding=element.binding,value=this.getValue(),valueAttribute=element.getAttribute("value");if(isArray(value)){for(var i=value.length;i--;){ if(element.compare(valueAttribute,value[i])){ return void(binding.isChecked=node.checked=!0); } }binding.isChecked=node.checked=!1}else { binding.isChecked=node.checked=element.compare(value,valueAttribute) }}function updateStyleAttribute(reset){for(var css,props=reset?{}:isString(css=this.getValue()||"")?cleanCss(css,(function(css,reconstruct){return css.split(";").filter((function(rule){return!!rule.trim()})).map(reconstruct).reduce((function(rules,rule){var i=rule.indexOf(":");return rules[rule.substr(0,i).trim()]=rule.substr(i+1).trim(),rules}),{})})):{},style=this.node.style,keys$$1=keys(props),prev=this.previous||[],i=0;i<keys$$1.length;){if(keys$$1[i]in style){var safe=props[keys$$1[i]].replace("!important","");style.setProperty(keys$$1[i],safe,safe.length!==props[keys$$1[i]].length?"important":"")}i++}for(i=prev.length;i--;){ !~keys$$1.indexOf(prev[i])&&prev[i]in style&&style.setProperty(prev[i],"",""); }this.previous=keys$$1}function updateInlineStyle(reset){if(this.style||(this.style=hyphenateCamel(this.name.substr(6))),!reset||this.node.style.getPropertyValue(this.style)===this.last){var value=reset?"":safeToStringValue(this.getValue()),safe=value.replace("!important","");this.node.style.setProperty(this.style,safe,safe.length!==value.length?"important":""),this.last=this.node.style.getPropertyValue(this.style)}}function updateClassName(reset){var value=reset?[]:readClass(safeToStringValue(this.getValue())),cls=this.node.className,attr=readClass(cls=void 0!==cls.baseVal?cls.baseVal:cls),prev=this.previous||[],className=value.concat(attr.filter((function(c){return!~prev.indexOf(c)}))).join(" ");className!==cls&&(isString(this.node.className)?this.node.className=className:this.node.className.baseVal=className),this.previous=value}function updateInlineClass(reset){var name=this.name.substr(6),cls=this.node.className,attr=readClass(cls=void 0!==cls.baseVal?cls.baseVal:cls),value=!reset&&this.getValue();this.inlineClass||(this.inlineClass=name),value&&!~attr.indexOf(name)?attr.push(name):!value&&~attr.indexOf(name)&&attr.splice(attr.indexOf(name),1),isString(this.node.className)?this.node.className=attr.join(" "):this.node.className.baseVal=attr.join(" ")}function updateBoolean(reset){if(!this.locked){ if(reset){ this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName); }else if(this.useProperty){ this.node[this.propertyName]=this.getValue(); }else{var val=this.getValue();val?this.node.setAttribute(this.propertyName,isString(val)?val:""):this.node.removeAttribute(this.propertyName)} }}function updateAttribute(reset){reset?this.node.getAttribute(this.name)===this.value&&this.node.removeAttribute(this.name):(this.value=safeToStringValue(this.getString()),this.node.setAttribute(this.name,this.value))}function updateNamespacedAttribute(reset){reset?this.value===this.node.getAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1))&&this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):(this.value=safeToStringValue(this.getString()),this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),this.value))}var propertyNames={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},div$1=doc?createElement("div"):null,attributes=!1;function inAttributes(){return attributes}var ConditionalAttribute=(function(Item){function ConditionalAttribute(options){Item.call(this,options),this.attributes=[],this.owner=options.owner,this.fragment=new Fragment({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=noop,this.dirty=!1}Item&&(ConditionalAttribute.__proto__=Item);var ConditionalAttribute__proto__=ConditionalAttribute.prototype=Object.create(Item&&Item.prototype);return ConditionalAttribute__proto__.constructor=ConditionalAttribute,ConditionalAttribute__proto__.bind=function(){this.fragment.bind()},ConditionalAttribute__proto__.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},ConditionalAttribute__proto__.destroyed=function(){this.unrender()},ConditionalAttribute__proto__.render=function(){this.node=this.owner.node,this.node&&(this.isSvg=this.node.namespaceURI===svg$1),attributes=!0,this.rendered||this.fragment.render(),this.rendered=!0,this.dirty=!0,this.update(),attributes=!1},ConditionalAttribute__proto__.toString=function(){return this.fragment.toString()},ConditionalAttribute__proto__.unbind=function(){this.fragment.unbind()},ConditionalAttribute__proto__.unrender=function(){this.rendered=!1,this.fragment.unrender()},ConditionalAttribute__proto__.update=function(){var str,attrs,this$1=this;if(this.dirty){this.dirty=!1;var current=attributes;attributes=!0,this.fragment.update(),this.rendered&&this.node&&(str=this.fragment.toString(),attrs=(function(str,isSvg){if(onlyWhitespace.test(str)){ return[]; }var tagName=isSvg?"svg":"div";return str?(div$1.innerHTML="<"+tagName+" "+str+"></"+tagName+">")&&toArray(div$1.childNodes[0].attributes):[]})(str,this.isSvg),this.attributes.filter((function(a){return (function(haystack,needle){var i=haystack.length;for(;i--;){ if(haystack[i].name===needle.name){ return!1; } }return!0})(attrs,a)})).forEach((function(a){this$1.node.removeAttribute(a.name)})),attrs.forEach((function(a){this$1.node.setAttribute(a.name,a.value)})),this.attributes=attrs),attributes=current||!1}},ConditionalAttribute})(Item),onlyWhitespace=/^\s*$/;var attribute=!1;var Attribute=(function(Item){function Attribute(options){if(Item.call(this,options),this.name=options.template.n,this.namespace=null,this.owner=options.owner||options.up.owner||options.element||findElement(options.up),this.element=options.element||(this.owner.attributeByName?this.owner:findElement(options.up)),this.up=options.up,this.ractive=this.up.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,!isArray(options.template.f)){ return this.value=options.template.f,void(0===this.value?this.value="":void 0===this.value&&(this.value=!0)); }this.fragment=new Fragment({owner:this,template:options.template.f}),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===INTERPOLATOR&&this.fragment.items[0],this.interpolator&&(this.interpolator.owner=this)}Item&&(Attribute.__proto__=Item);var Attribute__proto__=Attribute.prototype=Object.create(Item&&Item.prototype);return Attribute__proto__.constructor=Attribute,Attribute__proto__.bind=function(){this.fragment&&this.fragment.bind()},Attribute__proto__.bubble=function(){this.dirty||(this.up.bubble(),this.element.bubble(),this.dirty=!0)},Attribute__proto__.firstNode=function(){},Attribute__proto__.getString=function(){attribute=!0;var value=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";return attribute=!1,value},Attribute__proto__.getValue=function(){attribute=!0;var value=this.fragment?this.fragment.valueOf():!!booleanAttributes[this.name.toLowerCase()]||this.value;return attribute=!1,value},Attribute__proto__.render=function(){var node=this.element.node;if(this.node=node,node.namespaceURI&&node.namespaceURI!==namespaces.html||(this.propertyName=propertyNames[this.name]||this.name,void 0!==node[this.propertyName]&&(this.useProperty=!0),(booleanAttributes[this.name.toLowerCase()]||this.isTwoway)&&(this.isBoolean=!0),"value"===this.propertyName&&(node._ractive.value=this.value)),node.namespaceURI){var index=this.name.indexOf(":");this.namespace=-1!==index?(function(node,prefix){for(var qualified="xmlns:"+prefix;node;){if(node.hasAttribute&&node.hasAttribute(qualified)){ return node.getAttribute(qualified); }node=node.parentNode}return namespaces[prefix]})(node,this.name.slice(0,index)):node.namespaceURI}this.rendered=!0,this.updateDelegate=(function(attribute){var element=attribute.element,name=attribute.name;if("value"===name){if(attribute.interpolator&&(attribute.interpolator.bound=!0),"select"===element.name&&"value"===name){ return element.getAttribute("multiple")?updateMultipleSelectValue:updateSelectValue; }if("textarea"===element.name){ return updateStringValue; }if(null!=element.getAttribute("contenteditable")){ return updateContentEditableValue; }if("input"===element.name){var type=element.getAttribute("type");if("file"===type){ return noop; }if("radio"===type&&element.binding&&"name"===element.binding.attribute.name){ return updateRadioValue; }if(~textTypes.indexOf(type)){ return updateStringValue }}return updateValue}var node=element.node;if(attribute.isTwoway&&"name"===name){if("radio"===node.type){ return updateRadioName; }if("checkbox"===node.type){ return updateCheckboxName }}if("style"===name){ return updateStyleAttribute; }if(0===name.indexOf("style-")){ return updateInlineStyle; }if("class"===name&&(!node.namespaceURI||node.namespaceURI===html)){ return updateClassName; }if(0===name.indexOf("class-")){ return updateInlineClass; }if(attribute.isBoolean){var type$1=element.getAttribute("type");return!attribute.interpolator||"checked"!==name||"checkbox"!==type$1&&"radio"!==type$1||(attribute.interpolator.bound=!0),updateBoolean}return attribute.namespace&&attribute.namespace!==attribute.node.namespaceURI?updateNamespacedAttribute:updateAttribute})(this),this.updateDelegate()},Attribute__proto__.toString=function(){if(inAttributes()){ return""; }attribute=!0;var value=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type")){ return'name="{{'+this.interpolator.model.getKeypath()+'}}"'; }if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")){if(booleanAttributes[this.name.toLowerCase()]){ return value?isString(value)?this.name+'="'+safeAttributeString(value)+'"':this.name:""; }if(null==value){ return""; }var str=safeAttributeString(this.getString());return attribute=!1,str?this.name+'="'+str+'"':this.name}this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=hyphenateCamel(this.name.substr(6))}}},Attribute__proto__.unbind=function(){this.fragment&&this.fragment.unbind()},Attribute__proto__.unrender=function(){this.updateDelegate(!0),this.rendered=!1},Attribute__proto__.update=function(){var binding;if(this.dirty){ if(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked){ this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()); }else if("value"===this.name&&(binding=this.element.binding)){var attr=binding.attribute;attr&&!attr.dirty&&attr.rendered&&this.element.binding.attribute.updateDelegate()} }},Attribute})(Item),BindingFlag=(function(Item){function BindingFlag(options){Item.call(this,options),this.owner=options.owner||options.up.owner||findElement(options.up),this.element=this.owner.attributeByName?this.owner:findElement(options.up),this.flag="l"===options.template.v?"lazy":"twoway",this.bubbler=this.owner===this.element?this.element:this.up,this.element.type===ELEMENT&&(isArray(options.template.f)&&(this.fragment=new Fragment({owner:this,template:options.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===INTERPOLATOR&&this.fragment.items[0])}Item&&(BindingFlag.__proto__=Item);var BindingFlag__proto__=BindingFlag.prototype=Object.create(Item&&Item.prototype);return BindingFlag__proto__.constructor=BindingFlag,BindingFlag__proto__.bind=function(){this.fragment&&this.fragment.bind(),set$1(this,this.getValue(),!0)},BindingFlag__proto__.bubble=function(){this.dirty||(this.bubbler.bubble(),this.dirty=!0)},BindingFlag__proto__.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:!("f"in this.template)||this.template.f},BindingFlag__proto__.render=function(){set$1(this,this.getValue(),!0)},BindingFlag__proto__.toString=function(){return""},BindingFlag__proto__.unbind=function(){this.fragment&&this.fragment.unbind(),delete this.element[this.flag]},BindingFlag__proto__.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()},BindingFlag__proto__.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),set$1(this,this.getValue(),!0))},BindingFlag})(Item);function set$1(flag,value,update){flag.value=0===value||("true"===value||"false"!==value&&"0"!==value&&value);var current=flag.element[flag.flag];return flag.element[flag.flag]=flag.value,update&&!flag.element.attributes.binding&&current!==flag.value&&flag.element.recreateTwowayBinding(),flag.value}function Comment(options){Item.call(this,options)}var proto$2=create(Item.prototype);function teardown$2(instance,getPromise){instance.torndown=!0,instance.fragment.unbind(),instance._observers.slice().forEach(cancel),instance.el&&instance.el.__ractive_instances__&&removeFromArray(instance.el.__ractive_instances__,instance);var promise=getPromise();return hooks.teardown.fire(instance),promise.then((function(){hooks.destruct.fire(instance),instance.viewmodel.teardown()})),promise}assign(proto$2,{bind:noop,unbind:noop,update:noop,detach:function(){return detachNode(this.node)},firstNode:function(){return this.node},render:function(target){this.rendered=!0,this.node=doc.createComment(this.template.c),target.appendChild(this.node)},toString:function(){return"\x3c!-- "+this.template.c+" --\x3e"},unrender:function(shouldDestroy){this.rendered&&shouldDestroy&&this.detach(),this.rendered=!1}}),Comment.prototype=proto$2;var RactiveModel=(function(SharedModel){function RactiveModel(ractive){SharedModel.call(this,ractive,"@this"),this.ractive=ractive}SharedModel&&(RactiveModel.__proto__=SharedModel);var RactiveModel__proto__=RactiveModel.prototype=Object.create(SharedModel&&SharedModel.prototype);return RactiveModel__proto__.constructor=RactiveModel,RactiveModel__proto__.joinKey=function(key){var model=SharedModel.prototype.joinKey.call(this,key);return"root"!==key&&"parent"!==key||model.isLink?"data"===key?this.ractive.viewmodel:"cssData"===key?this.ractive.constructor._cssModel:model:(function(model,key){if(model.applyValue=function(value){this.parent.value[key]=value,value&&value.viewmodel?(this.link(value.viewmodel.getRactiveModel(),key),this._link.markedAll()):(this.link(create(Missing),key),this._link.markedAll())},"root"===key){var mark=model.mark;model.mark=function(force){this._marking||(this._marking=!0,mark.apply(this,force),this._marking=!1)}}return model.applyValue(model.parent.ractive[key],key),model._link.set=function(v){return model.applyValue(v)},model._link.applyValue=function(v){return model.applyValue(v)},model._link})(model,key)},RactiveModel})(SharedModel);var specialModels={"@this":function(root){return root.getRactiveModel()},"@global":function(){return GlobalModel},"@shared":function(){return SharedModel$1},"@style":function(root){return root.getRactiveModel().joinKey("cssData")},"@helpers":function(root){return root.getHelpers()}};specialModels["@"]=specialModels["@this"];var RootModel=(function(Model){function RootModel(options){Model.call(this,null,null),this.isRoot=!0,this.root=this,this.ractive=options.ractive,this.value=options.data,this.adaptors=options.adapt,this.adapt()}Model&&(RootModel.__proto__=Model);var RootModel__proto__=RootModel.prototype=Object.create(Model&&Model.prototype);return RootModel__proto__.constructor=RootModel,RootModel__proto__.attached=function(fragment){!(function attachImplicits(model,fragment){model._link&&model._link.implicit&&model._link.isDetached()&&model.attach(fragment);for(var k in model.childByKey){ if(k in model.value){ attachImplicits(model.childByKey[k],fragment); }else if(!model.childByKey[k]._link||model.childByKey[k]._link.isDetached()){var mdl=resolveReference(fragment,k);mdl&&model.childByKey[k].link(mdl,k,{implicit:!0})} }})(this,fragment)},RootModel__proto__.createLink=function(keypath,target,targetPath,options){for(var keys=splitKeypath(keypath),model=this;keys.length;){var key=keys.shift();model=model.childByKey[key]||model.joinKey(key)}return model.link(target,targetPath,options)},RootModel__proto__.detached=function(){!(function detachImplicits(model){model._link&&model._link.implicit&&model.unlink();for(var k in model.childByKey){ detachImplicits(model.childByKey[k]) }})(this)},RootModel__proto__.get=function(shouldCapture,options){return shouldCapture&&capture(this),options&&!1===options.virtual?this.value:this.getVirtual()},RootModel__proto__.getHelpers=function(){return this.helpers||(this.helpers=new SharedModel(this.ractive.helpers,"helpers")),this.helpers},RootModel__proto__.getKeypath=function(){return""},RootModel__proto__.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new RactiveModel(this.ractive))},RootModel__proto__.getValueChildren=function(){var children=Model.prototype.getValueChildren.call(this,this.value);return this.children.forEach((function(child){if(child._link){var idx=children.indexOf(child);~idx?children.splice(idx,1,child._link):children.push(child._link)}})),children},RootModel__proto__.has=function(key){if("~"===key[0]&&"/"===key[1]&&(key=key.slice(2)),specialModels[key]||""===key){ return!0; }if(Model.prototype.has.call(this,key)){ return!0; }var unescapedKey=unescapeKey(key);return!(!this.childByKey[unescapedKey]||!this.childByKey[unescapedKey]._link)||void 0},RootModel__proto__.joinKey=function(key,opts){if("~"===key[0]&&"/"===key[1]&&(key=key.slice(2)),"@"!==key[0]){ return Model.prototype.joinKey.call(this,key,opts); }var fn=specialModels[key];return fn?fn(this):void 0},RootModel__proto__.set=function(value){var wrapper=this.wrapper;wrapper?(!wrapper.reset||!1===wrapper.reset(value))&&(wrapper.teardown(),this.wrapper=null,this.value=value,this.adapt()):(this.value=value,this.adapt());this.deps.forEach(handleChange),this.children.forEach(mark)},RootModel__proto__.retrieve=function(){return this.wrapper?this.wrapper.get():this.value},RootModel__proto__.teardown=function(){Model.prototype.teardown.call(this),this.ractiveModel&&this.ractiveModel.teardown()},RootModel})(Model);function subscribe(instance,options,type){var subs=(instance.constructor["_"+type]||[]).concat(toPairs(options[type]||[])),single="on"===type?"once":type+"Once";subs.forEach((function(ref){var target=ref[0],config=ref[1];isFunction(config)?instance[type](target,config):isObjectType(config)&&isFunction(config.handler)&&instance[config.once?single:type](target,config.handler,create(config))}))}RootModel.prototype.update=noop;var registryNames$1=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],protoRegistries=["computed","helpers"],uid=0;function construct(ractive,options){Ractive.DEBUG&&welcome(),(function(ractive){ractive._guid="r-"+uid++,ractive._subs=create(null),ractive._nsSubs=0,ractive._config={},ractive.event=null,ractive._eventQueue=[],ractive._observers=[],ractive._children=[],ractive._children.byName={},ractive.children=ractive._children,ractive.component||(ractive.root=ractive,ractive.parent=ractive.container=null)})(ractive),(function(ractive){var component=ractive.component,attributes=ractive.constructor.attributes;if(attributes&&component){var tpl=component.template,attrs=tpl.m?tpl.m.slice():[],props=attrs.filter((function(a){return a.t===ATTRIBUTE})).map((function(a){return a.n}));attributes.required.forEach((function(p){~props.indexOf(p)||warnIfDebug("Component '"+component.name+"' requires attribute '"+p+"' to be provided")}));for(var all=attributes.optional.concat(attributes.required),partial=[],i=attrs.length;i--;){var a=attrs[i];a.t!==ATTRIBUTE||~all.indexOf(a.n)?attributes.mapAll||a.t!==DECORATOR&&a.t!==TRANSITION&&a.t!==BINDING_FLAG||partial.unshift(attrs.splice(i,1)[0]):attributes.mapAll?partial.unshift({t:ATTRIBUTE,n:a.n,f:[{t:INTERPOLATOR,r:"~/"+a.n}]}):partial.unshift(attrs.splice(i,1)[0])}partial.length&&(component.template={t:tpl.t,e:tpl.e,f:tpl.f,m:attrs,p:tpl.p}),ractive._attributePartial=partial}})(ractive),subscribe(ractive,options,"on"),!hasOwn(options,"delegate")&&ractive.parent&&ractive.parent.delegate!==ractive.delegate&&(ractive.delegate=!1),isArray(options.use)&&ractive.use.apply(ractive,options.use.filter((function(p){return p.construct}))),hooks.construct.fire(ractive,options);for(var i=registryNames$1.length;i--;){var name=registryNames$1[i];ractive[name]=assign(create(ractive.constructor[name]||null),options[name])}for(i=protoRegistries.length;i--;){var name$1=protoRegistries[i];ractive[name$1]=assign(create(ractive.constructor.prototype[name$1]),options[name$1])}ractive._attributePartial&&(ractive.partials["extra-attributes"]=ractive._attributePartial,delete ractive._attributePartial);var viewmodel=new RootModel({adapt:(function(ractive,protoAdapt,options){protoAdapt=protoAdapt.map(lookup);var adapt=ensureArray(options.adapt).map(lookup),srcs=[protoAdapt,adapt];ractive.parent&&!ractive.isolated&&srcs.push(ractive.parent.viewmodel.adaptors);return combine.apply(null,srcs);function lookup(adaptor){return isString(adaptor)&&((adaptor=findInViewHierarchy("adaptors",ractive,adaptor))||fatal(missingPlugin(adaptor,"adaptor"))),adaptor}})(ractive,ractive.adapt,options),data:dataConfigurator.init(ractive.constructor,ractive,options),ractive:ractive});for(var k in ractive.adapt=viewmodel.adaptors,ractive.viewmodel=viewmodel,ractive.computed){ compute.call(ractive,k,ractive.computed[k]) }}var Component=(function(Item){function Component(options,ComponentConstructor){var this$1=this;Item.call(this,options);var template=options.template;this.isAnchor=template.t===ANCHOR,this.type=this.isAnchor?ANCHOR:COMPONENT;var attrs=template.m,partials=template.p||{};if("content"in partials||(partials.content=template.f||[]),this._partials=partials,this.isAnchor){ this.name=template.n,this.addChild=addChild,this.removeChild=removeChild; }else{var instance=create(ComponentConstructor.prototype);this.instance=instance,this.name=template.e,(instance.el||instance.target)&&(warnIfDebug("The <"+this.name+"> component has a default '"+(instance.el?"el":"target")+"' property; it has been disregarded"),instance.el=instance.target=null);for(var container,fragment=options.up;fragment;){if(fragment.owner.type===YIELDER){container=fragment.owner.container;break}fragment=fragment.parent}instance.parent=this.up.ractive,instance.container=container||null,instance.root=instance.parent.root,instance.component=this,construct(this.instance,{partials:partials}),attrs=(template=this.template).m,isArray(this.mappings)?attrs=(attrs||[]).concat(this.mappings):isString(this.mappings)&&(attrs=(attrs||[]).concat(parser.parse(this.mappings,{attributes:!0}).t)),instance._inlinePartials=partials}if(this.attributeByName={},this.attributes=[],attrs){var leftovers=[];attrs.forEach((function(template){switch(template.t){case ATTRIBUTE:case EVENT:this$1.attributes.push(createItem({owner:this$1,up:this$1.up,template:template}));break;case TRANSITION:case BINDING_FLAG:case DECORATOR:break;default:leftovers.push(template)}})),leftovers.length&&this.attributes.push(new ConditionalAttribute({owner:this,up:this.up,template:leftovers}))}this.eventHandlers=[]}Item&&(Component.__proto__=Item);var Component__proto__=Component.prototype=Object.create(Item&&Item.prototype);return Component__proto__.constructor=Component,Component__proto__.bind=function(){this.isAnchor||(this.attributes.forEach(bind$1),this.eventHandlers.forEach(bind$1),initialise(this.instance,{partials:this._partials},{cssIds:this.up.cssIds}),(this.instance.target||this.instance.el)&&(this.extern=!0),this.bound=!0)},Component__proto__.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},Component__proto__.destroyed=function(){!this.isAnchor&&this.instance.fragment&&this.instance.fragment.destroyed()},Component__proto__.detach=function(){return this.isAnchor?this.instance?this.instance.fragment.detach():createDocumentFragment():this.instance.fragment.detach()},Component__proto__.find=function(selector,options){if(this.instance){ return this.instance.fragment.find(selector,options) }},Component__proto__.findAll=function(selector,options){this.instance&&this.instance.fragment.findAll(selector,options)},Component__proto__.findComponent=function(name,options){return name&&this.name!==name?this.instance.fragment?this.instance.fragment.findComponent(name,options):void 0:this.instance},Component__proto__.findAllComponents=function(name,options){var result=options.result;!this.instance||name&&this.name!==name||result.push(this.instance),this.instance&&this.instance.findAllComponents(name,options)},Component__proto__.firstNode=function(skipParent){if(this.instance){ return this.instance.fragment.firstNode(skipParent) }},Component__proto__.getContext=function(){
var arguments$1 = arguments;
for(var assigns=[],len=arguments.length;len--;){ assigns[len]=arguments$1[len]; }return assigns.unshift(this.instance),getRactiveContext.apply(null,assigns)},Component__proto__.rebound=function(update$$1){this.attributes.forEach((function(x){return x.rebound(update$$1)}))},Component__proto__.render=function(target,occupants){this.isAnchor?(this.rendered=!0,this.target=target,checking.length||(checking.push(this.ractive),occupants?(this.occupants=occupants,checkAnchors(),this.occupants=null):runloop.scheduleTask(checkAnchors,!0))):(this.attributes.forEach(render),this.eventHandlers.forEach(render),this.extern?(this.instance.delegate=!1,this.instance.render()):render$1(this.instance,target,null,occupants),this.rendered=!0)},Component__proto__.shuffled=function(){Item.prototype.shuffled.call(this),this.instance&&!this.instance.isolated&&this.instance.fragment&&this.instance.fragment.shuffled()},Component__proto__.toString=function(){if(this.instance){ return this.instance.toHTML() }},Component__proto__.unbind=function(){this.isAnchor||(this.bound=!1,this.attributes.forEach(unbind),teardown$2(this.instance,(function(){return runloop.promise()})))},Component__proto__.unrender=function(shouldDestroy){this.shouldDestroy=shouldDestroy,this.isAnchor?(this.item&&unrenderItem(this,this.item),this.target=null,checking.length||(checking.push(this.ractive),runloop.scheduleTask(checkAnchors,!0))):(this.instance.unrender(),this.instance.el=this.instance.target=null,this.attributes.forEach(unrender),this.eventHandlers.forEach(unrender)),this.rendered=!1},Component__proto__.update=function(){this.dirty=!1,this.instance&&(this.instance.fragment.update(),this.attributes.forEach(update),this.eventHandlers.forEach(update))},Component})(Item);function addChild(meta){this.item&&this.removeChild(this.item);var child=meta.instance;meta.anchor=this,meta.up=this.up,meta.name=meta.nameOption||this.name,this.name=meta.name,child.isolated||child.viewmodel.attached(this.up),this.rendered&&(function(anchor,meta){if(!anchor.rendered){ return; }meta.shouldDestroy=!1,meta.up=anchor.up,anchor.item=meta,anchor.instance=meta.instance;var nextNode=anchor.up.findNextNode(anchor);meta.instance.fragment.rendered&&meta.instance.unrender();meta.partials=meta.instance.partials,meta.instance.partials=assign(create(meta.partials),meta.partials,anchor._partials),meta.instance.fragment.unbind(),meta.instance.fragment.componentParent=anchor.up,meta.instance.fragment.bind(meta.instance.viewmodel),anchor.attributes.forEach(bind$1),anchor.eventHandlers.forEach(bind$1),anchor.attributes.forEach(render),anchor.eventHandlers.forEach(render);var target=anchor.up.findParentNode();render$1(meta.instance,target,target.contains(nextNode)?nextNode:null,anchor.occupants),meta.lastBound!==anchor&&(meta.lastBound=anchor)})(this,meta)}function removeChild(meta){this.item===meta&&(unrenderItem(this,meta),this.name=this.template.n)}function unrenderItem(anchor,meta){anchor.rendered&&(meta.shouldDestroy=!0,meta.instance.unrender(),anchor.eventHandlers.forEach(unrender),anchor.attributes.forEach(unrender),anchor.eventHandlers.forEach(unbind),anchor.attributes.forEach(unbind),meta.instance.el=meta.instance.anchor=null,meta.instance.fragment.componentParent=null,meta.up=null,meta.anchor=null,anchor.item=null,anchor.instance=null)}var checking=[];function checkAnchors(){var list=checking;checking=[],list.forEach(updateAnchors)}function setupArgsFn(item,template,fragment,opts){void 0===opts&&(opts={}),template&&template.f&&template.f.s&&(item.fn=getFunction(template.f.s,template.f.r.length),!0===opts.register&&(item.models=resolveArgs(item,template,fragment,opts)))}function resolveArgs(item,template,fragment,opts){return void 0===opts&&(opts={}),template.f.r.map((function(ref,i){var model;return opts.specialRef&&(model=opts.specialRef(ref,i))?model:(model=resolveReference(fragment,ref),!0===opts.register&&model.register(item),model)}))}function teardownArgsFn(item,template){template&&template.f&&template.f.s&&(item.models&&item.models.forEach((function(m){m&&m.unregister&&m.unregister(item)})),item.models=null)}var missingDecorator={update:noop,teardown:noop},Decorator=function(options){this.owner=options.owner||options.up.owner||findElement(options.up),this.element=this.owner.attributeByName?this.owner:findElement(options.up),this.up=options.up||this.owner.up,this.ractive=this.owner.ractive;var template=this.template=options.template;this.name=template.n,this.node=null,this.handle=null,this.element.decorators.push(this)},Decorator__proto__=Decorator.prototype;Decorator__proto__.bind=function(){setupArgsFn(this,this.template,this.up,{register:!0})},Decorator__proto__.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble(),this.up.bubble())},Decorator__proto__.destroyed=function(){this.handle&&(this.handle.teardown(),this.handle=null),this.shouldDestroy=!0},Decorator__proto__.handleChange=function(){this.bubble()},Decorator__proto__.rebind=function(next,previous,safe){var idx=this.models.indexOf(previous);~idx&&(next=rebindMatch(this.template.f.r[idx],next,previous))!==previous&&(previous.unregister(this),this.models.splice(idx,1,next),next&&next.addShuffleRegister(this,"mark"),safe||this.bubble())},Decorator__proto__.rebound=function(update){teardownArgsFn(this,this.template),setupArgsFn(this,this.template,this.up,{register:!0}),update&&this.bubble()},Decorator__proto__.render=function(){var this$1=this;this.shouldDestroy=!1,this.handle&&this.unrender(),runloop.scheduleTask((function(){if(this$1.element.rendered){var args,fn=findInViewHierarchy("decorators",this$1.ractive,this$1.name);if(!fn){ return warnOnce(missingPlugin(this$1.name,"decorator")),void(this$1.handle=missingDecorator); }if(this$1.node=this$1.element.node,this$1.fn&&(args=this$1.models.map((function(model){if(model){ return model.get() }})),args=this$1.fn.apply(this$1.ractive,args)),this$1.handle=fn.apply(this$1.ractive,[this$1.node].concat(args)),!this$1.handle||!this$1.handle.teardown){ throw new Error("The '"+this$1.name+"' decorator must return an object with a teardown method"); }this$1.shouldDestroy&&this$1.destroyed()}}),!0)},Decorator__proto__.toString=function(){return""},Decorator__proto__.unbind=function(){teardownArgsFn(this,this.template)},Decorator__proto__.unrender=function(shouldDestroy){shouldDestroy&&!this.element.rendered||!this.handle||(this.handle.teardown(),this.handle=null)},Decorator__proto__.update=function(){var instance=this.handle;if(this.dirty){if(this.dirty=!1,instance){ if(instance.update){var args=this.models.map((function(model){return model&&model.get()}));instance.update.apply(this.ractive,this.fn.apply(this.ractive,args))}else { this.unrender(),this.render() } }}else { instance&&instance.invalidate&&runloop.scheduleTask((function(){return instance.invalidate()}),!0) }};var Doctype=(function(Item){function Doctype(){Item.apply(this,arguments)}Item&&(Doctype.__proto__=Item);var Doctype__proto__=Doctype.prototype=Object.create(Item&&Item.prototype);return Doctype__proto__.constructor=Doctype,Doctype__proto__.toString=function(){return"<!DOCTYPE"+this.template.a+">"},Doctype})(Item),proto$3=Doctype.prototype;proto$3.bind=proto$3.render=proto$3.teardown=proto$3.unbind=proto$3.unrender=proto$3.update=noop;var Binding=function(element,name){void 0===name&&(name="value"),this.element=element,this.ractive=element.ractive,this.attribute=element.attributeByName[name];var interpolator=this.attribute.interpolator;interpolator.twowayBinding=this;var model=interpolator.model;if(model.isReadonly&&!model.setRoot){var keypath=model.getKeypath().replace(/^@/,"");return warnOnceIfDebug("Cannot use two-way binding on <"+element.name+"> element: "+keypath+" is read-only. To suppress this warning use <"+element.name+" twoway='false'...>",{ractive:this.ractive}),!1}this.attribute.isTwoway=!0,this.model=model;var value=model.get();this.wasUndefined=void 0===value,void 0===value&&this.getInitialValue&&(value=this.getInitialValue(),model.set(value)),this.lastVal(!0,value);var parentForm=findElement(this.element,!1,"form");parentForm&&(this.resetValue=value,parentForm.formBindings.push(this))},Binding__proto__=Binding.prototype;function handleDomEvent(){this._ractive.binding.handleChange()}Binding__proto__.bind=function(){this.model.registerTwowayBinding(this)},Binding__proto__.handleChange=function(){var this$1=this,value=this.getValue();this.lastVal()!==value&&(runloop.start(),this.attribute.locked=!0,this.model.set(value),this.lastVal(!0,value),this.model.get()!==value?this.attribute.locked=!1:runloop.scheduleTask((function(){return this$1.attribute.locked=!1})),runloop.end())},Binding__proto__.lastVal=function(setting,value){if(!setting){ return this.lastValue; }this.lastValue=value},Binding__proto__.rebind=function(next,previous){var this$1=this;this.model&&this.model===previous&&previous.unregisterTwowayBinding(this),next&&(this.model=next,runloop.scheduleTask((function(){return next.registerTwowayBinding(this$1)})))},Binding__proto__.rebound=function(){this.model&&this.model.unregisterTwowayBinding(this),this.model=this.attribute.interpolator.model,this.model.registerTwowayBinding(this)},Binding__proto__.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},Binding__proto__.setFromNode=function(node){this.model.set(node.value)},Binding__proto__.unbind=function(){this.model.unregisterTwowayBinding(this)},Binding.prototype.unrender=noop;var CheckboxBinding=(function(Binding){function CheckboxBinding(element){Binding.call(this,element,"checked")}Binding&&(CheckboxBinding.__proto__=Binding);var CheckboxBinding__proto__=CheckboxBinding.prototype=Object.create(Binding&&Binding.prototype);return CheckboxBinding__proto__.constructor=CheckboxBinding,CheckboxBinding__proto__.render=function(){Binding.prototype.render.call(this),this.element.on("change",handleDomEvent),this.node.attachEvent&&this.element.on("click",handleDomEvent)},CheckboxBinding__proto__.unrender=function(){this.element.off("change",handleDomEvent),this.element.off("click",handleDomEvent)},CheckboxBinding__proto__.getInitialValue=function(){return!!this.element.getAttribute("checked")},CheckboxBinding__proto__.getValue=function(){return this.node.checked},CheckboxBinding__proto__.setFromNode=function(node){this.model.set(node.checked)},CheckboxBinding})(Binding);function getBindingGroup(group,model,getValue){var hash=group+"-bindingGroup";return model[hash]||(model[hash]=new BindingGroup(hash,model,getValue))}var BindingGroup=function(hash,model,getValue){var this$1=this;this.model=model,this.hash=hash,this.getValue=function(){return this$1.value=getValue.call(this$1),this$1.value},this.bindings=[]},BindingGroup__proto__=BindingGroup.prototype;BindingGroup__proto__.add=function(binding){this.bindings.push(binding)},BindingGroup__proto__.bind=function(){this.value=this.model.get(),this.model.registerTwowayBinding(this),this.bound=!0},BindingGroup__proto__.remove=function(binding){removeFromArray(this.bindings,binding),this.bindings.length||this.unbind()},BindingGroup__proto__.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]},BindingGroup.prototype.rebind=Binding.prototype.rebind;var push$1=[].push;function getValue(){var this$1=this,res=[];return this.bindings.filter((function(b){return b.node&&b.node.checked})).map((function(b){return b.element.getAttribute("value")})).forEach((function(v){this$1.bindings[0].arrayContains(res,v)||res.push(v)})),res}var CheckboxNameBinding=(function(Binding){function CheckboxNameBinding(element){if(Binding.call(this,element,"name"),this.checkboxName=!0,this.group=getBindingGroup("checkboxes",this.model,getValue),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")){var existingValue=this.model.get(),bindingValue=this.element.getAttribute("value");this.arrayContains(existingValue,bindingValue)||push$1.call(existingValue,bindingValue)}}Binding&&(CheckboxNameBinding.__proto__=Binding);var CheckboxNameBinding__proto__=CheckboxNameBinding.prototype=Object.create(Binding&&Binding.prototype);return CheckboxNameBinding__proto__.constructor=CheckboxNameBinding,CheckboxNameBinding__proto__.bind=function(){this.group.bound||this.group.bind()},CheckboxNameBinding__proto__.getInitialValue=function(){return this.noInitialValue=!0,[]},CheckboxNameBinding__proto__.getValue=function(){return this.group.value},CheckboxNameBinding__proto__.handleChange=function(){this.isChecked=this.element.node.checked,this.group.value=this.model.get();var value=this.element.getAttribute("value");this.isChecked&&!this.arrayContains(this.group.value,value)?this.group.value.push(value):!this.isChecked&&this.arrayContains(this.group.value,value)&&this.removeFromArray(this.group.value,value),this.lastValue=null,Binding.prototype.handleChange.call(this)},CheckboxNameBinding__proto__.render=function(){Binding.prototype.render.call(this);var node=this.node,existingValue=this.model.get(),bindingValue=this.element.getAttribute("value");isArray(existingValue)?this.isChecked=this.arrayContains(existingValue,bindingValue):this.isChecked=this.element.compare(existingValue,bindingValue),node.name="{{"+this.model.getKeypath()+"}}",node.checked=this.isChecked,this.element.on("change",handleDomEvent),this.node.attachEvent&&this.element.on("click",handleDomEvent)},CheckboxNameBinding__proto__.setFromNode=function(node){if(this.group.bindings.forEach((function(binding){return binding.wasUndefined=!0})),node.checked){var valueSoFar=this.group.getValue();valueSoFar.push(this.element.getAttribute("value")),this.group.model.set(valueSoFar)}},CheckboxNameBinding__proto__.unbind=function(){this.group.remove(this)},CheckboxNameBinding__proto__.unrender=function(){var el=this.element;el.off("change",handleDomEvent),el.off("click",handleDomEvent)},CheckboxNameBinding__proto__.arrayContains=function(selectValue,optionValue){
var this$1 = this;
for(var i=selectValue.length;i--;){ if(this$1.element.compare(optionValue,selectValue[i])){ return!0; } }return!1},CheckboxNameBinding__proto__.removeFromArray=function(array,item){
var this$1 = this;
if(array){ for(var i=array.length;i--;){ this$1.element.compare(item,array[i])&&array.splice(i,1) } }},CheckboxNameBinding})(Binding),ContentEditableBinding=(function(Binding){function ContentEditableBinding(){Binding.apply(this,arguments)}Binding&&(ContentEditableBinding.__proto__=Binding);var ContentEditableBinding__proto__=ContentEditableBinding.prototype=Object.create(Binding&&Binding.prototype);return ContentEditableBinding__proto__.constructor=ContentEditableBinding,ContentEditableBinding__proto__.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},ContentEditableBinding__proto__.getValue=function(){return this.element.node.innerHTML},ContentEditableBinding__proto__.render=function(){Binding.prototype.render.call(this);var el=this.element;el.on("change",handleDomEvent),el.on("blur",handleDomEvent),this.ractive.lazy||(el.on("input",handleDomEvent),this.node.attachEvent&&el.on("keyup",handleDomEvent))},ContentEditableBinding__proto__.setFromNode=function(node){this.model.set(node.innerHTML)},ContentEditableBinding__proto__.unrender=function(){var el=this.element;el.off("blur",handleDomEvent),el.off("change",handleDomEvent),el.off("input",handleDomEvent),el.off("keyup",handleDomEvent)},ContentEditableBinding})(Binding);function handleBlur(){handleDomEvent.call(this);var value=this._ractive.binding.model.get();this.value=void 0==value?"":value}var GenericBinding=(function(Binding){function GenericBinding(){Binding.apply(this,arguments)}Binding&&(GenericBinding.__proto__=Binding);var GenericBinding__proto__=GenericBinding.prototype=Object.create(Binding&&Binding.prototype);return GenericBinding__proto__.constructor=GenericBinding,GenericBinding__proto__.getInitialValue=function(){return""},GenericBinding__proto__.getValue=function(){return this.node.value},GenericBinding__proto__.render=function(){Binding.prototype.render.call(this);var lazy=this.ractive.lazy,timeout=!1,el=this.element;"lazy"in this.element&&(lazy=this.element.lazy),isNumeric(lazy)&&(timeout=+lazy,lazy=!1),this.handler=timeout?(function(delay){var timeout;return function(){var this$1=this;timeout&&clearTimeout(timeout),timeout=setTimeout((function(){this$1._ractive.binding.rendered&&handleDomEvent.call(this$1),timeout=null}),delay)}})(timeout):handleDomEvent;var node=this.node;el.on("change",handleDomEvent),"file"!==node.type&&(lazy||(el.on("input",this.handler),node.attachEvent&&el.on("keyup",this.handler)),el.on("blur",handleBlur))},GenericBinding__proto__.unrender=function(){var el=this.element;this.rendered=!1,el.off("change",handleDomEvent),el.off("input",this.handler),el.off("keyup",this.handler),el.off("blur",handleBlur)},GenericBinding})(Binding),FileBinding=(function(GenericBinding){function FileBinding(){GenericBinding.apply(this,arguments)}GenericBinding&&(FileBinding.__proto__=GenericBinding);var FileBinding__proto__=FileBinding.prototype=Object.create(GenericBinding&&GenericBinding.prototype);return FileBinding__proto__.constructor=FileBinding,FileBinding__proto__.getInitialValue=function(){},FileBinding__proto__.getValue=function(){return this.node.files},FileBinding__proto__.render=function(){this.element.lazy=!1,GenericBinding.prototype.render.call(this)},FileBinding__proto__.setFromNode=function(node){this.model.set(node.files)},FileBinding})(GenericBinding);function getSelectedOptions(select){return select.selectedOptions?toArray(select.selectedOptions):select.options?toArray(select.options).filter((function(option){return option.selected})):[]}var MultipleSelectBinding=(function(Binding){function MultipleSelectBinding(){Binding.apply(this,arguments)}Binding&&(MultipleSelectBinding.__proto__=Binding);var MultipleSelectBinding__proto__=MultipleSelectBinding.prototype=Object.create(Binding&&Binding.prototype);return MultipleSelectBinding__proto__.constructor=MultipleSelectBinding,MultipleSelectBinding__proto__.getInitialValue=function(){return this.element.options.filter((function(option){return option.getAttribute("selected")})).map((function(option){return option.getAttribute("value")}))},MultipleSelectBinding__proto__.getValue=function(){for(var options=this.element.node.options,len=options.length,selectedValues=[],i=0;i<len;i+=1){var option=options[i];if(option.selected){var optionValue=option._ractive?option._ractive.value:option.value;selectedValues.push(optionValue)}}return selectedValues},MultipleSelectBinding__proto__.handleChange=function(){var previousValue=this.attribute.getValue(),value=this.getValue();return void 0!==previousValue&&(function(a,b){var i;if(!isArray(a)||!isArray(b)){ return!1; }if(a.length!==b.length){ return!1; }for(i=a.length;i--;){ if(a[i]!==b[i]){ return!1; } }return!0})(value,previousValue)||Binding.prototype.handleChange.call(this),this},MultipleSelectBinding__proto__.render=function(){Binding.prototype.render.call(this),this.element.on("change",handleDomEvent),void 0===this.model.get()&&this.handleChange()},MultipleSelectBinding__proto__.setFromNode=function(node){for(var selectedOptions=getSelectedOptions(node),i=selectedOptions.length,result=new Array(i);i--;){var option=selectedOptions[i];result[i]=option._ractive?option._ractive.value:option.value}this.model.set(result)},MultipleSelectBinding__proto__.unrender=function(){this.element.off("change",handleDomEvent)},MultipleSelectBinding})(Binding),NumericBinding=(function(GenericBinding){function NumericBinding(){GenericBinding.apply(this,arguments)}GenericBinding&&(NumericBinding.__proto__=GenericBinding);var NumericBinding__proto__=NumericBinding.prototype=Object.create(GenericBinding&&GenericBinding.prototype);return NumericBinding__proto__.constructor=NumericBinding,NumericBinding__proto__.getInitialValue=function(){},NumericBinding__proto__.getValue=function(){var value=parseFloat(this.node.value);return isNaN(value)?void 0:value},NumericBinding__proto__.setFromNode=function(node){var value=parseFloat(node.value);isNaN(value)||this.model.set(value)},NumericBinding})(GenericBinding),siblings={};var RadioBinding=(function(Binding){function RadioBinding(element){var hash;Binding.call(this,element,"checked"),this.siblings=(hash=this.ractive._guid+this.element.getAttribute("name"),siblings[hash]||(siblings[hash]=[])),this.siblings.push(this)}Binding&&(RadioBinding.__proto__=Binding);var RadioBinding__proto__=RadioBinding.prototype=Object.create(Binding&&Binding.prototype);return RadioBinding__proto__.constructor=RadioBinding,RadioBinding__proto__.getValue=function(){return this.node.checked},RadioBinding__proto__.handleChange=function(){runloop.start(),this.siblings.forEach((function(binding){binding.model.set(binding.getValue())})),runloop.end()},RadioBinding__proto__.render=function(){Binding.prototype.render.call(this),this.element.on("change",handleDomEvent),this.node.attachEvent&&this.element.on("click",handleDomEvent)},RadioBinding__proto__.setFromNode=function(node){this.model.set(node.checked)},RadioBinding__proto__.unbind=function(){removeFromArray(this.siblings,this)},RadioBinding__proto__.unrender=function(){this.element.off("change",handleDomEvent),this.element.off("click",handleDomEvent)},RadioBinding})(Binding);function getValue$1(){var checked=this.bindings.filter((function(b){return b.node.checked}));if(checked.length>0){ return checked[0].element.getAttribute("value") }}var RadioNameBinding=(function(Binding){function RadioNameBinding(element){var this$1=this;Binding.call(this,element,"name"),this.group=getBindingGroup("radioname",this.model,getValue$1),this.group.add(this),element.checked&&(this.group.value=this.getValue()),this.attribute.interpolator.pathChanged=function(){return this$1.updateName()}}Binding&&(RadioNameBinding.__proto__=Binding);var RadioNameBinding__proto__=RadioNameBinding.prototype=Object.create(Binding&&Binding.prototype);return RadioNameBinding__proto__.constructor=RadioNameBinding,RadioNameBinding__proto__.bind=function(){this.group.bound||this.group.bind()},RadioNameBinding__proto__.getInitialValue=function(){if(this.element.getAttribute("checked")){ return this.element.getAttribute("value") }},RadioNameBinding__proto__.getValue=function(){return this.element.getAttribute("value")},RadioNameBinding__proto__.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),Binding.prototype.handleChange.call(this)),this.updateName()},RadioNameBinding__proto__.lastVal=function(setting,value){if(this.group){ return setting?void(this.group.lastValue=value):this.group.lastValue }},RadioNameBinding__proto__.rebind=function(next,previous){Binding.prototype.rebind.call(this,next,previous),this.updateName()},RadioNameBinding__proto__.rebound=function(update){Binding.prototype.rebound.call(this,update),this.updateName()},RadioNameBinding__proto__.render=function(){Binding.prototype.render.call(this);var node=this.node;this.updateName(),node.checked=this.element.compare(this.model.get(),this.element.getAttribute("value")),this.element.on("change",handleDomEvent),node.attachEvent&&this.element.on("click",handleDomEvent)},RadioNameBinding__proto__.setFromNode=function(node){node.checked&&this.group.model.set(this.element.getAttribute("value"))},RadioNameBinding__proto__.unbind=function(){this.group.remove(this)},RadioNameBinding__proto__.unrender=function(){var el=this.element;el.off("change",handleDomEvent),el.off("click",handleDomEvent)},RadioNameBinding__proto__.updateName=function(){this.node&&(this.node.name="{{"+this.model.getKeypath()+"}}")},RadioNameBinding})(Binding),SingleSelectBinding=(function(Binding){function SingleSelectBinding(){Binding.apply(this,arguments)}Binding&&(SingleSelectBinding.__proto__=Binding);var SingleSelectBinding__proto__=SingleSelectBinding.prototype=Object.create(Binding&&Binding.prototype);return SingleSelectBinding__proto__.constructor=SingleSelectBinding,SingleSelectBinding__proto__.forceUpdate=function(){var this$1=this,value=this.getValue();void 0!==value&&(this.attribute.locked=!0,runloop.scheduleTask((function(){return this$1.attribute.locked=!1})),this.model.set(value))},SingleSelectBinding__proto__.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var options=this.element.options,len=options.length;if(len){for(var value,optionWasSelected,i=len;i--;){var option=options[i];if(option.getAttribute("selected")){option.getAttribute("disabled")||(value=option.getAttribute("value")),optionWasSelected=!0;break}}if(!optionWasSelected){ for(;++i<len;){ if(!options[i].getAttribute("disabled")){value=options[i].getAttribute("value");break} } }return void 0!==value&&(this.element.attributeByName.value.value=value),value}}},SingleSelectBinding__proto__.getValue=function(){var i,options=this.node.options,len=options.length;for(i=0;i<len;i+=1){var option=options[i];if(options[i].selected&&!options[i].disabled){ return option._ractive?option._ractive.value:option.value }}},SingleSelectBinding__proto__.render=function(){Binding.prototype.render.call(this),this.element.on("change",handleDomEvent)},SingleSelectBinding__proto__.setFromNode=function(node){var option=getSelectedOptions(node)[0];this.model.set(option._ractive?option._ractive.value:option.value)},SingleSelectBinding__proto__.unrender=function(){this.element.off("change",handleDomEvent)},SingleSelectBinding})(Binding);function isBindable(attribute){return!(!attribute||!attribute.template.f||1!==attribute.template.f.length||attribute.template.f[0].s)&&(attribute.template.f[0].t===INTERPOLATOR||(attribute.template.f[0].t===TRIPLE&&warnIfDebug("It is not possible create a binding using a triple mustache."),!1))}var endsWithSemi=/;\s*$/,Element=(function(ContainerItem){function Element(options){
var this$1 = this;
var attrs,n,attr,val,cls,name,template,leftovers;if(ContainerItem.call(this,options),this.name=options.template.e.toLowerCase(),this.parent=findElement(this.up,!1),this.parent&&"option"===this.parent.name){ throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)"); }this.decorators=[],this.attributeByName={};for(var m=this.template.m,len=m&&m.length||0,i=0;i<len;i++){ if((template=m[i]).g){ (this$1.statics||(this$1.statics={}))[template.n]=isString(template.f)?template.f:template.n; }else { switch(template.t){case ATTRIBUTE:case BINDING_FLAG:case DECORATOR:case EVENT:case TRANSITION:attr=createItem({owner:this$1,up:this$1.up,template:template}),n=template.n,attrs=attrs||(attrs=this$1.attributes=[]),"value"===n?val=attr:"name"===n?name=attr:"class"===n?cls=attr:attrs.push(attr);break;case DELEGATE_FLAG:this$1.delegate=!1;break;default:(leftovers||(leftovers=[])).push(template)} } }val&&attrs.push(val),name&&attrs.push(name),cls&&attrs.unshift(cls),leftovers&&((attrs||(this.attributes=[])).push(new ConditionalAttribute({owner:this,up:this.up,template:leftovers})),leftovers=[]),options.template.f&&!options.deferContent&&(this.fragment=new Fragment({template:options.template.f,owner:this,cssIds:null})),this.binding=null}ContainerItem&&(Element.__proto__=ContainerItem);var Element__proto__=Element.prototype=Object.create(ContainerItem&&ContainerItem.prototype);return Element__proto__.constructor=Element,Element__proto__.bind=function(){var attrs=this.attributes;if(attrs){attrs.binding=!0;for(var len=attrs.length,i=0;i<len;i++){ attrs[i].bind(); }attrs.binding=!1}this.fragment&&this.fragment.bind(),this.binding?this.binding.bind():this.recreateTwowayBinding()},Element__proto__.createTwowayBinding=function(){if("twoway"in this?this.twoway:this.ractive.twoway){var Binding=(function(element){var name=element.name,attributes=element.attributeByName;if("input"===name||"textarea"===name||"select"===name||attributes.contenteditable){var isBindableByValue=isBindable(attributes.value),isBindableByContentEditable=isBindable(attributes.contenteditable);if((element.getAttribute("contenteditable")||isBindableByContentEditable)&&isBindableByValue){ return ContentEditableBinding; }if("input"===name){var type=element.getAttribute("type");if("radio"===type){var isBindableByName=isBindable(attributes.name),isBindableByChecked=isBindable(attributes.checked);return isBindableByName&&isBindableByChecked?(warnIfDebug("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:element.root}),RadioNameBinding):isBindableByName?RadioNameBinding:isBindableByChecked?RadioBinding:null}if("checkbox"===type){var isBindableByName$1=isBindable(attributes.name),isBindableByChecked$1=isBindable(attributes.checked);return isBindableByName$1&&isBindableByChecked$1?CheckboxBinding:isBindableByName$1?CheckboxNameBinding:isBindableByChecked$1?CheckboxBinding:null}return"file"===type&&isBindableByValue?FileBinding:"number"===type&&isBindableByValue?NumericBinding:"range"===type&&isBindableByValue?NumericBinding:isBindableByValue?GenericBinding:null}return"select"===name&&isBindableByValue?element.getAttribute("multiple")?MultipleSelectBinding:SingleSelectBinding:"textarea"===name&&isBindableByValue?GenericBinding:null}})(this);if(Binding){var binding=new Binding(this);if(binding&&binding.model){ return binding }}}},Element__proto__.destroyed=function(){this.attributes&&this.attributes.forEach(destroyed),this.fragment&&this.fragment.destroyed()},Element__proto__.detach=function(){return this.rendered||this.destroyed(),detachNode(this.node)},Element__proto__.find=function(selector,options){return this.node&&matches(this.node,selector)?this.node:this.fragment?this.fragment.find(selector,options):void 0},Element__proto__.findAll=function(selector,options){var result=options.result;matches(this.node,selector)&&result.push(this.node),this.fragment&&this.fragment.findAll(selector,options)},Element__proto__.findNextNode=function(){return null},Element__proto__.firstNode=function(){return this.node},Element__proto__.getAttribute=function(name){if(this.statics&&name in this.statics){ return this.statics[name]; }var attribute=this.attributeByName[name];return attribute?attribute.getValue():void 0},Element__proto__.getContext=function(){
var arguments$1 = arguments;
for(var ref,assigns=[],len=arguments.length;len--;){ assigns[len]=arguments$1[len]; }return this.fragment?(ref=this.fragment).getContext.apply(ref,assigns):(this.ctx||(this.ctx=new Context(this.up,this)),assigns.unshift(create(this.ctx)),assign.apply(null,assigns))},Element__proto__.off=function(event,callback,capture){void 0===capture&&(capture=!1);var delegate=this.up.delegate,ref=this.listeners&&this.listeners[event];if(ref){ if(removeFromArray(ref,callback),delegate){var listeners=(delegate.listeners||(delegate.listeners=[]))&&(delegate.listeners[event]||(delegate.listeners[event]=[]));listeners.refs&&!--listeners.refs&&delegate.off(event,delegateHandler,!0)}else if(this.rendered){var n=this.node,add=n.addEventListener,rem=n.removeEventListener;ref.length?ref.length&&!ref.refs&&capture&&(rem.call(n,event,handler,!0),add.call(n,event,handler,!1)):rem.call(n,event,handler,capture)} }},Element__proto__.on=function(event,callback,capture){void 0===capture&&(capture=!1);var delegate=this.up.delegate,ref=(this.listeners||(this.listeners={}))[event]||(this.listeners[event]=[]);if(delegate){var listeners=(delegate.listeners||(delegate.listeners=[]))&&delegate.listeners[event]||(delegate.listeners[event]=[]);listeners.refs?listeners.refs++:(listeners.refs=0,delegate.on(event,delegateHandler,!0),listeners.refs++)}else if(this.rendered){var n=this.node,add=n.addEventListener,rem=n.removeEventListener;ref.length?ref.length&&!ref.refs&&capture&&(rem.call(n,event,handler,!1),add.call(n,event,handler,!0)):add.call(n,event,handler,capture)}addToArray(this.listeners[event],callback)},Element__proto__.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender()),(this.binding=this.createTwowayBinding())&&(this.binding.bind(),this.rendered&&this.binding.render())},Element__proto__.rebound=function(update$$1){ContainerItem.prototype.rebound.call(this,update$$1),this.attributes&&this.attributes.forEach((function(x){return x.rebound(update$$1)})),this.binding&&this.binding.rebound(update$$1)},Element__proto__.render=function(target,occupants){var node,this$1=this;this.namespace=(function(element){var xmlns$$1=element.getAttribute("xmlns");if(xmlns$$1){ return xmlns$$1; }if("svg"===element.name){ return svg$1; }var parent=element.parent;if(parent){ return"foreignobject"===parent.name?html:parent.node.namespaceURI; }return element.ractive.el.namespaceURI})(this);var existing=!1;if(occupants){ for(var n;n=occupants.shift();){if(n.nodeName.toUpperCase()===this$1.template.e.toUpperCase()&&n.namespaceURI===this$1.namespace){this$1.node=node=n,existing=!0;break}detachNode(n)} }if(!existing&&this.node&&(node=this.node,target.appendChild(node),existing=!0),!node){var name=this.template.e;node=createElement(this.namespace===html?name.toLowerCase():name,this.namespace,this.getAttribute("is")),this.node=node}this.statics&&keys(this.statics).forEach((function(k){node.setAttribute(k,this$1.statics[k])})),defineProperty(node,"_ractive",{value:{proxy:this},configurable:!0}),existing&&this.foundNode&&this.foundNode(node);var intro=this.intro;if(intro&&intro.shouldFire("intro")&&(intro.isIntro=!0,intro.isOutro=!1,runloop.registerTransition(intro)),this.fragment){var children=existing?toArray(node.childNodes):void 0;this.fragment.render(node,children),children&&children.forEach(detachNode)}if(existing){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(node);for(var i=node.attributes.length;i--;){var name$1=node.attributes[i].name;name$1 in this$1.attributeByName||this$1.statics&&name$1 in this$1.statics||node.removeAttribute(name$1)}}if(this.up.cssIds&&node.setAttribute("data-ractive-css",this.up.cssIds.map((function(x){return"{"+x+"}"})).join(" ")),this.attributes){ for(var len=this.attributes.length,i$1=0;i$1<len;i$1++){ this$1.attributes[i$1].render(); } }if(this.binding&&this.binding.render(),!this.up.delegate&&this.listeners){var ls=this.listeners;for(var k in ls){ ls[k]&&ls[k].length&&this$1.node.addEventListener(k,handler,!!ls[k].refs) }}existing||target.appendChild(node),this.rendered=!0},Element__proto__.toString=function(){var element,nameAttr,this$1=this,tagName=this.template.e,attrs=this.attributes&&this.attributes.map(stringifyAttribute).join("")||"";this.statics&&keys(this.statics).forEach((function(k){return"class"!==k&&"style"!==k&&(attrs=" "+k+'="'+this$1.statics[k]+'"'+attrs)})),"option"===this.name&&this.isSelected()&&(attrs+=" selected"),"input"===this.name&&(nameAttr=(element=this).attributeByName.name,"radio"===element.getAttribute("type")&&(nameAttr||{}).interpolator&&element.getAttribute("value")===nameAttr.interpolator.model.get())&&(attrs+=" checked");var style=this.statics?this.statics.style:void 0,cls=this.statics?this.statics.class:void 0;this.attributes&&this.attributes.forEach((function(attr){"class"===attr.name?cls=(cls||"")+(cls?" ":"")+safeAttributeString(attr.getString()):"style"===attr.name?(style=(style||"")+(style?" ":"")+safeAttributeString(attr.getString()))&&!endsWithSemi.test(style)&&(style+=";"):attr.style?style=(style||"")+(style?" ":"")+attr.style+": "+safeAttributeString(attr.getString())+";":attr.inlineClass&&attr.getValue()&&(cls=(cls||"")+(cls?" ":"")+attr.inlineClass)})),void 0!==style&&(attrs=" style"+(style?'="'+style+'"':"")+attrs),void 0!==cls&&(attrs=" class"+(cls?'="'+cls+'"':"")+attrs),this.up.cssIds&&(attrs+=' data-ractive-css="'+this.up.cssIds.map((function(x){return"{"+x+"}"})).join(" ")+'"');var str="<"+tagName+attrs+">";return voidElements[this.name.toLowerCase()]?str:("textarea"===this.name&&void 0!==this.getAttribute("value")?str+=escapeHtml(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(str+=this.getAttribute("value")||""),this.fragment&&(str+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),str+="</"+tagName+">")},Element__proto__.unbind=function(){var attrs=this.attributes;if(attrs){attrs.unbinding=!0;for(var len=attrs.length,i=0;i<len;i++){ attrs[i].unbind(); }attrs.unbinding=!1}this.binding&&this.binding.unbind(),this.fragment&&this.fragment.unbind()},Element__proto__.unrender=function(shouldDestroy){if(this.rendered){this.rendered=!1;var transition=this.intro;transition&&transition.complete&&transition.complete(),"option"===this.name?this.detach():shouldDestroy&&runloop.detachWhenReady(this);var outro=this.outro;outro&&outro.shouldFire("outro")&&(outro.isIntro=!1,outro.isOutro=!0,runloop.registerTransition(outro)),this.fragment&&this.fragment.unrender(),this.binding&&this.binding.unrender()}},Element__proto__.update=function(){if(this.dirty){this.dirty=!1;var attrs=this.attributes;if(attrs){ for(var len=attrs.length,i=0;i<len;i++){ attrs[i].update(); } }this.fragment&&this.fragment.update()}},Element})(ContainerItem);function stringifyAttribute(attribute){var str=attribute.toString();return str?" "+str:""}function delegateHandler(ev){for(var listeners,name=ev.type,end=ev.currentTarget,endEl=end._ractive&&end._ractive.proxy,node=ev.target,bubble=!0;bubble&&node&&node!==end;){var proxy=node._ractive&&node._ractive.proxy;if(proxy&&proxy.up.delegate===endEl&&shouldFire(ev,node,end)&&(listeners=proxy.listeners&&proxy.listeners[name])){ for(var len=listeners.length,i=0;i<len;i++){ bubble=!1!==listeners[i].call(node,ev)&&bubble; } }node=node.parentNode||node.correspondingUseElement}return bubble}var UIEvent=null!==win?win.UIEvent:null;function shouldFire(event,start,end){if(UIEvent&&event instanceof UIEvent){ for(var node=start;node&&node!==end;){if(node.disabled){ return!1; }node=node.parentNode||node.correspondingUseElement} }return!0}function handler(ev){
var this$1 = this;
var listeners,el=this._ractive.proxy;if(el.listeners&&(listeners=el.listeners[ev.type])){ for(var len=listeners.length,i=0;i<len;i++){ listeners[i].call(this$1,ev) } }}var Form=(function(Element){function Form(options){Element.call(this,options),this.formBindings=[]}Element&&(Form.__proto__=Element);var Form__proto__=Form.prototype=Object.create(Element&&Element.prototype);return Form__proto__.constructor=Form,Form__proto__.render=function(target,occupants){Element.prototype.render.call(this,target,occupants),this.on("reset",handleReset)},Form__proto__.unrender=function(shouldDestroy){this.off("reset",handleReset),Element.prototype.unrender.call(this,shouldDestroy)},Form})(Element);function handleReset(){var element=this._ractive.proxy;runloop.start(),element.formBindings.forEach(updateModel),runloop.end()}function updateModel(binding){binding.model.set(binding.resetValue)}var whitelist={animationend:1,animationiteration:1,animationstart:1,transitioncancel:1,transitionend:1,transitionstart:1,transitionrun:1},DOMEvent=function(name,owner){-1!==name.indexOf("*")&&fatal('Only component proxy-events may contain "*" wildcards, <'+owner.name+" on-"+name+'="..."/> is not valid'),this.name=name,this.owner=owner,this.handler=null},DOMEvent__proto__=DOMEvent.prototype;DOMEvent__proto__.bind=function(){},DOMEvent__proto__.render=function(directive){var this$1=this,name=this.name,register=function(){var node=this$1.owner.node,on="on"+name;(on in node||on in win||whitelist[name])&&this$1.owner.on(name,this$1.handler=function(event){return directive.fire({node:node,original:event,event:event,name:name})})};"load"!==name?runloop.scheduleTask(register,!0):register()},DOMEvent__proto__.unbind=function(){},DOMEvent__proto__.unrender=function(){this.handler&&this.owner.off(this.name,this.handler)};var CustomEvent=function(eventPlugin,owner,name,args){this.eventPlugin=eventPlugin,this.owner=owner,this.name=name,this.handler=null,this.args=args},CustomEvent__proto__=CustomEvent.prototype;CustomEvent__proto__.bind=function(){},CustomEvent__proto__.render=function(directive){var this$1=this;runloop.scheduleTask((function(){var node=this$1.owner.node;this$1.handler=this$1.eventPlugin.apply(this$1.owner.ractive,[node,function(event){return void 0===event&&(event={}),event.original?event.event=event.original:event.original=event.event,event.name=this$1.name,event.node=event.node||node,directive.fire(event)}].concat(this$1.args||[]))}))},CustomEvent__proto__.unbind=function(){},CustomEvent__proto__.unrender=function(){this.handler.teardown()};var RactiveEvent=function(component,name){this.component=component,this.name=name,this.handler=null},RactiveEvent__proto__=RactiveEvent.prototype;RactiveEvent__proto__.bind=function(directive){var ractive=this.component.instance;this.handler=ractive.on(this.name,(function(){
var arguments$1 = arguments;
for(var args=[],len=arguments.length;len--;){ args[len]=arguments$1[len]; }if(args[0]instanceof Context){var ctx=args.shift();ctx.component=ractive,directive.fire(ctx,args)}else { directive.fire({},args); }return!1}))},RactiveEvent__proto__.render=function(){},RactiveEvent__proto__.unbind=function(){this.handler.cancel()},RactiveEvent__proto__.unrender=function(){};var specialPattern=/^(event|arguments|@node|@event|@context)(\..+)?$/,dollarArgsPattern=/^\$(\d+)(\..+)?$/,EventDirective=function(options){this.owner=options.owner||options.up.owner||findElement(options.up),this.element=this.owner.attributeByName?this.owner:findElement(options.up,!0),this.template=options.template,this.up=options.up,this.ractive=options.up.ractive,this.events=[]},EventDirective__proto__=EventDirective.prototype;function progressiveText(item,target,occupants,text){if(occupants){var n=occupants[0];if(n&&3===n.nodeType){var idx=n.nodeValue.indexOf(text);occupants.shift(),0===idx?n.nodeValue.length!==text.length&&occupants.unshift(n.splitText(text.length)):n.nodeValue=text}else { n=item.node=doc.createTextNode(text),occupants[0]?target.insertBefore(n,occupants[0]):target.appendChild(n); }item.node=n}else { item.node||(item.node=doc.createTextNode(text)),target.appendChild(item.node) }}EventDirective__proto__.bind=function(){var this$1=this;if(this.element.type===COMPONENT||this.element.type===ANCHOR){ this.template.n.forEach((function(n){this$1.events.push(new RactiveEvent(this$1.element,n))})); }else{var args;if(args=this.template.a){var rs=args.r.map((function(r){var model=resolveReference(this$1.up,r);return model?model.get():void 0}));try{args=getFunction(args.s,rs.length).apply(null,rs)}catch(err){args=null,warnIfDebug("Failed to compute args for event on-"+this.template.n.join("- ")+": "+(err.message||err))}}this.template.n.forEach((function(n){var fn=findInViewHierarchy("events",this$1.ractive,n);fn?this$1.events.push(new CustomEvent(fn,this$1.element,n,args)):this$1.events.push(new DOMEvent(n,this$1.element))}))}this.models=null,addToArray(this.element.events||(this.element.events=[]),this),setupArgsFn(this,this.template),this.fn||(this.action=this.template.f),this.events.forEach((function(e){return e.bind(this$1)}))},EventDirective__proto__.destroyed=function(){this.events.forEach((function(e){return e.unrender()}))},EventDirective__proto__.fire=function(event,args){var this$1=this;void 0===args&&(args=[]);var context=event instanceof Context&&event.refire?event:this.element.getContext(event);if(this.fn){var values=[],models=resolveArgs(this,this.template,this.up,{specialRef:function(ref){var specialMatch=specialPattern.exec(ref);if(specialMatch){ return{special:specialMatch[1],keys:specialMatch[2]?splitKeypath(specialMatch[2].substr(1)):[]}; }var dollarMatch=dollarArgsPattern.exec(ref);return dollarMatch?{special:"arguments",keys:[dollarMatch[1]-1].concat(dollarMatch[2]?splitKeypath(dollarMatch[2].substr(1)):[])}:void 0}});models&&models.forEach((function(model){if(!model){ return values.push(void 0); }if(model.special){var obj,which=model.special;"@node"===which?obj=this$1.element.node:"@event"===which?obj=event&&event.event:"event"===which?(warnOnceIfDebug("The event reference available to event directives is deprecated and should be replaced with @context and @event"),obj=context):obj="@context"===which?context:args;for(var keys=model.keys.slice();obj&&keys.length;){ obj=obj[keys.shift()]; }return values.push(obj)}if(model.wrapper){ return values.push(model.wrapperValue); }values.push(model.get())}));var ractive=this.ractive,oldEvent=ractive.event;ractive.event=context;var returned=this.fn.apply(ractive,values),result=returned.pop();if(!1===result){var original=event?event.original:void 0;original?(original.preventDefault&&original.preventDefault(),original.stopPropagation&&original.stopPropagation()):warnOnceIfDebug("handler '"+this.template.n.join(" ")+"' returned false, but there is no event available to cancel")}else{ !returned.length&&isArray(result)&&isString(result[0])&&(result=fireEvent(this.ractive,result.shift(),context,result)); }return ractive.event=oldEvent,result}return fireEvent(this.ractive,this.action,context,args)},EventDirective__proto__.handleChange=function(){},EventDirective__proto__.render=function(){var this$1=this;this.events.forEach((function(e){return e.render(this$1)}))},EventDirective__proto__.toString=function(){return""},EventDirective__proto__.unbind=function(){removeFromArray(this.element.events,this),this.events.forEach((function(e){return e.unbind()}))},EventDirective__proto__.unrender=function(){this.events.forEach((function(e){return e.unrender()}))},EventDirective.prototype.update=noop,EventDirective.prototype.rebound=noop;var Mustache=(function(Item){function Mustache(options){Item.call(this,options),options.owner&&(this.parent=options.owner),this.isStatic=!!options.template.s,this.model=null,this.dirty=!1}Item&&(Mustache.__proto__=Item);var Mustache__proto__=Mustache.prototype=Object.create(Item&&Item.prototype);return Mustache__proto__.constructor=Mustache,Mustache__proto__.bind=function(){var model=resolve(this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,this.template);if(model){var value=model.get();if(this.isStatic){ return this.model={get:function(){return value}},void model.unreference(); }model.register(this),this.model=model}},Mustache__proto__.handleChange=function(){this.bubble()},Mustache__proto__.rebind=function(next,previous,safe){if(!this.isStatic){ return(next=rebindMatch(this.template,next,previous,this.up))!==this.model&&(this.model&&this.model.unregister(this),next&&next.addShuffleRegister(this,"mark"),this.model=next,safe||this.handleChange(),!0) }},Mustache__proto__.rebound=function(update){this.model&&(this.model.rebound?this.model.rebound(update):(this.model.unregister(this),this.bind()),update&&this.bubble()),this.fragment&&this.fragment.rebound(update)},Mustache__proto__.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0)},Mustache})(Item);function MustacheContainer(options){Mustache.call(this,options)}var proto$4=MustacheContainer.prototype=Object.create(ContainerItem.prototype);assign(proto$4,Mustache.prototype,{constructor:MustacheContainer});var Interpolator=(function(Mustache){function Interpolator(){Mustache.apply(this,arguments)}Mustache&&(Interpolator.__proto__=Mustache);var Interpolator__proto__=Interpolator.prototype=Object.create(Mustache&&Mustache.prototype);return Interpolator__proto__.constructor=Interpolator,Interpolator__proto__.bubble=function(){this.owner&&this.owner.bubble(),Mustache.prototype.bubble.call(this)},Interpolator__proto__.detach=function(){return detachNode(this.node)},Interpolator__proto__.firstNode=function(){return this.node},Interpolator__proto__.getString=function(){return this.model?safeToStringValue(this.model.get()):""},Interpolator__proto__.render=function(target,occupants){if(!inAttributes()){var value=this.value=this.getString();this.rendered=!0,progressiveText(this,target,occupants,value)}},Interpolator__proto__.toString=function(escape){var string=this.getString();return escape?escapeHtml(string):string},Interpolator__proto__.unrender=function(shouldDestroy){shouldDestroy&&this.detach(),this.rendered=!1},Interpolator__proto__.update=function(){if(this.dirty&&(this.dirty=!1,this.rendered)){var value=this.getString();value!==this.value&&(this.node.data=this.value=value)}},Interpolator__proto__.valueOf=function(){return this.model?this.model.get():void 0},Interpolator})(Mustache),Input=(function(Element){function Input(){Element.apply(this,arguments)}Element&&(Input.__proto__=Element);var Input__proto__=Input.prototype=Object.create(Element&&Element.prototype);return Input__proto__.constructor=Input,Input__proto__.render=function(target,occupants){Element.prototype.render.call(this,target,occupants),this.node.defaultValue=this.node.value},Input__proto__.compare=function(value,attrValue){var comparator=this.getAttribute("value-comparator");if(comparator){if(isFunction(comparator)){ return comparator(value,attrValue); }if(value&&attrValue){ return value[comparator]==attrValue[comparator] }}return value==attrValue},Input})(Element),specials$1={true:!0,false:!1,null:null,undefined:void 0},specialsPattern=new RegExp("^(?:"+keys(specials$1).join("|")+")"),numberPattern$1=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,placeholderPattern=/\$\{([^\}]+)\}/g,placeholderAtStartPattern=/^\$\{([^\}]+)\}/,onlyWhitespace$1=/^\s*$/,JsonParser=Parser.extend({init:function(str,options){this.values=options.values,this.sp()},postProcess:function(result){return 1===result.length&&onlyWhitespace$1.test(this.leftover)?{value:result[0].v}:null},converters:[function(parser){if(!parser.values){ return null; }var placeholder=parser.matchPattern(placeholderAtStartPattern);return placeholder&&hasOwn(parser.values,placeholder)?{v:parser.values[placeholder]}:void 0},function(parser){var special=parser.matchPattern(specialsPattern);if(special){ return{v:specials$1[special]} }},function(parser){var number=parser.matchPattern(numberPattern$1);if(number){ return{v:+number} }},function(parser){var stringLiteral=readStringLiteral(parser),values=parser.values;return stringLiteral&&values?{v:stringLiteral.v.replace(placeholderPattern,(function(match,$1){return $1 in values?values[$1]:$1}))}:stringLiteral},function(parser){if(!parser.matchString("{")){ return null; }var pair,result={};if(parser.sp(),parser.matchString("}")){ return{v:result}; }for(;pair=getKeyValuePair(parser);){if(result[pair.key]=pair.value,parser.sp(),parser.matchString("}")){ return{v:result}; }if(!parser.matchString(",")){ return null }}return null},function(parser){if(!parser.matchString("[")){ return null; }var valueToken,result=[];if(parser.sp(),parser.matchString("]")){ return{v:result}; }for(;valueToken=parser.read();){if(result.push(valueToken.v),parser.sp(),parser.matchString("]")){ return{v:result}; }if(!parser.matchString(",")){ return null; }parser.sp()}return null}]});function getKeyValuePair(parser){parser.sp();var key=readKey(parser);if(!key){ return null; }var pair={key:key};if(parser.sp(),!parser.matchString(":")){ return null; }parser.sp();var valueToken=parser.read();return valueToken?(pair.value=valueToken.v,pair):null}function parseJSON(str,values){return new JsonParser(str,{values:values}).result}var Mapping=(function(Item){function Mapping(options){Item.call(this,options),this.name=options.template.n,this.owner=options.owner||options.up.owner||options.element||findElement(options.up),this.element=options.element||(this.owner.attributeByName?this.owner:findElement(options.up)),this.up=this.element.up,this.ractive=this.up.ractive,this.element.attributeByName[this.name]=this,this.value=options.template.f}Item&&(Mapping.__proto__=Item);var Mapping__proto__=Mapping.prototype=Object.create(Item&&Item.prototype);return Mapping__proto__.constructor=Mapping,Mapping__proto__.bind=function(){var template=this.template.f,viewmodel=this.element.instance.viewmodel;if(0===template){ viewmodel.joinKey(this.name).set(!0); }else if(isString(template)){var parsed=parseJSON(template);viewmodel.joinKey(this.name).set(parsed?parsed.value:template)}else { isArray(template)&&(function(item){var template=item.template.f,viewmodel=item.element.instance.viewmodel,childData=viewmodel.value;if(1===template.length&&template[0].t===INTERPOLATOR){var model=resolve(item.up,template[0]),val=model.get(!1);template[0].s?!isObjectType(val)||template[0].x?viewmodel.joinKey(splitKeypath(item.name)).set(val):warnIfDebug("Cannot copy non-computed object value from static mapping '"+item.name+"'"):(item.model=model,item.link=viewmodel.createLink(item.name,model,template[0].r,{mapping:!0}),void 0===val&&!model.isReadonly&&item.name in childData&&model.set(childData[item.name])),model!==item.model&&model.unregister()}else { item.boundFragment=new Fragment({owner:item,template:template}).bind(),item.model=viewmodel.joinKey(splitKeypath(item.name)),item.model.set(item.boundFragment.valueOf()),item.boundFragment.bubble=function(){Fragment.prototype.bubble.call(item.boundFragment),runloop.scheduleTask((function(){item.boundFragment.update(),item.model.set(item.boundFragment.valueOf())}))} }})(this) }},Mapping__proto__.rebound=function(update){(this.boundFragment&&this.boundFragment.rebound(update),this.link)&&(this.model=resolve(this.up,this.template.f[0]),this.element.instance.viewmodel.joinAll(splitKeypath(this.name)).link(this.model,this.name,{mapping:!0}))},Mapping__proto__.render=function(){},Mapping__proto__.unbind=function(){this.model&&this.model.unregister(this),this.boundFragment&&this.boundFragment.unbind(),this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()},Mapping__proto__.unrender=function(){},Mapping__proto__.update=function(){this.dirty&&(this.dirty=!1,this.boundFragment&&this.boundFragment.update())},Mapping})(Item);var Option=(function(Element){function Option(options){var template=options.template;template.a||(template.a={}),void 0!==template.a.value||"disabled"in template.a||(template.a.value=template.f||""),Element.call(this,options),this.select=findElement(this.parent||this.up,!1,"select")}Element&&(Option.__proto__=Element);var Option__proto__=Option.prototype=Object.create(Element&&Element.prototype);return Option__proto__.constructor=Option,Option__proto__.bind=function(){if(this.select){var selectedAttribute=this.attributeByName.selected;if(selectedAttribute&&void 0!==this.select.getAttribute("value")){var index=this.attributes.indexOf(selectedAttribute);this.attributes.splice(index,1),delete this.attributeByName.selected}Element.prototype.bind.call(this),this.select.options.push(this)}else { Element.prototype.bind.call(this) }},Option__proto__.bubble=function(){var value=this.getAttribute("value");this.node&&this.node.value!==value&&(this.node._ractive.value=value),Element.prototype.bubble.call(this)},Option__proto__.getAttribute=function(name){var attribute=this.attributeByName[name];return attribute?attribute.getValue():"value"===name&&this.fragment?this.fragment.valueOf():void 0},Option__proto__.isSelected=function(){
var this$1 = this;
var optionValue=this.getAttribute("value");if(void 0===optionValue||!this.select){ return!1; }var selectValue=this.select.getAttribute("value");if(this.select.compare(selectValue,optionValue)){ return!0; }if(this.select.getAttribute("multiple")&&isArray(selectValue)){ for(var i=selectValue.length;i--;){ if(this$1.select.compare(selectValue[i],optionValue)){ return!0 } } }},Option__proto__.render=function(target,occupants){Element.prototype.render.call(this,target,occupants),this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))},Option__proto__.unbind=function(){Element.prototype.unbind.call(this),this.select&&removeFromArray(this.select.options,this)},Option})(Element);function getPartialTemplate(ractive,name,up){var partial=(function(ractive,name,up){var partial=(function findParentPartial(name,parent){if(parent){if(parent.template&&parent.template.p&&!isArray(parent.template.p)&&hasOwn(parent.template.p,name)){ return parent.template.p[name]; }if(parent.up&&parent.up.owner){ return findParentPartial(name,parent.up.owner) }}})(name,up.owner);if(partial){ return partial; }var fn,instance=findInstance("partials",ractive,name);if(!instance){ return; }if(isFunction(partial=instance.partials[name])){if((fn=partial).styleSet){ return fn; }(fn=partial.bind(instance)).isOwner=hasOwn(instance.partials,name),partial=fn.call(ractive,parser)}if(!partial&&""!==partial){ return void warnIfDebug(noRegistryFunctionReturn,name,"partial","partial",{ractive:ractive}); }if(!parser.isParsed(partial)){var parsed=parser.parseFor(partial,instance);parsed.p&&warnIfDebug("Partials ({{>%s}}) cannot contain nested inline partials",name,{ractive:ractive});var target=fn?instance:(function(ractive,key){return hasOwn(ractive.partials,key)?ractive:(function findConstructor(constructor,key){if(!constructor){ return; }return hasOwn(constructor.partials,key)?constructor:findConstructor(constructor.Parent,key)})(ractive.constructor,key)})(instance,name);target.partials[name]=partial=parsed.t}fn&&(partial._fn=fn);return partial.v?partial.t:partial})(ractive,name,up||{});if(partial){ return partial; }if(partial=parser.fromId(name,{noThrow:!0})){var parsed=parser.parseFor(partial,ractive);return parsed.p&&(function(target){
var arguments$1 = arguments;
for(var sources=[],len=arguments.length-1;len-- >0;){ sources[len]=arguments$1[len+1]; }for(var i=0;i<sources.length;i++){var source=sources[i];for(var key in source){ key in target||!hasOwn(source,key)||(target[key]=source[key]) }}})(ractive.partials,parsed.p),ractive.partials[name]=parsed.t}}function Partial(options){MustacheContainer.call(this,options);var tpl=options.template;tpl.t===YIELDER?this.yielder=1:tpl.t===ELEMENT&&(this.type=PARTIAL,this.macro=options.macro)}var proto$5=Partial.prototype=create(MustacheContainer.prototype);function contextifyTemplate(self){self.template.c&&(self.partial=[{t:SECTION,n:SECTION_WITH,f:self.partial}],assign(self.partial[0],self.template.c),self.yielder&&(self.partial[0].y=self))}function partialFromValue(self,value,okToParse){var tpl=value;return isArray(tpl)?self.partial=tpl:tpl&&isObjectType(tpl)?isArray(tpl.t)?self.partial=tpl.t:isString(tpl.template)&&(self.partial=parsePartial(tpl.template,tpl.template,self.ractive).t):isFunction(tpl)&&tpl.styleSet?(self.fn=tpl,self.fragment&&(self.fragment.cssIds=tpl._cssIds)):null!=tpl&&((tpl=getPartialTemplate(self.ractive,""+tpl,self.containerFragment||self.up))?(self.name=value,tpl.styleSet?(self.fn=tpl,self.fragment&&(self.fragment.cssIds=tpl._cssIds)):self.partial=tpl):okToParse?self.partial=parsePartial(""+value,""+value,self.ractive).t:self.name=value),self.partial}function aliasLocal(ref,name){var aliases=this.fragment.aliases||(this.fragment.aliases={});name?aliases[name]=this._data.joinAll(splitKeypath(ref)):aliases[ref]=this._data}assign(proto$5,{constructor:Partial,bind:function(){var template=this.template;if(this.yielder){if(this.container=this.up.ractive,this.component=this.container.component,this.containerFragment=this.up,!this.component){ return this.fragment=new Fragment({owner:this,template:[]}),void this.fragment.bind(); }this.up=this.component.up,template.r||template.x||template.tx||(this.refName="content")}this.macro?this.fn=this.macro:(this.refName||(this.refName=template.r),this.refName&&partialFromValue(this,this.refName),this.partial||this.fn||(MustacheContainer.prototype.bind.call(this),this.model&&partialFromValue(this,this.model.get()))),this.partial||this.fn||warnOnceIfDebug("Could not find template for partial '"+this.name+"'"),(function(self,partial){self.partial=partial,contextifyTemplate(self);var options={owner:self,template:self.partial};self.yielder&&(options.ractive=self.container.parent);self.fn&&(options.cssIds=self.fn._cssIds);var fragment=self.fragment=new Fragment(options);self.template.z&&(fragment.aliases=resolveAliases(self.template.z,self.containerFragment||self.up))})(this,this.partial||[]),this.fn&&initMacro(this),this.fragment.bind()},bubble:function(){this.dirty||(this.dirty=!0,this.yielder?this.containerFragment.bubble():this.up.bubble())},findNextNode:function(){return(this.containerFragment||this.up).findNextNode(this)},handleChange:function(){this.dirtyTemplate=!0,this.externalChange=!0,this.bubble()},rebound:function(update){var this$1=this,aliases=this.fragment&&this.fragment.aliases;if(aliases){for(var k in aliases){ aliases[k].rebound?aliases[k].rebound(update):(aliases[k].unreference(),aliases[k]=0); }this.template.z&&resolveAliases(this.template.z,this.containerFragment||this.up,aliases)}this._attrs&&keys(this._attrs).forEach((function(k){return this$1._attrs[k].rebound(update)})),MustacheContainer.prototype.rebound.call(this,update)},refreshAttrs:function(){var this$1=this;keys(this._attrs).forEach((function(k){this$1.handle.attributes[k]=!this$1._attrs[k].items.length||this$1._attrs[k].valueOf()}))},resetTemplate:function(){var this$1=this;if(this.fn&&this.proxy){if(!this.externalChange){ return this.partial=this.fnTemplate,!0; }isFunction(this.proxy.teardown)&&this.proxy.teardown(),this.fn=this.proxy=null}var partial=this.partial;return this.partial=null,this.refName&&(this.partial=getPartialTemplate(this.ractive,this.refName,this.up)),!this.partial&&this.model&&partialFromValue(this,this.model.get()),!(!this.fn&&partial===this.partial)&&(this.unbindAttrs(),this.fn?(initMacro(this),isFunction(this.proxy.render)&&runloop.scheduleTask((function(){return this$1.proxy.render()}))):this.partial||warnOnceIfDebug("Could not find template for partial '"+this.name+"'"),!0)},render:function(target,occupants){this.fn&&this.fn._cssDef&&!this.fn._cssDef.applied&&applyCSS(),this.fragment.render(target,occupants),this.proxy&&isFunction(this.proxy.render)&&this.proxy.render()},unbind:function(){this.fragment.unbind(),this.fragment.aliases=null,this.unbindAttrs(),MustacheContainer.prototype.unbind.call(this)},unbindAttrs:function(){var this$1=this;this._attrs&&keys(this._attrs).forEach((function(k){this$1._attrs[k].unbind()}))},unrender:function(shouldDestroy){this.proxy&&isFunction(this.proxy.teardown)&&this.proxy.teardown(),this.fragment.unrender(shouldDestroy)},update:function(){var this$1=this,proxy=this.proxy;this.updating=1,this.dirtyAttrs&&(this.dirtyAttrs=!1,keys(this._attrs).forEach((function(k){return this$1._attrs[k].update()})),this.refreshAttrs(),isFunction(proxy.update)&&proxy.update(this.handle.attributes)),this.dirtyTemplate&&(this.dirtyTemplate=!1,this.resetTemplate()&&this.fragment.resetTemplate(this.partial||[])),this.dirty&&(this.dirty=!1,proxy&&isFunction(proxy.invalidate)&&proxy.invalidate(),this.fragment.update()),this.externalChange=!1,this.updating=0}});var extras="extra-attributes";function initMacro(self){var fn=self.fn,fragment=self.fragment,template=self.template=assign({},self.template),handle=self.handle=fragment.getContext({proxy:self,aliasLocal:aliasLocal,name:self.template.e||self.name,attributes:{},setTemplate:function(template){if(partialFromValue(this,template,!0),!this.initing){if(this.dirtyTemplate=!0,this.fnTemplate=this.partial,!this.updating){var promise=runloop.start();return this.bubble(),runloop.end(),promise}this.bubble(),runloop.promise()}}.bind(self),template:template});if(template.p||(template.p={}),template.p=handle.partials=assign({},template.p),hasOwn(template.p,"content")||(template.p.content=template.f||[]),isArray(fn.attributes)){self._attrs={};var invalidate=function(){this.dirty=!0,self.dirtyAttrs=!0,self.bubble()};if(isArray(template.m)){var attrs=template.m;template.p[extras]=template.m=attrs.filter((function(a){return!~fn.attributes.indexOf(a.n)})),attrs.filter((function(a){return~fn.attributes.indexOf(a.n)})).forEach((function(a){var fragment=new Fragment({template:a.f,owner:self});fragment.bubble=invalidate,fragment.findFirstNode=noop,self._attrs[a.n]=fragment}))}else { template.p[extras]=[] }}else { template.p[extras]=template.m; }self._attrs&&(keys(self._attrs).forEach((function(k){self._attrs[k].bind()})),self.refreshAttrs()),self.initing=1,self.proxy=fn(handle,handle.attributes)||{},self.partial||(self.partial=[]),self.fnTemplate=self.partial,self.initing=0,contextifyTemplate(self),fragment.resetTemplate(self.partial)}function parsePartial(name,partial,ractive){var parsed;try{parsed=parser.parse(partial,parser.getParseOptions(ractive))}catch(e){warnIfDebug("Could not parse partial from expression '"+name+"'\n"+e.message)}return parsed||{t:[]}}var KeyModel=function(value,context,instance){this.value=this.key=value,this.context=context,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.children=[],this.instance=instance},KeyModel__proto__=KeyModel.prototype;KeyModel__proto__.applyValue=function(value){value!==this.value&&(this.value=this.key=value,this.deps.forEach(handleChange),this.links.forEach(handleChange),this.children.forEach((function(c){c.applyValue(c.context.getKeypath(c.instance))})))},KeyModel__proto__.destroyed=function(){this.upstream&&this.upstream.unregisterChild(this)},KeyModel__proto__.get=function(shouldCapture){return shouldCapture&&capture(this),unescapeKey(this.value)},KeyModel__proto__.getKeypath=function(){return unescapeKey(this.value)},KeyModel__proto__.has=function(){return!1},KeyModel__proto__.rebind=function(next,previous){
var this$1 = this;
for(var i=this.deps.length;i--;){ this$1.deps[i].rebind(next,previous,!1); }for(i=this.links.length;i--;){ this$1.links[i].relinking(next,!1) }},KeyModel__proto__.register=function(dependant){this.deps.push(dependant)},KeyModel__proto__.registerChild=function(child){addToArray(this.children,child),child.upstream=this},KeyModel__proto__.registerLink=function(link){addToArray(this.links,link)},KeyModel__proto__.unregister=function(dependant){removeFromArray(this.deps,dependant)},KeyModel__proto__.unregisterChild=function(child){removeFromArray(this.children,child)},KeyModel__proto__.unregisterLink=function(link){removeFromArray(this.links,link)},KeyModel.prototype.reference=noop,KeyModel.prototype.unreference=noop;var keypathString=/^"(\\"|[^"])+"$/,RepeatedFragment=function(options){this.parent=options.owner.up,this.up=this,this.owner=options.owner,this.ractive=this.parent.ractive,this.delegate=!1!==this.ractive.delegate&&(this.parent.delegate||(function(start){var delegate,el,frag=start;out:for(;frag;){for(el=0;!el&&frag;){if(frag.owner.type===ELEMENT&&(el=frag.owner),frag.owner.ractive&&!1===frag.owner.ractive.delegate){ break out; }frag=frag.parent||frag.componentParent}if(!1===el.delegate){ break out; }for(delegate=el.delegate||el;frag&&!frag.iterations;){if(frag.owner.ractive&&!1===frag.owner.ractive.delegate){ break out; }frag=frag.parent||frag.componentParent}}return delegate})(this.parent)),this.delegate&&!1===this.delegate.delegate&&(this.delegate=!1),this.delegate&&(this.delegate.delegate=this.delegate),this.cssIds="cssIds"in options?options.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=options.template,this.indexRef=options.indexRef,this.keyRef=options.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1},RepeatedFragment__proto__=RepeatedFragment.prototype;function nextRendered(start,newIndices,frags){for(var len=newIndices.length,i=start;i<len;i++){ if(~newIndices[i]&&frags[i]&&frags[i].rendered){ return i } }}function swizzleFragment(section,fragment,key,idx){var model=section.context?contextFor(section,fragment,key):void 0;fragment.key=key,fragment.index=idx,fragment.context=model,section.source&&(fragment.lastValue=model&&model.get()),fragment.idxModel&&fragment.idxModel.applyValue(idx),fragment.keyModel&&fragment.keyModel.applyValue(key),fragment.pathModel&&(fragment.pathModel.context=model,fragment.pathModel.applyValue(model.getKeypath())),fragment.rootModel&&(fragment.rootModel.context=model,fragment.rootModel.applyValue(model.getKeypath(fragment.ractive.root)));var aliases=fragment.aliases;section.aliases&&section.aliases.forEach((function(a){"."===a.x.r?aliases[a.n]=model:"@index"===a.x.r?aliases[a.n]=fragment.getIndex():"@key"===a.x.r?aliases[a.n]=fragment.getKey():"@keypath"===a.x.r?aliases[a.n]=fragment.getKeypath():"@rootpath"===a.x.r&&(aliases[a.n]=fragment.getKeypath(!0))}))}function shuffleValues(section,shuffler){return!0===shuffler?section.context.get().slice():section.context.get().map((function(v){return shuffler.reduce((function(a,c){return a&&a[c]}),v)}))}function contextFor(section,fragment,key){if(section.source){var idx,source=section.source.model.get();if(source.indexOf&&~(idx=source.indexOf(section.context.joinKey(key).get()))){ return section.source.model.joinKey(idx) }}return section.context.joinKey(key)}RepeatedFragment__proto__.bind=function(context){var this$1=this;this.context=context,this.bound=!0;var value=context.get(),aliases=this.aliases=this.owner.template.z&&this.owner.template.z.slice(),shuffler=aliases&&aliases.find((function(a){return"shuffle"===a.n}));shuffler&&shuffler.x&&shuffler.x.x&&("true"===shuffler.x.x.s?this.shuffler=!0:keypathString.test(shuffler.x.x.s)&&(this.shuffler=splitKeypath(shuffler.x.x.s.slice(1,-1)))),this.shuffler&&(this.values=shuffleValues(this,this.shuffler)),this.source&&this.source.model.unbind(this.source);var source=context.isComputed&&aliases&&aliases.find((function(a){return"source"===a.n}));if(source&&source.x&&source.x.r){var model=resolve(this,source.x);this.source={handleChange:function(){},rebind:function(next){this.model.unregister(this),this.model=next,next.register(this)}},this.source.model=model,model.register(this.source)}if(this.isArray=isArray(value)){this.iterations=[];for(var max=this.length=value.length,i=0;i<max;i+=1){ this$1.iterations[i]=this$1.createIteration(i,i) }}else if(isObject(value)){if(this.isArray=!1,this.indexRef){var refs=this.indexRef.split(",");this.keyRef=refs[0],this.indexRef=refs[1]}var ks=keys(value);this.length=ks.length,this.iterations=ks.map((function(key,index){return this$1.createIteration(key,index)}))}return this},RepeatedFragment__proto__.bubble=function(index){this.bubbled||(this.bubbled=[]),this.bubbled.push(index),this.rebounding||this.owner.bubble()},RepeatedFragment__proto__.createIteration=function(key,index){var fragment=new Fragment({owner:this,template:this.template});return fragment.isIteration=!0,fragment.delegate=this.delegate,this.aliases&&(fragment.aliases={}),swizzleFragment(this,fragment,key,index),fragment.bind(fragment.context)},RepeatedFragment__proto__.destroyed=function(){
var this$1 = this;
for(var len=this.iterations.length,i=0;i<len;i++){ this$1.iterations[i].destroyed(); }this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},RepeatedFragment__proto__.detach=function(){var docFrag=createDocumentFragment();return this.iterations.forEach((function(fragment){return docFrag.appendChild(fragment.detach())})),docFrag},RepeatedFragment__proto__.find=function(selector,options){return findMap(this.iterations,(function(i){return i.find(selector,options)}))},RepeatedFragment__proto__.findAll=function(selector,options){return this.iterations.forEach((function(i){return i.findAll(selector,options)}))},RepeatedFragment__proto__.findAllComponents=function(name,options){return this.iterations.forEach((function(i){return i.findAllComponents(name,options)}))},RepeatedFragment__proto__.findComponent=function(name,options){return findMap(this.iterations,(function(i){return i.findComponent(name,options)}))},RepeatedFragment__proto__.findContext=function(){return this.context},RepeatedFragment__proto__.findNextNode=function(iteration){
var this$1 = this;
if(iteration.index<this.iterations.length-1){ for(var i=iteration.index+1;i<this.iterations.length;i++){var node=this$1.iterations[i].firstNode(!0);if(node){ return node }} }return this.owner.findNextNode()},RepeatedFragment__proto__.firstNode=function(skipParent){return this.iterations[0]?this.iterations[0].firstNode(skipParent):null},RepeatedFragment__proto__.getLast=function(){return this.lastModel||(this.lastModel=new KeyModel(this.length-1))},RepeatedFragment__proto__.rebind=function(next){var this$1=this;this.context=next,this.source||this.iterations.forEach((function(fragment){swizzleFragment(this$1,fragment,fragment.key,fragment.index)}))},RepeatedFragment__proto__.rebound=function(update$$1){var this$1=this;this.context=this.owner.model,this.iterations.forEach((function(f,i){f.context=contextFor(this$1,f,i),f.rebound(update$$1)}))},RepeatedFragment__proto__.render=function(target,occupants){var xs=this.iterations;if(xs){ for(var len=xs.length,i=0;i<len;i++){ xs[i].render(target,occupants); } }this.rendered=!0},RepeatedFragment__proto__.shuffle=function(newIndices,merge){var this$1=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice()),this.pendingNewIndices||(this.pendingNewIndices=[]),this.pendingNewIndices.push(newIndices);var iterations=[];newIndices.forEach((function(newIndex,oldIndex){if(-1!==newIndex){var fragment=this$1.iterations[oldIndex];iterations[newIndex]=fragment,newIndex!==oldIndex&&fragment&&(fragment.dirty=!0,merge&&(fragment.shouldRebind=1))}})),this.iterations=iterations,merge||this.bubble()},RepeatedFragment__proto__.shuffled=function(){this.iterations.forEach(shuffled)},RepeatedFragment__proto__.toString=function(escape){return this.iterations?this.iterations.map(escape?toEscapedString:toString$1).join(""):""},RepeatedFragment__proto__.unbind=function(){
var this$1 = this;
this.bound=!1,this.source&&this.source.model.unregister(this.source);for(var len=this.iterations.length,i=0;i<len;i++){ this$1.iterations[i].unbind(); }return this},RepeatedFragment__proto__.unrender=function(shouldDestroy){
var this$1 = this;
for(var len=this.iterations.length,i=0;i<len;i++){ this$1.iterations[i].unrender(shouldDestroy); }if(this.pendingNewIndices&&this.previousIterations){len=this.previousIterations.length;for(var i$1=0;i$1<len;i$1++){ this$1.previousIterations[i$1].unrender(shouldDestroy) }}this.rendered=!1},RepeatedFragment__proto__.update=function(){var this$1=this;if(this.pendingNewIndices){ return this.bubbled.length=0,void this.updatePostShuffle(); }if(!this.updating){if(this.updating=!0,this.shuffler){var values=shuffleValues(this,this.shuffler);this.shuffle(buildNewIndices(this.values,values),!0),this.updatePostShuffle()}else{for(var len=this.iterations.length,i=0;i<len;i++){var f=this$1.iterations[i];f&&f.idxModel&&f.idxModel.applyValue(i)}var toRemove,oldKeys,i$1,value=this.context.get(),wasArray=this.isArray,reset=!0;if(this.isArray=isArray(value)){if(this.source){this.rebounding=1;var source=this.source.model.get();this.iterations.forEach((function(f,c){c<value.length&&f.lastValue!==value[c]&&~(i$1=source.indexOf(value[c]))&&(swizzleFragment(this$1,f,c,c),f.rebound(!0))})),this.rebounding=0}wasArray&&(reset=!1,this.iterations.length>value.length&&(toRemove=this.iterations.splice(value.length)))}else if(isObject(value)&&!wasArray){ for(reset=!1,toRemove=[],oldKeys={},i$1=this.iterations.length;i$1--;){var fragment=this$1.iterations[i$1];fragment.key in value?oldKeys[fragment.key]=!0:(this$1.iterations.splice(i$1,1),toRemove.push(fragment))} }var docFrag,fragment$1,newLength=isArray(value)?value.length:isObject(value)?keys(value).length:0;if(this.length=newLength,this.updateLast(),reset&&(toRemove=this.iterations,this.iterations=[]),toRemove){len=toRemove.length;for(var i$2=0;i$2<len;i$2++){ toRemove[i$2].unbind().unrender(!0) }}if(!reset&&this.isArray&&this.bubbled&&this.bubbled.length){var bubbled=this.bubbled;this.bubbled=[],len=bubbled.length;for(var i$3=0;i$3<len;i$3++){ this$1.iterations[bubbled[i$3]]&&this$1.iterations[bubbled[i$3]].update() }}else{len=this.iterations.length;for(var i$4=0;i$4<len;i$4++){ this$1.iterations[i$4].update() }}if(newLength>this.iterations.length){if(docFrag=this.rendered?createDocumentFragment():null,i$1=this.iterations.length,isArray(value)){ for(;i$1<value.length;){ fragment$1=this$1.createIteration(i$1,i$1),this$1.iterations.push(fragment$1),this$1.rendered&&fragment$1.render(docFrag),i$1+=1; } }else if(isObject(value)){if(this.indexRef&&!this.keyRef){var refs=this.indexRef.split(",");this.keyRef=refs[0],this.indexRef=refs[1]}keys(value).forEach((function(key){oldKeys&&key in oldKeys||(fragment$1=this$1.createIteration(key,i$1),this$1.iterations.push(fragment$1),this$1.rendered&&fragment$1.render(docFrag),i$1+=1)}))}if(this.rendered){var parentNode=this.parent.findParentNode(),anchor=this.parent.findNextNode(this.owner);parentNode.insertBefore(docFrag,anchor)}}}this.updating=!1}},RepeatedFragment__proto__.updateLast=function(){this.lastModel&&this.lastModel.applyValue(this.length-1)},RepeatedFragment__proto__.updatePostShuffle=function(){
var this$1 = this;
var newIndices=this.pendingNewIndices[0],parentNode=this.rendered?this.parent.findParentNode():null,nextNode=parentNode&&this.owner.findNextNode(),docFrag=parentNode?createDocumentFragment():null;this.pendingNewIndices.slice(1).forEach((function(indices){newIndices.forEach((function(newIndex,oldIndex){newIndices[oldIndex]=indices[newIndex]}))}));var idx,dest,pos,next,anchor,rebound,len=this.length=this.context.get().length,prev=this.previousIterations,iters=this.iterations,value=this.context.get(),stash={},map=new Array(newIndices.length);for(newIndices.forEach((function(e,i){return map[e]=i})),this.updateLast(),idx=pos=0;idx<len;){ next=null,rebound=!1,-1===(dest=newIndices[pos])?(prev[pos].unbind().unrender(!0),prev[pos++]=0):dest>idx?(next=newIndices[pos+1])<=dest?(stash[dest]=prev[pos],prev[pos++]=null):(next=stash[idx]||prev[map[idx]],prev[map[idx]]=null,anchor=(anchor=prev[nextRendered(pos,newIndices,prev)])&&parentNode&&anchor.firstNode()||nextNode,next?(rebound=this$1.source&&next.lastValue!==value[idx],swizzleFragment(this$1,next,idx,idx),parentNode&&parentNode.insertBefore(next.detach(),anchor)):(next=iters[idx]=this$1.createIteration(idx,idx),parentNode&&(next.render(docFrag),parentNode.insertBefore(docFrag,anchor))),idx++):(next=iters[idx],anchor=(anchor=prev[nextRendered(pos,newIndices,prev)])&&parentNode&&anchor.firstNode()||nextNode,next?(pos!==idx||stash[idx])&&(rebound=this$1.source&&next.lastValue!==value[idx],swizzleFragment(this$1,next,idx,idx),stash[idx]&&parentNode&&parentNode.insertBefore(next.detach(),anchor)):(next=iters[idx]=this$1.createIteration(idx,idx),parentNode&&(next.render(docFrag),parentNode.insertBefore(docFrag,anchor))),idx++,prev[pos++]=null),next&&isObjectType(next)&&((next.shouldRebind||rebound)&&(next.rebound(rebound),next.shouldRebind=0),next.update(),next.shuffled()); }for(var plen=prev.length,i=0;i<plen;i++){ prev[i]&&prev[i].unbind().unrender(!0); }this.shuffler&&(this.values=shuffleValues(this,this.shuffler)),this.pendingNewIndices=null,this.previousIterations=null},RepeatedFragment.prototype.getContext=getContext,RepeatedFragment.prototype.getKeypath=getKeypath;var Section=(function(MustacheContainer){function Section(options){MustacheContainer.call(this,options),this.sectionType=options.template.n||null,this.templateSectionType=this.sectionType,this.subordinate=1===options.template.l,this.fragment=null}MustacheContainer&&(Section.__proto__=MustacheContainer);var Section__proto__=Section.prototype=Object.create(MustacheContainer&&MustacheContainer.prototype);return Section__proto__.constructor=Section,Section__proto__.bind=function(){MustacheContainer.prototype.bind.call(this),this.subordinate&&(this.sibling=this.up.items[this.up.items.indexOf(this)-1],this.sibling.nextSibling=this),this.model?(this.dirty=!0,this.update()):!this.sectionType||this.sectionType!==SECTION_UNLESS||this.sibling&&this.sibling.isTruthy()||(this.fragment=new Fragment({owner:this,template:this.template.f}).bind())},Section__proto__.detach=function(){var frag=this.fragment||this.detached;return frag?frag.detach():MustacheContainer.prototype.detach.call(this)},Section__proto__.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy()){ return!0; }var value=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!(!value||this.templateSectionType!==SECTION_IF_WITH&&(function(value){return!value||isArray(value)&&0===value.length||isObject(value)&&0===keys(value).length})(value))},Section__proto__.rebind=function(next,previous,safe){MustacheContainer.prototype.rebind.call(this,next,previous,safe)&&this.fragment&&this.sectionType!==SECTION_IF&&this.sectionType!==SECTION_UNLESS&&this.fragment.rebind(next)},Section__proto__.rebound=function(update){this.model&&(this.model.rebound?this.model.rebound(update):(MustacheContainer.prototype.unbind.call(this),MustacheContainer.prototype.bind.call(this),this.sectionType!==SECTION_WITH&&this.sectionType!==SECTION_IF_WITH&&this.sectionType!==SECTION_EACH||this.fragment&&this.fragment.rebind(this.model),update&&this.bubble())),this.fragment&&this.fragment.rebound(update)},Section__proto__.render=function(target,occupants){this.rendered=!0,this.fragment&&this.fragment.render(target,occupants)},Section__proto__.shuffle=function(newIndices){this.fragment&&this.sectionType===SECTION_EACH&&this.fragment.shuffle(newIndices)},Section__proto__.unbind=function(){MustacheContainer.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},Section__proto__.unrender=function(shouldDestroy){this.rendered&&this.fragment&&this.fragment.unrender(shouldDestroy),this.rendered=!1},Section__proto__.update=function(){var this$1=this;if(this.dirty&&(this.fragment&&this.sectionType!==SECTION_IF&&this.sectionType!==SECTION_UNLESS&&(this.fragment.context=this.model),this.model||this.sectionType===SECTION_UNLESS)){this.dirty=!1;var newFragment,value=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,siblingFalsey=!this.subordinate||!this.sibling.isTruthy(),lastType=this.sectionType;if(null!==this.sectionType&&null!==this.templateSectionType||(this.sectionType=(function(value,hasIndexRef){return hasIndexRef||isArray(value)?SECTION_EACH:isObjectLike(value)?SECTION_IF_WITH:void 0===value?null:SECTION_IF})(value,this.template.i)),lastType&&lastType!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null),this.sectionType===SECTION_EACH||this.sectionType===SECTION_WITH||siblingFalsey&&(this.sectionType===SECTION_UNLESS?!this.isTruthy():this.isTruthy())){ if(this.fragment||(this.fragment=this.detached),this.fragment){ this.detached&&(attach(this,this.fragment),this.detached=!1,this.rendered=!0),this.fragment.bound||this.fragment.bind(this.model),this.fragment.update(); }else if(this.sectionType===SECTION_EACH){ newFragment=new RepeatedFragment({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model); }else{var context=this.sectionType!==SECTION_IF&&this.sectionType!==SECTION_UNLESS?this.model:null;newFragment=new Fragment({owner:this,template:this.template.f}).bind(context)} }else { this.fragment&&this.rendered?!0!==keep?this.fragment.unbind().unrender(!0):(this.unrender(!1),this.detached=this.fragment,runloop.promise().then((function(){this$1.detached&&this$1.detach()}))):this.fragment&&this.fragment.unbind(),this.fragment=null; }newFragment&&(this.rendered&&attach(this,newFragment),this.fragment=newFragment),this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())}},Section})(MustacheContainer);function attach(section,fragment){var anchor=section.up.findNextNode(section);if(anchor){var docFrag=createDocumentFragment();fragment.render(docFrag),anchor.parentNode.insertBefore(docFrag,anchor)}else { fragment.render(section.up.findParentNode()) }}var visible,Select=(function(Element){function Select(options){Element.call(this,options),this.options=[]}Element&&(Select.__proto__=Element);var Select__proto__=Select.prototype=Object.create(Element&&Element.prototype);return Select__proto__.constructor=Select,Select__proto__.foundNode=function(node){if(this.binding){var selectedOptions=getSelectedOptions(node);selectedOptions.length>0&&(this.selectedOptions=selectedOptions)}},Select__proto__.render=function(target,occupants){Element.prototype.render.call(this,target,occupants),this.sync();for(var node=this.node,i=node.options.length;i--;){ node.options[i].defaultSelected=node.options[i].selected; }this.rendered=!0},Select__proto__.sync=function(){var this$1=this,selectNode=this.node;if(selectNode){var options=toArray(selectNode.options);if(this.selectedOptions){ return options.forEach((function(o){this$1.selectedOptions.indexOf(o)>=0?o.selected=!0:o.selected=!1})),this.binding.setFromNode(selectNode),void delete this.selectedOptions; }var optionWasSelected,selectValue=this.getAttribute("value"),isMultiple=this.getAttribute("multiple"),array=isMultiple&&isArray(selectValue);if(void 0!==selectValue){ options.forEach((function(o){var optionValue=o._ractive?o._ractive.value:o.value,shouldSelect=isMultiple?array&&this$1.valueContains(selectValue,optionValue):this$1.compare(selectValue,optionValue);shouldSelect&&(optionWasSelected=!0),o.selected=shouldSelect})),optionWasSelected||isMultiple||this.binding&&this.binding.forceUpdate(); }else { this.binding&&this.binding.forceUpdate&&this.binding.forceUpdate() }}},Select__proto__.valueContains=function(selectValue,optionValue){
var this$1 = this;
for(var i=selectValue.length;i--;){ if(this$1.compare(optionValue,selectValue[i])){ return!0 } }},Select__proto__.compare=function(optionValue,selectValue){var comparator=this.getAttribute("value-comparator");if(comparator){if(isFunction(comparator)){ return comparator(selectValue,optionValue); }if(selectValue&&optionValue){ return selectValue[comparator]==optionValue[comparator] }}return selectValue==optionValue},Select__proto__.update=function(){var dirty=this.dirty;Element.prototype.update.call(this),dirty&&this.sync()},Select})(Element),Textarea=(function(Input){function Textarea(options){var template=options.template;options.deferContent=!0,Input.call(this,options),this.attributeByName.value||(template.f&&isBindable({template:template})?(this.attributes||(this.attributes=[])).push(createItem({owner:this,template:{t:ATTRIBUTE,f:template.f,n:"value"},up:this.up})):this.fragment=new Fragment({owner:this,cssIds:null,template:template.f}))}Input&&(Textarea.__proto__=Input);var Textarea__proto__=Textarea.prototype=Object.create(Input&&Input.prototype);return Textarea__proto__.constructor=Textarea,Textarea__proto__.bubble=function(){var this$1=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&runloop.scheduleTask((function(){this$1.dirty=!1,this$1.node.value=this$1.fragment.toString()})),this.up.bubble())},Textarea})(Input),Text=(function(Item){function Text(options){Item.call(this,options),this.type=TEXT}Item&&(Text.__proto__=Item);var Text__proto__=Text.prototype=Object.create(Item&&Item.prototype);return Text__proto__.constructor=Text,Text__proto__.detach=function(){return detachNode(this.node)},Text__proto__.firstNode=function(){return this.node},Text__proto__.render=function(target,occupants){inAttributes()||(this.rendered=!0,progressiveText(this,target,occupants,this.template))},Text__proto__.toString=function(escape){return escape?escapeHtml(this.template):this.template},Text__proto__.unrender=function(shouldDestroy){this.rendered&&shouldDestroy&&this.detach(),this.rendered=!1},Text__proto__.valueOf=function(){return this.template},Text})(Item),proto$6=Text.prototype;proto$6.bind=proto$6.unbind=proto$6.update=noop;var prefix,hidden="hidden";if(doc){var prefix$2;if(hidden in doc){ prefix$2=""; }else { for(var i$1=vendors.length;i$1--;){var vendor=vendors[i$1];if((hidden=vendor+"Hidden")in doc){prefix$2=vendor;break}} }void 0!==prefix$2?(doc.addEventListener(prefix$2+"visibilitychange",onChange),onChange()):("onfocusout"in doc?(doc.addEventListener("focusout",onHide),doc.addEventListener("focusin",onShow)):(win.addEventListener("pagehide",onHide),win.addEventListener("blur",onHide),win.addEventListener("pageshow",onShow),win.addEventListener("focus",onShow)),visible=!0)}function onChange(){visible=!doc[hidden]}function onHide(){visible=!1}function onShow(){visible=!0}if(isClient){var prefixCache={},testStyle=createElement("div").style;prefix=function(prop){if(!prefixCache[prop]){var name=hyphenateCamel(prop);if(void 0!==testStyle[prop]){ prefixCache[prop]=name; }else { for(var i=vendors.length;i--;){var vendor="-"+vendors[i]+"-"+name;if(void 0!==testStyle[vendor]){prefixCache[prop]=vendor;break}} }}return prefixCache[prop]}}else { prefix=null; }var createTransitions,prefix$1=prefix,vendorPattern=new RegExp("^(?:"+vendors.join("|")+")([A-Z])");if(isClient){var TRANSITION$1,TRANSITIONEND,CSS_TRANSITIONS_ENABLED,TRANSITION_DURATION,TRANSITION_PROPERTY,TRANSITION_TIMING_FUNCTION,testStyle$1=createElement("div").style,linear$1=function(x){return x},canUseCssTransitions={},cannotUseCssTransitions={};void 0!==testStyle$1.transition?(TRANSITION$1="transition",TRANSITIONEND="transitionend",CSS_TRANSITIONS_ENABLED=!0):void 0!==testStyle$1.webkitTransition?(TRANSITION$1="webkitTransition",TRANSITIONEND="webkitTransitionEnd",CSS_TRANSITIONS_ENABLED=!0):CSS_TRANSITIONS_ENABLED=!1,TRANSITION$1&&(TRANSITION_DURATION=TRANSITION$1+"Duration",TRANSITION_PROPERTY=TRANSITION$1+"Property",TRANSITION_TIMING_FUNCTION=TRANSITION$1+"TimingFunction"),createTransitions=function(t,to,options,changedProperties,resolve){setTimeout((function(){var jsTransitionsComplete,cssTransitionsComplete,cssTimeout;function transitionDone(){clearTimeout(cssTimeout)}function checkComplete(){jsTransitionsComplete&&cssTransitionsComplete&&(t.unregisterCompleteHandler(transitionDone),t.ractive.fire(t.name+":end",t.node,t.isIntro),resolve())}var hashPrefix=(t.node.namespaceURI||"")+t.node.tagName,style=t.node.style,previous={property:style[TRANSITION_PROPERTY],timing:style[TRANSITION_TIMING_FUNCTION],duration:style[TRANSITION_DURATION]};function transitionEndHandler(event){var index=changedProperties.indexOf(event.propertyName);-1!==index&&changedProperties.splice(index,1),changedProperties.length||(clearTimeout(cssTimeout),cssTransitionsDone())}function cssTransitionsDone(){style[TRANSITION_PROPERTY]=previous.property,style[TRANSITION_TIMING_FUNCTION]=previous.duration,style[TRANSITION_DURATION]=previous.timing,t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,!1),cssTransitionsComplete=!0,checkComplete()}t.node.addEventListener(TRANSITIONEND,transitionEndHandler,!1),cssTimeout=setTimeout((function(){changedProperties=[],cssTransitionsDone()}),options.duration+(options.delay||0)+50),t.registerCompleteHandler(transitionDone),style[TRANSITION_PROPERTY]=changedProperties.join(",");var str,easingName=(str=options.easing||"linear")?(vendorPattern.test(str)&&(str="-"+str),str.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))):"";style[TRANSITION_TIMING_FUNCTION]=easingName;var cssTiming=style[TRANSITION_TIMING_FUNCTION]===easingName;style[TRANSITION_DURATION]=options.duration/1e3+"s",setTimeout((function(){for(var hash,index,prop,suffix,interpolator,easing,i=changedProperties.length,originalValue=null,propertiesToTransitionInJs=[];i--;){if(prop=changedProperties[i],hash=hashPrefix+prop,cssTiming&&CSS_TRANSITIONS_ENABLED&&!cannotUseCssTransitions[hash]){var initial=style[prop];style[prop]=to[prop],hash in canUseCssTransitions||(originalValue=t.getStyle(prop),canUseCssTransitions[hash]=t.getStyle(prop)!=to[prop],cannotUseCssTransitions[hash]=!canUseCssTransitions[hash],cannotUseCssTransitions[hash]&&(style[prop]=initial))}cssTiming&&CSS_TRANSITIONS_ENABLED&&!cannotUseCssTransitions[hash]||(null===originalValue&&(originalValue=t.getStyle(prop)),-1===(index=changedProperties.indexOf(prop))?warnIfDebug("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):changedProperties.splice(index,1),suffix=/[^\d]*$/.exec(originalValue)[0],(interpolator=interpolate(parseFloat(originalValue),parseFloat(to[prop])))?propertiesToTransitionInJs.push({name:prop,interpolator:interpolator,suffix:suffix}):style[prop]=to[prop],originalValue=null)}propertiesToTransitionInJs.length?(isString(options.easing)?(easing=t.ractive.easing[options.easing])||(warnOnceIfDebug(missingPlugin(options.easing,"easing")),easing=linear$1):easing=isFunction(options.easing)?options.easing:linear$1,new Ticker({duration:options.duration,easing:easing,step:function(pos){for(var i=propertiesToTransitionInJs.length;i--;){var prop=propertiesToTransitionInJs[i];style[prop.name]=prop.interpolator(pos)+prop.suffix}},complete:function(){jsTransitionsComplete=!0,checkComplete()}})):jsTransitionsComplete=!0;changedProperties.length?style[TRANSITION_PROPERTY]=changedProperties.join(","):(style[TRANSITION_PROPERTY]="none",t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,!1),cssTransitionsComplete=!0,checkComplete())}),0)}),options.delay||0)}}else { createTransitions=null; }var createTransitions$1=createTransitions,getComputedStyle=win&&win.getComputedStyle,resolved=Promise.resolve(),names={t0:"intro-outro",t1:"intro",t2:"outro"},Transition=function(options){this.owner=options.owner||options.up.owner||findElement(options.up),this.element=this.owner.attributeByName?this.owner:findElement(options.up),this.ractive=this.owner.ractive,this.template=options.template,this.up=options.up,this.options=options,this.onComplete=[]},Transition__proto__=Transition.prototype;Transition__proto__.animateStyle=function(style,value,options){var to,this$1=this;if(4===arguments.length){ throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback"); }return visible?(isString(style)?(to={})[style]=value:(to=style,options=value),new Promise(function(fulfil){if(!options.duration){ return this$1.setStyle(to),void fulfil(); }for(var propertyNames=keys(to),changedProperties=[],computedStyle=getComputedStyle(this$1.node),i=propertyNames.length;i--;){var prop=propertyNames[i],name=prefix$1(prop),current=computedStyle[prefix$1(prop)],init=this$1.node.style[name];name in this$1.originals||(this$1.originals[name]=this$1.node.style[name]),this$1.node.style[name]=to[prop],this$1.targets[name]=this$1.node.style[name],this$1.node.style[name]=init,current!=to[prop]&&(changedProperties.push(name),to[name]=to[prop],this$1.node.style[name]=current)}changedProperties.length?createTransitions$1(this$1,to,options,changedProperties,fulfil):fulfil()})):(this.setStyle(style,value),resolved)},Transition__proto__.bind=function(){var options=this.options,type=options.template&&options.template.v;type&&("t0"!==type&&"t1"!==type||(this.element.intro=this),"t0"!==type&&"t2"!==type||(this.element.outro=this),this.eventName=names[type]);var ractive=this.owner.ractive;this.name=options.name||options.template.n,options.params&&(this.params=options.params),isFunction(this.name)?(this._fn=this.name,this.name=this._fn.name):this._fn=findInViewHierarchy("transitions",ractive,this.name),this._fn||warnOnceIfDebug(missingPlugin(this.name,"transition"),{ractive:ractive}),setupArgsFn(this,options.template)},Transition__proto__.getParams=function(){if(this.params){ return this.params; }if(this.fn){var values=resolveArgs(this,this.template,this.up).map((function(model){if(model){ return model.get() }}));return this.fn.apply(this.ractive,values)}},Transition__proto__.getStyle=function(props){var computedStyle=getComputedStyle(this.node);if(isString(props)){ return computedStyle[prefix$1(props)]; }if(!isArray(props)){ throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties"); }for(var styles={},i=props.length;i--;){var prop=props[i],value=computedStyle[prefix$1(prop)];"0px"===value&&(value=0),styles[prop]=value}return styles},Transition__proto__.processParams=function(params,defaults){return isNumber(params)?params={duration:params}:isString(params)?params="slow"===params?{duration:600}:"fast"===params?{duration:200}:{duration:400}:params||(params={}),assign({},defaults,params)},Transition__proto__.registerCompleteHandler=function(fn){addToArray(this.onComplete,fn)},Transition__proto__.setStyle=function(style,value){
var this$1 = this;
if(isString(style)){var name=prefix$1(style);hasOwn(this.originals,name)||(this.originals[name]=this.node.style[name]),this.node.style[name]=value,this.targets[name]=this.node.style[name]}else{var prop;for(prop in style){ hasOwn(style,prop)&&this$1.setStyle(prop,style[prop]) }}return this},Transition__proto__.shouldFire=function(type){if(!this.ractive.transitionsEnabled){ return!1; }if("intro"===type&&this.ractive.rendering&&nearestProp("noIntro",this.ractive,!0)){ return!1; }if("outro"===type&&this.ractive.unrendering&&nearestProp("noOutro",this.ractive,!1)){ return!1; }var params=this.getParams();if(!this.element.parent){ return!0; }if(params&&params[0]&&isObject(params[0])&&"nested"in params[0]){if(!1!==params[0].nested){ return!0 }}else if(!1!==nearestProp("nestedTransitions",this.ractive)){ return!0; }for(var el=this.element.parent;el;){if(el[type]&&el[type].starting){ return!1; }el=el.parent}return!0},Transition__proto__.start=function(){var completed,this$1=this,node=this.node=this.element.node,originals=this.originals={},targets=this.targets={},args=this.getParams();if(this.complete=function(noReset){if(this$1.starting=!1,!completed){if(this$1.onComplete.forEach((function(fn){return fn()})),!noReset&&this$1.isIntro){ for(var k in targets){ node.style[k]===targets[k]&&(node.style[k]=originals[k]); } }this$1._manager.remove(this$1),completed=!0}},this._fn){var promise=this._fn.apply(this.ractive,[this].concat(args));promise&&promise.then(this.complete)}else { this.complete() }},Transition__proto__.toString=function(){return""},Transition__proto__.unbind=function(){if(!this.element.attributes.unbinding){var type=this.options&&this.options.template&&this.options.template.v;"t0"!==type&&"t1"!==type||(this.element.intro=null),"t0"!==type&&"t2"!==type||(this.element.outro=null)}},Transition__proto__.unregisterCompleteHandler=function(fn){removeFromArray(this.onComplete,fn)};var proto$7=Transition.prototype;function nearestProp(prop,ractive,rendering){for(var instance=ractive;instance;){if(hasOwn(instance,prop)&&(void 0===rendering||rendering?instance.rendering:instance.unrendering)){ return instance[prop]; }instance=instance.component&&instance.component.ractive}return ractive[prop]}proto$7.destroyed=proto$7.rebound=proto$7.render=proto$7.unrender=proto$7.update=noop;var ieBug,ieBlacklist,elementCache={};try{createElement("table").innerHTML="foo"}catch(err){ieBug=!0,ieBlacklist={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}function element(tagName){return elementCache[tagName]||(elementCache[tagName]=createElement(tagName))}var Triple=(function(Mustache){function Triple(options){Mustache.call(this,options)}Mustache&&(Triple.__proto__=Mustache);var Triple__proto__=Triple.prototype=Object.create(Mustache&&Mustache.prototype);return Triple__proto__.constructor=Triple,Triple__proto__.detach=function(){var docFrag=createDocumentFragment();return this.nodes&&this.nodes.forEach((function(node){return docFrag.appendChild(node)})),docFrag},Triple__proto__.find=function(selector){
var this$1 = this;
var i,len=this.nodes.length;for(i=0;i<len;i+=1){var node=this$1.nodes[i];if(1===node.nodeType){if(matches(node,selector)){ return node; }var queryResult=node.querySelector(selector);if(queryResult){ return queryResult }}}return null},Triple__proto__.findAll=function(selector,options){
var this$1 = this;
var i,result=options.result,len=this.nodes.length;for(i=0;i<len;i+=1){var node=this$1.nodes[i];if(1===node.nodeType){matches(node,selector)&&result.push(node);var queryAllResult=node.querySelectorAll(selector);queryAllResult&&result.push.apply(result,queryAllResult)}}},Triple__proto__.findComponent=function(){return null},Triple__proto__.firstNode=function(){return this.rendered&&this.nodes[0]},Triple__proto__.render=function(target,occupants,anchor){
var this$1 = this;
if(!this.nodes){var html=this.model?this.model.get():"";this.nodes=(function(html$$1,node){var container,wrapper,selectedOption,child,i,nodes=[];if(null==html$$1||""===html$$1){ return nodes; }for(ieBug&&(wrapper=ieBlacklist[node.tagName])?((container=element("DIV")).innerHTML=wrapper[0]+html$$1+wrapper[1],"SELECT"===(container=container.querySelector(".x")).tagName&&(selectedOption=container.options[container.selectedIndex])):node.namespaceURI===svg$1?((container=element("DIV")).innerHTML='<svg class="x">'+html$$1+"</svg>",container=container.querySelector(".x")):"TEXTAREA"===node.tagName?void 0!==(container=createElement("div")).textContent?container.textContent=html$$1:container.innerHTML=html$$1:((container=element(node.tagName)).innerHTML=html$$1,"SELECT"===container.tagName&&(selectedOption=container.options[container.selectedIndex]));child=container.firstChild;){ nodes.push(child),container.removeChild(child); }if("SELECT"===node.tagName){ for(i=nodes.length;i--;){ nodes[i]!==selectedOption&&(nodes[i].selected=!1); } }return nodes})(html,target)}var nodes=this.nodes;if(occupants){for(var next,i=-1;occupants.length&&(next=this.nodes[i+1]);){ for(var n=void 0;n=occupants.shift();){var t=n.nodeType;if(t===next.nodeType&&(1===t&&n.outerHTML===next.outerHTML||(3===t||8===t)&&n.nodeValue===next.nodeValue)){this$1.nodes.splice(++i,1,n);break}target.removeChild(n)} }i>=0&&(nodes=this.nodes.slice(i)),occupants.length&&(anchor=occupants[0])}if(nodes.length){var frag=createDocumentFragment();nodes.forEach((function(n){return frag.appendChild(n)})),anchor?target.insertBefore(frag,anchor):target.appendChild(frag)}this.rendered=!0},Triple__proto__.toString=function(){var value=this.model&&this.model.get();return value=null!=value?""+value:"",attribute?decodeCharacterReferences(value):value},Triple__proto__.unrender=function(){this.nodes&&this.nodes.forEach((function(node){runloop.detachWhenReady({node:node,detach:function(){detachNode(node)}})})),this.rendered=!1,this.nodes=null},Triple__proto__.update=function(){this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),this.render(this.up.findParentNode(),null,this.up.findNextNode(this))):this.dirty=!1},Triple})(Mustache);function extract(tpl,type,name){var p=tpl.f.find((function(s){return s.t===type}));return p?p.n?[{t:19,n:54,f:p.f||[],z:[{n:p.n,x:{r:"__await."+name}}]}]:p.f||[]:[]}var constructors={};constructors[ALIAS]=Alias,constructors[ANCHOR]=Component,constructors[AWAIT]=function(options){var tpl=options.template,success=extract(tpl,THEN,"value"),error=extract(tpl,CATCH,"error"),pending=extract(tpl,SECTION),undef=extract(tpl,ELSE),opts=assign({},options,{template:{t:ELEMENT,m:[{t:ATTRIBUTE,n:"for",f:[{t:INTERPOLATOR,r:tpl.r,rx:tpl.rx,x:tpl.x}]}]},macro:function(handle,attrs){function update(attrs){attrs.for&&isFunction(attrs.for.then)?(handle.setTemplate(pending),attrs.for.then((function(v){handle.set("@local.value",v),handle.setTemplate(success)}),(function(e){handle.set("@local.error",e),handle.setTemplate(error)}))):void 0===attrs.for?handle.setTemplate(undef):(handle.set("@local.value",attrs.for),handle.setTemplate(success))}return handle.aliasLocal("__await"),update(attrs),{update:update}}});return opts.macro.attributes=["for"],new Partial(opts)},constructors[DOCTYPE]=Doctype,constructors[INTERPOLATOR]=Interpolator,constructors[PARTIAL]=Partial,constructors[SECTION]=Section,constructors[TRIPLE]=Triple,constructors[YIELDER]=Partial,constructors[ATTRIBUTE]=Attribute,constructors[BINDING_FLAG]=BindingFlag,constructors[DECORATOR]=Decorator,constructors[EVENT]=EventDirective,constructors[TRANSITION]=Transition,constructors[COMMENT]=Comment;var specialElements={doctype:Doctype,form:Form,input:Input,option:Option,select:Select,textarea:Textarea};function createItem(options){if(isString(options.template)){ return new Text(options); }var ctor,name,Item,type=options.template.t;if(type===ELEMENT){if(name=options.template.e,(ctor=findInstance("partials",options.up.ractive,name))&&(ctor=ctor.partials[name]).styleSet){ return options.macro=ctor,new Partial(options); }if(ctor=(function getComponentConstructor(ractive,name){var Component,instance=findInstance("components",ractive,name);if(instance&&(Component=instance.components[name])&&!Component.isInstance){ if(Component.default&&Component.default.isInstance){ Component=Component.default; }else if(!Component.then&&isFunction(Component)){var fn=Component.bind(instance);if(fn.isOwner=hasOwn(instance.components,name),!(Component=fn())){ return void warnIfDebug(noRegistryFunctionReturn,name,"component","component",{ractive:ractive}); }isString(Component)&&(Component=getComponentConstructor(ractive,Component)),Component._fn=fn,instance.components[name]=Component} }return Component})(options.up.ractive,name)){if(isFunction(ctor.then)){ return (function(promise,options){var partials=options.template.p||{},name=options.template.e;return new Partial(assign({},options,{template:{t:ELEMENT,e:name},macro:function(handle){handle.setTemplate(partials["async-loading"]||[]),promise.then((function(cmp){options.up.ractive.components[name]=cmp,partials["async-loaded"]?(handle.partials.component=[options.template],handle.setTemplate(partials["async-loaded"])):handle.setTemplate([options.template])}),(function(err){partials["async-failed"]?(handle.aliasLocal("error","error"),handle.set("@local.error",err),handle.setTemplate(partials["async-failed"])):handle.setTemplate([])}))}}))})(ctor,options); }if(isFunction(ctor)){ return new Component(options,ctor) }}return new(ctor=specialElements[name.toLowerCase()]||Element)(options)}if(type===ATTRIBUTE){var el=options.owner;(!el||el.type!==ANCHOR&&el.type!==COMPONENT&&el.type!==ELEMENT)&&(el=findElement(options.up)),options.element=el,Item=el.type===COMPONENT||el.type===ANCHOR?Mapping:Attribute}else { Item=constructors[type]; }if(!Item){ throw new Error("Unrecognised item type "+type); }return new Item(options)}var Fragment=function(options){this.owner=options.owner,this.isRoot=!options.owner.up,this.parent=this.isRoot?null:this.owner.up,this.ractive=options.ractive||(this.isRoot?options.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.up:null,!this.isRoot||this.ractive.delegate?this.delegate=this.owner.containerFragment?this.owner.containerFragment&&this.owner.containerFragment.delegate:this.componentParent&&this.componentParent.delegate||this.parent&&this.parent.delegate:this.delegate=!1,this.context=null,this.rendered=!1,this.cssIds="cssIds"in options?options.cssIds&&options.cssIds.length&&options.cssIds:this.parent?this.parent.cssIds:null,this.dirty=!1,this.dirtyValue=!0,this.template=options.template||[],this.createItems()},Fragment__proto__=Fragment.prototype;function getKeypath(root){var model,base=findParentWithContext(this);if(root){if(this.rootModel){ return this.rootModel; }this.rootModel=new KeyModel(this.context.getKeypath(this.ractive.root),this.context,this.ractive.root),model=this.rootModel}else{if(this.pathModel){ return this.pathModel; }this.pathModel=new KeyModel(this.context.getKeypath(),this.context),model=this.pathModel}return base&&base.context&&base.getKeypath(root).registerChild(model),model}function initialise(ractive,userOptions,options){var computed=ractive.viewmodel.computed;if(computed){ for(var k in computed){ k in ractive.viewmodel.value&&computed[k]&&!computed[k].isReadonly&&computed[k].set(ractive.viewmodel.value[k]); } }config.init(ractive.constructor,ractive,userOptions),hooks.config.fire(ractive),hooks.init.begin(ractive);var fragment=ractive.fragment=createFragment$1(ractive,options);if(fragment&&fragment.bind(ractive.viewmodel),hooks.init.end(ractive),subscribe(ractive,userOptions,"observe"),isArray(userOptions.use)&&ractive.use.apply(ractive,userOptions.use.filter((function(p){return!p.construct}))),fragment){var el=ractive.el=ractive.target=getElement(ractive.el||ractive.target);if(el&&!ractive.component){var promise=ractive.render(el,ractive.append);Ractive.DEBUG_PROMISES&&promise.catch((function(err){throw warnOnceIfDebug("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),warnIfDebug("An error happened during rendering",{ractive:ractive}),(function(){Ractive.DEBUG&&log.apply(null,arguments)})(err),err}))}}}function createFragment$1(ractive,options){if(void 0===options&&(options={}),ractive.template){var cssIds=[].concat(ractive.constructor._cssIds||[],options.cssIds||[]);return new Fragment({owner:ractive,template:ractive.template,cssIds:cssIds})}}function render$1(ractive,target,anchor,occupants){ractive.rendering=!0;var promise=runloop.start();if(runloop.scheduleTask((function(){return hooks.render.fire(ractive)}),!0),ractive.fragment.rendered){ throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first"); }if(ractive.destroyed&&(ractive.destroyed=!1,ractive.fragment=createFragment$1(ractive).bind(ractive.viewmodel)),anchor=getElement(anchor)||ractive.anchor,ractive.el=ractive.target=target,ractive.anchor=anchor,ractive.cssId&&applyCSS(),target){ if((target.__ractive_instances__||(target.__ractive_instances__=[])).push(ractive),anchor){var docFrag=doc.createDocumentFragment();ractive.fragment.render(docFrag),target.insertBefore(docFrag,anchor)}else { ractive.fragment.render(target,occupants); } }return runloop.end(),ractive.rendering=!1,promise.then((function(){ractive.torndown||hooks.complete.fire(ractive)}))}Fragment__proto__.bind=function(context){
var this$1 = this;
this.context=context;for(var len=this.items.length,i=0;i<len;i++){ this$1.items[i].bind(); }return this.bound=!0,this.dirty&&this.update(),this},Fragment__proto__.bubble=function(){this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&runloop.addFragment(this):this.owner.bubble(this.index))},Fragment__proto__.createItems=function(){
var this$1 = this;
var max=this.template.length;this.items=[];for(var i=0;i<max;i++){ this$1.items[i]=createItem({up:this$1,template:this$1.template[i],index:i}) }},Fragment__proto__.destroyed=function(){
var this$1 = this;
for(var len=this.items.length,i=0;i<len;i++){ this$1.items[i].destroyed(); }this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},Fragment__proto__.detach=function(){for(var docFrag=createDocumentFragment(),xs=this.items,len=xs.length,i=0;i<len;i++){ docFrag.appendChild(xs[i].detach()); }return docFrag},Fragment__proto__.find=function(selector,options){return findMap(this.items,(function(i){return i.find(selector,options)}))},Fragment__proto__.findAll=function(selector,options){this.items&&this.items.forEach((function(i){return i.findAll&&i.findAll(selector,options)}))},Fragment__proto__.findComponent=function(name,options){return findMap(this.items,(function(i){return i.findComponent(name,options)}))},Fragment__proto__.findAllComponents=function(name,options){this.items&&this.items.forEach((function(i){return i.findAllComponents&&i.findAllComponents(name,options)}))},Fragment__proto__.findContext=function(){var base=findParentWithContext(this);return base&&base.context?base.context:this.ractive.viewmodel},Fragment__proto__.findNextNode=function(item){
var this$1 = this;
if(item){ for(var it,i=item.index+1;i<this.items.length;i++){ if((it=this$1.items[i])&&it.firstNode){var node=it.firstNode(!0);if(node){ return node }} } }return this.isRoot?this.ractive.component?this.ractive.component.up.findNextNode(this.ractive.component):null:this.parent?this.owner.findNextNode(this):void 0},Fragment__proto__.findParentNode=function(){var fragment=this;do{if(fragment.owner.type===ELEMENT){ return fragment.owner.node; }if(fragment.isRoot&&!fragment.ractive.component){ return fragment.ractive.el; }fragment=fragment.owner.type===YIELDER?fragment.owner.containerFragment:fragment.componentParent||fragment.parent}while(fragment);throw new Error("Could not find parent node")},Fragment__proto__.firstNode=function(skipParent){var node=findMap(this.items,(function(i){return i.firstNode(!0)}));return node||(skipParent?null:this.parent.findNextNode(this.owner))},Fragment__proto__.getKey=function(){return this.keyModel||(this.keyModel=new KeyModel(this.key))},Fragment__proto__.getIndex=function(){return this.idxModel||(this.idxModel=new KeyModel(this.index))},Fragment__proto__.rebind=function(next){this.context=next,this.rootModel&&(this.rootModel.context=this.context),this.pathModel&&(this.pathModel.context=this.context)},Fragment__proto__.rebound=function(update$$1){this.items.forEach((function(x){return x.rebound(update$$1)})),update$$1&&(this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath()))},Fragment__proto__.render=function(target,occupants){if(this.rendered){ throw new Error("Fragment is already rendered!"); }this.rendered=!0;for(var xs=this.items,len=xs.length,i=0;i<len;i++){ xs[i].render(target,occupants) }},Fragment__proto__.resetTemplate=function(template){var wasBound=this.bound,wasRendered=this.rendered;if(wasBound&&(wasRendered&&this.unrender(!0),this.unbind()),this.template=template,this.createItems(),wasBound&&(this.bind(this.context),wasRendered)){var parentNode=this.findParentNode(),anchor=this.findNextNode();if(anchor){var docFrag=createDocumentFragment();this.render(docFrag),parentNode.insertBefore(docFrag,anchor)}else { this.render(parentNode) }}},Fragment__proto__.shuffled=function(){this.items.forEach(shuffled),this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath())},Fragment__proto__.toString=function(escape){return this.items.map(escape?toEscapedString:toString$1).join("")},Fragment__proto__.unbind=function(){
var this$1 = this;
this.context=null;for(var len=this.items.length,i=0;i<len;i++){ this$1.items[i].unbind(); }return this.bound=!1,this},Fragment__proto__.unrender=function(shouldDestroy){
var this$1 = this;
for(var len=this.items.length,i=0;i<len;i++){ this$1.items[i].unrender(shouldDestroy); }this.rendered=!1},Fragment__proto__.update=function(){
var this$1 = this;
if(this.dirty){ if(this.updating){ this.isRoot&&runloop.addFragmentToRoot(this); }else{this.dirty=!1,this.updating=!0;for(var len=this.items.length,i=0;i<len;i++){ this$1.items[i].update(); }this.updating=!1} }},Fragment__proto__.valueOf=function(){if(1===this.items.length){ return this.items[0].valueOf(); }if(this.dirtyValue){var values={},parsed=parseJSON(function processItems(items,values,guid,counter){return void 0===counter&&(counter=0),items.map((function(item){if(item.type===TEXT){ return item.template; }if(item.fragment){ return item.fragment.iterations?item.fragment.iterations.map((function(fragment){return processItems(fragment.items,values,guid,counter)})).join(""):processItems(item.fragment.items,values,guid,counter); }var placeholderId=guid+"-"+counter++,model=item.model||item.newModel;return values[placeholderId]=model?model.wrapper?model.wrapperValue:model.get():void 0,"${"+placeholderId+"}"})).join("")}(this.items,values,this.ractive._guid),values);this.value=parsed?parsed.value:this.toString(),this.dirtyValue=!1}return this.value},Fragment.prototype.getContext=getContext,Fragment.prototype.getKeypath=getKeypath;var shouldRerender=["template","partials","components","decorators","events"];function Ractive$toCSS(){var cssIds=[this.cssId].concat(this.findAllComponents().map((function(c){return c.cssId})));return getCSS(keys(cssIds.reduce((function(ids,id){return ids[id]=!0,ids}),{})))}function Ractive$toHTML(){return this.fragment.toString(!0)}var proto$8={add:function(keypath,d,options){return add(this,keypath,isNumber(d)?d:1,isObjectType(d)?d:options)},animate:function(keypath,to,options){if(isObjectType(keypath)){var keys$$1=keys(keypath);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+keys$$1.map((function(key){return"'"+key+"': "+keypath[key]})).join("\n  ")+"\n}, {...}), do\n\n"+keys$$1.map((function(key){return"ractive.animate('"+key+"', "+keypath[key]+", {...});"})).join("\n")+"\n")}return animate(this,this.viewmodel.joinAll(splitKeypath(keypath)),to,options)},attachChild:function(child,options){void 0===options&&(options={});var idx,children=this._children;if(child.parent&&child.parent!==this){ throw new Error("Instance "+child._guid+" is already attached to a different instance "+child.parent._guid+". Please detach it from the other instance using detachChild first."); }if(child.parent){ throw new Error("Instance "+child._guid+" is already attached to this instance."); }var list,meta={instance:child,ractive:this,name:options.name||child.constructor.name||"Ractive",target:options.target||!1,bubble:bubble,findNextNode:findNextNode};meta.nameOption=options.name,meta.target?((list=children.byName[meta.target])||(list=[],this.set("@this.children.byName."+meta.target,list)),idx=options.prepend?0:void 0!==options.insertAt?options.insertAt:list.length):(meta.up=this.fragment,meta.external=!0),child.parent=this,child.root=this.root,child.component=meta,children.push(meta);var promise=runloop.start(),rm=child.viewmodel.getRactiveModel();return rm.joinKey("parent",{lastLink:!1}).link(this.viewmodel.getRactiveModel()),rm.joinKey("root",{lastLink:!1}).link(this.root.viewmodel.getRactiveModel()),hooks.attachchild.fire(child),meta.target?(function(meta){meta.instance.fragment.rendered&&(meta.shouldDestroy=!0,meta.instance.unrender()),meta.instance.el=null}(meta),this.splice("@this.children.byName."+meta.target,idx,0,meta),updateAnchors(this,meta.target)):child.isolated||child.viewmodel.attached(this.fragment),runloop.end(),promise.ractive=child,promise.then((function(){return child}))},compute:function(path,computed){var promise=runloop.start(),comp=compute.call(this,path,computed);if(comp){var keys=splitKeypath(path);1!==keys.length||comp.isReadonly||comp.set(this.viewmodel.value[keys[0]]);var first=keys.reduce((function(a,c){return a&&a.childByKey[c]}),this.viewmodel);first&&(first.rebind(comp,first,!1),first.parent&&delete first.parent.childByKey[first.key],fireShuffleTasks())}return runloop.end(),promise},detach:function(){return this.isDetached?this.el:(this.el&&removeFromArray(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,hooks.detach.fire(this),this.el)},detachChild:function(child){for(var meta,index,children=this._children,i=children.length;i--;){ if(children[i].instance===child){index=i,meta=children[i];break} }if(!meta||child.parent!==this){ throw new Error("Instance "+child._guid+" is not attached to this instance."); }var promise=runloop.start();meta.anchor&&meta.anchor.removeChild(meta),child.isolated||child.viewmodel.detached(),children.splice(index,1),meta.target&&(this.splice("@this.children.byName."+meta.target,children.byName[meta.target].indexOf(meta),1),updateAnchors(this,meta.target));var rm=child.viewmodel.getRactiveModel();return rm.joinKey("parent",{lastLink:!1}).unlink(),rm.joinKey("root",{lastLink:!1}).link(rm),child.root=child,child.parent=null,child.component=null,hooks.detachchild.fire(child),runloop.end(),promise.ractive=child,promise.then((function(){return child}))},find:function(selector,options){
var this$1 = this;
if(void 0===options&&(options={}),!this.rendered){ throw new Error("Cannot call ractive.find('"+selector+"') unless instance is rendered to the DOM"); }var node=this.fragment.find(selector,options);if(node){ return node; }if(options.remote){ for(var i=0;i<this._children.length;i++){ if(this$1._children[i].instance.fragment.rendered&&(node=this$1._children[i].instance.find(selector,options))){ return node } } }},findAll:function(selector,options){if(void 0===options&&(options={}),!this.rendered){ throw new Error("Cannot call ractive.findAll('"+selector+"', ...) unless instance is rendered to the DOM"); }return isArray(options.result)||(options.result=[]),this.fragment.findAll(selector,options),options.remote&&this._children.forEach((function(c){!c.target&&c.instance.fragment&&c.instance.fragment.rendered&&c.instance.findAll(selector,options)})),options.result},findAllComponents:function(selector,options){return!options&&isObjectType(selector)&&(options=selector,selector=""),isArray((options=options||{}).result)||(options.result=[]),this.fragment.findAllComponents(selector,options),options.remote&&this._children.forEach((function(c){!c.target&&c.instance.fragment&&c.instance.fragment.rendered&&(selector&&c.name!==selector||options.result.push(c.instance),c.instance.findAllComponents(selector,options))})),options.result},findComponent:function(selector,options){
var this$1 = this;
void 0===options&&(options={}),isObjectType(selector)&&(options=selector,selector="");var child=this.fragment.findComponent(selector,options);if(child){ return child; }if(options.remote){if(!selector&&this._children.length){ return this._children[0].instance; }for(var i=0;i<this._children.length;i++){ if(!this$1._children[i].target){if(this$1._children[i].name===selector){ return this$1._children[i].instance; }if(child=this$1._children[i].instance.findComponent(selector,options)){ return child }} }}},findContainer:function(selector){return this.container?this.container.component&&this.container.component.name===selector?this.container:this.container.findContainer(selector):null},findParent:function(selector){return this.parent?this.parent.component&&this.parent.component.name===selector?this.parent:this.parent.findParent(selector):null},fire:function(eventName){
var arguments$1 = arguments;
for(var ctx,args=[],len=arguments.length-1;len-- >0;){ args[len]=arguments$1[len+1]; }if(args[0]instanceof Context){var proto=args.shift();ctx=create(proto),assign(ctx,proto)}else { ctx=!isObjectType(args[0])||null!==args[0]&&args[0].constructor!==Object?Context.forRactive(this):Context.forRactive(this,args.shift()); }return fireEvent(this,eventName,ctx,args)},get:function(keypath,opts){if(!isString(keypath)){ return this.viewmodel.get(!0,keypath); }var keys=splitKeypath(keypath),key=keys[0];return this.viewmodel.has(key)||this.component&&!this.isolated&&resolveReference(this.fragment||new FakeFragment(this),key),this.viewmodel.joinAll(keys).get(!0,opts)},getContext:function(node,options){return node?(isString(node)&&(node=this.find(node,options)),getContext$1(node)):getRactiveContext(this)},insert:function(target,anchor){if(!this.fragment.rendered){ throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`."); }if(target=getElement(target),anchor=getElement(anchor)||null,!target){ throw new Error("You must specify a valid target to insert into"); }target.insertBefore(this.detach(),anchor),this.el=target,(target.__ractive_instances__||(target.__ractive_instances__=[])).push(this),this.isDetached=!1,(function fireInsertHook(ractive){hooks.insert.fire(ractive),ractive.findAllComponents("*").forEach((function(child){fireInsertHook(child.instance)}))})(this)},link:function(there,here,options){var model,target=options&&(options.ractive||options.instance)||this,sourcePath=splitKeypath(there);!target.viewmodel.has(sourcePath[0])&&target.component&&(model=(model=resolveReference(target.component.up,sourcePath[0])).joinAll(sourcePath.slice(1)));var src=model||target.viewmodel.joinAll(sourcePath),dest=this.viewmodel.joinAll(splitKeypath(here),{lastLink:!1});if(isUpstream(src,dest)||isUpstream(dest,src)){ throw new Error("A keypath cannot be linked to itself."); }var promise=runloop.start();return dest.link(src,options&&options.keypath||there),runloop.end(),promise},observe:function(keypath,callback,options){var map,opts,this$1=this,observers=[];isObject(keypath)?(map=keypath,opts=callback||{}):isFunction(keypath)?(map={"":keypath},opts=callback||{}):((map={})[keypath]=callback,opts=options||{});var silent=!1;return keys(map).forEach((function(keypath){var callback=map[keypath],caller=function(){
var arguments$1 = arguments;
for(var args=[],len=arguments.length;len--;){ args[len]=arguments$1[len]; }if(!silent){ return callback.apply(this,args) }},keypaths=keypath.split(" ");keypaths.length>1&&(keypaths=keypaths.filter((function(k){return k}))),keypaths.forEach((function(keypath){opts.keypath=keypath;var observer=(function(ractive,keypath,callback,options){var model,keys$$1=splitKeypath(keypath),wildcardIndex=keys$$1.indexOf("*");if(~wildcardIndex||(wildcardIndex=keys$$1.indexOf("**")),options.fragment=options.fragment||ractive.fragment,options.fragment?~keys$$1[0].indexOf(".*")?(model=options.fragment.findContext(),wildcardIndex=0,keys$$1[0]=keys$$1[0].slice(1)):model=0===wildcardIndex?options.fragment.findContext():resolveReference(options.fragment,keys$$1[0]):model=ractive.viewmodel.joinKey(keys$$1[0]),model||(model=ractive.viewmodel.joinKey(keys$$1[0])),~wildcardIndex){var double=keys$$1.indexOf("**");return~double&&(double+1!==keys$$1.length||~keys$$1.indexOf("*"))?void warnOnceIfDebug("Recursive observers may only specify a single '**' at the end of the path."):(model=model.joinAll(keys$$1.slice(1,wildcardIndex)),new PatternObserver(ractive,model,keys$$1.slice(wildcardIndex),callback,options))}return model=model.joinAll(keys$$1.slice(1)),options.array?new ArrayObserver(ractive,model,callback,options):new Observer(ractive,model,callback,options)})(this$1,keypath,caller,opts);observer&&observers.push(observer)}))})),this._observers.push.apply(this._observers,observers),{cancel:function(){return observers.forEach((function(o){return o.cancel()}))},isSilenced:function(){return silent},silence:function(){return silent=!0},resume:function(){return silent=!1}}},observeOnce:function(keypath,callback,options){return isObject(keypath)||isFunction(keypath)?(options=assign(callback||{},onceOptions),this.observe(keypath,options)):(options=assign(options||{},onceOptions),this.observe(keypath,callback,options))},off:function(eventName,callback){var this$1=this;return eventName?eventName.split(" ").map(trim).filter(notEmptyString).forEach((function(event){var subs=this$1._subs[event];if(subs&&callback){var entry=subs.find((function(s){return s.callback===callback}));entry&&(removeFromArray(subs,entry),entry.off=!0,event.indexOf(".")&&this$1._nsSubs--)}else { subs&&(event.indexOf(".")&&(this$1._nsSubs-=subs.length),subs.length=0) }})):this._subs={},this},on:function(eventName,callback){var this$1=this,map=isObjectType(eventName)?eventName:{};isString(eventName)&&(map[eventName]=callback);var silent=!1,events=[],loop=function(k){var callback$1=map[k],entry={callback:callback$1,handler:function(){
var arguments$1 = arguments;
for(var args=[],len=arguments.length;len--;){ args[len]=arguments$1[len]; }if(!silent){ return callback$1.apply(this,args) }}};hasOwn(map,k)&&k.split(" ").map(trim).filter(notEmptyString).forEach((function(n){(this$1._subs[n]||(this$1._subs[n]=[])).push(entry),n.indexOf(".")&&this$1._nsSubs++,events.push([n,entry])}))};for(var k in map){ loop(k); }return{cancel:function(){return events.forEach((function(e){return this$1.off(e[0],e[1].callback)}))},isSilenced:function(){return silent},silence:function(){return silent=!0},resume:function(){return silent=!1}}},once:function(eventName,handler){var listener=this.on(eventName,(function(){handler.apply(this,arguments),listener.cancel()}));return listener},pop:pop,push:push,readLink:function(keypath,options){void 0===options&&(options={});var path=splitKeypath(keypath);if(this.viewmodel.has(path[0])){var model=this.viewmodel.joinAll(path);if(!model.isLink){ return; }for(;(model=model.target)&&!1!==options.canonical&&model.isLink;){ ; }if(model){ return{ractive:model.root.ractive,keypath:model.getKeypath()} }}},render:function(target,anchor){if(this.torndown){ return warnIfDebug("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve(); }if(target=getElement(target)||this.el,!this.append&&target){var others=target.__ractive_instances__;others&&others.forEach(teardown),this.enhance||(target.innerHTML="")}var occupants=this.enhance?toArray(target.childNodes):null,promise=render$1(this,target,anchor,occupants);if(occupants){ for(;occupants.length;){ target.removeChild(occupants.pop()); } }return promise},reset:function(data){if(!isObjectType(data=data||{})){ throw new Error("The reset method takes either no arguments, or an object containing new data"); }data=dataConfigurator.init(this.constructor,this,{data:data});var promise=runloop.start(),wrapper=this.viewmodel.wrapper;wrapper&&wrapper.reset?!1===wrapper.reset(data)&&this.viewmodel.set(data):this.viewmodel.set(data);for(var rerender,changes=config.reset(this),i=changes.length;i--;){ if(shouldRerender.indexOf(changes[i])>-1){rerender=!0;break} }return rerender&&(hooks.unrender.fire(this),this.fragment.resetTemplate(this.template),hooks.render.fire(this),hooks.complete.fire(this)),runloop.end(),hooks.reset.fire(this,data),promise},resetPartial:function(name,partial){var collection=[];!(function collect$1(source,name,attr,dest){source.forEach((function(item){if(item.type===PARTIAL&&(item.refName===name||item.name===name)){ return item.inAttribute=attr,void dest.push(item); }if(item.fragment){ collect$1(item.fragment.iterations||item.fragment.items,name,attr,dest); }else if(isArray(item.items)){ collect$1(item.items,name,attr,dest); }else if(item.type===COMPONENT&&item.instance){if(item.instance.partials[name]){ return; }collect$1(item.instance.fragment.items,name,attr,dest)}item.type===ELEMENT&&isArray(item.attributes)&&collect$1(item.attributes,name,!0,dest)}))})(this.fragment.items,name,!1,collection);var promise=runloop.start();return this.partials[name]=partial,collection.forEach(handleChange),runloop.end(),promise},resetTemplate:function(template){templateConfigurator.init(null,this,{template:template});var transitionsEnabled=this.transitionsEnabled;this.transitionsEnabled=!1;var component=this.component;component&&(component.shouldDestroy=!0),this.unrender(),component&&(component.shouldDestroy=!1);var promise=runloop.start();this.fragment.unbind().unrender(!0),this.fragment=new Fragment({template:this.template,root:this,owner:this});var docFrag=createDocumentFragment();return this.fragment.bind(this.viewmodel).render(docFrag),component&&!component.external?this.fragment.findParentNode().insertBefore(docFrag,component.findNextNode()):this.el.insertBefore(docFrag,this.anchor),runloop.end(),this.transitionsEnabled=transitionsEnabled,promise},reverse:makeArrayMethod("reverse").path,set:function(keypath,value,options){var opts=isObjectType(keypath)?value:options;return set(build(this,keypath,value,opts&&opts.isolated),opts)},shift:makeArrayMethod("shift").path,sort:makeArrayMethod("sort").path,splice:makeArrayMethod("splice").path,subtract:function(keypath,d,options){return add(this,keypath,isNumber(d)?-d:-1,isObjectType(d)?d:options)},teardown:function(){var this$1=this;return this.torndown?(warnIfDebug("ractive.teardown() was called on a Ractive instance that was already torn down"),Promise.resolve()):(this.shouldDestroy=!0,teardown$2(this,(function(){return this$1.fragment.rendered?this$1.unrender():Promise.resolve()})))},toggle:function(keypath,options){if(!isString(keypath)){ throw new TypeError(badArguments); }return set(gather(this,keypath,null,options&&options.isolated).map((function(m){return[m,!m.get()]})),options)},toCSS:Ractive$toCSS,toCss:Ractive$toCSS,toHTML:Ractive$toHTML,toHtml:Ractive$toHTML,toText:function(){return this.fragment.toString(!1)},transition:function(name,node,params){node instanceof HTMLElement||isObject(node)&&(params=node),(node=node||this.event.node)&&node._ractive||fatal("No node was supplied for transition "+name),params=params||{};var owner=node._ractive.proxy,transition=new Transition({owner:owner,up:owner.up,name:name,params:params});transition.bind();var promise=runloop.start();return runloop.registerTransition(transition),runloop.end(),promise.then((function(){return transition.unbind()})),promise},unlink:function(here){var promise=runloop.start();return this.viewmodel.joinAll(splitKeypath(here),{lastLink:!1}).unlink(),runloop.end(),promise},unrender:function(){if(!this.fragment.rendered){ return warnIfDebug("ractive.unrender() was called on a Ractive instance that was not rendered"),Promise.resolve(); }this.unrendering=!0;var promise=runloop.start();hooks.unrendering.fire(this);var shouldDestroy=!this.component||(this.component.anchor||{}).shouldDestroy||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(shouldDestroy),shouldDestroy&&(this.destroyed=!0),removeFromArray(this.el.__ractive_instances__,this),hooks.unrender.fire(this),runloop.end(),this.unrendering=!1,promise},unshift:makeArrayMethod("unshift").path,update:function(keypath,options){var opts,path;return isString(keypath)?(path=splitKeypath(keypath),opts=options):opts=keypath,update$1(this,path?this.viewmodel.joinAll(path):this.viewmodel,opts)},updateModel:function(keypath,cascade){var promise=runloop.start();return keypath?this.viewmodel.joinAll(splitKeypath(keypath)).updateFromBindings(!1!==cascade):this.viewmodel.updateFromBindings(!0),runloop.end(),promise},use:function(){
var arguments$1 = arguments;
for(var this$1=this,plugins=[],len=arguments.length;len--;){ plugins[len]=arguments$1[len]; }return plugins.forEach((function(p){p({proto:this$1,Ractive:this$1.constructor.Ractive,instance:this$1})})),this}};function isInstance(object){return object&&object instanceof this}function styleGet(keypath){return this._cssModel.joinAll(splitKeypath(keypath)).get()}var styles=[];function buildCSS(data){return styles.map((function(s){return"\n/* ---- extra style "+s.id+" */\n"+(isFunction(s.css)?s.css(data):s.css)})).join("")}function use$1(){
var arguments$1 = arguments;
for(var this$1=this,plugins=[],len=arguments.length;len--;){ plugins[len]=arguments$1[len]; }return plugins.forEach((function(p){isFunction(p)&&p({proto:this$1.prototype,Ractive:this$1.Ractive,instance:this$1})})),this}var callsSuper=/super\s*\(|\.call\s*\(\s*this/;function extend(){
var arguments$1 = arguments;
for(var options=[],len=arguments.length;len--;){ options[len]=arguments$1[len]; }return options.length?options.reduce(extendOne,this):extendOne(this)}function extendWith(Class,options){return void 0===options&&(options={}),extendOne(this,options,Class)}function extendOne(Parent,options,Target){var proto;void 0===options&&(options={});var attrs,Child=isFunction(Target)&&Target;if(options.prototype instanceof Ractive){ throw new Error("Ractive no longer supports multiple inheritance."); }if(Child){if(!(Child.prototype instanceof Parent)){ throw new Error("Only classes that inherit the appropriate prototype may be used with extend"); }if(!callsSuper.test(Child.toString())){ throw new Error("Only classes that call super in their constructor may be used with extend"); }proto=Child.prototype}else { Child=function(options){if(!(this instanceof Child)){ return new Child(options); }construct(this,options||{}),initialise(this,options||{},{})},(proto=create(Parent.prototype)).constructor=Child,Child.prototype=proto; }(defineProperties(Child,{defaults:{value:proto},extend:{value:extend,writable:!0,configurable:!0},extendWith:{value:extendWith,writable:!0,configurable:!0},extensions:{value:[]},use:{value:use$1},isInstance:{value:isInstance},Parent:{value:Parent},Ractive:{value:Ractive},styleGet:{value:styleGet.bind(Child),configurable:!0},styleSet:{value:setCSSData.bind(Child),configurable:!0}}),config.extend(Parent,proto,options,Child),Child._on=(Parent._on||[]).concat(toPairs(options.on)),Child._observe=(Parent._observe||[]).concat(toPairs(options.observe)),Parent.extensions.push(Child),options.attributes)&&(attrs=isArray(options.attributes)?{optional:options.attributes,required:[]}:options.attributes,isArray(attrs.required)||(attrs.required=[]),isArray(attrs.optional)||(attrs.optional=[]),Child.attributes=attrs);return dataConfigurator.extend(Parent,proto,options,Child),defineProperty(Child,"helpers",{writable:!0,value:proto.helpers}),isArray(options.use)&&Child.use.apply(Child,options.use),Child}function Ractive(options){if(!(this instanceof Ractive)){ return new Ractive(options); }construct(this,options||{}),initialise(this,options||{},{})}if(defineProperties(Ractive,{sharedGet:{value:function(keypath){return SharedModel$1.joinAll(splitKeypath(keypath)).get()}},sharedSet:{value:function(keypath,value,options){var opts=isObjectType(keypath)?value:options;return set(build({viewmodel:SharedModel$1},keypath,value,!0),opts)}},styleGet:{configurable:!0,value:styleGet.bind(Ractive)},styleSet:{configurable:!0,value:setCSSData.bind(Ractive)},addCSS:{configurable:!1,value:function(id,css){if(styles.find((function(s){return s.id===id}))){ throw new Error("Extra styles with the id '"+id+"' have already been added."); }styles.push({id:id,css:css}),this.css||Object.defineProperty(this,"css",{configurable:!1,writable:!1,value:buildCSS}),this._cssDef||(Object.defineProperty(this,"_cssDef",{configurable:!0,writable:!1,value:{transform:!1,id:"Ractive.addStyle"}}),addCSS(this._cssDef)),recomputeCSS(this),applyCSS(!0)}.bind(Ractive)},hasCSS:{configurable:!1,value:function(id){return!!styles.find((function(s){return s.id===id}))}.bind(Ractive)}}),win&&!win.Ractive){var opts$1="",script=document.currentScript||document.querySelector("script[data-ractive-options]");script&&(opts$1=script.getAttribute("data-ractive-options")||""),~opts$1.indexOf("ForceGlobal")&&(win.Ractive=Ractive)}else { win&&warn("Ractive already appears to be loaded while loading 0.10.5."); }return assign(Ractive.prototype,proto$8,defaults),Ractive.prototype.constructor=Ractive,Ractive.defaults=Ractive.prototype,shared.defaults=Ractive.defaults,shared.Ractive=Ractive,defineProperties(Ractive,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:extend},extendWith:{value:extendWith},escapeKey:{value:escapeKey},evalObjectString:{value:parseJSON},findPlugin:{value:function(name,type,instance){return findInViewHierarchy(type,instance,name)}},getContext:{value:getContext$1},getCSS:{value:getCSS},isInstance:{value:isInstance},joinKeys:{value:function(){
var arguments$1 = arguments;
for(var keys=[],len=arguments.length;len--;){ keys[len]=arguments$1[len]; }return keys.map(escapeKey).join(".")}},macro:{value:function(fn,opts){if(!isFunction(fn)){ throw new Error("The macro must be a function"); }return assign(fn,opts),defineProperties(fn,{extensions:{value:[]},_cssIds:{value:[]},cssData:{value:assign(create(this.cssData),fn.cssData||{})},styleGet:{value:styleGet.bind(fn)},styleSet:{value:setCSSData.bind(fn)}}),defineProperty(fn,"_cssModel",{value:new CSSModel(fn)}),fn.css&&initCSS(fn,fn,fn),this.extensions.push(fn),fn}},normaliseKeypath:{value:normalise},parse:{value:parse},splitKeypath:{value:function(keypath){return splitKeypath(keypath).map(unescapeKey)}},unescapeKey:{value:unescapeKey},use:{value:use$1},enhance:{writable:!0,value:!1},svg:{value:svg},VERSION:{value:"0.10.5"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:easing},events:{writable:!0,value:{}},extensions:{value:[]},helpers:{writable:!0,value:defaults.helpers},interpolators:{writable:!0,value:interpolators},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},cssData:{configurable:!0,value:{}},sharedData:{value:data},Ractive:{value:Ractive},Context:{value:extern.Context.prototype}}),defineProperty(Ractive,"_cssModel",{configurable:!0,value:new CSSModel(Ractive)}),defineProperty(Ractive.prototype,"rendered",{get:function(){return this.fragment&&this.fragment.rendered}}),Ractive}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}),{}],2:[(function(require,module,exports){var Ractive,sleep,toString$={}.toString;(Ractive=require("ractive")).defaults.resolveInstanceMembers=!0,window.Ractive=Ractive,window.sleep=sleep=function(ms,f){return setTimeout(f,ms)},Ractive.use((function(ref){
var proto = ref.proto;
proto.hasAttribute=function(name){return this.component&&(this.component.template.a&&name in this.component.template.a||this.component.template.m&&!!this.component.template.m.find((function (a){ return a.n===name; })))}})),Ractive.prototype.delete=function(root,key){var ref$;return"String"!==toString$.call(root).slice(8,-1)&&console.error("keypath must be string"),null!=(ref$=this.get(root))&&delete ref$[key],this.update(root)},Ractive.defaults.findWid=function(wid){var i$,ref$,len$,x;for(i$=0,len$=(ref$=this.findAllComponents()).length;i$<len$;++i$){ if((x=ref$[i$]).get("wid")===wid){ return x } }},Ractive.events.longpress=function(node,fire){var timer,clearTimer,mouseDownHandler,mouseUpHandler;return timer=null,clearTimer=function(){return timer&&clearTimeout(timer),timer=null},mouseDownHandler=function(event){return clearTimer(),sleep(1e3,(function(){return fire({node:node,original:event})}))},mouseUpHandler=function(){return clearTimer()},node.addEventListener("mousedown",mouseDownHandler),node.addEventListener("mouseup",mouseUpHandler),{teardown:function(){return node.removeEventListener("mousedown",mouseDownHandler),node.removeEventListener("mouseup",mouseUpHandler)}}},Ractive.Context.findKeypathId=function(postfix){return null==postfix&&(postfix=""),this.ractive.find("#"+Ractive.escapeKey(this.resolve())+postfix)},Ractive.Context.removeMe=function(){return this.splice("..",this.get("@index"),1)}}),{ractive:1}]},{},[2]),(function(t){function e(r){if(n[r]){ return n[r].exports; }var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)})([(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.data=e,this.text=n.text||e,this.options=n}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),i=(function(){function t(){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.startBin="101",this.endBin="101",this.middleBin="01010",this.binaries={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]}}return o(t,[{key:"encode",value:function(t,e,n){
var this$1 = this;
var r="";n=n||"";for(var o=0;o<t.length;o++){var i=this$1.binaries[e[o]];i&&(r+=i[t[o]]),o<t.length-1&&(r+=n)}return r}}]),t})();e.default=i}),(function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o,i=e.SET_A=0,a=e.SET_B=1,u=e.SET_C=2,s=(e.SHIFT=98,e.START_A=103),f=e.START_B=104,c=e.START_C=105;e.MODULO=103,e.STOP=106,e.SET_BY_CODE=(r(o={},s,i),r(o,f,a),r(o,c,u),o),e.SWAP={101:i,100:a,99:u},e.A_START_CHAR=String.fromCharCode(208),e.B_START_CHAR=String.fromCharCode(209),e.C_START_CHAR=String.fromCharCode(210),e.A_CHARS="[\0-_Ã-Ã]",e.B_CHARS="[ -Ã-Ã]",e.C_CHARS="(Ã*[0-9]{2}Ã*)",e.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]}),(function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e;n++){ t="0"+t; }return t}Object.defineProperty(e,"__esModule",{value:!0});var u=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),f=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),c=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,f.default),u(e,[{key:"encode",value:function(){
var this$1 = this;
for(var t="110",e=0;e<this.data.length;e++){var r=parseInt(this$1.data[e]).toString(2);r=a(r,4-r.length);for(var o=0;o<r.length;o++){ t+="0"==r[o]?"100":"110" }}return{data:t+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e})();e.default=c}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){
var arguments$1 = arguments;
for(var e=1;e<arguments.length;e++){var n=arguments$1[e];for(var r in n){ Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]) }}return t};e.default=function(t,e){return r({},t,e)}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),f=n(2),c=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var i=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),n));return i.bytes=t.split("").map((function(t){return t.charCodeAt(0)})),i}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var t=this.bytes,n=t.shift()-105,r=f.SET_BY_CODE[n];if(void 0===r){ throw new RangeError("The encoding does not start with a start character."); }var o=e.next(t,1,r);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(n)+o.result+e.getBar((o.checksum+n)%f.MODULO)+e.getBar(f.STOP)}}}],[{key:"getBar",value:function(t){return f.BARS[t]?f.BARS[t].toString():""}},{key:"correctIndex",value:function(t,e){if(e===f.SET_A){var n=t.shift();return n<32?n+64:n-32}return e===f.SET_B?t.shift()-32:10*(t.shift()-48)+t.shift()-48}},{key:"next",value:function(t,n,r){if(!t.length){ return{result:"",checksum:0}; }var o=void 0,i=void 0;if(t[0]>=200){i=t.shift()-105;var a=f.SWAP[i];void 0!==a?o=e.next(t,n+1,a):(r!==f.SET_A&&r!==f.SET_B||i!==f.SHIFT||(t[0]=r===f.SET_A?t[0]>95?t[0]-96:t[0]:t[0]<32?t[0]+96:t[0]),o=e.next(t,n+1,r))}else { i=e.correctIndex(t,r),o=e.next(t,n+1,r); }var s=i*n;return{result:e.getBar(i)+o.result,checksum:s+o.checksum}}}]),e})();e.default=c}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mod10=function(t){for(var e=0,n=0;n<t.length;n++){var r=parseInt(t[n]);(n+t.length)%2==0?e+=r:e+=2*r%10+Math.floor(2*r/10)}return(10-e%10)%10},e.mod11=function(t){for(var e=0,n=[2,3,4,5,6,7],r=0;r<t.length;r++){ e+=n[r%n.length]*parseInt(t[t.length-1-r]); }return(11-e%11)%11}}),(function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }}function o(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=(function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=t,i.input=n,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return i(e,Error),e})(),u=(function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return i(e,Error),e})(),s=(function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return i(e,Error),e})();e.InvalidInputException=a,e.InvalidElementException=u,e.NoElementException=s}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e){ e.hasOwnProperty(n)&&"string"==typeof t[n=e[n]]&&(t[n]=parseInt(t[n],10)); }return"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue),t}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t){var e,n=0;for(e=1;e<11;e+=2){ n+=parseInt(t[e]); }for(e=0;e<11;e+=2){ n+=3*parseInt(t[e]); }return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})();e.checksum=u;var c=r(n(1)),d=r(n(0)),p=(function(t){function e(t,n){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),-1!==t.search(/^[0-9]{11}$/)&&(t+=u(t));var r=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,d.default),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==u(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t=new c.default,e="";return e+="101",e+=t.encode(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=t.encode(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=new c.default,e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+t.encode(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:t.encode(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),e})();e.default=p}),(function(t,e,n){"use strict";function r(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function o(t,e,n){if(n.displayValue&&e<t){if("center"==n.textAlign){ return Math.floor((t-e)/2); }if("left"==n.textAlign){ return 0; }if("right"==n.textAlign){ return Math.floor(t-e) }}return 0}function s(t,e,n){var r;if(n){ r=n; }else{if("undefined"==typeof document){ return 0; }r=document.createElement("canvas").getContext("2d")}return r.font=e.fontOptions+" "+e.fontSize+"px "+e.font,r.measureText(t).width}Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=void 0;var c=(function(t){return t&&t.__esModule?t:{default:t}})(n(4));e.getMaximumHeightOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++){ t[n].height>e&&(e=t[n].height); }return e},e.getEncodingHeight=r,e.getBarcodePadding=o,e.calculateEncodingAttributes=function(t,e,n){for(var i=0;i<t.length;i++){var a,u=t[i],f=(0,c.default)(e,u.options);a=f.displayValue?s(u.text,f,n):0;var l=u.data.length*f.width;u.width=Math.ceil(Math.max(a,l)),u.height=r(u,f),u.barcodePadding=o(a,l,f)}},e.getTotalWidthOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++){ e+=t[n].width; }return e}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),o=n(23),i=n(30),a=n(33),u=n(32),s=n(38),f=n(40),c=n(39),l=n(31);e.default={CODE39:r.CODE39,CODE128:o.CODE128,CODE128A:o.CODE128A,CODE128B:o.CODE128B,CODE128C:o.CODE128C,EAN13:i.EAN13,EAN8:i.EAN8,EAN5:i.EAN5,EAN2:i.EAN2,UPC:i.UPC,UPCE:i.UPCE,ITF14:a.ITF14,ITF:u.ITF,MSI:s.MSI,MSI10:s.MSI10,MSI11:s.MSI11,MSI1010:s.MSI1010,MSI1110:s.MSI1110,pharmacode:f.pharmacode,codabar:c.codabar,GenericBarcode:l.GenericBarcode}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),i=(function(){function t(e){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.api=e}return o(t,[{key:"handleCatch",value:function(t){if("InvalidInputException"!==t.name){ throw t; }if(this.api._options.valid===this.api._defaults.valid){ throw t.message; }this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(t){return this.handleCatch(t),this.api}}}]),t})();e.default=i}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if("string"==typeof t){ return (function(t){var e=document.querySelectorAll(t);if(0!==e.length){for(var n=[],r=0;r<e.length;r++){ n.push(o(e[r])); }return n}})(t); }if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++){ e.push(o(t[n])); }return e}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement){ return (function(t){var e=document.createElement("canvas");return{element:e,options:(0,f.default)(t),renderer:l.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}})(t); }if(t&&"svg"===t.nodeName||"undefined"!=typeof SVGElement&&t instanceof SVGElement){ return{element:t,options:(0,f.default)(t),renderer:l.default.SVGRenderer}; }if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement){ return{element:t,options:(0,f.default)(t),renderer:l.default.CanvasRenderer}; }if(t&&t.getContext){ return{element:t,renderer:l.default.CanvasRenderer}; }if(t&&"object"===(void 0===t?"undefined":u(t))&&!t.nodeName){ return{element:t,renderer:l.default.ObjectRenderer}; }throw new d.InvalidElementException}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=r(n(41)),l=r(n(43)),d=n(7);e.default=o}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var n=[];return (function e(t){if(Array.isArray(t)){ for(var r=0;r<t.length;r++){ e(t[r]); } }else { t.text=t.text||"",t.data=t.data||"",n.push(t) }})(t),n}}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var r=new e(t=""+t,n);if(!r.valid()){ throw new w.InvalidInputException(r.constructor.name,t); }var o=r.encode();o=(0,d.default)(o);for(var i=0;i<o.length;i++){ o[i].options=(0,c.default)(n,o[i].options); }return o}function i(){return s.default.CODE128?"CODE128":Object.keys(s.default)[0]}function a(t,e,n){e=(0,d.default)(e);for(var r=0;r<e.length;r++){ e[r].options=(0,c.default)(n,e[r].options),(0,h.default)(e[r].options); }(0,h.default)(n),new(0,t.renderer)(t.element,e,n).render(),t.afterRender&&t.afterRender()}var s=r(n(12)),c=r(n(4)),d=r(n(16)),h=r(n(14)),b=r(n(15)),g=r(n(8)),O=r(n(13)),w=n(7),m=r(n(9)),x=function(){},j=function(t,e,n){var r=new x;if(void 0===t){ throw Error("No element to render on was provided."); }return r._renderProperties=(0,b.default)(t),r._encodings=[],r._options=m.default,r._errorHandler=new O.default(r),void 0!==e&&((n=n||{}).format||(n.format=i()),r.options(n)[n.format](e,n).render()),r};for(var P in j.getModule=function(t){return s.default[t]},s.default){ s.default.hasOwnProperty(P)&&(function(t,e){x.prototype[e]=x.prototype[e.toUpperCase()]=x.prototype[e.toLowerCase()]=function(n,r){var i=this;return i._errorHandler.wrapBarcodeCall((function(){r.text=void 0===r.text?void 0:""+r.text;var a=(0,c.default)(i._options,r);a=(0,g.default)(a);var u=t[e],s=o(n,u,a);return i._encodings.push(s),i}))}})(s.default,P); }x.prototype.options=function(t){return this._options=(0,c.default)(this._options,t),this},x.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},x.prototype.init=function(){
var this$1 = this;
var t;if(this._renderProperties){ for(var e in Array.isArray(this$1._renderProperties)||(this$1._renderProperties=[this$1._renderProperties]),this$1._renderProperties){t=this$1._renderProperties[e];var n=(0,c.default)(this$1._options,t.options);"auto"==n.format&&(n.format=i()),this$1._errorHandler.wrapBarcodeCall((function(){var i=o(n.value,s.default[n.format.toUpperCase()],n);a(t,i,n)}))} }},x.prototype.render=function(){
var this$1 = this;
if(!this._renderProperties){ throw new w.NoElementException; }if(Array.isArray(this._renderProperties)){ for(var t=0;t<this._renderProperties.length;t++){ a(this$1._renderProperties[t],this$1._encodings,this$1._options); } }else { a(this._renderProperties,this._encodings,this._options); }return this},x.prototype._defaults=m.default,"undefined"!=typeof window&&(window.JsBarcode=j),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each((function(){n.push(this)})),j(n,t,e)}),t.exports=j}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(5)),f=n(2),c=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f.A_START_CHAR+t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return new RegExp("^"+f.A_CHARS+"+$").test(this.data)}}]),e})();e.default=c}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(5)),f=n(2),c=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f.B_START_CHAR+t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return new RegExp("^"+f.B_CHARS+"+$").test(this.data)}}]),e})();e.default=c}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(5)),f=n(2),c=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f.C_START_CHAR+t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return new RegExp("^"+f.C_CHARS+"+$").test(this.data)}}]),e})();e.default=c}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(5)),c=r(n(22)),l=(function(t){function e(t,n){if(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }}(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t)){ var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,c.default)(t),n)); }else { r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)); }return i(r)}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),e})();e.default=l}),(function(t,e,n){"use strict";function r(t,e){var n=e?i.A_CHARS:i.B_CHARS,a=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(a){ return a[1]+String.fromCharCode(204)+o(t.substring(a[1].length)); }var u=t.match(new RegExp("^"+n+"+"))[0];return u.length===t.length?t:u+String.fromCharCode(e?205:206)+r(t.substring(u.length),!e)}function o(t){var e=s(t),n=e.length;if(n===t.length){ return t; }t=t.substring(n);var o=a(t)>=u(t);return e+String.fromCharCode(o?206:205)+r(t,o)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=function(t){return t.match(new RegExp("^"+i.A_CHARS+"*"))[0].length},u=function(t){return t.match(new RegExp("^"+i.B_CHARS+"*"))[0].length},s=function(t){return t.match(new RegExp("^"+i.C_CHARS+"*"))[0]};e.default=function(t){var e=void 0;if(s(t).length>=2){ e=i.C_START_CHAR+o(t); }else{var n=a(t)>u(t);e=(n?i.A_START_CHAR:i.B_START_CHAR)+r(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(t,e){return String.fromCharCode(203)+e}))}}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=void 0;var i=r(n(21)),u=r(n(18)),f=r(n(19)),l=r(n(20));e.CODE128=i.default,e.CODE128A=u.default,e.CODE128B=f.default,e.CODE128C=l.default}),(function(t,e,n){"use strict";function a(t){return (function(t){return b[t].toString(2)})(f(t))}function f(t){return y.indexOf(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.CODE39=void 0;var l=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),p=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),h=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),t=t.toUpperCase(),n.mod43&&(t+=(function(t){return y[t]})(function(t){for(var e=0,n=0;n<t.length;n++){ e+=f(t[n]); }return e%43}(t))),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,p.default),l(e,[{key:"encode",value:function(){
var this$1 = this;
for(var t=a("*"),e=0;e<this.data.length;e++){ t+=a(this$1.data[e])+"0"; }return{data:t+=a("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),e})(),y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],b=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];e.CODE39=h}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t){var e,n=0;for(e=0;e<12;e+=2){ n+=parseInt(t[e]); }for(e=1;e<12;e+=2){ n+=3*parseInt(t[e]); }return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),c=r(n(1)),d=r(n(0)),p=(function(t){function e(t,n){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),-1!==t.search(/^[0-9]{12}$/)&&(t+=u(t));var r=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return!n.flat&&n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r.lastChar=n.lastChar,r}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,d.default),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&this.data[12]==u(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"getStructure",value:function(){return["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]}},{key:"guardedEncoding",value:function(){var t=new c.default,e=[],n=this.getStructure()[this.data[0]],r=this.data.substr(1,6),o=this.data.substr(7,6);return this.options.displayValue&&e.push({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:t.encode(r,n),text:this.text.substr(1,6),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(o,"RRRRRR"),text:this.text.substr(7,6),options:{fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),this.options.lastChar&&this.options.displayValue&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}})),e}},{key:"flatEncoding",value:function(){var t=new c.default,e="",n=this.getStructure()[this.data[0]];return e+="101",e+=t.encode(this.data.substr(1,6),n),e+="01010",e+=t.encode(this.data.substr(7,6),"RRRRRR"),{data:e+="101",text:this.text}}}]),e})();e.default=p}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),f=r(n(1)),l=r(n(0)),d=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var r=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.structure=["LL","LG","GL","GG"],r}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,l.default),u(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var t=new f.default,e=this.structure[parseInt(this.data)%4],n="1011";return{data:n+=t.encode(this.data,e,"01"),text:this.text}}}]),e})();e.default=d}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),f=r(n(1)),l=r(n(0)),d=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var r=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.structure=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],r}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,l.default),u(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var t=new f.default,e=this.checksum(),n="1011";return{data:n+=t.encode(this.data,this.structure[e],"01"),text:this.text}}},{key:"checksum",value:function(){var t=0;return t+=3*parseInt(this.data[0]),t+=9*parseInt(this.data[1]),t+=3*parseInt(this.data[2]),t+=9*parseInt(this.data[3]),(t+=3*parseInt(this.data[4]))%10}}]),e})();e.default=d}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t){var e,n=0;for(e=0;e<7;e+=2){ n+=3*parseInt(t[e]); }for(e=1;e<7;e+=2){ n+=parseInt(t[e]); }return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),c=r(n(1)),d=r(n(0)),p=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),-1!==t.search(/^[0-9]{7}$/)&&(t+=u(t)),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,d.default),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&this.data[7]==u(this.data)}},{key:"encode",value:function(){var t=new c.default,e="",n=this.data.substr(0,4),r=this.data.substr(4,4);return e+=t.startBin,e+=t.encode(n,"LLLL"),e+=t.middleBin,e+=t.encode(r,"RRRR"),{data:e+=t.endBin,text:this.text}}}]),e})();e.default=p}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){for(var n=parseInt(t[t.length-1]),r=h[n],o="",i=0,a=0;a<r.length;a++){var u=r[a];o+="X"===u?t[i++]:u}return(o=""+e+o)+(0,p.checksum)(o)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),c=r(n(1)),d=r(n(0)),p=n(10),h=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],y=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],b=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(r.isValid=!1,-1!==t.search(/^[0-9]{6}$/)){ r.middleDigits=t,r.upcA=u(t,"0"),r.text=n.text||""+r.upcA[0]+t+r.upcA[r.upcA.length-1],r.isValid=!0; }else{if(-1===t.search(/^[01][0-9]{7}$/)){ return i(r); }if(r.middleDigits=t.substring(1,t.length-1),r.upcA=u(r.middleDigits,t[0]),r.upcA[r.upcA.length-1]!==t[t.length-1]){ return i(r); }r.isValid=!0}return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,d.default),s(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t=new c.default,e="";return e+="101",e+=this.encodeMiddleDigits(t),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=new c.default,e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(t),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(t){var e=this.upcA[0],n=this.upcA[this.upcA.length-1],r=y[parseInt(n)][parseInt(e)];return t.encode(this.middleDigits,r)}}]),e})();e.default=b}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UPCE=e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=void 0;var i=r(n(25)),u=r(n(28)),f=r(n(27)),l=r(n(26)),p=r(n(10)),y=r(n(29));e.EAN13=i.default,e.EAN8=u.default,e.EAN5=f.default,e.EAN2=l.default,e.UPC=p.default,e.UPCE=y.default}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericBarcode=void 0;var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),f=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e})();e.GenericBarcode=f}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF=void 0;var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),f=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var i=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},i}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){
var this$1 = this;
for(var t="1010",e=0;e<this.data.length;e+=2){ t+=this$1.calculatePair(this$1.data.substr(e,2)); }return{data:t+="11101",text:this.text}}},{key:"calculatePair",value:function(t){for(var e="",n=this.binaryRepresentation[t[0]],r=this.binaryRepresentation[t[1]],o=0;o<5;o++){ e+="1"==n[o]?"111":"1",e+="1"==r[o]?"000":"0"; }return e}}]),e})();e.ITF=f}),(function(t,e,n){"use strict";function a(t){for(var e=0,n=0;n<13;n++){ e+=parseInt(t[n])*(3-n%2*2); }return 10*Math.ceil(e/10)-e}Object.defineProperty(e,"__esModule",{value:!0}),e.ITF14=void 0;var u=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),f=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),c=(function(t){function e(t,n){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),-1!==t.search(/^[0-9]{13}$/)&&(t+=a(t));var i=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},i}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,f.default),u(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&this.data[13]==a(this.data)}},{key:"encode",value:function(){
var this$1 = this;
for(var t="1010",e=0;e<14;e+=2){ t+=this$1.calculatePair(this$1.data.substr(e,2)); }return{data:t+="11101",text:this.text}}},{key:"calculatePair",value:function(t){for(var e="",n=this.binaryRepresentation[t[0]],r=this.binaryRepresentation[t[1]],o=0;o<5;o++){ e+="1"==n[o]?"111":"1",e+="1"==r[o]?"000":"0"; }return e}}]),e})();e.ITF14=c}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=(function(t){return t&&t.__esModule?t:{default:t}})(n(3)),s=n(6),f=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,s.mod10)(t),n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,u.default),e})();e.default=f}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=(function(t){return t&&t.__esModule?t:{default:t}})(n(3)),s=n(6),f=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),t+=(0,s.mod10)(t),t+=(0,s.mod10)(t),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,u.default),e})();e.default=f}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=(function(t){return t&&t.__esModule?t:{default:t}})(n(3)),s=n(6),f=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,s.mod11)(t),n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,u.default),e})();e.default=f}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=(function(t){return t&&t.__esModule?t:{default:t}})(n(3)),s=n(6),f=(function(t){function e(t,n){return (function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),t+=(0,s.mod11)(t),t+=(0,s.mod10)(t),(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,u.default),e})();e.default=f}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=void 0;var i=r(n(3)),u=r(n(34)),f=r(n(36)),l=r(n(35)),p=r(n(37));e.MSI=i.default,e.MSI10=u.default,e.MSI11=f.default,e.MSI1010=l.default,e.MSI1110=p.default}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codabar=void 0;var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),f=(function(t){function e(t,n){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e),0===t.search(/^[0-9\-\$\:\.\+\/]+$/)&&(t="A"+t+"A");var i=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),n));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){
var this$1 = this;
for(var t=[],e=this.getEncodings(),n=0;n<this.data.length;n++){ t.push(e[this$1.data.charAt(n)]),n!==this$1.data.length-1&&t.push("0"); }return{text:this.text,data:t.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1010010011",C:"1001001011",D:"1010011001"}}}]),e})();e.codabar=f}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pharmacode=void 0;var a=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),s=(function(t){return t&&t.__esModule?t:{default:t}})(n(0)),f=(function(t){function e(t,n){!(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,e);var i=(function(t,e){if(!t){ throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); }return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.number=parseInt(t,10),i}return (function(t,e){if("function"!=typeof e&&null!==e){ throw new TypeError("Super expression must either be null or a function, not "+typeof e); }t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,s.default),a(e,[{key:"encode",value:function(){for(var t=this.number,e="";!isNaN(t)&&0!=t;){ t%2==0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2); }return{data:e=e.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e})();e.pharmacode=f}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(8)),s=r(n(9));e.default=function(t){var e={};for(var n in s.default){ s.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase()))); }return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),(0,a.default)(e)}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),a=(function(t){return t&&t.__esModule?t:{default:t}})(n(4)),u=n(11),s=(function(){function t(e,n,o){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.canvas=e,this.encodings=n,this.options=o}return o(t,[{key:"render",value:function(){
var this$1 = this;
if(!this.canvas.getContext){ throw new Error("The browser does not support canvas."); }this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,a.default)(this$1.options,this$1.encodings[t].options);this$1.drawCanvasBarcode(e,this$1.encodings[t]),this$1.drawCanvasText(e,this$1.encodings[t]),this$1.moveCanvasDrawing(this$1.encodings[t])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var t=this.canvas.getContext("2d");t.save(),(0,u.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,u.getTotalWidthOfEncodings)(this.encodings),n=(0,u.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(t,e){var n,r=this.canvas.getContext("2d"),o=e.data;n="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,r.fillStyle=t.lineColor;for(var i=0;i<o.length;i++){var a=i*t.width+e.barcodePadding;"1"===o[i]?r.fillRect(a,n,t.width,t.height):o[i]&&r.fillRect(a,n,t.width,t.height*o[i])}}},{key:"drawCanvasText",value:function(t,e){var o,i,n=this.canvas.getContext("2d"),r=t.fontOptions+" "+t.fontSize+"px "+t.font;t.displayValue&&(i="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,n.font=r,"left"==t.textAlign||e.barcodePadding>0?(o=0,n.textAlign="left"):"right"==t.textAlign?(o=e.width-1,n.textAlign="right"):(o=e.width/2,n.textAlign="center"),n.fillText(e.text,o,i))}},{key:"moveCanvasDrawing",value:function(t){this.canvas.getContext("2d").translate(t.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),t})();e.default=s}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(42)),u=r(n(45)),f=r(n(44));e.default={CanvasRenderer:i.default,SVGRenderer:u.default,ObjectRenderer:f.default}}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),i=(function(){function t(e,n,o){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.object=e,this.encodings=n,this.options=o}return o(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t})();e.default=i}),(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}})(),a=(function(t){return t&&t.__esModule?t:{default:t}})(n(4)),u=n(11),s="http://www.w3.org/2000/svg",f=(function(){function t(e,n,o){(function(t,e){if(!(t instanceof e)){ throw new TypeError("Cannot call a class as a function") }})(this,t),this.svg=e,this.encodings=n,this.options=o,this.document=o.xmlDocument||document}return o(t,[{key:"render",value:function(){
var this$1 = this;
var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var n=this$1.encodings[e],r=(0,a.default)(this$1.options,n.options),o=this$1.createGroup(t,r.marginTop,this$1.svg);this$1.setGroupOptions(o,r),this$1.drawSvgBarcode(o,r,n),this$1.drawSVGText(o,r,n),t+=n.width}}},{key:"prepareSVG",value:function(){
var this$1 = this;
for(;this.svg.firstChild;){ this$1.svg.removeChild(this$1.svg.firstChild); }(0,u.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,u.getTotalWidthOfEncodings)(this.encodings),e=(0,u.getMaximumHeightOfEncodings)(this.encodings),n=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,e),this.options.background&&this.drawRect(0,0,n,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(t,e,n){
var this$1 = this;
var r,o=n.data;r="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var i=0,a=0,u=0;u<o.length;u++){ a=u*e.width+n.barcodePadding,"1"===o[u]?i++:i>0&&(this$1.drawRect(a-e.width*i,r,e.width*i,e.height,t),i=0); }i>0&&this.drawRect(a-e.width*(i-1),r,e.width*i,e.height,t)}},{key:"drawSVGText",value:function(t,e,n){var o,i,r=this.document.createElementNS(s,"text");e.displayValue&&(r.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),i="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||n.barcodePadding>0?(o=0,r.setAttribute("text-anchor","start")):"right"==e.textAlign?(o=n.width-1,r.setAttribute("text-anchor","end")):(o=n.width/2,r.setAttribute("text-anchor","middle")),r.setAttribute("x",o),r.setAttribute("y",i),r.appendChild(this.document.createTextNode(n.text)),t.appendChild(r))}},{key:"setSvgAttributes",value:function(t,e){var n=this.svg;n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+t+" "+e),n.setAttribute("xmlns",s),n.setAttribute("version","1.1"),n.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(t,e,n){var r=this.document.createElementNS(s,"g");return r.setAttribute("transform","translate("+t+", "+e+")"),n.appendChild(r),r}},{key:"setGroupOptions",value:function(t,e){t.setAttribute("style","fill:"+e.lineColor+";")}},{key:"drawRect",value:function(t,e,n,r,o){var i=this.document.createElementNS(s,"rect");return i.setAttribute("x",t),i.setAttribute("y",e),i.setAttribute("width",n),i.setAttribute("height",r),o.appendChild(i),i}}]),t})();e.default=f})]),(function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Cropper=i()})(this,(function(){"use strict";function i(t){return"number"==typeof t&&!J(t)}function e(t){return void 0===t}function a(t){return"object"===(void 0===t?"undefined":G(t))&&null!==t}function n(t){if(!a(t)){ return!1; }try{var i=t.constructor,e=i.prototype;return i&&e&&_.call(e,"isPrototypeOf")}catch(t){return!1}}function o(t){return"function"==typeof t}function r(t,e){if(t&&o(e)){ if(Array.isArray(t)||i(t.length)){var n=t.length,r=void 0;for(r=0;r<n&&!1!==e.call(t,t[r],r,t);r+=1){ ; }}else { a(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)})); } }return t}function h(t){
var arguments$1 = arguments;
for(var i=arguments.length,e=Array(i>1?i-1:0),n=1;n<i;n++){ e[n-1]=arguments$1[n]; }if(a(t)&&e.length>0){if(Object.assign){ return Object.assign.apply(Object,[t].concat(e)); }e.forEach((function(i){a(i)&&Object.keys(i).forEach((function(e){t[e]=i[e]}))}))}return t}function s(t,i){
var arguments$1 = arguments;
for(var e=arguments.length,a=Array(e>2?e-2:0),n=2;n<e;n++){ a[n-2]=arguments$1[n]; }return function(){
var arguments$1 = arguments;
for(var e=arguments.length,n=Array(e),o=0;o<e;o++){ n[o]=arguments$1[o]; }return t.apply(i,a.concat(n))}}function c(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return tt.test(t)?Math.round(t*i)/i:t}function l(t,e){var a=t.style;r(e,(function(t,e){it.test(e)&&i(t)&&(t+="px"),a[e]=t}))}function p(t,e){if(e){ if(i(t.length)){ r(t,(function(t){p(t,e)})); }else if(t.classList){ t.classList.add(e); }else{var a=t.className.trim();a?a.indexOf(e)<0&&(t.className=a+" "+e):t.className=e} }}function m(t,e){e&&(i(t.length)?r(t,(function(t){m(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function u(t,e,a){e&&(i(t.length)?r(t,(function(t){u(t,e,a)})):a?p(t,e):m(t,e))}function g(t){return t.replace(et,"$1-$2").toLowerCase()}function f(t,i){return a(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-"+g(i))}function v(t,i,e){a(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-"+g(i),e)}function w(t,i){if(a(t[i])){ delete t[i]; }else if(t.dataset){ try{delete t.dataset[i]}catch(e){t.dataset[i]=null} }else { t.removeAttribute("data-"+g(i)) }}function b(t,i,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o(e)){var n=i.trim().split(at);n.length>1?r(n,(function(i){b(t,i,e)})):(o(e.onceListener)&&delete(e=e.onceListener).onceListener,t.removeEventListener?t.removeEventListener(i,e,a):t.detachEvent&&t.detachEvent("on"+i,e))}}function x(t,i,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o(e)){var n=i.trim().split(at);if(n.length>1){ r(n,(function(i){x(t,i,e)})); }else{if(a.once){var h=e,s=function e(){
var arguments$1 = arguments;
for(var a=arguments.length,n=Array(a),o=0;o<a;o++){ n[o]=arguments$1[o]; }return b(t,i,e),h.apply(t,n)};h.onceListener=s,e=s}t.addEventListener?t.addEventListener(i,e,a):t.attachEvent&&t.attachEvent("on"+i,e)}}}function y(t,i,a){if(t.dispatchEvent){var n=void 0;return o(Event)&&o(CustomEvent)?n=e(a)?new Event(i,{bubbles:!0,cancelable:!0}):new CustomEvent(i,{detail:a,bubbles:!0,cancelable:!0}):e(a)?(n=document.createEvent("Event")).initEvent(i,!0,!0):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,a),t.dispatchEvent(n)}return!t.fireEvent||t.fireEvent("on"+i)}function M(t){var i=document.documentElement,e=t.getBoundingClientRect();return{left:e.left+((window.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0)),top:e.top+((window.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0))}}function D(t){var i=t.match(ot);return i&&(i[1]!==nt.protocol||i[2]!==nt.hostname||i[3]!==nt.port)}function B(t){var i="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+i}function k(t){var e=t.rotate,a=t.scaleX,n=t.scaleY,o=t.translateX,r=t.translateY,h=[];i(o)&&0!==o&&h.push("translateX("+o+"px)"),i(r)&&0!==r&&h.push("translateY("+r+"px)"),i(e)&&0!==e&&h.push("rotate("+e+"deg)"),i(a)&&1!==a&&h.push("scaleX("+a+")"),i(n)&&1!==n&&h.push("scaleY("+n+")");var s=h.length?h.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function T(t){var i=h({},t),e=[];return r(t,(function(t,a){delete i[a],r(i,(function(i){var a=Math.abs(t.startX-i.startX),n=Math.abs(t.startY-i.startY),o=Math.abs(t.endX-i.endX),r=Math.abs(t.endY-i.endY),h=Math.sqrt(a*a+n*n),s=(Math.sqrt(o*o+r*r)-h)/h;e.push(s)}))})),e.sort((function(t,i){return Math.abs(t)<Math.abs(i)})),e[0]}function W(t,i){var e=t.pageX,a=t.pageY,n={endX:e,endY:a};return i?n:h({startX:e,startY:a},n)}function N(t){var i=0,e=0,a=0;return r(t,(function(t){var n=t.startX,o=t.startY;i+=n,e+=o,a+=1})),{pageX:i/=a,pageY:e/=a}}function H(t){var i=t.aspectRatio,e=t.height,a=t.width,n=function(t){return st(t)&&t>0};return n(a)&&n(e)?e*i>a?e=a/i:a=e*i:n(a)?e=a/i:n(e)&&(a=e*i),{width:a,height:e}}function Y(i,e,a,n){var o=e.naturalWidth,r=e.naturalHeight,h=e.rotate,s=void 0===h?0:h,l=e.scaleX,d=void 0===l?1:l,p=e.scaleY,m=void 0===p?1:p,u=a.aspectRatio,g=a.naturalWidth,f=a.naturalHeight,v=n.fillColor,w=void 0===v?"transparent":v,b=n.imageSmoothingEnabled,x=void 0===b||b,y=n.imageSmoothingQuality,M=void 0===y?"low":y,C=n.maxWidth,D=void 0===C?1/0:C,B=n.maxHeight,k=void 0===B?1/0:B,E=n.minWidth,T=void 0===E?0:E,W=n.minHeight,N=void 0===W?0:W,L=document.createElement("canvas"),Y=L.getContext("2d"),X=H({aspectRatio:u,width:D,height:k}),O=H({aspectRatio:u,width:T,height:N}),S=Math.min(X.width,Math.max(O.width,g)),z=Math.min(X.height,Math.max(O.height,f)),R=[-o/2,-r/2,o,r];return L.width=c(S),L.height=c(z),Y.fillStyle=w,Y.fillRect(0,0,S,z),Y.save(),Y.translate(S/2,z/2),Y.rotate(s*Math.PI/180),Y.scale(d,m),Y.imageSmoothingEnabled=x,Y.imageSmoothingQuality=M,Y.drawImage.apply(Y,[i].concat(function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++){ e[i]=t[i]; }return e}return Array.from(t)}(R.map((function(t){return Math.floor(c(t))}))))),Y.restore(),L}function S(t,i){var e="";return r(new Uint8Array(t),(function(t){e+=ct(t)})),"data:"+i+";base64,"+btoa(e)}function z(t){var i=new DataView(t),e=void 0,a=void 0,n=void 0,o=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1)){ for(var r=i.byteLength,h=2;h<r;){if(255===i.getUint8(h)&&225===i.getUint8(h+1)){n=h;break}h+=1} }if(n){var s=n+10;if("Exif"===(function(t,i,e){var a="",n=void 0;for(e+=i,n=i;n<e;n+=1){ a+=ct(t.getUint8(n)); }return a})(i,n+4,4)){var c=i.getUint16(s);if(((a=18761===c)||19789===c)&&42===i.getUint16(s+2,a)){var l=i.getUint32(s+4,a);l>=8&&(o=s+l)}}}if(o){var d=i.getUint16(o,a),p=void 0,m=void 0;for(m=0;m<d;m+=1){ if(p=o+12*m+2,274===i.getUint16(p,a)){p+=8,e=i.getUint16(p,a),i.setUint16(p,1,a);break} }}return e}var U="undefined"!=typeof window?window:{},j="cropper-hidden",P=U.PointerEvent?"pointerdown":"touchstart mousedown",q=U.PointerEvent?"pointermove":"touchmove mousemove",$=U.PointerEvent?" pointerup pointercancel":"touchend touchcancel mouseup",Q=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,Z=/^data:/,F=/^data:image\/jpeg;base64,/,K=/^(img|canvas)$/i,V={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J=Number.isNaN||U.isNaN,_=Object.prototype.hasOwnProperty,tt=/\.\d*(?:0|9){12}\d*$/i,it=/^(width|height|left|top|marginLeft|marginTop)$/,et=/([a-z\d])([A-Z])/g,at=/\s+/,nt=U.location,ot=/^(https?:)\/\/([^:/?#]+):?(\d*)/i,rt=U.navigator,ht=rt&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(rt.userAgent),st=Number.isFinite||U.isFinite,ct=String.fromCharCode,lt=/^data:.*,/,dt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,a=this.cropper;p(a,j),m(t,j);var n={width:Math.max(e.offsetWidth,Number(i.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(i.minContainerHeight)||100)};this.containerData=n,l(a,{width:n.width,height:n.height}),p(t,j),m(a,j)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,a=Math.abs(i.rotate)%180==90,n=a?i.naturalHeight:i.naturalWidth,o=a?i.naturalWidth:i.naturalHeight,r=n/o,s=t.width,c=t.height;t.height*r>t.width?3===e?s=t.height*r:c=t.width/r:3===e?c=t.width/r:s=t.height*r;var l={aspectRatio:r,naturalWidth:n,naturalHeight:o,width:s,height:c};l.left=(t.width-s)/2,l.top=(t.height-c)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=h({},i),this.initialCanvasData=h({},l)},limitCanvas:function(t,i){var e=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=e.viewMode,h=n.aspectRatio,s=this.cropped&&o;if(t){var c=Number(e.minCanvasWidth)||0,l=Number(e.minCanvasHeight)||0;r>1?(c=Math.max(c,a.width),l=Math.max(l,a.height),3===r&&(l*h>c?c=l*h:l=c/h)):r>0&&(c?c=Math.max(c,s?o.width:0):l?l=Math.max(l,s?o.height:0):s&&(c=o.width,(l=o.height)*h>c?c=l*h:l=c/h));var d=H({aspectRatio:h,width:c,height:l});c=d.width,l=d.height,n.minWidth=c,n.minHeight=l,n.maxWidth=1/0,n.maxHeight=1/0}if(i){ if(r){var p=a.width-n.width,m=a.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,m),s&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===r&&(n.width>=a.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=a.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else { n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height } }},renderCanvas:function(t,i){var e=this.canvasData,a=this.imageData;if(i){var n=(function(t){var i=t.width,e=t.height,a=t.degree;if((a=Math.abs(a))%180==90){ return{width:e,height:i}; }var n=a%90*Math.PI/180,o=Math.sin(n),r=Math.cos(n);return{width:i*r+e*o,height:i*o+e*r}})({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,r=n.height,s=e.width*(o/e.naturalWidth),c=e.height*(r/e.naturalHeight);e.left-=(s-e.width)/2,e.top-=(c-e.height)/2,e.width=s,e.height=c,e.aspectRatio=o/r,e.naturalWidth=o,e.naturalHeight=r,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,l(this.canvas,h({width:e.width,height:e.height},k({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,a=e.naturalWidth*(i.width/i.naturalWidth),n=e.naturalHeight*(i.height/i.naturalHeight);h(e,{width:a,height:n,left:(i.width-a)/2,top:(i.height-n)/2}),l(this.image,h({width:e.width,height:e.height},k(h({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio,a=Number(t.autoCropArea)||.8,n={width:i.width,height:i.height};e&&(i.height*e>i.width?n.height=n.width/e:n.width=n.height*e),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=h({},n)},limitCropBox:function(t,i){var e=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=this.limited,h=e.aspectRatio;if(t){var s=Number(e.minCropBoxWidth)||0,c=Number(e.minCropBoxHeight)||0,l=Math.min(a.width,r?n.width:a.width),d=Math.min(a.height,r?n.height:a.height);s=Math.min(s,a.width),c=Math.min(c,a.height),h&&(s&&c?c*h>s?c=s/h:s=c*h:s?c=s/h:c&&(s=c*h),d*h>l?d=l/h:l=d*h),o.minWidth=Math.min(s,l),o.minHeight=Math.min(c,d),o.maxWidth=l,o.maxHeight=d}i&&(r?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&v(this.face,"action",e.width>=i.width&&e.height>=i.height?"move":"all"),l(this.cropBox,h({width:e.width,height:e.height},k({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.complete&&y(this.element,"crop",this.getData())}},pt={initPreview:function(){var t=this.crossOrigin,i=this.options.preview,e=t?this.crossOriginUrl:this.url,a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=e,this.viewBox.appendChild(a),this.image2=a,i){var n=i.querySelector?[i]:document.querySelectorAll(i);this.previews=n,r(n,(function(i){var a=document.createElement("img");v(i,"preview",{width:i.offsetWidth,height:i.offsetHeight,html:i.innerHTML}),t&&(a.crossOrigin=t),a.src=e,a.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',(function(t){for(;t.firstChild;){ t.removeChild(t.firstChild) }})(i),i.appendChild(a)}))}},resetPreview:function(){r(this.previews,(function(t){var i=f(t,"preview");l(t,{width:i.width,height:i.height}),t.innerHTML=i.html,w(t,"preview")}))},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,a=e.width,n=e.height,o=t.width,s=t.height,c=e.left-i.left-t.left,d=e.top-i.top-t.top;this.cropped&&!this.disabled&&(l(this.image2,h({width:o,height:s},k(h({translateX:-c,translateY:-d},t)))),r(this.previews,(function(i){var e=f(i,"preview"),r=e.width,p=e.height,m=r,u=p,g=1;a&&(u=n*(g=r/a)),n&&u>p&&(m=a*(g=p/n),u=p),l(i,{width:m,height:u}),l(i.getElementsByTagName("img")[0],h({width:o*g,height:s*g},k(h({translateX:-c*g,translateY:-d*g},t))))})))}},mt={bind:function(){var t=this.element,i=this.options,e=this.cropper;o(i.cropstart)&&x(t,"cropstart",i.cropstart),o(i.cropmove)&&x(t,"cropmove",i.cropmove),o(i.cropend)&&x(t,"cropend",i.cropend),o(i.crop)&&x(t,"crop",i.crop),o(i.zoom)&&x(t,"zoom",i.zoom),x(e,P,this.onCropStart=s(this.cropStart,this)),i.zoomable&&i.zoomOnWheel&&x(e,"wheel mousewheel DOMMouseScroll",this.onWheel=s(this.wheel,this)),i.toggleDragModeOnDblclick&&x(e,"dblclick",this.onDblclick=s(this.dblclick,this)),x(document,q,this.onCropMove=s(this.cropMove,this)),x(document,$,this.onCropEnd=s(this.cropEnd,this)),i.responsive&&x(window,"resize",this.onResize=s(this.resize,this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;o(i.cropstart)&&b(t,"cropstart",i.cropstart),o(i.cropmove)&&b(t,"cropmove",i.cropmove),o(i.cropend)&&b(t,"cropend",i.cropend),o(i.crop)&&b(t,"crop",i.crop),o(i.zoom)&&b(t,"zoom",i.zoom),b(e,P,this.onCropStart),i.zoomable&&i.zoomOnWheel&&b(e,"wheel mousewheel DOMMouseScroll",this.onWheel),i.toggleDragModeOnDblclick&&b(e,"dblclick",this.onDblclick),b(document,q,this.onCropMove),b(document,$,this.onCropEnd),i.responsive&&b(window,"resize",this.onResize)}},ut={resize:function(){var t=this.options,i=this.container,e=this.containerData,a=Number(t.minContainerWidth)||200,n=Number(t.minContainerHeight)||100;if(!(this.disabled||e.width<=a||e.height<=n)){var o=i.offsetWidth/e.width;if(1!==o||i.offsetHeight!==e.height){var h=void 0,s=void 0;t.restore&&(h=this.getCanvasData(),s=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(r(h,(function(t,i){h[i]=t*o}))),this.setCropBoxData(r(s,(function(t,i){s[i]=t*o}))))}}},dblclick:function(){var t,i;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,i="cropper-crop",(t.classList?t.classList.contains(i):t.className.indexOf(i)>-1)?"move":"crop"))},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){i.wheeling=!1}),50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*e,t)))},cropStart:function(t){if(!this.disabled){var a,i=this.options,e=this.pointers;t.changedTouches?r(t.changedTouches,(function(t){e[t.identifier]=W(t)})):e[t.pointerId||0]=W(t),a=Object.keys(e).length>1&&i.zoomable&&i.zoomOnTouch?"zoom":f(t.target,"action"),Q.test(a)&&!1!==y(this.element,"cropstart",{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,"crop"===a&&(this.cropping=!0,p(this.dragBox,"cropper-modal")))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),!1!==y(this.element,"cropmove",{originalEvent:t,action:i})&&(t.changedTouches?r(t.changedTouches,(function(t){h(e[t.identifier],W(t,!0))})):h(e[t.pointerId||0],W(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?r(t.changedTouches,(function(t){delete e[t.identifier]})):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,u(this.dragBox,"cropper-modal",this.cropped&&this.options.modal)),y(this.element,"cropend",{originalEvent:t,action:i}))}}},gt={change:function(t){var i=this.options,e=this.canvasData,a=this.containerData,n=this.cropBoxData,o=this.pointers,h=this.action,s=i.aspectRatio,c=n.left,l=n.top,d=n.width,p=n.height,u=c+d,g=l+p,f=0,v=0,w=a.width,b=a.height,x=!0,y=void 0;!s&&t.shiftKey&&(s=d&&p?d/p:1),this.limited&&(f=n.minLeft,v=n.minTop,w=f+Math.min(a.width,e.width,e.left+e.width),b=v+Math.min(a.height,e.height,e.top+e.height));var C=o[Object.keys(o)[0]],D={x:C.endX-C.startX,y:C.endY-C.startY},B=function(t){switch(t){case"e":u+D.x>w&&(D.x=w-u);break;case"w":c+D.x<f&&(D.x=f-c);break;case"n":l+D.y<v&&(D.y=v-l);break;case"s":g+D.y>b&&(D.y=b-g)}};switch(h){case"all":c+=D.x,l+=D.y;break;case"e":if(D.x>=0&&(u>=w||s&&(l<=v||g>=b))){x=!1;break}B("e"),d+=D.x,s&&(p=d/s,l-=D.x/s/2),d<0&&(h="w",d=0);break;case"n":if(D.y<=0&&(l<=v||s&&(c<=f||u>=w))){x=!1;break}B("n"),p-=D.y,l+=D.y,s&&(d=p*s,c+=D.y*s/2),p<0&&(h="s",p=0);break;case"w":if(D.x<=0&&(c<=f||s&&(l<=v||g>=b))){x=!1;break}B("w"),d-=D.x,c+=D.x,s&&(p=d/s,l+=D.x/s/2),d<0&&(h="e",d=0);break;case"s":if(D.y>=0&&(g>=b||s&&(c<=f||u>=w))){x=!1;break}B("s"),p+=D.y,s&&(d=p*s,c-=D.y*s/2),p<0&&(h="n",p=0);break;case"ne":if(s){if(D.y<=0&&(l<=v||u>=w)){x=!1;break}B("n"),p-=D.y,l+=D.y,d=p*s}else { B("n"),B("e"),D.x>=0?u<w?d+=D.x:D.y<=0&&l<=v&&(x=!1):d+=D.x,D.y<=0?l>v&&(p-=D.y,l+=D.y):(p-=D.y,l+=D.y); }d<0&&p<0?(h="sw",p=0,d=0):d<0?(h="nw",d=0):p<0&&(h="se",p=0);break;case"nw":if(s){if(D.y<=0&&(l<=v||c<=f)){x=!1;break}B("n"),p-=D.y,l+=D.y,d=p*s,c+=D.y*s}else { B("n"),B("w"),D.x<=0?c>f?(d-=D.x,c+=D.x):D.y<=0&&l<=v&&(x=!1):(d-=D.x,c+=D.x),D.y<=0?l>v&&(p-=D.y,l+=D.y):(p-=D.y,l+=D.y); }d<0&&p<0?(h="se",p=0,d=0):d<0?(h="ne",d=0):p<0&&(h="sw",p=0);break;case"sw":if(s){if(D.x<=0&&(c<=f||g>=b)){x=!1;break}B("w"),d-=D.x,c+=D.x,p=d/s}else { B("s"),B("w"),D.x<=0?c>f?(d-=D.x,c+=D.x):D.y>=0&&g>=b&&(x=!1):(d-=D.x,c+=D.x),D.y>=0?g<b&&(p+=D.y):p+=D.y; }d<0&&p<0?(h="ne",p=0,d=0):d<0?(h="se",d=0):p<0&&(h="nw",p=0);break;case"se":if(s){if(D.x>=0&&(u>=w||g>=b)){x=!1;break}B("e"),p=(d+=D.x)/s}else { B("s"),B("e"),D.x>=0?u<w?d+=D.x:D.y>=0&&g>=b&&(x=!1):d+=D.x,D.y>=0?g<b&&(p+=D.y):p+=D.y; }d<0&&p<0?(h="nw",p=0,d=0):d<0?(h="sw",d=0):p<0&&(h="ne",p=0);break;case"move":this.move(D.x,D.y),x=!1;break;case"zoom":this.zoom(T(o),t),x=!1;break;case"crop":if(!D.x||!D.y){x=!1;break}y=M(this.cropper),c=C.startX-y.left,l=C.startY-y.top,d=n.minWidth,p=n.minHeight,D.x>0?h=D.y>0?"se":"ne":D.x<0&&(c-=d,h=D.y>0?"sw":"nw"),D.y<0&&(l-=p),this.cropped||(m(this.cropBox,j),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(n.width=d,n.height=p,n.left=c,n.top=l,this.action=h,this.renderCropBox()),r(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},ft={crop:function(){return this.ready&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&p(this.dragBox,"cropper-modal"),m(this.cropBox,j)),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=h({},this.initialImageData),this.canvasData=h({},this.initialCanvasData),this.cropBoxData=h({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(h(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),m(this.dragBox,"cropper-modal"),p(this.cropBox,j)),this},replace:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.image2.src=t,r(this.previews,(function(i){i.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.load(t))),this},enable:function(){return this.ready&&(this.disabled=!1,m(this.cropper,"cropper-disabled")),this},disable:function(){return this.ready&&(this.disabled=!0,p(this.cropper,"cropper-disabled")),this},destroy:function(){var t=this.element,i=this.image;return this.loaded?(this.isImg&&this.replaced&&(t.src=this.originalUrl),this.unbuild(),m(t,j)):this.isImg?b(t,"load",this.onStart):i&&i.parentNode.removeChild(i),w(t,"cropper"),this},move:function(t,i){var a=this.canvasData,n=a.left,o=a.top;return this.moveTo(e(t)?t:n+Number(t),e(i)?i:o+Number(i))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(i(t)&&(a.left=t,n=!0),i(e)&&(a.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,i)},zoomTo:function(t,i){var e=this.options,a=this.canvasData,n=a.width,o=a.height,r=a.naturalWidth,h=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&e.zoomable){var s=r*t,c=h*t;if(!1===y(this.element,"zoom",{originalEvent:i,oldRatio:n/r,ratio:s/r})){ return this; }if(i){var l=this.pointers,d=M(this.cropper),p=l&&Object.keys(l).length?N(l):{pageX:i.pageX,pageY:i.pageY};a.left-=(s-n)*((p.pageX-d.left-a.left)/n),a.top-=(c-o)*((p.pageY-d.top-a.top)/o)}else { a.left-=(s-n)/2,a.top-=(c-o)/2; }a.width=s,a.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return i(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,i(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(i(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(i(t)&&(a.scaleX=t,n=!0),i(e)&&(a.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,e=this.imageData,a=this.canvasData,n=this.cropBoxData,o=void 0;if(this.ready&&this.cropped){o={x:n.left-a.left,y:n.top-a.top,width:n.width,height:n.height};var h=e.width/e.naturalWidth;r(o,(function(i,e){i/=h,o[e]=t?Math.round(i):i}))}else { o={x:0,y:0,width:0,height:0}; }return i.rotatable&&(o.rotate=e.rotate||0),i.scalable&&(o.scaleX=e.scaleX||1,o.scaleY=e.scaleY||1),o},setData:function(t){var e=this.options,a=this.imageData,r=this.canvasData,h={};if(o(t)&&(t=t.call(this.element)),this.ready&&!this.disabled&&n(t)){var s=!1;e.rotatable&&i(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,s=!0),e.scalable&&(i(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,s=!0),i(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var c=a.width/a.naturalWidth;i(t.x)&&(h.left=t.x*c+r.left),i(t.y)&&(h.top=t.y*c+r.top),i(t.width)&&(h.width=t.width*c),i(t.height)&&(h.height=t.height*c),this.setCropBoxData(h)}return this},getContainerData:function(){return this.ready?h({},this.containerData):{}},getImageData:function(){return this.loaded?h({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&r(["left","top","width","height","naturalWidth","naturalHeight"],(function(e){i[e]=t[e]})),i},setCanvasData:function(t){var e=this.canvasData,a=e.aspectRatio;return o(t)&&(t=t.call(this.element)),this.ready&&!this.disabled&&n(t)&&(i(t.left)&&(e.left=t.left),i(t.top)&&(e.top=t.top),i(t.width)?(e.width=t.width,e.height=t.width/a):i(t.height)&&(e.height=t.height,e.width=t.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i=void 0;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var e=this.cropBoxData,a=this.options.aspectRatio,r=void 0,h=void 0;return o(t)&&(t=t.call(this.element)),this.ready&&this.cropped&&!this.disabled&&n(t)&&(i(t.left)&&(e.left=t.left),i(t.top)&&(e.top=t.top),i(t.width)&&t.width!==e.width&&(r=!0,e.width=t.width),i(t.height)&&t.height!==e.height&&(h=!0,e.height=t.height),a&&(r?e.height=e.width/a:h&&(e.width=e.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement){ return null; }var i=this.canvasData,e=Y(this.image,this.imageData,i,t);if(!this.cropped){ return e; }var a=this.getData(),n=a.x,o=a.y,r=a.width,h=a.height,s=r/h,l=H({aspectRatio:s,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=H({aspectRatio:s,width:t.minWidth||0,height:t.minHeight||0}),p=H({aspectRatio:s,width:t.width||r,height:t.height||h}),m=p.width,u=p.height;m=Math.min(l.width,Math.max(d.width,m)),u=Math.min(l.height,Math.max(d.height,u));var g=document.createElement("canvas"),f=g.getContext("2d");g.width=c(m),g.height=c(u),f.fillStyle=t.fillColor||"transparent",f.fillRect(0,0,m,u);var v=t.imageSmoothingEnabled,w=void 0===v||v,b=t.imageSmoothingQuality;f.imageSmoothingEnabled=w,b&&(f.imageSmoothingQuality=b);var x=e.width,y=e.height,M=n,C=o,D=void 0,B=void 0,k=void 0,E=void 0,T=void 0,W=void 0;M<=-r||M>x?(M=0,D=0,k=0,T=0):M<=0?(k=-M,M=0,T=D=Math.min(x,r+M)):M<=x&&(k=0,T=D=Math.min(r,x-M)),D<=0||C<=-h||C>y?(C=0,B=0,E=0,W=0):C<=0?(E=-C,C=0,W=B=Math.min(y,h+C)):C<=y&&(E=0,W=B=Math.min(h,y-C));var N=[M,C,D,B];if(T>0&&W>0){var L=m/r;N.push(k*L,E*L,T*L,W*L)}return f.drawImage.apply(f,[e].concat(function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++){ e[i]=t[i]; }return e}return Array.from(t)}(N.map((function(t){return Math.floor(c(t))}))))),g},setAspectRatio:function(t){var i=this.options;return this.disabled||e(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,a=this.face;if(this.loaded&&!this.disabled){var n="crop"===t,o=i.movable&&"move"===t;v(e,"action",t=n||o?t:"none"),u(e,"cropper-crop",n),u(e,"cropper-move",o),i.cropBoxMovable||(v(a,"action",t),u(a,"cropper-crop",n),u(a,"cropper-move",o))}return this}},vt=(function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}})(),wt=U.Cropper,bt=(function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,i){if(!(t instanceof i)){ throw new TypeError("Cannot call a class as a function") }}(this,t),!i||!K.test(i.tagName)){ throw new Error("The first argument is required and must be an <img> or <canvas> element."); }this.element=i,this.options=h({},V,n(e)&&e),this.complete=!1,this.cropped=!1,this.disabled=!1,this.isImg=!1,this.limited=!1,this.loaded=!1,this.ready=!1,this.replaced=!1,this.wheeling=!1,this.originalUrl="",this.canvasData=null,this.cropBoxData=null,this.previews=null,this.pointers={},this.init()}return vt(t,[{key:"init",value:function(){var t=this.element,i=t.tagName.toLowerCase(),e=void 0;if(!f(t,"cropper")){if(v(t,"cropper",this),"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e){ return; }e=t.src}else{ "canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL()); }this.load(e)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var e=this.element,a=this.options;if(a.checkOrientation&&window.ArrayBuffer){ if(Z.test(t)){ F.test(t)?this.read(function(t){var i=t.replace(lt,""),e=atob(i),a=new ArrayBuffer(e.length),n=new Uint8Array(a);return r(n,(function(t,i){n[i]=e.charCodeAt(i)})),a}(t)):this.clone(); }else{var n=new XMLHttpRequest;n.onerror=function(){i.clone()},n.onload=function(){i.read(n.response)},a.checkCrossOrigin&&D(t)&&e.crossOrigin&&(t=B(t)),n.open("get",t),n.responseType="arraybuffer",n.withCredentials="use-credentials"===e.crossOrigin,n.send()} }else { this.clone() }}}},{key:"read",value:function(t){var i=this.options,e=this.imageData,a=z(t),n=0,o=1,r=1;if(a>1){this.url=S(t,"image/jpeg");var h=(function(t){var i=0,e=1,a=1;switch(t){case 2:e=-1;break;case 3:i=-180;break;case 4:a=-1;break;case 5:i=90,a=-1;break;case 6:i=90;break;case 7:i=90,e=-1;break;case 8:i=-90}return{rotate:i,scaleX:e,scaleY:a}})(a);n=h.rotate,o=h.scaleX,r=h.scaleY}i.rotatable&&(e.rotate=n),i.scalable&&(e.scaleX=o,e.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,i=this.url,e=void 0,a=void 0;this.options.checkCrossOrigin&&D(i)&&((e=t.crossOrigin)?a=i:(e="anonymous",a=B(i))),this.crossOrigin=e,this.crossOriginUrl=a;var n=document.createElement("img");e&&(n.crossOrigin=e),n.src=a||i;var o=s(this.start,this),r=s(this.stop,this);this.image=n,this.onStart=o,this.onStop=r,this.isImg?t.complete?this.start():x(t,"load",o):(x(n,"load",o),x(n,"error",r),p(n,"cropper-hide"),t.parentNode.insertBefore(n,t.nextSibling))}},{key:"start",value:function(t){var i=this,e=this.isImg?this.element:this.image;t&&(b(e,"load",this.onStart),b(e,"error",this.onStop)),(function(t,i){if(!t.naturalWidth||ht){var e=document.createElement("img");e.onload=function(){i(e.width,e.height)},e.src=t.src}else { i(t.naturalWidth,t.naturalHeight) }})(e,(function(t,e){h(i.imageData,{naturalWidth:t,naturalHeight:e,aspectRatio:t/e}),i.loaded=!0,i.build()}))}},{key:"stop",value:function(){var t=this.image;b(t,"load",this.onStart),b(t,"error",this.onStop),t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){var t=this;if(this.loaded){this.ready&&this.unbuild();var i=this.element,e=this.options,a=this.image,n=i.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>';var h=r.querySelector(".cropper-container"),s=h.querySelector(".cropper-canvas"),c=h.querySelector(".cropper-drag-box"),l=h.querySelector(".cropper-crop-box"),d=l.querySelector(".cropper-face");this.container=n,this.cropper=h,this.canvas=s,this.dragBox=c,this.cropBox=l,this.viewBox=h.querySelector(".cropper-view-box"),this.face=d,s.appendChild(a),p(i,j),n.insertBefore(h,i.nextSibling),this.isImg||m(a,"cropper-hide"),this.initPreview(),this.bind(),e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,this.cropped=e.autoCrop,e.autoCrop?e.modal&&p(c,"cropper-modal"):p(l,j),e.guides||p(l.getElementsByClassName("cropper-dashed"),j),e.center||p(l.getElementsByClassName("cropper-center"),j),e.background&&p(h,"cropper-bg"),e.highlight||p(d,"cropper-invisible"),e.cropBoxMovable&&(p(d,"cropper-move"),v(d,"action","all")),e.cropBoxResizable||(p(l.getElementsByClassName("cropper-line"),j),p(l.getElementsByClassName("cropper-point"),j)),this.setDragMode(e.dragMode),this.render(),this.ready=!0,this.setData(e.data),this.completing=setTimeout((function(){o(e.ready)&&x(i,"ready",e.ready,{once:!0}),y(i,"ready"),y(i,"crop",t.getData()),t.complete=!0}),0)}}},{key:"unbuild",value:function(){this.ready&&(this.complete||clearTimeout(this.completing),this.ready=!1,this.complete=!1,this.initialImageData=null,this.initialCanvasData=null,this.initialCropBoxData=null,this.containerData=null,this.canvasData=null,this.cropBoxData=null,this.unbind(),this.resetPreview(),this.previews=null,this.viewBox=null,this.cropBox=null,this.dragBox=null,this.canvas=null,this.container=null,this.cropper.parentNode.removeChild(this.cropper),this.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=wt,t}},{key:"setDefaults",value:function(t){h(V,n(t)&&t)}}]),t})();return h(bt.prototype,dt,pt,mt,ut,gt,ft),bt})),(function(e,t,a,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.calendar=function(t){var o,r=e(this),i=r.selector||"",l=(new Date).getTime(),d=[],s=arguments[0],u="string"==typeof s,p=[].slice.call(arguments,1);return r.each((function(){var r,c,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.calendar.settings,t):e.extend({},e.fn.calendar.settings),h=f.className,g=f.namespace,m=f.selector,v=f.formatter,y=f.parser,D=f.metadata,b=f.error,C="."+g,M="module-"+g,w=e(this),x=w.find(m.input),k=w.find(m.popup),T=w.find(m.activator),F=this,H=w.data(M),O=!1,I=!1;c={initialize:function(){c.debug("Initializing calendar for",F),r=c.get.isTouch(),c.setup.popup(),c.setup.inline(),c.setup.input(),c.setup.date(),c.create.calendar(),c.bind.events(),c.instantiate()},instantiate:function(){c.verbose("Storing instance of calendar"),H=c,w.data(M,H)},destroy:function(){c.verbose("Destroying previous calendar for",F),w.removeData(M),c.unbind.events()},setup:{popup:function(){if(!f.inline&&(T.length||(T=w.children().first()).length)){if(e.fn.popup===n){ return void c.error(b.popup); }k.length||(k=e("<div/>").addClass(h.popup).prependTo(T.parent())),k.addClass(h.calendar);var t=f.onVisible,a=f.onHidden;x.length||(k.attr("tabindex","0"),t=function(){return c.focus(),f.onVisible.apply(k,arguments)},a=function(){return c.blur(),f.onHidden.apply(k,arguments)});var r=f.on||(x.length?"focus":"click"),i=e.extend({},f.popupOptions,{popup:k,on:r,hoverable:"hover"===r,onShow:function(){return c.set.focusDate(c.get.date()),c.set.mode(f.startMode),f.onShow.apply(k,arguments)},onVisible:t,onHide:f.onHide,onHidden:a});c.popup(i)}},inline:function(){T.length&&!f.inline||(k=e("<div/>").addClass(h.calendar).appendTo(w),x.length||k.attr("tabindex","0"))},input:function(){f.touchReadonly&&x.length&&r&&x.prop("readonly",!0)},date:function(){if(x.length){var e=x.val(),t=y.date(e,f);c.set.date(t,f.formatInput,!1)}}},create:{calendar:function(){var t,a,n,o,r,i,l,d=c.get.mode(),s=new Date,u=c.get.date(),p=c.get.focusDate(),g=p||u||f.initialDate||s;g=c.helper.dateInRange(g),p||(p=g,c.set.focusDate(p,!1,!1));var m="year"===d,y="month"===d,b="day"===d,C="hour"===d,M="minute"===d,w="time"===f.type,x=Math.max(f.multiMonth,1),T=b?c.get.monthOffset():0,F=g.getMinutes(),H=g.getHours(),O=g.getDate(),I=g.getMonth()+T,N=g.getFullYear(),Y=b?7:C?4:3,E=7===Y?"seven":4===Y?"four":"three",R=b||C?6:4,j=b?x:1,A=k;for(A.empty(),j>1&&(l=e("<div/>").addClass(h.grid).appendTo(A)),o=0;o<j;o++){if(j>1){ A=e("<div/>").addClass(h.column).appendTo(l); }var V=I+o,P=(new Date(N,V,1).getDay()-f.firstDayOfWeek%7+7)%7;if(!f.constantHeight&&b){var q=new Date(N,V+1,0).getDate()+P;R=Math.ceil(q/7)}var K=m?10:y?1:0,J=b?1:0,W=C||M?1:0,z=C||M?O:1,L=new Date(N-K,V-J,z-W,H),B=new Date(N+K,V+J,z+W,H),U=m?new Date(10*Math.ceil(N/10)-9,0,0):y?new Date(N,0,0):b?new Date(N,V,0):new Date(N,V,O,-1),Q=m?new Date(10*Math.ceil(N/10)+1,0,1):y?new Date(N+1,0,1):b?new Date(N,V+1,1):new Date(N,V,O+1),Z=e("<table/>").addClass(h.table).addClass(E+" column").addClass(d).appendTo(A);if(!w){var G=e("<thead/>").appendTo(Z);r=e("<tr/>").appendTo(G),i=e("<th/>").attr("colspan",""+Y).appendTo(r);var X=m||y?new Date(N,0,1):b?new Date(N,V,1):new Date(N,V,O,H,F),$=e("<span/>").addClass(h.link).appendTo(i);$.text(v.header(X,d,f));var _=y?f.disableYear?"day":"year":b?f.disableMonth?"year":"month":"day";if($.data(D.mode,_),0===o){var ee=e("<span/>").addClass(h.prev).appendTo(i);ee.data(D.focusDate,L),ee.toggleClass(h.disabledCell,!c.helper.isDateInRange(U,d)),e("<i/>").addClass(h.prevIcon).appendTo(ee)}if(o===j-1){var te=e("<span/>").addClass(h.next).appendTo(i);te.data(D.focusDate,B),te.toggleClass(h.disabledCell,!c.helper.isDateInRange(Q,d)),e("<i/>").addClass(h.nextIcon).appendTo(te)}if(b){ for(r=e("<tr/>").appendTo(G),t=0;t<Y;t++){ (i=e("<th/>").appendTo(r)).text(v.dayColumnHeader((t+f.firstDayOfWeek)%7,f)) } }}var ae=e("<tbody/>").appendTo(Z);for(t=m?10*Math.ceil(N/10)-9:b?1-P:0,a=0;a<R;a++){ for(r=e("<tr/>").appendTo(ae),n=0;n<Y;n++,t++){var ne=m?new Date(t,V,1,H,F):y?new Date(N,t,1,H,F):b?new Date(N,V,t,H,F):C?new Date(N,V,O,t):new Date(N,V,O,H,5*t),oe=m?t:y?f.text.monthsShort[t]:b?ne.getDate():v.time(ne,f,!0);(i=e("<td/>").addClass(h.cell).appendTo(r)).text(oe),i.data(D.date,ne);var re=b&&ne.getMonth()!==(V+12)%12,ie=re||!c.helper.isDateInRange(ne,d)||f.isDisabled(ne,d),le=c.helper.dateEqual(ne,u,d),de=c.helper.dateEqual(ne,s,d);i.toggleClass(h.adjacentCell,re),i.toggleClass(h.disabledCell,ie),i.toggleClass(h.activeCell,le&&!re),C||M||i.toggleClass(h.todayCell,!re&&de);var se={mode:d,adjacent:re,disabled:ie,active:le,today:de};v.cell(i,ne,se),c.helper.dateEqual(ne,p,d)&&c.set.focusDate(ne,!1,!1)} }if(f.today){var ue=e("<tr/>").appendTo(ae),pe=e("<td/>").attr("colspan",""+Y).addClass(h.today).appendTo(ue);pe.text(v.today(f)),pe.data(D.date,s)}c.update.focus(!1,Z)}}},update:{focus:function(t,a){a=a||k;var n=c.get.mode(),o=c.get.date(),i=c.get.focusDate(),l=c.get.startDate(),d=c.get.endDate(),s=(t?i:null)||o||(r?null:i);a.find("td").each((function(){var t=e(this),a=t.data(D.date);if(a){var o=t.hasClass(h.disabledCell),u=t.hasClass(h.activeCell),p=t.hasClass(h.adjacentCell),f=c.helper.dateEqual(a,i,n),g=!!s&&(!!l&&c.helper.isDateInRange(a,n,l,s)||!!d&&c.helper.isDateInRange(a,n,s,d));t.toggleClass(h.focusCell,f&&(!r||O)&&!p),t.toggleClass(h.rangeCell,g&&!u&&!o)}}))}},refresh:function(){c.create.calendar()},bind:{events:function(){k.on("mousedown"+C,c.event.mousedown),k.on("touchstart"+C,c.event.mousedown),k.on("mouseup"+C,c.event.mouseup),k.on("touchend"+C,c.event.mouseup),k.on("mouseover"+C,c.event.mouseover),x.length?(x.on("input"+C,c.event.inputChange),x.on("focus"+C,c.event.inputFocus),x.on("blur"+C,c.event.inputBlur),x.on("click"+C,c.event.inputClick),x.on("keydown"+C,c.event.keydown)):k.on("keydown"+C,c.event.keydown)}},unbind:{events:function(){k.off(C),x.length&&x.off(C)}},event:{mouseover:function(t){var n=e(t.target).data(D.date),o=1===t.buttons;n&&c.set.focusDate(n,!1,!0,o)},mousedown:function(t){x.length&&t.preventDefault(),O=t.type.indexOf("touch")>=0;var n=e(t.target).data(D.date);n&&c.set.focusDate(n,!1,!0,!0)},mouseup:function(t){c.focus(),t.preventDefault(),t.stopPropagation(),O=!1;var a=e(t.target),n=a.parent();(n.data(D.date)||n.data(D.focusDate)||n.data(D.mode))&&(a=n);var o=a.data(D.date),r=a.data(D.focusDate),i=a.data(D.mode);if(o){var l=a.hasClass(h.today);c.selectDate(o,l)}else { r?c.set.focusDate(r):i&&c.set.mode(i) }},keydown:function(e){if(27!==e.keyCode&&9!==e.keyCode||c.popup("hide"),c.popup("is visible")){ if(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){var a="day"===(t=c.get.mode())?7:"hour"===t?4:3,n=37===e.keyCode?-1:38===e.keyCode?-a:39==e.keyCode?1:a;n*="minute"===t?5:1;var o=c.get.focusDate()||c.get.date()||new Date,r=o.getFullYear()+("year"===t?n:0),i=o.getMonth()+("month"===t?n:0),l=o.getDate()+("day"===t?n:0),d=o.getHours()+("hour"===t?n:0),s=o.getMinutes()+("minute"===t?n:0),u=new Date(r,i,l,d,s);"time"===f.type&&(u=c.helper.mergeDateTime(o,u)),c.helper.isDateInRange(u,t)&&c.set.focusDate(u)}else if(13===e.keyCode){var t=c.get.mode(),p=c.get.focusDate();p&&!f.isDisabled(p,t)&&c.selectDate(p),e.preventDefault(),e.stopPropagation()} }38!==e.keyCode&&40!==e.keyCode||(e.preventDefault(),c.popup("show"))},inputChange:function(){var e=x.val(),t=y.date(e,f);c.set.date(t,!1)},inputFocus:function(){k.addClass(h.active)},inputBlur:function(){if(k.removeClass(h.active),f.formatInput){var e=c.get.date(),t=v.datetime(e,f);x.val(t)}},inputClick:function(){c.popup("show")}},get:{date:function(){return w.data(D.date)||null},focusDate:function(){return w.data(D.focusDate)||null},startDate:function(){var e=c.get.calendarModule(f.startCalendar);return(e?e.get.date():w.data(D.startDate))||null},endDate:function(){var e=c.get.calendarModule(f.endCalendar);return(e?e.get.date():w.data(D.endDate))||null},monthOffset:function(){return w.data(D.monthOffset)||0},mode:function(){var t=w.data(D.mode)||f.startMode,a=c.get.validModes();return e.inArray(t,a)>=0?t:"time"===f.type?"hour":"month"===f.type?"month":"year"===f.type?"year":"day"},validModes:function(){var e=[];return"time"!==f.type&&(f.disableYear&&"year"!==f.type||e.push("year"),(!f.disableMonth&&"year"!==f.type||"month"===f.type)&&e.push("month"),f.type.indexOf("date")>=0&&e.push("day")),f.type.indexOf("time")>=0&&(e.push("hour"),f.disableMinute||e.push("minute")),e},isTouch:function(){try{return a.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(t){return t?(t instanceof e||(t=w.parent().children(t).first()),t.data(M)):null}},set:{date:function(e,t,a){t=!1!==t,a=!1!==a,e=c.helper.sanitiseDate(e),e=c.helper.dateInRange(e);var o=c.get.mode(),r=v.datetime(e,f);if(a&&!1===f.onChange.call(F,e,r,o)){ return!1; }if(c.set.focusDate(e),f.isDisabled(e,o)){ return!1; }var i=c.get.endDate();i&&e&&e>i&&c.set.endDate(n),c.set.dataKeyValue(D.date,e),t&&x.length&&x.val(r)},startDate:function(e,t){e=c.helper.sanitiseDate(e);var a=c.get.calendarModule(f.startCalendar);a&&a.set.date(e),c.set.dataKeyValue(D.startDate,e,t)},endDate:function(e,t){e=c.helper.sanitiseDate(e);var a=c.get.calendarModule(f.endCalendar);a&&a.set.date(e),c.set.dataKeyValue(D.endDate,e,t)},focusDate:function(e,t,a,n){e=c.helper.sanitiseDate(e),e=c.helper.dateInRange(e);var o="day"===c.get.mode(),r=c.get.focusDate();if(o&&e&&r){var l=12*(e.getFullYear()-r.getFullYear())+e.getMonth()-r.getMonth();if(l){var d=c.get.monthOffset()-l;c.set.monthOffset(d,!1)}}var s=c.set.dataKeyValue(D.focusDate,e,t);a=!1!==a&&s&&!1===t||I!=n,I=n,a&&c.update.focus(n)},monthOffset:function(e,t){var a=Math.max(f.multiMonth,1);e=Math.max(1-a,Math.min(0,e)),c.set.dataKeyValue(D.monthOffset,e,t)},mode:function(e,t){c.set.dataKeyValue(D.mode,e,t)},dataKeyValue:function(e,t,a){var n=w.data(e),o=n===t||n<=t&&n>=t;return t?w.data(e,t):w.removeData(e),(a=!1!==a&&!o)&&c.create.calendar(),!o}},selectDate:function(e,t){var a=c.get.mode();if(t||"minute"===a||f.disableMinute&&"hour"===a||"date"===f.type&&"day"===a||"month"===f.type&&"month"===a||"year"===f.type&&"year"===a){if(!(!1===c.set.date(e))&&f.closable){c.popup("hide");var r=c.get.calendarModule(f.endCalendar);r&&(r.popup("show"),r.focus())}}else{var i="year"===a?f.disableMonth?"day":"month":"month"===a?"day":"day"===a?"hour":"minute";c.set.mode(i),"hour"===a||"day"===a&&c.get.date()?c.set.date(e):c.set.focusDate(e)}},changeDate:function(e){c.set.date(e)},clear:function(){c.set.date(n)},popup:function(){return T.popup.apply(T,arguments)},focus:function(){x.length?x.focus():k.focus()},blur:function(){x.length?x.blur():k.blur()},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=y.date(""+e,f)),isNaN(e.getTime())?n:e):n},dateDiff:function(e,t,a){a=a||"day";var n="time"===f.type,o="year"===a,r=o||"month"===a,i="minute"===a,l=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n?0:o?0:e.getMonth(),n?1:r?1:e.getDate(),l?e.getHours():0,i?5*Math.floor(e.getMinutes()/5):0),(t=new Date(n?2e3:t.getFullYear(),n?0:o?0:t.getMonth(),n?1:r?1:t.getDate(),l?t.getHours():0,i?5*Math.floor(t.getMinutes()/5):0)).getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===c.helper.dateDiff(e,t,a)},isDateInRange:function(e,t,a,n){if(!a&&!n){var o=c.get.startDate();a=o&&f.minDate?new Date(Math.max(o,f.minDate)):o||f.minDate,n=f.maxDate}return a=a&&new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),5*Math.ceil(a.getMinutes()/5)),!(!e||a&&c.helper.dateDiff(e,a,t)>0||n&&c.helper.dateDiff(n,e,t)>0)},dateInRange:function(e,t,a){if(!t&&!a){var n=c.get.startDate();t=n&&f.minDate?new Date(Math.max(n,f.minDate)):n||f.minDate,a=f.maxDate}t=t&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),5*Math.ceil(t.getMinutes()/5));var o="time"===f.type;return e?t&&c.helper.dateDiff(e,t,"minute")>0?o?c.helper.mergeDateTime(e,t):t:a&&c.helper.dateDiff(a,e,"minute")>0?o?c.helper.mergeDateTime(e,a):a:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(t,a){if(c.debug("Changing setting",t,a),e.isPlainObject(t)){ e.extend(!0,f,t); }else{if(a===n){ return f[t]; }e.isPlainObject(f[t])?e.extend(!0,f[t],a):f[t]=a}},internal:function(t,a){return c.debug("Changing internal",t,a),a===n?c[t]:void(e.isPlainObject(t)?e.extend(!0,c,t):c[t]=a)},debug:function(){!f.silent&&f.debug&&(f.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,f.name+":"),c.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),c.verbose.apply(console,arguments)))},error:function(){f.silent||(c.error=Function.prototype.bind.call(console.error,console,f.name+":"),c.error.apply(console,arguments))},performance:{log:function(e){var t,a;f.performance&&(a=(t=(new Date).getTime())-(l||t),l=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:F,"Execution Time":a})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,500)},display:function(){var t=f.name+":",a=0;l=!1,clearTimeout(c.performance.timer),e.each(d,(function(e,t){a+=t["Execution Time"]})),t+=" "+a+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),d=[]}},invoke:function(t,a,r){var i,l,d,s=H;return a=a||p,r=F||r,"string"==typeof t&&s!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,(function(a,o){var r=a!=i?o+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(s[r])&&a!=i){ s=s[r]; }else{if(s[r]!==n){ return l=s[r],!1; }if(!e.isPlainObject(s[o])||a==i){ return s[o]!==n?(l=s[o],!1):(c.error(b.method,t),!1); }s=s[o]}}))),e.isFunction(l)?d=l.apply(r,a):l!==n&&(d=l),e.isArray(o)?o.push(d):o!==n?o=[o,d]:d!==n&&(o=d),l}},u?(H===n&&c.initialize(),c.invoke(s)):(H!==n&&H.invoke("destroy"),c.initialize())})),o!==n?o:this},e.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,multiMonth:1,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(a+2)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){return t.text.months[e.getMonth()]+" "+e.getFullYear()},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e){ return""; }var a="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1);return a+("datetime"===t.type?" ":"")+n},date:function(e,t){if(!e){ return""; }var a=e.getDate(),n=t.text.months[e.getMonth()],o=e.getFullYear();return"year"===t.type?o:"month"===t.type?n+" "+o:(t.monthFirst?n+" "+a:a+" "+n)+", "+o},time:function(e,t,a){if(!e){ return""; }var n=e.getHours(),o=e.getMinutes(),r="";return t.ampm&&(r=" "+(n<12?t.text.am:t.text.pm),n=0===n?12:n>12?n-12:n),n+":"+(o<10?"0":"")+o+r},today:function(e){return"date"===e.type?e.text.today:e.text.now},cell:function(e,t,a){}},parser:{date:function(t,a){if(!t){ return null; }if(0===(t=(""+t).trim().toLowerCase()).length){ return null; }var o,r,i,l=-1,d=-1,s=-1,u=-1,p=-1,c=n,f="time"===a.type,h=a.type.indexOf("time")<0,g=t.split(a.regExp.dateWords),m=t.split(a.regExp.dateNumbers);if(!h){ for(c=e.inArray(a.text.am.toLowerCase(),g)>=0||!(e.inArray(a.text.pm.toLowerCase(),g)>=0)&&n,o=0;o<m.length;o++){var v=m[o];if(v.indexOf(":")>=0){if(d<0||l<0){var y=v.split(":");for(i=0;i<Math.min(2,y.length);i++){ r=parseInt(y[i]),isNaN(r)&&(r=0),0===i?d=r%24:l=r%60 }}m.splice(o,1)}} }if(!f){for(o=0;o<g.length;o++){var D=g[o];if(!(D.length<=0)){for(D=D.substring(0,Math.min(D.length,3)),r=0;r<a.text.months.length;r++){var b=a.text.months[r];if((b=b.substring(0,Math.min(D.length,Math.min(b.length,3))).toLowerCase())===D){u=r+1;break}}if(u>=0){ break }}}for(o=0;o<m.length;o++){ if(r=parseInt(m[o]),!isNaN(r)&&r>59){p=r,m.splice(o,1);break} }if(u<0){ for(o=0;o<m.length;o++){ if(i=o>1||a.monthFirst?o:1===o?0:1,r=parseInt(m[i]),!isNaN(r)&&1<=r&&r<=12){u=r,m.splice(i,1);break} } }for(o=0;o<m.length;o++){ if(r=parseInt(m[o]),!isNaN(r)&&1<=r&&r<=31){s=r,m.splice(o,1);break} }if(p<0){ for(o=m.length-1;o>=0;o--){ if(r=parseInt(m[o]),!isNaN(r)){r<99&&(r+=2e3),p=r,m.splice(o,1);break} } }}if(!h){if(d<0){ for(o=0;o<m.length;o++){ if(r=parseInt(m[o]),!isNaN(r)&&0<=r&&r<=23){d=r,m.splice(o,1);break} } }if(l<0){ for(o=0;o<m.length;o++){ if(r=parseInt(m[o]),!isNaN(r)&&0<=r&&r<=59){l=r,m.splice(o,1);break} } }}if(l<0&&d<0&&s<0&&u<0&&p<0){ return null; }l<0&&(l=0),d<0&&(d=0),s<0&&(s=1),u<0&&(u=1),p<0&&(p=(new Date).getFullYear()),c!==n&&(c?12===d&&(d=0):d<12&&(d+=12));var C=new Date(p,u-1,s,d,l);return C.getMonth()===u-1&&C.getFullYear()===p||(C=new Date(p,u,0,d,l)),isNaN(C.getTime())?null:C}},onChange:function(e,t,a){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},isDisabled:function(e,t){return!1},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",grid:"ui equal width grid",column:"column",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",adjacentCell:"adjacent",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode",monthOffset:"monthOffset"}}})(jQuery,window,document),(function($){var cancel,raf,attachEvent=document.attachEvent,stylesCreated=!1,jQuery_resize=$.fn.resize;if($.fn.resize=function(callback){return this.each((function(){this==window?jQuery_resize.call(jQuery(this),callback):addResizeListener(this,callback)}))},$.fn.removeResize=function(callback){return this.each((function(){removeResizeListener(this,callback)}))},!attachEvent){var requestFrame=(raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20)},function(fn){return raf(fn)}),cancelFrame=(cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(id){return cancel(id)});function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight}function scrollListener(e){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame((function(){(function(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height})(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach((function(fn){fn.call(element,e)})))}))}var animation=!1,keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),pfx="",elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),!1===animation){ for(var i=0;i<domPrefixes.length;i++){ if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){(pfx=domPrefixes[i])+"Animation",keyframeprefix="-"+pfx.toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break} } }var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}window.addResizeListener=function(element,fn){attachEvent?element.attachEvent("onresize",fn):(element.__resizeTriggers__||("static"==getComputedStyle(element).position&&(element.style.position="relative"),(function(){if(!stylesCreated){var css=(animationKeyframes||"")+".resize-triggers { "+(animationStyle||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),stylesCreated=!0}})(),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=document.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&element.__resizeTriggers__.addEventListener(animationstartevent,(function(e){e.animationName==animationName&&resetTriggers(element)}))),element.__resizeListeners__.push(fn))},window.removeResizeListener=function(element,fn){attachEvent?element.detachEvent("onresize",fn):(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),element.__resizeListeners__.length||(element.removeEventListener("scroll",scrollListener),element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)))}})(jQuery),(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a){ return a(o,!0); }if(i){ return i(o,!0); }var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++){ s(r[o]); }return s})({1:[(function(require,module,exports){var presets,wrap,make,handler,slice$=[].slice,toString$={}.toString;function import$(obj,src){var own={}.hasOwnProperty;for(var key in src){ own.call(src,key)&&(obj[key]=src[key]); }return obj}require("./my-module").hey,presets=require("presets").presets,wrap=function(content){return"data:image/svg+xml;base64,"+btoa(content)},make={head:function(viewBox){return'<?xml version="1.0" encoding="utf-8"?>\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="'+viewBox+'">'},gradient:function(dir,dur){var colors,ret,len,gx,gy,x,y,i$,i,idx;for(null==dir&&(dir=45),null==dur&&(dur=1),colors=slice$.call(arguments,2),ret=[this.head("0 0 100 100")],len=4*colors.length+1,dir=dir*Math.PI/180,gx=Math.pow(Math.cos(dir),2),gy=Math.sqrt(gx-Math.pow(gx,2)),dir>.25*Math.PI&&(gy=Math.pow(Math.sin(dir),2),gx=Math.sqrt(gy-Math.pow(gy,2))),x=100*gx,y=100*gy,ret.push('<defs><linearGradient id="gradient" x1="0" x2="'+gx+'" y1="0" y2="'+gy+'">'),i$=0;i$<len;++i$){ idx=100*(i=i$)/(len-1),ret.push('<stop offset="'+idx+'%" stop-color="'+colors[i%colors.length]+'"/>'); }return ret.push('</linearGradient></defs>\n<rect x="0" y="0" width="400" height="400" fill="url(#gradient)">\n<animateTransform attributeName="transform" type="translate" from="-'+x+",-"+y+'"\nto="0,0" dur="'+dur+'s" repeatCount="indefinite"/></rect></svg>'),wrap(ret.join(""))},stripe:function(c1,c2,dur){var ret,i;return null==c1&&(c1="#b4b4b4"),null==c2&&(c2="#e6e6e6"),null==dur&&(dur=1),ret=(ret=[this.head("0 0 100 100")]).concat(['<rect fill="'+c2+'" width="100" height="100"/>',"<g><g>",(function(){var i$,results$=[];for(i$=0;i$<13;++i$){ i=i$,results$.push('<polygon fill="'+c1+'" points="'+(20*i-90)+",100 "+(20*i-100)+",100 "+(20*i-60)+",0 "+(20*i-50)+',0 "/>'); }return results$})().join(""),'</g><animateTransform attributeName="transform" type="translate" ','from="0,0" to="20,0" dur="'+dur+'s" repeatCount="indefinite"/></g></svg>'].join("")),wrap(ret)},bubble:function(c1,c2,count,dur,size,sw){var ret,i$,idx,x,r,d;for(null==c1&&(c1="#39d"),null==c2&&(c2="#9cf"),null==count&&(count=15),null==dur&&(dur=1),null==size&&(size=6),null==sw&&(sw=1),ret=[this.head("0 0 200 200"),'<rect x="0" y="0" width="200" height="200" fill="'+c1+'"/>'],i$=0;i$<count;++i$){ idx=-i$/count*dur,x=184*Math.random()+8,r=(.7*Math.random()+.3)*size,d=dur*(1+.5*Math.random()),ret.push(['<circle cx="'+x+'" cy="0" r="'+r+'" fill="none" stroke="'+c2+'" stroke-width="'+sw+'">','<animate attributeName="cy" values="190;-10" times="0;1" ','dur="'+d+'s" begin="'+idx+'s" repeatCount="indefinite"/>',"</circle>",'<circle cx="'+x+'" cy="0" r="'+r+'" fill="none" stroke="'+c2+'" stroke-width="'+sw+'">','<animate attributeName="cy" values="390;190" times="0;1" ','dur="'+d+'s" begin="'+idx+'s" repeatCount="indefinite"/>',"</circle>"].join("")); }return wrap(ret.join("")+"</svg>")}},handler={queue:{},running:!1,main:function(timestamp){
var this$1 = this;
var keepon,removed,k,ref$,func,ret,this$=this;for(k in keepon=!1,removed=[],ref$=this$1.queue){ (ret=(func=ref$[k])(timestamp))||removed.push(func),keepon=keepon||ret; }for(k in ref$=this$1.queue){ func=ref$[k],removed.indexOf(func)>=0&&delete this$1.queue[k]; }return keepon?requestAnimationFrame((function(it){return this$.main(it)})):this.running=!1},add:function(key,f){var this$=this;if(this.queue[key]||(this.queue[key]=f),!this.running){ return this.running=!0,requestAnimationFrame((function(it){return this$.main(it)})) }}},window.ldBar=function(selector,option){var xmlns,root,cls,idPrefix,id,domTree,newNode,x$,config,attr,that,isStroke,parseRes,dom,svg,text,group,length,path0,path1,patimg,img,ret,size,img2,this$=this;for(attr in null==option&&(option={}),xmlns={xlink:"http://www.w3.org/1999/xlink"},~(cls=(root="String"===toString$.call(selector).slice(8,-1)?document.querySelector(selector):selector).getAttribute("class")||"").indexOf("ldBar")||root.setAttribute("class",cls+" ldBar"),idPrefix="ldBar-"+Math.random().toString(16).substring(2),id={key:id,clip:idPrefix+"-clip",filter:idPrefix+"-filter",pattern:idPrefix+"-pattern",mask:idPrefix+"-mask",maskPath:idPrefix+"-mask-path"},domTree=function(n,o){var k,v;for(k in n=newNode(n),o){ v=o[k],"attr"!==k&&n.appendChild(domTree(k,v||{})); }return n.attrs(o.attr||{}),n},newNode=function(n){return document.createElementNS("http://www.w3.org/2000/svg",n)},(x$=document.body.__proto__.__proto__.__proto__).text=function(t){
var this$1 = this;
return this$1.appendChild(document.createTextNode(t))},x$.attrs=function(o){
var this$1 = this;
var k,v,ret,results$=[];for(k in o){ v=o[k],(ret=/([^:]+):([^:]+)/.exec(k))&&xmlns[ret[1]]?results$.push(this$1.setAttributeNS(xmlns[ret[1]],k,v)):results$.push(this$1.setAttribute(k,v)); }return results$},x$.styles=function(o){
var this$1 = this;
var k,v,results$=[];for(k in o){ v=o[k],results$.push(this$1.style[k]=v); }return results$},x$.append=function(n){
var this$1 = this;
return this$1.appendChild(document.createElementNS("http://www.w3.og/2000/svg",n))},x$.attr=function(n,v){
var this$1 = this;
return null!=v?this$1.setAttribute(n,v):this$1.getAttribute(n)},(config={type:"stroke",img:"",path:"M10 10L90 10","fill-dir":"btt",fill:"#25b","fill-background":"#ddd","fill-background-extrude":3,"pattern-size":null,"stroke-dir":"normal",stroke:"#25b","stroke-width":"3","stroke-trail":"#ddd","stroke-trail-width":.5,duration:1,easing:"linear",value:0,"img-size":null}).preset=root.attr("data-preset")||option.preset,null!=config.preset&&import$(config,presets[config.preset]),config){ (that=that=root.attr("data-"+attr))&&(config[attr]=that); }return import$(config,option),config.img&&(config.path=null),isStroke="stroke"===config.type,parseRes=function(v){var ret;return(ret=/data:ldbar\/res,([^()]+)\(([^)]+)\)/.exec(v))?make[ret[1]].apply(make,ret[2].split(",")):v},config.fill=parseRes(config.fill),config.stroke=parseRes(config.stroke),parseRes=function(v){var ret;return(ret=/data:ldbar\/res,([^()]+)\(([^)]+)\)/.exec(v))?make[ret[1]].apply(make,ret[2].split(",")):v},config.fill=parseRes(config.fill),config.stroke=parseRes(config.stroke),dom={attr:{"xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",width:"100%",height:"100%"},defs:{filter:{attr:{id:id.filter,x:-1,y:-1,width:3,height:3},feMorphology:{attr:{operator:+config["fill-background-extrude"]>=0?"dilate":"erode",radius:Math.abs(+config["fill-background-extrude"])}},feColorMatrix:{attr:{values:"0 0 0 0 1    0 0 0 0 1    0 0 0 0 1    0 0 0 1 0",result:"cm"}}},mask:{attr:{id:id.mask},image:{attr:{"xlink:href":config.img,filter:"url(#"+id.filter+")",x:0,y:0,width:100,height:100,preserveAspectRatio:"xMidYMid"}}},g:{mask:{attr:{id:id.maskPath},path:{attr:{d:config.path||"",fill:"#fff",stroke:"#fff",filter:"url(#"+id.filter+")"}}}},clipPath:{attr:{id:id.clip},rect:{attr:{class:"mask",fill:"#000"}}},pattern:{attr:{id:id.pattern,patternUnits:"userSpaceOnUse",x:0,y:0,width:300,height:300},image:{attr:{x:0,y:0,width:300,height:300}}}}},svg=domTree("svg",dom),(text=document.createElement("div")).setAttribute("class","ldBar-label"),root.appendChild(svg),root.appendChild(text),group=[0,0],length=0,this.fit=function(){var box,d,rect;if(box=group[1].getBBox(),d=1.5*Math.max.apply(null,["stroke-width","stroke-trail-width","fill-background-extrude"].map((function(it){return config[it]}))),svg.attrs({viewBox:[box.x-d,box.y-d,box.width+2*d,box.height+2*d].join(" ")}),root.style.width||root.styles({width:box.width+2*d+"px"}),root.style.height||root.styles({height:box.height+2*d+"px"}),rect=group[0].querySelector("rect")){ return rect.attrs({x:box.x-d,y:box.y-d,width:box.width+2*d,height:box.height+2*d}) }},config.path?(group[0]=domTree("g",isStroke?{path:{attr:{d:config.path,fill:"none",class:"baseline"}}}:{rect:{attr:{x:0,y:0,width:100,height:100,mask:"url(#"+id.maskPath+")",fill:config["fill-background"],class:"frame"}}}),svg.appendChild(group[0]),group[1]=domTree("g",{path:{attr:{d:config.path,class:isStroke?"mainline":"solid","clip-path":"fill"===config.type?"url(#"+id.clip+")":""}}}),svg.appendChild(group[1]),path0=group[0].querySelector(isStroke?"path":"rect"),path1=group[1].querySelector("path"),isStroke&&path1.attrs({fill:"none"}),patimg=svg.querySelector("pattern image"),(img=new Image).addEventListener("load",(function(){var box,that;return box=(that=config["pattern-size"])?{width:+that,height:+that}:img.width&&img.height?{width:img.width,height:img.height}:{width:300,height:300},svg.querySelector("pattern").attrs({width:box.width,height:box.height}),patimg.attrs({width:box.width,height:box.height})})),/.+\..+|^data:/.exec(isStroke?config.stroke:config.fill)&&(img.src=isStroke?config.stroke:config.fill,patimg.attrs({"xlink:href":img.src})),isStroke&&(path0.attrs({stroke:config["stroke-trail"],"stroke-width":config["stroke-trail-width"]}),path1.attrs({"stroke-width":config["stroke-width"],stroke:/.+\..+|^data:/.exec(config.stroke)?"url(#"+id.pattern+")":config.stroke})),config.fill&&!isStroke&&path1.attrs({fill:/.+\..+|^data:/.exec(config.fill)?"url(#"+id.pattern+")":config.fill}),length=path1.getTotalLength(),this.fit(),this.inited=!0):config.img&&(size=config["img-size"]?{width:+(ret=config["img-size"].split(","))[0],height:+ret[1]}:{width:100,height:100},group[0]=domTree("g",{rect:{attr:{x:0,y:0,width:100,height:100,mask:"url(#"+id.mask+")",fill:config["fill-background"]}}}),svg.querySelector("mask image").attrs({width:size.width,height:size.height}),group[1]=domTree("g",{image:{attr:{width:size.width,height:size.height,x:0,y:0,preserveAspectRatio:"xMidYMid","clip-path":"fill"===config.type?"url(#"+id.clip+")":"","xlink:href":config.img,class:"solid"}}}),(img=new Image).addEventListener("load",(function(){var ret,size;return size=config["img-size"]?{width:+(ret=config["img-size"].split(","))[0],height:+ret[1]}:img.width&&img.height?{width:img.width,height:img.height}:{width:100,height:100},svg.querySelector("mask image").attrs({width:size.width,height:size.height}),group[1].querySelector("image").attrs({width:size.width,height:size.height}),this$.fit(),this$.set(void 0,!1),this$.inited=!0})),img.src=config.img,config.img2&&(size=config["img-size"]?{width:+(ret=config["img-size"].split(","))[0],height:+ret[1]}:{width:100,height:100},group[0]=domTree("g",{rect:{attr:{x:0,y:0,width:100,height:100,mask:"url(#"+id.mask+")",fill:config["fill-background"]}}}),svg.querySelector("mask image").attrs({width:size.width,height:size.height}),group[2]=domTree("g",{image:{attr:{width:size.width,height:size.height,x:0,y:0,preserveAspectRatio:"xMidYMid","xlink:href":config.img2,class:"solid"}}}),(img2=new Image).addEventListener("load",(function(){var ret,size;return size=config["img-size"]?{width:+(ret=config["img-size"].split(","))[0],height:+ret[1]}:img2.width&&img2.height?{width:img2.width,height:img2.height}:{width:100,height:100},svg.querySelector("mask image").attrs({width:size.width,height:size.height}),group[2].querySelector("image").attrs({width:size.width,height:size.height}),this$.fit(),this$.set(void 0,!1),this$.inited=!0})),img2.src=config.img2),svg.appendChild(group[0]),config.img2&&svg.appendChild(group[2]),svg.appendChild(group[1])),svg.attrs({width:"100%",height:"100%"}),this.transition={value:{src:0,des:0},time:{},ease:function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t+b:.5*-c*((t-=1)*(t-2)-1)+b},handler:function(time){var ref$,dv,dt,dur,v,node,style,box,dir;return null==this.time.src&&(this.time.src=time),dv=(ref$=[this.value.des-this.value.src,.001*(time-this.time.src),+config.duration||1])[0],dt=ref$[1],dur=ref$[2],text.textContent=v=Math.round(this.ease(dt,this.value.src,dv,dur)),isStroke?(node=path1,style={"stroke-dasharray":"reverse"===config["stroke-dir"]?"0 "+length*(100-v)*.01+" "+length*v*.01+" 0":.01*v*length+" "+(.01*(100-v)*length+1)}):(box=group[1].getBBox(),style="btt"!==(dir=config["fill-dir"])&&dir?"ttb"===dir?{y:box.y,height:box.height*v*.01,x:box.x,width:box.width}:"ltr"===dir?{y:box.y,height:box.height,x:box.x,width:box.width*v*.01}:"rtl"===dir?{y:box.y,height:box.height,x:box.x+box.width*(100-v)*.01,width:box.width*v*.01}:void 0:{y:box.y+box.height*(100-v)*.01,height:box.height*v*.01,x:box.x,width:box.width},node=svg.querySelector("rect")),node.attrs(style),!(dt>=dur&&(delete this.time.src,1))},start:function(src,des,doTransition){var ref$,this$=this;return(ref$=this.value).src=src,ref$.des=des,root.offsetWidth||root.offsetHeight||root.getClientRects().length,doTransition&&(root.offsetWidth||root.offsetHeight||root.getClientRects().length)?handler.add(id.key,(function(time){return this$.handler(time)})):(this.time.src=0,void this.handler(1e3))}},this.set=function(v,doTransition){var src,des;return null==doTransition&&(doTransition=!0),src=this.value||0,null!=v?this.value=v:v=this.value,des=this.value,this.transition.start(src,des,doTransition)},this.set(+config.value||0,!1),this}}),{"./my-module":2,presets:3}],2:[(function(require,module,exports){(void 0!==exports&&exports||this).hey=function(){return console.log("This is loading bar!")}}),{}],3:[(function(require,module,exports){var out$=void 0!==exports&&exports||this;console.log("REMOVEME: presets are separated"),out$.presets={rainbow:{type:"stroke",path:"M10 10L90 10",stroke:"data:ldbar/res,gradient(0,1,#a551df,#fd51ad,#ff7f82,#ffb874,#ffeb90)"},energy:{type:"fill",path:"M15 5L85 5A5 5 0 0 1 85 15L15 15A5 5 0 0 1 15 5",stroke:"#f00",fill:"data:ldbar/res,gradient(45,2,#4e9,#8fb,#4e9)","fill-dir":"ltr","fill-background":"#444","fill-background-extrude":1},stripe:{type:"fill",path:"M15 5L85 5A5 5 0 0 1 85 15L15 15A5 5 0 0 1 15 5",stroke:"#f00",fill:"data:ldbar/res,stripe(#25b,#58e,1)","fill-dir":"ltr","fill-background":"#ddd","fill-background-extrude":1},text:{type:"fill",img:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="70" height="20" viewBox="0 0 70 20"><text x="35" y="10" text-anchor="middle" minant-baseline="central" font-family="arial">LOADING</text></svg>',"fill-background-extrude":1.3,"pattern-size":100,"fill-dir":"ltr","img-size":"70,20"},line:{type:"stroke",path:"M10 10L90 10",stroke:"#25b","stroke-width":3,"stroke-trail":"#ddd","stroke-trail-width":1},fan:{type:"stroke",path:"M10 90A40 40 0 0 1 90 90","fill-dir":"btt",fill:"#25b","fill-background":"#ddd","fill-background-extrude":3,"stroke-dir":"normal",stroke:"#25b","stroke-width":"3","stroke-trail":"#ddd","stroke-trail-width":.5},circle:{type:"stroke",path:"M50 10A40 40 0 0 1 50 90A40 40 0 0 1 50 10","fill-dir":"btt",fill:"#25b","fill-background":"#ddd","fill-background-extrude":3,"stroke-dir":"normal",stroke:"#25b","stroke-width":"3","stroke-trail":"#ddd","stroke-trail-width":.5},bubble:{type:"fill",path:"M50 10A40 40 0 0 1 50 90A40 40 0 0 1 50 10","fill-dir":"btt",fill:"data:ldbar/res,bubble(#39d,#cef)","pattern-size":"150","fill-background":"#ddd","fill-background-extrude":2,"stroke-dir":"normal",stroke:"#25b","stroke-width":"3","stroke-trail":"#ddd","stroke-trail-width":.5}}}),{}]},{},[1]),(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.noUiSlider=a()})((function(){"use strict";function c(a){a.preventDefault()}function g(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function h(a,b,c){c>0&&(l(a,b),setTimeout((function(){m(a,b)}),c))}function j(a){return Array.isArray(a)?a:[a]}function k(a){var b=(a=String(a)).split(".");return b.length>1?b[1].length:0}function l(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function m(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function o(a){var b=void 0!==window.pageXOffset,c="CSS1Compat"===(a.compatMode||"");return{x:b?window.pageXOffset:c?a.documentElement.scrollLeft:a.body.scrollLeft,y:b?window.pageYOffset:c?a.documentElement.scrollTop:a.body.scrollTop}}function s(a,b){return 100/(b-a)}function t(a,b){return 100*b/(a[1]-a[0])}function w(a,b){for(var c=1;a>=b[c];){ c+=1; }return c}function x(a,b,c){if(c>=a.slice(-1)[0]){ return 100; }var d,e,f,g,h=w(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+(function(a,b){return t(a,a[0]<0?b+Math.abs(a[0]):b-a[0])})([d,e],c)/s(f,g)}function z(a,b,c,d){if(100===d){ return d; }var f,g,h=w(d,a);return c?d-(f=a[h-1])>((g=a[h])-f)/2?g:f:b[h-1]?a[h-1]+(function(a,b){return Math.round(a/b)*b})(d-a[h-1],b[h-1]):d}function A(a,b,c){var d;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b)){ throw new Error("noUiSlider ("+_+"): 'range' contains invalid value."); }if(!g(d="min"===a?0:"max"===a?100:parseFloat(a))||!g(b[0])){ throw new Error("noUiSlider ("+_+"): 'range' value isn't numeric."); }c.xPct.push(d),c.xVal.push(b[0]),d?c.xSteps.push(!isNaN(b[1])&&b[1]):isNaN(b[1])||(c.xSteps[0]=b[1]),c.xHighestCompleteStep.push(0)}function B(a,b,c){if(!b){ return!0; }c.xSteps[a]=t([c.xVal[a],c.xVal[a+1]],b)/s(c.xPct[a],c.xPct[a+1]);var d=(c.xVal[a+1]-c.xVal[a])/c.xNumSteps[a],e=Math.ceil(Number(d.toFixed(3))-1),f=c.xVal[a]+c.xNumSteps[a]*e;c.xHighestCompleteStep[a]=f}function C(a,b,c){
var this$1 = this;
this.xPct=[],this.xVal=[],this.xSteps=[c||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=b;var d,e=[];for(d in a){ a.hasOwnProperty(d)&&e.push([a[d],d]); }for(e.length&&"object"==typeof e[0][0]?e.sort((function(a,b){return a[0][0]-b[0][0]})):e.sort((function(a,b){return a[0]-b[0]})),d=0;d<e.length;d++){ A(e[d][1],e[d][0],this$1); }for(this.xNumSteps=this.xSteps.slice(0),d=0;d<this.xNumSteps.length;d++){ B(d,this$1.xNumSteps[d],this$1) }}function D(b){if(function(a){return"object"==typeof a&&"function"==typeof a.to&&"function"==typeof a.from}(b)){ return!0; }throw new Error("noUiSlider ("+_+"): 'format' requires 'to' and 'from' methods.")}function E(a,b){if(!g(b)){ throw new Error("noUiSlider ("+_+"): 'step' is not numeric."); }a.singleStep=b}function F(a,b){if("object"!=typeof b||Array.isArray(b)){ throw new Error("noUiSlider ("+_+"): 'range' is not an object."); }if(void 0===b.min||void 0===b.max){ throw new Error("noUiSlider ("+_+"): Missing 'min' or 'max' in 'range'."); }if(b.min===b.max){ throw new Error("noUiSlider ("+_+"): 'range' 'min' and 'max' cannot be equal."); }a.spectrum=new C(b,a.snap,a.singleStep)}function G(a,b){if(b=j(b),!Array.isArray(b)||!b.length){ throw new Error("noUiSlider ("+_+"): 'start' option is incorrect."); }a.handles=b.length,a.start=b}function H(a,b){if(a.snap=b,"boolean"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'snap' option must be a boolean.") }}function I(a,b){if(a.animate=b,"boolean"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'animate' option must be a boolean.") }}function J(a,b){if(a.animationDuration=b,"number"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'animationDuration' option must be a number.") }}function K(a,b){var c,d=[!1];if("lower"===b?b=[!0,!1]:"upper"===b&&(b=[!1,!0]),!0===b||!1===b){for(c=1;c<a.handles;c++){ d.push(b); }d.push(!1)}else{if(!Array.isArray(b)||!b.length||b.length!==a.handles+1){ throw new Error("noUiSlider ("+_+"): 'connect' option doesn't match handle count."); }d=b}a.connect=d}function L(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider ("+_+"): 'orientation' option is invalid.")}}function M(a,b){if(!g(b)){ throw new Error("noUiSlider ("+_+"): 'margin' option must be numeric."); }if(0!==b&&(a.margin=a.spectrum.getMargin(b),!a.margin)){ throw new Error("noUiSlider ("+_+"): 'margin' option is only supported on linear sliders.") }}function N(a,b){if(!g(b)){ throw new Error("noUiSlider ("+_+"): 'limit' option must be numeric."); }if(a.limit=a.spectrum.getMargin(b),!a.limit||a.handles<2){ throw new Error("noUiSlider ("+_+"): 'limit' option is only supported on linear sliders with 2 or more handles.") }}function O(a,b){if(!g(b)){ throw new Error("noUiSlider ("+_+"): 'padding' option must be numeric."); }if(0!==b){if(a.padding=a.spectrum.getMargin(b),!a.padding){ throw new Error("noUiSlider ("+_+"): 'padding' option is only supported on linear sliders."); }if(a.padding<0){ throw new Error("noUiSlider ("+_+"): 'padding' option must be a positive number."); }if(a.padding>=50){ throw new Error("noUiSlider ("+_+"): 'padding' option must be less than half the range.") }}}function P(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1;break;default:throw new Error("noUiSlider ("+_+"): 'direction' option was not recognized.")}}function Q(a,b){if("string"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'behaviour' must be a string containing options."); }var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0,g=b.indexOf("hover")>=0;if(e){if(2!==a.handles){ throw new Error("noUiSlider ("+_+"): 'fixed' behaviour must be used with 2 handles"); }M(a,a.start[1]-a.start[0])}a.events={tap:c||f,drag:d,fixed:e,snap:f,hover:g}}function R(a,b){if(a.multitouch=b,"boolean"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'multitouch' option must be a boolean.") }}function S(a,b){if(!1!==b){ if(!0===b){a.tooltips=[];for(var c=0;c<a.handles;c++){ a.tooltips.push(!0) }}else{if(a.tooltips=j(b),a.tooltips.length!==a.handles){ throw new Error("noUiSlider ("+_+"): must pass a formatter for all handles."); }a.tooltips.forEach((function(a){if("boolean"!=typeof a&&("object"!=typeof a||"function"!=typeof a.to)){ throw new Error("noUiSlider ("+_+"): 'tooltips' must be passed a formatter or 'false'.") }}))} }}function T(a,b){a.ariaFormat=b,D(b)}function U(a,b){a.format=b,D(b)}function V(a,b){if(void 0!==b&&"string"!=typeof b&&!1!==b){ throw new Error("noUiSlider ("+_+"): 'cssPrefix' must be a string or `false`."); }a.cssPrefix=b}function W(a,b){if(void 0!==b&&"object"!=typeof b){ throw new Error("noUiSlider ("+_+"): 'cssClasses' must be an object."); }if("string"==typeof a.cssPrefix){ for(var c in a.cssClasses={},b){ b.hasOwnProperty(c)&&(a.cssClasses[c]=a.cssPrefix+b[c]); } }else { a.cssClasses=b }}function X(a,b){if(!0!==b&&!1!==b){ throw new Error("noUiSlider ("+_+"): 'useRequestAnimationFrame' option should be true (default) or false."); }a.useRequestAnimationFrame=b}function Y(a){var b={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:aa,format:aa},c={step:{r:!1,t:E},start:{r:!0,t:G},connect:{r:!0,t:K},direction:{r:!0,t:P},snap:{r:!1,t:H},animate:{r:!1,t:I},animationDuration:{r:!1,t:J},range:{r:!0,t:F},orientation:{r:!1,t:L},margin:{r:!1,t:M},limit:{r:!1,t:N},padding:{r:!1,t:O},behaviour:{r:!0,t:Q},multitouch:{r:!0,t:R},ariaFormat:{r:!1,t:T},format:{r:!1,t:U},tooltips:{r:!1,t:S},cssPrefix:{r:!1,t:V},cssClasses:{r:!1,t:W},useRequestAnimationFrame:{r:!1,t:X}},d={connect:!1,direction:"ltr",behaviour:"tap",multitouch:!1,orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};a.format&&!a.ariaFormat&&(a.ariaFormat=a.format),Object.keys(c).forEach((function(e){if(void 0===a[e]&&void 0===d[e]){if(c[e].r){ throw new Error("noUiSlider ("+_+"): '"+e+"' is required."); }return!0}c[e].t(b,void 0===a[e]?d[e]:a[e])})),b.pips=a.pips;var e=[["left","top"],["right","bottom"]];return b.style=e[b.dir][b.ort],b.styleOposite=e[b.dir?0:1][b.ort],b}function Z(a,e,g){function k(a,b){var c=wa.createElement("div");return b&&l(c,b),a.appendChild(c),c}function s(a,b){var c=k(a,e.cssClasses.origin),d=k(c,e.cssClasses.handle);return d.setAttribute("data-handle",b),d.setAttribute("tabindex","0"),d.setAttribute("role","slider"),d.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),0===b?l(d,e.cssClasses.handleLower):b===e.handles-1&&l(d,e.cssClasses.handleUpper),c}function t(a,b){return!!b&&k(a,e.cssClasses.connect)}function w(a,b){return!!e.tooltips[b]&&k(a.firstChild,e.cssClasses.tooltip)}function B(a,b,c){function d(a,b){var c=b===e.cssClasses.value,f=c?h:i;return b+" "+(c?j:m)[e.ort]+" "+f[a]}function f(a,f){f[1]=f[1]&&b?b(f[0],f[1]):f[1];var h=k(g,!1);h.className=d(f[1],e.cssClasses.marker),h.style[e.style]=a+"%",f[1]&&((h=k(g,!1)).className=d(f[1],e.cssClasses.value),h.style[e.style]=a+"%",h.innerText=c.to(f[0]))}var g=wa.createElement("div"),h=[e.cssClasses.valueNormal,e.cssClasses.valueLarge,e.cssClasses.valueSub],i=[e.cssClasses.markerNormal,e.cssClasses.markerLarge,e.cssClasses.markerSub],j=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],m=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];return l(g,e.cssClasses.pips),l(g,0===e.ort?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical),Object.keys(a).forEach((function(b){f(b,a[b])})),g}function C(){var a;la&&((a=la).parentElement.removeChild(a),la=null)}function D(a){C();var b=a.mode,c=a.density||1,d=a.filter||!1,g=(function(a,b,c){if("range"===a||"steps"===a){ return ta.xVal; }if("count"===a){if(!b){ throw new Error("noUiSlider ("+_+"): 'values' required for mode 'count'."); }var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;){ b.push(d); }a="positions"}return"positions"===a?b.map((function(a){return ta.fromStepping(c?ta.getStep(a):a)})):"values"===a?c?b.map((function(a){return ta.fromStepping(ta.getStep(ta.toStepping(a)))})):b:void 0})(b,a.values||!1,a.stepped||!1),h=(function(a,b,c){function e(a,b){return(a+b).toFixed(7)/1}var f={},g=ta.xVal[0],h=ta.xVal[ta.xVal.length-1],i=!1,j=!1,k=0;return(c=(function(a){return a.filter((function(a){return!this[a]&&(this[a]=!0)}),{})})(c.slice().sort((function(a,b){return a-b}))))[0]!==g&&(c.unshift(g),i=!0),c[c.length-1]!==h&&(c.push(h),j=!0),c.forEach((function(d,g){var h,l,m,n,o,q,r,s,t,u=d,v=c[g+1];if("steps"===b&&(h=ta.xNumSteps[g]),h||(h=v-u),!1!==u&&void 0!==v){ for(h=Math.max(h,1e-7),l=u;l<=v;l=e(l,h)){for(r=(o=(n=ta.toStepping(l))-k)/a,t=o/(s=Math.round(r)),m=1;m<=s;m+=1){ f[(k+m*t).toFixed(5)]=["x",0]; }q=c.indexOf(l)>-1?1:"steps"===b?2:0,!g&&i&&(q=0),l===v&&j||(f[n.toFixed(5)]=[l,q]),k=n} }})),f})(c,b,g),i=a.format||{to:Math.round};return la=pa.appendChild(B(h,d,i))}function E(){var a=ha.getBoundingClientRect(),b="offset"+["Width","Height"][e.ort];return 0===e.ort?a.width||ha[b]:a.height||ha[b]}function F(a,b,c,d){var f=function(f){return!pa.hasAttribute("disabled")&&!(function(a,b){return a.classList?a.classList.contains(b):new RegExp("\\b"+b+"\\b").test(a.className)})(pa,e.cssClasses.tap)&&!!(f=(function(a,b,c){var d,f,g=0===a.type.indexOf("touch"),h=0===a.type.indexOf("mouse"),i=0===a.type.indexOf("pointer");if(0===a.type.indexOf("MSPointer")&&(i=!0),g&&e.multitouch){var j=function(a){return a.target===c||c.contains(a.target)};if("touchstart"===a.type){var k=Array.prototype.filter.call(a.touches,j);if(k.length>1){ return!1; }d=k[0].pageX,f=k[0].pageY}else{var l=Array.prototype.find.call(a.changedTouches,j);if(!l){ return!1; }d=l.pageX,f=l.pageY}}else if(g){if(a.touches.length>1){ return!1; }d=a.changedTouches[0].pageX,f=a.changedTouches[0].pageY}return b=b||o(wa),(h||i)&&(d=a.clientX+b.x,f=a.clientY+b.y),a.pageOffset=b,a.points=[d,f],a.cursor=h||i,a})(f,d.pageOffset,d.target||b))&&!(a===ma.start&&void 0!==f.buttons&&f.buttons>1)&&(!d.hover||!f.buttons)&&(oa||f.preventDefault(),f.calcPoint=f.points[e.ort],void c(f,d))},g=[];return a.split(" ").forEach((function(a){b.addEventListener(a,f,!!oa&&{passive:!0}),g.push([a,f])})),g}function H(a){var c=100*(a-(function(a,b){var c=a.getBoundingClientRect(),d=a.ownerDocument,e=d.documentElement,f=o(d);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f.x=0),b?c.top+f.y-e.clientTop:c.left+f.x-e.clientLeft})(ha,e.ort))/E();return e.dir?100-c:c}function J(a,b,c,d){var e=c.slice(),f=[!a,a],g=[a,!a];d=d.slice(),a&&d.reverse(),d.length>1?d.forEach((function(a,c){var d=S(e,a,e[a]+b,f[c],g[c],!1);!1===d?b=0:(b=d-e[a],e[a]=d)})):f=g=[!0];var h=!1;d.forEach((function(a,d){h=W(a,c[a]+b,f[d],g[d])||h})),h&&d.forEach((function(a){K("update",a),K("slide",a)}))}function K(a,b,c){Object.keys(va).forEach((function(d){var f=d.split(".")[0];a===f&&va[d].forEach((function(a){a.call(ka,ua.map(e.format.to),b,ua.slice(),c||!1,qa.slice())}))}))}function L(a,b){"mouseout"===a.type&&"HTML"===a.target.nodeName&&null===a.relatedTarget&&N(a,b)}function M(a,b){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===a.buttons&&0!==b.buttonsProperty){ return N(a,b); }var c=(e.dir?-1:1)*(a.calcPoint-b.startCalcPoint);J(c>0,100*c/b.baseSize,b.locations,b.handleNumbers)}function N(a,b){b.handle&&(m(b.handle,e.cssClasses.active),sa-=1),b.listeners.forEach((function(a){xa.removeEventListener(a[0],a[1])})),0===sa&&(m(pa,e.cssClasses.drag),V(),a.cursor&&(ya.style.cursor="",ya.removeEventListener("selectstart",c))),b.handleNumbers.forEach((function(a){K("change",a),K("set",a),K("end",a)}))}function O(a,b){var d;if(1===b.handleNumbers.length){var f=ia[b.handleNumbers[0]];if(f.hasAttribute("disabled")){ return!1; }d=f.children[0],sa+=1,l(d,e.cssClasses.active)}a.stopPropagation();var g=[],h=F(ma.move,xa,M,{target:a.target,handle:d,listeners:g,startCalcPoint:a.calcPoint,baseSize:E(),pageOffset:a.pageOffset,handleNumbers:b.handleNumbers,buttonsProperty:a.buttons,locations:qa.slice()}),i=F(ma.end,xa,N,{target:a.target,handle:d,listeners:g,handleNumbers:b.handleNumbers}),j=F("mouseout",xa,L,{target:a.target,handle:d,listeners:g,handleNumbers:b.handleNumbers});g.push.apply(g,h.concat(i,j)),a.cursor&&(ya.style.cursor=getComputedStyle(a.target).cursor,ia.length>1&&l(pa,e.cssClasses.drag),ya.addEventListener("selectstart",c,!1)),b.handleNumbers.forEach((function(a){K("start",a)}))}function P(a){a.stopPropagation();var b=H(a.calcPoint),c=(function(a){var b=100,c=!1;return ia.forEach((function(d,e){if(!d.hasAttribute("disabled")){var f=Math.abs(qa[e]-a);f<b&&(c=e,b=f)}})),c})(b);if(!1===c){ return!1; }e.events.snap||h(pa,e.cssClasses.tap,e.animationDuration),W(c,b,!0,!0),V(),K("slide",c,!0),K("update",c,!0),K("change",c,!0),K("set",c,!0),e.events.snap&&O(a,{handleNumbers:[c]})}function Q(a){var b=H(a.calcPoint),c=ta.getStep(b),d=ta.fromStepping(c);Object.keys(va).forEach((function(a){"hover"===a.split(".")[0]&&va[a].forEach((function(a){a.call(ka,d)}))}))}function S(a,b,c,d,f,g){return ia.length>1&&(d&&b>0&&(c=Math.max(c,a[b-1]+e.margin)),f&&b<ia.length-1&&(c=Math.min(c,a[b+1]-e.margin))),ia.length>1&&e.limit&&(d&&b>0&&(c=Math.min(c,a[b-1]+e.limit)),f&&b<ia.length-1&&(c=Math.max(c,a[b+1]-e.limit))),e.padding&&(0===b&&(c=Math.max(c,e.padding)),b===ia.length-1&&(c=Math.min(c,100-e.padding))),!((c=(function(a){return Math.max(Math.min(a,100),0)})(c=ta.getStep(c)))===a[b]&&!g)&&c}function T(a){return a+"%"}function V(){ra.forEach((function(a){var b=qa[a]>50?-1:1,c=3+(ia.length+b*a);ia[a].childNodes[0].style.zIndex=c}))}function W(a,b,c,d){return!1!==(b=S(qa,a,b,c,d,!1))&&(function(a,b){qa[a]=b,ua[a]=ta.fromStepping(b);var c=function(){ia[a].style[e.style]=T(b),X(a),X(a+1)};window.requestAnimationFrame&&e.useRequestAnimationFrame?window.requestAnimationFrame(c):c()}(a,b),!0)}function X(a){if(ja[a]){var b=0,c=100;0!==a&&(b=qa[a-1]),a!==ja.length-1&&(c=qa[a]),ja[a].style[e.style]=T(b),ja[a].style[e.styleOposite]=T(100-c)}}function Z(a,b){null!==a&&!1!==a&&("number"==typeof a&&(a=String(a)),!1===(a=e.format.from(a))||isNaN(a)||W(b,ta.toStepping(a),!1,!1))}function $(a,b){var c=j(a),d=void 0===qa[0];b=void 0===b||!!b,c.forEach(Z),e.animate&&!d&&h(pa,e.cssClasses.tap,e.animationDuration),ra.forEach((function(a){W(a,qa[a],!0,!1)})),V(),ra.forEach((function(a){K("update",a),null!==c[a]&&b&&K("set",a)}))}function ba(){var a=ua.map(e.format.to);return 1===a.length?a[0]:a}function ea(a,b){va[a]=va[a]||[],va[a].push(b),"update"===a.split(".")[0]&&ia.forEach((function(a,b){K("update",b)}))}var ha,ia,ja,ka,la,ma=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},oa=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&(function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,b)}catch(a){}return a})(),pa=a,qa=[],ra=[],sa=0,ta=e.spectrum,ua=[],va={},wa=a.ownerDocument,xa=wa.documentElement,ya=wa.body;if(pa.noUiSlider){ throw new Error("noUiSlider ("+_+"): Slider was already initialized."); }return (function(a){l(a,e.cssClasses.target),0===e.dir?l(a,e.cssClasses.ltr):l(a,e.cssClasses.rtl),0===e.ort?l(a,e.cssClasses.horizontal):l(a,e.cssClasses.vertical),ha=k(a,e.cssClasses.base)})(pa),(function(a,b){ia=[],(ja=[]).push(t(b,a[0]));for(var c=0;c<e.handles;c++){ ia.push(s(b,c)),ra[c]=c,ja.push(t(b,a[c+1])) }})(e.connect,ha),ka={destroy:function(){for(var a in e.cssClasses){ e.cssClasses.hasOwnProperty(a)&&m(pa,e.cssClasses[a]); }for(;pa.firstChild;){ pa.removeChild(pa.firstChild); }delete pa.noUiSlider},steps:function(){return qa.map((function(a,b){var c=ta.getNearbySteps(a),d=ua[b],e=c.thisStep.step,f=null;!1!==e&&d+e>c.stepAfter.startValue&&(e=c.stepAfter.startValue-d),f=d>c.thisStep.startValue?c.thisStep.step:!1!==c.stepBefore.step&&d-c.stepBefore.highestStep,100===a?e=null:0===a&&(f=null);var g=ta.countStepDecimals();return null!==e&&!1!==e&&(e=Number(e.toFixed(g))),null!==f&&!1!==f&&(f=Number(f.toFixed(g))),[f,e]}))},on:ea,off:function(a){var b=a&&a.split(".")[0],c=b&&a.substring(b.length);Object.keys(va).forEach((function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete va[a]}))},get:ba,set:$,reset:function(a){$(e.start,a)},__moveHandles:function(a,b,c){J(a,b,qa,c)},options:g,updateOptions:function(a,b){var c=ba(),d=["margin","limit","padding","range","animate","snap","step","format"];d.forEach((function(b){void 0!==a[b]&&(g[b]=a[b])}));var f=Y(g);d.forEach((function(b){void 0!==a[b]&&(e[b]=f[b])})),ta=f.spectrum,e.margin=f.margin,e.limit=f.limit,e.padding=f.padding,e.pips&&D(e.pips),qa=[],$(a.start||c,b)},target:pa,removePips:C,pips:D},(function(a){a.fixed||ia.forEach((function(a,b){F(ma.start,a.children[0],O,{handleNumbers:[b]})})),a.tap&&F(ma.start,ha,P,{}),a.hover&&F(ma.move,ha,Q,{hover:!0}),a.drag&&ja.forEach((function(b,c){if(!1!==b&&0!==c&&c!==ja.length-1){var d=ia[c-1],f=ia[c],g=[b];l(b,e.cssClasses.draggable),a.fixed&&(g.push(d.children[0]),g.push(f.children[0])),g.forEach((function(a){F(ma.start,a,O,{handles:[d,f],handleNumbers:[c-1,c]})}))}}))})(e.events),$(e.start),e.pips&&D(e.pips),e.tooltips&&(function(){var a=ia.map(w);ea("update",(function(b,c,d){if(a[c]){var f=b[c];!0!==e.tooltips[c]&&(f=e.tooltips[c].to(d[c])),a[c].innerHTML=f}}))})(),ea("update",(function(a,b,c,d,f){ra.forEach((function(a){var b=ia[a],d=S(qa,a,0,!0,!0,!0),g=S(qa,a,100,!0,!0,!0),h=f[a],i=e.ariaFormat.to(c[a]);b.children[0].setAttribute("aria-valuemin",d.toFixed(1)),b.children[0].setAttribute("aria-valuemax",g.toFixed(1)),b.children[0].setAttribute("aria-valuenow",h.toFixed(1)),b.children[0].setAttribute("aria-valuetext",i)}))})),ka}var _="10.1.0";C.prototype.getMargin=function(a){var b=this.xNumSteps[0];if(b&&a/b%1!=0){ throw new Error("noUiSlider ("+_+"): 'limit', 'margin' and 'padding' must be divisible by step."); }return 2===this.xPct.length&&t(this.xVal,a)},C.prototype.toStepping=function(a){return x(this.xVal,this.xPct,a)},C.prototype.fromStepping=function(a){return (function(a,b,c){if(c>=100){ return a.slice(-1)[0]; }var f,h=w(c,b);return (function(a,b){return b*(a[1]-a[0])/100+a[0]})([a[h-1],a[h]],(c-(f=b[h-1]))*s(f,b[h]))})(this.xVal,this.xPct,a)},C.prototype.getStep=function(a){return z(this.xPct,this.xSteps,this.snap,a)},C.prototype.getNearbySteps=function(a){var b=w(a,this.xPct);return{stepBefore:{startValue:this.xVal[b-2],step:this.xNumSteps[b-2],highestStep:this.xHighestCompleteStep[b-2]},thisStep:{startValue:this.xVal[b-1],step:this.xNumSteps[b-1],highestStep:this.xHighestCompleteStep[b-1]},stepAfter:{startValue:this.xVal[b-0],step:this.xNumSteps[b-0],highestStep:this.xHighestCompleteStep[b-0]}}},C.prototype.countStepDecimals=function(){var a=this.xNumSteps.map(k);return Math.max.apply(null,a)},C.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var aa={to:function(a){return void 0!==a&&a.toFixed(2)},from:Number};return{version:_,create:function(a,b){if(!a||!a.nodeName){ throw new Error("noUiSlider ("+_+"): create requires a single element, got: "+a); }var d=Z(a,Y(b),b);return a.noUiSlider=d,d}}})),Ractive.use(pushSafe),(function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.Ractive.events)})(this,(function(e){"use strict";function n(e){return function(n,t){function o(o){(o.which||o.keyCode)===e&&(o.preventDefault(),t({node:n,original:o}))}return n.addEventListener("keydown",o,!1),{teardown:function(){n.removeEventListener("keydown",o,!1)}}}}var t=n(13),o=n(9),r=n(27),i=n(32),f=n(37),a=n(39),d=n(40),u=n(38);e.enter=t,e.tab=o,e.escape=r,e.space=i,e.leftarrow=f,e.rightarrow=a,e.downarrow=d,e.uparrow=u})),(function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.RactiveModal=factory():root.RactiveModal=factory()})("undefined"!=typeof self?self:this,(function(){return (function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){ return installedModules[moduleId].exports; }var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)})([(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default=Ractive.extend({template:{v:4,t:[{t:4,f:[{t:7,e:"div",m:[{n:"role",f:"dialog",t:13},{n:"aria-label",f:[{t:2,r:"title"}],t:13},{n:"tabindex",f:"0",t:13},{n:"class",f:["popup-wrapper ",{t:2,r:"popup_id"}],t:13},{n:"style",f:["opacity: ",{t:2,r:"opacity"},"; display: ",{t:2,r:"display"},"; z-index: ",{t:2,r:"zindex"},"; cursor: ",{t:2,x:{r:["enableclose"],s:'_0?"pointer":"default"'}}],t:13},{n:["click"],t:70,f:"clickoutside"},{n:["keydown"],t:70,f:"keydown"}],f:[{t:7,e:"div",m:[{n:"class",f:["popup ",{t:2,r:"class"}],t:13},{n:"style",f:[{t:2,r:"style"}],t:13}],f:[{t:4,f:[{t:7,e:"div",m:[{n:"class",f:"popup-titlebar",t:13}],f:[{t:4,f:[{t:7,e:"h3",m:[{n:"class",f:"popup-title",t:13}],f:[{t:2,r:"title"}]}],n:50,r:"title"}," ",{t:4,f:[{t:7,e:"button",m:[{n:"type",f:"button",t:13},{n:"class",f:"popup-btn-close",t:13},{n:["click"],t:70,f:"close"}],f:["Ã"]}],n:50,r:"enableclose"}]}],n:50,x:{r:["title","enableclose"],s:"_0||_1"}}," ",{t:7,e:"div",m:[{n:"class",f:"popup-content",t:13}],f:[{t:16}]}]}]}],n:50,r:"showpopup"}],e:{'_0?"pointer":"default"':function(_0){return _0?"pointer":"default"},"_0||_1":function(_0,_1){return _0||_1}}},css:".popup-wrapper {position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1050; overflow: auto; display: none; background-color: rgba(0, 0, 0, 0.5);} .popup {margin-bottom: 4em; display: inline-table; position: relative; color: #333333; float: left; background-color: #fff; top:30px; left: 50%; transform: translate(-50%,0); cursor: default; min-width: 110px; max-width: 500px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);} .popup-titlebar {padding:15px; color: #333; overflow: auto; border-bottom: 1px solid #e5e5e5;} .popup-title {margin-top:2px; margin-bottom: 0px; display: inline-block; font-size:1.25rem;} .popup-btn-close {padding: 0px 4px 0px 4px; cursor: pointer; background: 0 0; border: 0; font-weight:700; float: right; font-size: 1.5rem; line-height: 1; margin-right: -5px; color:#ccc;} .popup-btn-close:hover, .popup-btn-close:focus:hover{color:#6f6f6f; border-color: transparent; background-color: transparent;} .popup-btn-close:focus {color:#939393; border-color: transparent; background-color: transparent;} .popup-content {padding:15px 15px 15px 15px;} .popup-content .full-hr {width: auto; border: 0; border-top: 1px solid #e0e0e0; margin-top:15px; margin-bottom:15px; margin-left:-14px; margin-right:-14px;}",data:function(){return{showpopup:!1,basedon:!1,live:!1,appendto:"",class:"",style:"",title:"",popup_id:this._guid+"_popup",enableclose:!0,base_zindex:1050,opacity:0,display:"none",zindex:0,"prevent-bg-scroll":!1}},on:{close:function(ctx){ctx.original.preventDefault(),this.get("enableclose")&&this.set("basedon",!1)},clickoutside:function(ctx){ctx.original.target===ctx.node&&this.fire("close",ctx)},keydown:function(ctx){var e=ctx.original;if(27===e.which&&this.fire("close",ctx),9===e.which){var all=this.findAll("input, select, textarea, button, a").filter((function(el){return!!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}));e.shiftKey?e.target!==all[0]&&e.target!==this.find(".popup-wrapper")||(e.preventDefault(),all[all.length-1].focus()):e.target===all[all.length-1]&&(e.preventDefault(),all[0].focus())}}},onconfig:function(){this.get("live")&&this.set("showpopup",!0)},onrender:function(){var popup_id=this.get("popup_id");this.observe_basedon=this.observe("basedon",(function(newValue,oldValue,keypath){var live=this.get("live");if(!0===newValue){if(document.querySelector("."+popup_id)&&"block"===document.querySelector("."+popup_id).style.display){ return; }this.get("prevent-bg-scroll")&&(document.body.style.overflow="hidden"),this.elToFocus=document.activeElement,this.fire("beforeOpen");var lastZindex=this.getTopZindex(),zindex=0==lastZindex?this.get("base_zindex"):lastZindex+1;live||this.set("showpopup",!0),this.insert(this.get("appendto")?document.querySelector(this.get("appendto")):this.root.el),this.set({display:"block",zindex:zindex}),this.animate("opacity",1,{duration:250}).then(function(){this.find("[autofocus]")?this.find("[autofocus]").focus():this.find(".popup-wrapper").focus(),this.fire("afterOpen")}.bind(this))}else{if(!document.querySelector("."+popup_id)||"block"!==document.querySelector("."+popup_id).style.display){ return; }this.get("prevent-bg-scroll")&&(document.body.style.overflow="auto"),this.fire("beforeClose"),this.animate("opacity",0,{duration:250}).then(function(){
var this$1 = this;
this.set({display:"none",zindex:0}),live||this.set("showpopup",!1),this.fire("afterClose");var lastZindex=this.getTopZindex();if(lastZindex>0){for(var all=document.querySelectorAll(".popup-wrapper"),i=0;i<all.length;i++){ if(all[i].style.zIndex==lastZindex){var r=Ractive.getContext(all[i]).ractive;r.find("div").contains(this$1.elToFocus)?this$1.elToFocus.focus():r.find("[autofocus]")?r.find("[autofocus]").focus():r.find(".popup-wrapper").focus();break} }}else { document.body.contains(this.elToFocus)&&this.elToFocus.focus() }}.bind(this))}}),{defer:!0})},onunrender:function(){this.observe_basedon.cancel()},getTopZindex:function(){for(var toret=0,all=document.querySelectorAll(".popup-wrapper"),i=0;i<all.length;i++){ toret=parseInt(all[i].style.zIndex)>toret?parseInt(all[i].style.zIndex):toret; }return toret}})})]).default})),(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ractive.transitions.fade=t()})(this,(function(){"use strict";var e={delay:0,duration:300,easing:"linear"};return function(t,n){var i;n=t.processParams(n,e),t.isIntro?(i=t.getStyle("opacity"),t.setStyle("opacity",0)):i=0,t.animateStyle("opacity",i,n).then(t.complete)}})),(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive.transitions.fly=e()})(this,(function(){"use strict";function t(t){return 0===t||"string"==typeof t?t:t+"px"}var e={duration:400,easing:"easeOut",opacity:0,x:-500,y:0};return function(n,o){var i={transform:"translate("+t((o=n.processParams(o,e)).x)+","+t(o.y)+")",opacity:0},r=void 0;n.isIntro?(r=n.getStyle(["opacity","transform"]),n.setStyle(i)):r=i,n.animateStyle(r,o).then(n.complete)}})),(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t.Ractive=t.Ractive||{},t.Ractive.transitions=t.Ractive.transitions||{},t.Ractive.transitions.slide=e())})(this,(function(){"use strict";var t={duration:300,easing:"easeInOut"},e=["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","marginTop","marginBottom"],o={height:0,borderTopWidth:0,borderBottomWidth:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0};return function(i,n){var d;n=i.processParams(n,t),i.isIntro?(d=i.getStyle(e),i.setStyle(o)):(i.setStyle(i.getStyle(e)),d=o),i.setStyle("overflowY","hidden"),i.animateStyle(d,n).then(i.complete)}})),Ractive.components.modal=RactiveModal.extend({delegate:!1}),(function($,window,document,undefined){"use strict";window=void 0!==window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),$.fn.dropdown=function(parameters){var returnedValue,$allModules=$(this),$document=$(document),moduleSelector=$allModules.selector||"",hasTouch="ontouchstart"in document.documentElement,time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked="string"==typeof query,queryArguments=[].slice.call(arguments,1);return $allModules.each((function(elementIndex){var initialLoad,pageLostFocus,willRefocus,elementNamespace,id,selectObserver,menuObserver,module,settings=$.isPlainObject(parameters)?$.extend(!0,{},$.fn.dropdown.settings,parameters):$.extend({},$.fn.dropdown.settings),className=settings.className,message=settings.message,fields=settings.fields,keys=settings.keys,metadata=settings.metadata,namespace=settings.namespace,regExp=settings.regExp,selector=settings.selector,error=settings.error,templates=settings.templates,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$context=$(settings.context),$text=$module.find(selector.text),$search=$module.find(selector.search),$sizer=$module.find(selector.sizer),$input=$module.find(selector.input),$icon=$module.find(selector.icon),$combo=$module.prev().find(selector.text).length>0?$module.prev().find(selector.text):$module.prev(),$menu=$module.children(selector.menu),$item=$menu.find(selector.item),activated=!1,itemActivated=!1,internalChange=!1,element=this,instance=$module.data(moduleNamespace);module={initialize:function(){module.debug("Initializing dropdown",settings),module.is.alreadySetup()?module.setup.reference():(module.setup.layout(),settings.values&&module.change.values(settings.values),module.refreshData(),module.save.defaults(),module.restore.selected(),module.create.id(),module.bind.events(),module.observeChanges(),module.instantiate())},instantiate:function(){module.verbose("Storing instance of dropdown",module),instance=module,$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous dropdown",$module),module.remove.tabbable(),$module.off(eventNamespace).removeData(moduleNamespace),$menu.off(eventNamespace),$document.off(elementNamespace),module.disconnect.menuObserver(),module.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in window&&(selectObserver=new MutationObserver(module.event.select.mutation),menuObserver=new MutationObserver(module.event.menu.mutation),module.debug("Setting up mutation observer",selectObserver,menuObserver),module.observe.select(),module.observe.menu())},disconnect:{menuObserver:function(){menuObserver&&menuObserver.disconnect()},selectObserver:function(){selectObserver&&selectObserver.disconnect()}},observe:{select:function(){module.has.input()&&selectObserver.observe($module[0],{childList:!0,subtree:!0})},menu:function(){module.has.menu()&&menuObserver.observe($menu[0],{childList:!0,subtree:!0})}},create:{id:function(){id=(Math.random().toString(16)+"000000000").substr(2,8),elementNamespace="."+id,module.verbose("Creating unique id for element",id)},userChoice:function(values){var $userChoices,$userChoice,html;return!!(values=values||module.get.userValues())&&(values=$.isArray(values)?values:[values],$.each(values,(function(index,value){!1===module.get.item(value)&&(html=settings.templates.addition(module.add.variables(message.addResult,value)),$userChoice=$("<div />").html(html).attr("data-"+metadata.value,value).attr("data-"+metadata.text,value).addClass(className.addition).addClass(className.item),settings.hideAdditions&&$userChoice.addClass(className.hidden),$userChoices=void 0===$userChoices?$userChoice:$userChoices.add($userChoice),module.verbose("Creating user choices for value",value,$userChoice))})),$userChoices)},userLabels:function(value){var userValues=module.get.userValues();userValues&&(module.debug("Adding user labels",userValues),$.each(userValues,(function(index,value){module.verbose("Adding custom user value"),module.add.label(value,value)})))},menu:function(){$menu=$("<div />").addClass(className.menu).appendTo($module)},sizer:function(){$sizer=$("<span />").addClass(className.sizer).insertAfter($search)}},search:function(query){query=void 0!==query?query:module.get.query(),module.verbose("Searching for query",query),module.has.minCharacters(query)?module.filter(query):module.hide()},select:{firstUnfiltered:function(){module.verbose("Selecting first non-filtered element"),module.remove.selectedItem(),$item.not(selector.unselectable).not(selector.addition+selector.hidden).eq(0).addClass(className.selected)},nextAvailable:function($selected){var $nextAvailable=($selected=$selected.eq(0)).nextAll(selector.item).not(selector.unselectable).eq(0),$prevAvailable=$selected.prevAll(selector.item).not(selector.unselectable).eq(0);$nextAvailable.length>0?(module.verbose("Moving selection to",$nextAvailable),$nextAvailable.addClass(className.selected)):(module.verbose("Moving selection to",$prevAvailable),$prevAvailable.addClass(className.selected))}},setup:{api:function(){var apiSettings={debug:settings.debug,urlData:{value:module.get.value(),query:module.get.query()},on:!1};module.verbose("First request, initializing API"),$module.api(apiSettings)},layout:function(){$module.is("select")&&(module.setup.select(),module.setup.returnedObject()),module.has.menu()||module.create.menu(),module.is.search()&&!module.has.search()&&(module.verbose("Adding search input"),$search=$("<input />").addClass(className.search).prop("autocomplete","off").insertBefore($text)),module.is.multiple()&&module.is.searchSelection()&&!module.has.sizer()&&module.create.sizer(),settings.allowTab&&module.set.tabbable()},select:function(){var selectValues=module.get.selectValues();module.debug("Dropdown initialized on a select",selectValues),$module.is("select")&&($input=$module),$input.parent(selector.dropdown).length>0?(module.debug("UI dropdown already exists. Creating dropdown menu only"),$module=$input.closest(selector.dropdown),module.has.menu()||module.create.menu(),$menu=$module.children(selector.menu),module.setup.menu(selectValues)):(module.debug("Creating entire dropdown from select"),$module=$("<div />").attr("class",$input.attr("class")).addClass(className.selection).addClass(className.dropdown).html(templates.dropdown(selectValues)).insertBefore($input),$input.hasClass(className.multiple)&&!1===$input.prop("multiple")&&(module.error(error.missingMultiple),$input.prop("multiple",!0)),$input.is("[multiple]")&&module.set.multiple(),$input.prop("disabled")&&(module.debug("Disabling dropdown"),$module.addClass(className.disabled)),$input.removeAttr("class").detach().prependTo($module)),module.refresh()},menu:function(values){$menu.html(templates.menu(values,fields)),$item=$menu.find(selector.item)},reference:function(){module.debug("Dropdown behavior was called on select, replacing with closest dropdown"),$module=$module.parent(selector.dropdown),instance=$module.data(moduleNamespace),element=$module.get(0),module.refresh(),module.setup.returnedObject()},returnedObject:function(){var $firstModules=$allModules.slice(0,elementIndex),$lastModules=$allModules.slice(elementIndex+1);$allModules=$firstModules.add($module).add($lastModules)}},refresh:function(){module.refreshSelectors(),module.refreshData()},refreshItems:function(){$item=$menu.find(selector.item)},refreshSelectors:function(){module.verbose("Refreshing selector cache"),$text=$module.find(selector.text),$search=$module.find(selector.search),$input=$module.find(selector.input),$icon=$module.find(selector.icon),$combo=$module.prev().find(selector.text).length>0?$module.prev().find(selector.text):$module.prev(),$menu=$module.children(selector.menu),$item=$menu.find(selector.item)},refreshData:function(){module.verbose("Refreshing cached metadata"),$item.removeData(metadata.text).removeData(metadata.value)},clearData:function(){module.verbose("Clearing metadata"),$item.removeData(metadata.text).removeData(metadata.value),$module.removeData(metadata.defaultText).removeData(metadata.defaultValue).removeData(metadata.placeholderText)},toggle:function(){module.verbose("Toggling menu visibility"),module.is.active()?module.hide():module.show()},show:function(callback){if(callback=$.isFunction(callback)?callback:function(){},!module.can.show()&&module.is.remote()&&(module.debug("No API results retrieved, searching before show"),module.queryRemote(module.get.query(),module.show)),module.can.show()&&!module.is.active()){if(module.debug("Showing dropdown"),!module.has.message()||module.has.maxSelections()||module.has.allResultsFiltered()||module.remove.message(),module.is.allFiltered()){ return!0; }!1!==settings.onShow.call(element)&&module.animate.show((function(){module.can.click()&&module.bind.intent(),module.has.menuSearch()&&module.focusSearch(),module.set.visible(),callback.call(element)}))}},hide:function(callback){callback=$.isFunction(callback)?callback:function(){},module.is.active()&&!module.is.animatingOutward()&&(module.debug("Hiding dropdown"),!1!==settings.onHide.call(element)&&module.animate.hide((function(){module.remove.visible(),callback.call(element)})))},hideOthers:function(){module.verbose("Finding other dropdowns to hide"),$allModules.not($module).has(selector.menu+"."+className.visible).dropdown("hide")},hideMenu:function(){module.verbose("Hiding menu  instantaneously"),module.remove.active(),module.remove.visible(),$menu.transition("hide")},hideSubMenus:function(){var $subMenus=$menu.children(selector.item).find(selector.menu);module.verbose("Hiding sub menus",$subMenus),$subMenus.transition("hide")},bind:{events:function(){hasTouch&&module.bind.touchEvents(),module.bind.keyboardEvents(),module.bind.inputEvents(),module.bind.mouseEvents()},touchEvents:function(){module.debug("Touch device detected binding additional touch events"),module.is.searchSelection()||module.is.single()&&$module.on("touchstart"+eventNamespace,module.event.test.toggle),$menu.on("touchstart"+eventNamespace,selector.item,module.event.item.mouseenter)},keyboardEvents:function(){module.verbose("Binding keyboard events"),$module.on("keydown"+eventNamespace,module.event.keydown),module.has.search()&&$module.on(module.get.inputEvent()+eventNamespace,selector.search,module.event.input),module.is.multiple()&&$document.on("keydown"+elementNamespace,module.event.document.keydown)},inputEvents:function(){module.verbose("Binding input change events"),$module.on("change"+eventNamespace,selector.input,module.event.change)},mouseEvents:function(){module.verbose("Binding mouse events"),module.is.multiple()&&$module.on("click"+eventNamespace,selector.label,module.event.label.click).on("click"+eventNamespace,selector.remove,module.event.remove.click),module.is.searchSelection()?($module.on("mousedown"+eventNamespace,module.event.mousedown).on("mouseup"+eventNamespace,module.event.mouseup).on("mousedown"+eventNamespace,selector.menu,module.event.menu.mousedown).on("mouseup"+eventNamespace,selector.menu,module.event.menu.mouseup).on("click"+eventNamespace,selector.icon,module.event.icon.click).on("focus"+eventNamespace,selector.search,module.event.search.focus).on("click"+eventNamespace,selector.search,module.event.search.focus).on("blur"+eventNamespace,selector.search,module.event.search.blur).on("click"+eventNamespace,selector.text,module.event.text.focus),module.is.multiple()&&$module.on("click"+eventNamespace,module.event.click)):("click"==settings.on?$module.on("click"+eventNamespace,selector.icon,module.event.icon.click).on("click"+eventNamespace,module.event.test.toggle):"hover"==settings.on?$module.on("mouseenter"+eventNamespace,module.delay.show).on("mouseleave"+eventNamespace,module.delay.hide):$module.on(settings.on+eventNamespace,module.toggle),$module.on("mousedown"+eventNamespace,module.event.mousedown).on("mouseup"+eventNamespace,module.event.mouseup).on("focus"+eventNamespace,module.event.focus),module.has.menuSearch()?$module.on("blur"+eventNamespace,selector.search,module.event.search.blur):$module.on("blur"+eventNamespace,module.event.blur)),$menu.on("mouseenter"+eventNamespace,selector.item,module.event.item.mouseenter).on("mouseleave"+eventNamespace,selector.item,module.event.item.mouseleave).on("click"+eventNamespace,selector.item,module.event.item.click)},intent:function(){module.verbose("Binding hide intent event to document"),hasTouch&&$document.on("touchstart"+elementNamespace,module.event.test.touch).on("touchmove"+elementNamespace,module.event.test.touch),$document.on("click"+elementNamespace,module.event.test.hide)}},unbind:{intent:function(){module.verbose("Removing hide intent event from document"),hasTouch&&$document.off("touchstart"+elementNamespace).off("touchmove"+elementNamespace),$document.off("click"+elementNamespace)}},filter:function(query){var searchTerm=void 0!==query?query:module.get.query(),afterFiltered=function(){module.is.multiple()&&module.filterActive(),(query||!query&&0==module.get.activeItem().length)&&module.select.firstUnfiltered(),module.has.allResultsFiltered()?settings.onNoResults.call(element,searchTerm)?settings.allowAdditions?settings.hideAdditions&&(module.verbose("User addition with no menu, setting empty style"),module.set.empty(),module.hideMenu()):(module.verbose("All items filtered, showing message",searchTerm),module.add.message(message.noResults)):(module.verbose("All items filtered, hiding dropdown",searchTerm),module.hideMenu()):(module.remove.empty(),module.remove.message()),settings.allowAdditions&&module.add.userSuggestion(query),module.is.searchSelection()&&module.can.show()&&module.is.focusedOnSearch()&&module.show()};settings.useLabels&&module.has.maxSelections()||(settings.apiSettings?module.can.useAPI()?module.queryRemote(searchTerm,(function(){settings.filterRemoteData&&module.filterItems(searchTerm),afterFiltered()})):module.error(error.noAPI):(module.filterItems(searchTerm),afterFiltered()))},queryRemote:function(query,callback){var apiSettings={errorDuration:!1,cache:"local",throttle:settings.throttle,urlData:{query:query},onError:function(){module.add.message(message.serverError),callback()},onFailure:function(){module.add.message(message.serverError),callback()},onSuccess:function(response){module.remove.message(),module.setup.menu({values:response[fields.remoteValues]}),callback()}};$module.api("get request")||module.setup.api(),apiSettings=$.extend(!0,{},apiSettings,settings.apiSettings),$module.api("setting",apiSettings).api("query")},filterItems:function(query){var searchTerm=void 0!==query?query:module.get.query(),results=null,escapedTerm=module.escape.string(searchTerm),beginsWithRegExp=new RegExp("^"+escapedTerm,"igm");"function"==typeof settings.fullTextSearch?settings.fullTextSearch(searchTerm):module.has.query()&&(results=[],module.verbose("Searching for matching values",searchTerm),$item.each((function(){var text,value,$choice=$(this);if("both"==settings.match||"text"==settings.match){if(-1!==(text=String(module.get.choiceText($choice,!1))).search(beginsWithRegExp)){ return results.push(this),!0; }if("exact"===settings.fullTextSearch&&module.exactSearch(searchTerm,text)){ return results.push(this),!0; }if(!0===settings.fullTextSearch&&module.fuzzySearch(searchTerm,text)){ return results.push(this),!0 }}if("both"==settings.match||"value"==settings.match){if(-1!==(value=String(module.get.choiceValue($choice,text))).search(beginsWithRegExp)){ return results.push(this),!0; }if("exact"===settings.fullTextSearch&&module.exactSearch(searchTerm,value)){ return results.push(this),!0; }if(!0===settings.fullTextSearch&&module.fuzzySearch(searchTerm,value)){ return results.push(this),!0 }}}))),module.debug("Showing only matched items",searchTerm),module.remove.filteredItem(),results&&$item.not(results).addClass(className.filtered)},fuzzySearch:function(query,term){var termLength=term.length,queryLength=query.length;if(query=query.toLowerCase(),term=term.toLowerCase(),queryLength>termLength){ return!1; }if(queryLength===termLength){ return query===term; }search:for(var characterIndex=0,nextCharacterIndex=0;characterIndex<queryLength;characterIndex++){for(var queryCharacter=query.charCodeAt(characterIndex);nextCharacterIndex<termLength;){ if(term.charCodeAt(nextCharacterIndex++)===queryCharacter){ continue search; } }return!1}return!0},exactSearch:function(query,term){return query=query.toLowerCase(),(term=term.toLowerCase()).indexOf(query)>-1},filterActive:function(){settings.useLabels&&$item.filter("."+className.active).addClass(className.filtered)},focusSearch:function(skipHandler){module.has.search()&&!module.is.focusedOnSearch()&&(skipHandler?($module.off("focus"+eventNamespace,selector.search),$search.focus(),$module.on("focus"+eventNamespace,selector.search,module.event.search.focus)):$search.focus())},forceSelection:function(){var $currentlySelected=$item.not(className.filtered).filter("."+className.selected).eq(0),$activeItem=$item.not(className.filtered).filter("."+className.active).eq(0),$selectedItem=$currentlySelected.length>0?$currentlySelected:$activeItem;if($selectedItem.length>0&&!module.is.multiple()){ return module.debug("Forcing partial selection to selected item",$selectedItem),void module.event.item.click.call($selectedItem,{},!0); }settings.allowAdditions?(module.set.selected(module.get.query()),module.remove.searchTerm()):module.remove.searchTerm()},change:{values:function(values){settings.allowAdditions||module.clear(),module.debug("Creating dropdown with specified values",values),module.setup.menu({values:values}),$.each(values,(function(index,item){if(1==item.selected){ return module.debug("Setting initial selection to",item.value),module.set.selected(item.value),!0 }}))}},event:{change:function(){internalChange||(module.debug("Input changed, updating selection"),module.set.selected())},focus:function(){settings.showOnFocus&&!activated&&module.is.hidden()&&!pageLostFocus&&module.show()},blur:function(event){pageLostFocus=document.activeElement===this,activated||pageLostFocus||(module.remove.activeLabel(),module.hide())},mousedown:function(){module.is.searchSelection()?willRefocus=!0:activated=!0},mouseup:function(){module.is.searchSelection()?willRefocus=!1:activated=!1},click:function(event){$(event.target).is($module)&&(module.is.focusedOnSearch()?module.show():module.focusSearch())},search:{focus:function(){activated=!0,module.is.multiple()&&module.remove.activeLabel(),settings.showOnFocus&&module.search()},blur:function(event){pageLostFocus=document.activeElement===this,module.is.searchSelection()&&!willRefocus&&(itemActivated||pageLostFocus||(settings.forceSelection&&module.forceSelection(),module.hide())),willRefocus=!1}},icon:{click:function(event){module.toggle()}},text:{focus:function(event){activated=!0,module.focusSearch()}},input:function(event){(module.is.multiple()||module.is.searchSelection())&&module.set.filtered(),clearTimeout(module.timer),module.timer=setTimeout(module.search,settings.delay.search)},label:{click:function(event){var $label=$(this),$labels=$module.find(selector.label),$activeLabels=$labels.filter("."+className.active),$nextActive=$label.nextAll("."+className.active),$prevActive=$label.prevAll("."+className.active),$range=$nextActive.length>0?$label.nextUntil($nextActive).add($activeLabels).add($label):$label.prevUntil($prevActive).add($activeLabels).add($label);event.shiftKey?($activeLabels.removeClass(className.active),$range.addClass(className.active)):event.ctrlKey?$label.toggleClass(className.active):($activeLabels.removeClass(className.active),$label.addClass(className.active)),settings.onLabelSelect.apply(this,$labels.filter("."+className.active))}},remove:{click:function(){var $label=$(this).parent();$label.hasClass(className.active)?module.remove.activeLabels():module.remove.activeLabels($label)}},test:{toggle:function(event){var toggleBehavior=module.is.multiple()?module.show:module.toggle;module.is.bubbledLabelClick(event)||module.is.bubbledIconClick(event)||module.determine.eventOnElement(event,toggleBehavior)&&event.preventDefault()},touch:function(event){module.determine.eventOnElement(event,(function(){"touchstart"==event.type?module.timer=setTimeout((function(){module.hide()}),settings.delay.touch):"touchmove"==event.type&&clearTimeout(module.timer)})),event.stopPropagation()},hide:function(event){module.determine.eventInModule(event,module.hide)}},select:{mutation:function(mutations){module.debug("<select> modified, recreating menu");var isSelectMutation=!1;$.each(mutations,(function(index,mutation){if($(mutation.target).is("select")||$(mutation.addedNodes).is("select")){ return isSelectMutation=!0,!0 }})),isSelectMutation&&(module.disconnect.selectObserver(),module.refresh(),module.setup.select(),module.set.selected(),module.observe.select())}},menu:{mutation:function(mutations){var mutation=mutations[0],$addedNode=mutation.addedNodes?$(mutation.addedNodes[0]):$(!1),$removedNode=mutation.removedNodes?$(mutation.removedNodes[0]):$(!1),$changedNodes=$addedNode.add($removedNode),isUserAddition=$changedNodes.is(selector.addition)||$changedNodes.closest(selector.addition).length>0,isMessage=$changedNodes.is(selector.message)||$changedNodes.closest(selector.message).length>0;isUserAddition||isMessage?(module.debug("Updating item selector cache"),module.refreshItems()):(module.debug("Menu modified, updating selector cache"),module.refresh())},mousedown:function(){itemActivated=!0},mouseup:function(){itemActivated=!1}},item:{mouseenter:function(event){var $target=$(event.target),$item=$(this),$subMenu=$item.children(selector.menu),$otherMenus=$item.siblings(selector.item).children(selector.menu),hasSubMenu=$subMenu.length>0;!($subMenu.find($target).length>0)&&hasSubMenu&&(clearTimeout(module.itemTimer),module.itemTimer=setTimeout((function(){module.verbose("Showing sub-menu",$subMenu),$.each($otherMenus,(function(){module.animate.hide(!1,$(this))})),module.animate.show(!1,$subMenu)}),settings.delay.show),event.preventDefault())},mouseleave:function(event){var $subMenu=$(this).children(selector.menu);$subMenu.length>0&&(clearTimeout(module.itemTimer),module.itemTimer=setTimeout((function(){module.verbose("Hiding sub-menu",$subMenu),module.animate.hide(!1,$subMenu)}),settings.delay.hide))},click:function(event,skipRefocus){var $choice=$(this),$target=$(event?event.target:""),$subMenu=$choice.find(selector.menu),text=module.get.choiceText($choice),value=module.get.choiceValue($choice,text),hasSubMenu=$subMenu.length>0,isBubbledEvent=$subMenu.find($target).length>0;module.has.menuSearch()&&$(document.activeElement).blur(),isBubbledEvent||hasSubMenu&&!settings.allowCategorySelection||(module.is.searchSelection()&&(settings.allowAdditions&&module.remove.userAddition(),module.remove.searchTerm(),module.is.focusedOnSearch()||1==skipRefocus||module.focusSearch(!0)),settings.useLabels||(module.remove.filteredItem(),module.set.scrollPosition($choice)),module.determine.selectAction.call(this,text,value))}},document:{keydown:function(event){var pressedKey=event.which;if(module.is.inObject(pressedKey,keys)){var $label=$module.find(selector.label),$activeLabel=$label.filter("."+className.active),labelIndex=($activeLabel.data(metadata.value),$label.index($activeLabel)),labelCount=$label.length,hasActiveLabel=$activeLabel.length>0,hasMultipleActive=$activeLabel.length>1,isFirstLabel=0===labelIndex,isLastLabel=labelIndex+1==labelCount,isSearch=module.is.searchSelection(),isFocusedOnSearch=module.is.focusedOnSearch(),isFocused=module.is.focused(),caretAtStart=isFocusedOnSearch&&0===module.get.caretPosition();if(isSearch&&!hasActiveLabel&&!isFocusedOnSearch){ return; }pressedKey==keys.leftArrow?!isFocused&&!caretAtStart||hasActiveLabel?hasActiveLabel&&(event.shiftKey?module.verbose("Adding previous label to selection"):(module.verbose("Selecting previous label"),$label.removeClass(className.active)),isFirstLabel&&!hasMultipleActive?$activeLabel.addClass(className.active):$activeLabel.prev(selector.siblingLabel).addClass(className.active).end(),event.preventDefault()):(module.verbose("Selecting previous label"),$label.last().addClass(className.active)):pressedKey==keys.rightArrow?(isFocused&&!hasActiveLabel&&$label.first().addClass(className.active),hasActiveLabel&&(event.shiftKey?module.verbose("Adding next label to selection"):(module.verbose("Selecting next label"),$label.removeClass(className.active)),isLastLabel?isSearch?isFocusedOnSearch?$label.removeClass(className.active):module.focusSearch():hasMultipleActive?$activeLabel.next(selector.siblingLabel).addClass(className.active):$activeLabel.addClass(className.active):$activeLabel.next(selector.siblingLabel).addClass(className.active),event.preventDefault())):pressedKey==keys.deleteKey||pressedKey==keys.backspace?hasActiveLabel?(module.verbose("Removing active labels"),isLastLabel&&isSearch&&!isFocusedOnSearch&&module.focusSearch(),$activeLabel.last().next(selector.siblingLabel).addClass(className.active),module.remove.activeLabels($activeLabel),event.preventDefault()):caretAtStart&&!hasActiveLabel&&pressedKey==keys.backspace&&(module.verbose("Removing last label on input backspace"),$activeLabel=$label.last().addClass(className.active),module.remove.activeLabels($activeLabel)):$activeLabel.removeClass(className.active)}}},keydown:function(event){var pressedKey=event.which;if(module.is.inObject(pressedKey,keys)){var $nextItem,$currentlySelected=$item.not(selector.unselectable).filter("."+className.selected).eq(0),$activeItem=$menu.children("."+className.active).eq(0),$selectedItem=$currentlySelected.length>0?$currentlySelected:$activeItem,$visibleItems=$selectedItem.length>0?$selectedItem.siblings(":not(."+className.filtered+")").addBack():$menu.children(":not(."+className.filtered+")"),$subMenu=$selectedItem.children(selector.menu),$parentMenu=$selectedItem.closest(selector.menu),inVisibleMenu=$parentMenu.hasClass(className.visible)||$parentMenu.hasClass(className.animating)||$parentMenu.parent(selector.menu).length>0,hasSubMenu=$subMenu.length>0,hasSelectedItem=$selectedItem.length>0,selectedIsSelectable=$selectedItem.not(selector.unselectable).length>0,delimiterPressed=pressedKey==keys.delimiter&&settings.allowAdditions&&module.is.multiple();if(settings.allowAdditions&&settings.hideAdditions&&(pressedKey==keys.enter||delimiterPressed)&&selectedIsSelectable&&(module.verbose("Selecting item from keyboard shortcut",$selectedItem),module.event.item.click.call($selectedItem,event),module.is.searchSelection()&&module.remove.searchTerm()),module.is.visible()){if((pressedKey==keys.enter||delimiterPressed)&&(pressedKey==keys.enter&&hasSelectedItem&&hasSubMenu&&!settings.allowCategorySelection?(module.verbose("Pressed enter on unselectable category, opening sub menu"),pressedKey=keys.rightArrow):selectedIsSelectable&&(module.verbose("Selecting item from keyboard shortcut",$selectedItem),module.event.item.click.call($selectedItem,event),module.is.searchSelection()&&module.remove.searchTerm()),event.preventDefault()),hasSelectedItem&&(pressedKey==keys.leftArrow&&$parentMenu[0]!==$menu[0]&&(module.verbose("Left key pressed, closing sub-menu"),module.animate.hide(!1,$parentMenu),$selectedItem.removeClass(className.selected),$parentMenu.closest(selector.item).addClass(className.selected),event.preventDefault()),pressedKey==keys.rightArrow&&hasSubMenu&&(module.verbose("Right key pressed, opening sub-menu"),module.animate.show(!1,$subMenu),$selectedItem.removeClass(className.selected),$subMenu.find(selector.item).eq(0).addClass(className.selected),event.preventDefault())),pressedKey==keys.upArrow){if($nextItem=hasSelectedItem&&inVisibleMenu?$selectedItem.prevAll(selector.item+":not("+selector.unselectable+")").eq(0):$item.eq(0),$visibleItems.index($nextItem)<0){ return module.verbose("Up key pressed but reached top of current menu"),void event.preventDefault(); }module.verbose("Up key pressed, changing active item"),$selectedItem.removeClass(className.selected),$nextItem.addClass(className.selected),module.set.scrollPosition($nextItem),settings.selectOnKeydown&&module.is.single()&&module.set.selectedItem($nextItem),event.preventDefault()}if(pressedKey==keys.downArrow){if(0===($nextItem=hasSelectedItem&&inVisibleMenu?$nextItem=$selectedItem.nextAll(selector.item+":not("+selector.unselectable+")").eq(0):$item.eq(0)).length){ return module.verbose("Down key pressed but reached bottom of current menu"),void event.preventDefault(); }module.verbose("Down key pressed, changing active item"),$item.removeClass(className.selected),$nextItem.addClass(className.selected),module.set.scrollPosition($nextItem),settings.selectOnKeydown&&module.is.single()&&module.set.selectedItem($nextItem),event.preventDefault()}pressedKey==keys.pageUp&&(module.scrollPage("up"),event.preventDefault()),pressedKey==keys.pageDown&&(module.scrollPage("down"),event.preventDefault()),pressedKey==keys.escape&&(module.verbose("Escape key pressed, closing dropdown"),module.hide())}else { delimiterPressed&&event.preventDefault(),pressedKey!=keys.downArrow||module.is.visible()||(module.verbose("Down key pressed, showing dropdown"),module.show(),event.preventDefault()) }}else { module.has.search()||module.set.selectedLetter(String.fromCharCode(pressedKey)) }}},trigger:{change:function(){var events=document.createEvent("HTMLEvents"),inputElement=$input[0];inputElement&&(module.verbose("Triggering native change event"),events.initEvent("change",!0,!1),inputElement.dispatchEvent(events))}},determine:{selectAction:function(text,value){module.verbose("Determining action",settings.action),$.isFunction(module.action[settings.action])?(module.verbose("Triggering preset action",settings.action,text,value),module.action[settings.action].call(element,text,value,this)):$.isFunction(settings.action)?(module.verbose("Triggering user action",settings.action,text,value),settings.action.call(element,text,value,this)):module.error(error.action,settings.action)},eventInModule:function(event,callback){var $target=$(event.target),inDocument=$target.closest(document.documentElement).length>0,inModule=$target.closest($module).length>0;return callback=$.isFunction(callback)?callback:function(){},inDocument&&!inModule?(module.verbose("Triggering event",callback),callback(),!0):(module.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(event,callback){var $target=$(event.target),$label=$target.closest(selector.siblingLabel),inVisibleDOM=document.body.contains(event.target),notOnLabel=0===$module.find($label).length,notInMenu=0===$target.closest($menu).length;return callback=$.isFunction(callback)?callback:function(){},inVisibleDOM&&notOnLabel&&notInMenu?(module.verbose("Triggering event",callback),callback(),!0):(module.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(text,value,element){if(value=void 0!==value?value:text,module.can.activate($(element))){if(module.set.selected(value,$(element)),module.is.multiple()&&!module.is.allFiltered()){ return; }module.hideAndClear()}},select:function(text,value,element){if(value=void 0!==value?value:text,module.can.activate($(element))){if(module.set.value(value,$(element)),module.is.multiple()&&!module.is.allFiltered()){ return; }module.hideAndClear()}},combo:function(text,value,element){value=void 0!==value?value:text,module.set.selected(value,$(element)),module.hideAndClear()},hide:function(text,value,element){module.set.value(value,text),module.hideAndClear()}},get:{id:function(){return id},defaultText:function(){return $module.data(metadata.defaultText)},defaultValue:function(){return $module.data(metadata.defaultValue)},placeholderText:function(){return"auto"!=settings.placeholder&&"string"==typeof settings.placeholder?settings.placeholder:$module.data(metadata.placeholderText)||""},text:function(){return $text.text()},query:function(){return $.trim($search.val())},searchWidth:function(value){return value=void 0!==value?value:$search.val(),$sizer.text(value),Math.ceil($sizer.width()+1)},selectionCount:function(){var values=module.get.values();return module.is.multiple()?$.isArray(values)?values.length:0:""!==module.get.value()?1:0},transition:function($subMenu){return"auto"==settings.transition?module.is.upward($subMenu)?"slide up":"slide down":settings.transition},userValues:function(){var values=module.get.values();return!!values&&(values=$.isArray(values)?values:[values],$.grep(values,(function(value){return!1===module.get.item(value)})))},uniqueArray:function(array){return $.grep(array,(function(value,index){return $.inArray(value,array)===index}))},caretPosition:function(){var range,rangeLength,input=$search.get(0);return"selectionStart"in input?input.selectionStart:document.selection?(input.focus(),rangeLength=(range=document.selection.createRange()).text.length,range.moveStart("character",-input.value.length),range.text.length-rangeLength):void 0},value:function(){var value=$input.length>0?$input.val():$module.data(metadata.value),isEmptyMultiselect=$.isArray(value)&&1===value.length&&""===value[0];return void 0===value||isEmptyMultiselect?"":value},values:function(){var value=module.get.value();return""===value?"":!module.has.selectInput()&&module.is.multiple()?"string"==typeof value?value.split(settings.delimiter):"":value},remoteValues:function(){var values=module.get.values(),remoteValues=!1;return values&&("string"==typeof values&&(values=[values]),$.each(values,(function(index,value){var name=module.read.remoteData(value);module.verbose("Restoring value from session data",name,value),name&&(remoteValues||(remoteValues={}),remoteValues[value]=name)}))),remoteValues},choiceText:function($choice,preserveHTML){if(preserveHTML=void 0!==preserveHTML?preserveHTML:settings.preserveHTML,$choice){ return $choice.find(selector.menu).length>0&&(module.verbose("Retrieving text of element with sub-menu"),($choice=$choice.clone()).find(selector.menu).remove(),$choice.find(selector.menuIcon).remove()),void 0!==$choice.data(metadata.text)?$choice.data(metadata.text):preserveHTML?$.trim($choice.html()):$.trim($choice.text()) }},choiceValue:function($choice,choiceText){return choiceText=choiceText||module.get.choiceText($choice),!!$choice&&(void 0!==$choice.data(metadata.value)?String($choice.data(metadata.value)):"string"==typeof choiceText?$.trim(choiceText.toLowerCase()):String(choiceText))},inputEvent:function(){var input=$search[0];return!!input&&(void 0!==input.oninput?"input":void 0!==input.onpropertychange?"propertychange":"keyup")},selectValues:function(){var select={values:[]};return $module.find("option").each((function(){var $option=$(this),name=$option.html(),disabled=$option.attr("disabled"),value=void 0!==$option.attr("value")?$option.attr("value"):name;"auto"===settings.placeholder&&""===value?select.placeholder=name:select.values.push({name:name,value:value,disabled:disabled})})),settings.placeholder&&"auto"!==settings.placeholder&&(module.debug("Setting placeholder value to",settings.placeholder),select.placeholder=settings.placeholder),settings.sortSelect?(select.values.sort((function(a,b){return a.name>b.name?1:-1})),module.debug("Retrieved and sorted values from select",select)):module.debug("Retrieved values from select",select),select},activeItem:function(){return $item.filter("."+className.active)},selectedItem:function(){var $selectedItem=$item.not(selector.unselectable).filter("."+className.selected);return $selectedItem.length>0?$selectedItem:$item.eq(0)},itemWithAdditions:function(value){var $items=module.get.item(value),$userItems=module.create.userChoice(value);return $userItems&&$userItems.length>0&&($items=$items.length>0?$items.add($userItems):$userItems),$items},item:function(value,strict){var shouldSearch,isMultiple,$selectedItem=!1;return value=void 0!==value?value:void 0!==module.get.values()?module.get.values():module.get.text(),shouldSearch=isMultiple?value.length>0:void 0!==value&&null!==value,isMultiple=module.is.multiple()&&$.isArray(value),strict=""===value||0===value||(strict||!1),shouldSearch&&$item.each((function(){var $choice=$(this),optionText=module.get.choiceText($choice),optionValue=module.get.choiceValue($choice,optionText);if(null!==optionValue&&void 0!==optionValue){ if(isMultiple){ -1===$.inArray(String(optionValue),value)&&-1===$.inArray(optionText,value)||($selectedItem=$selectedItem?$selectedItem.add($choice):$choice); }else if(strict){if(module.verbose("Ambiguous dropdown value using strict type check",$choice,value),optionValue===value||optionText===value){ return $selectedItem=$choice,!0 }}else if(String(optionValue)==String(value)||optionText==value){ return module.verbose("Found select item by value",optionValue,value),$selectedItem=$choice,!0 } }})),$selectedItem}},check:{maxSelections:function(selectionCount){return!settings.maxSelections||((selectionCount=void 0!==selectionCount?selectionCount:module.get.selectionCount())>=settings.maxSelections?(module.debug("Maximum selection count reached"),settings.useLabels&&($item.addClass(className.filtered),module.add.message(message.maxSelections)),!0):(module.verbose("No longer at maximum selection count"),module.remove.message(),module.remove.filteredItem(),module.is.searchSelection()&&module.filterItems(),!1))}},restore:{defaults:function(){module.clear(),module.restore.defaultText(),module.restore.defaultValue()},defaultText:function(){var defaultText=module.get.defaultText();defaultText===module.get.placeholderText?(module.debug("Restoring default placeholder text",defaultText),module.set.placeholderText(defaultText)):(module.debug("Restoring default text",defaultText),module.set.text(defaultText))},placeholderText:function(){module.set.placeholderText()},defaultValue:function(){var defaultValue=module.get.defaultValue();void 0!==defaultValue&&(module.debug("Restoring default value",defaultValue),""!==defaultValue?(module.set.value(defaultValue),module.set.selected()):(module.remove.activeItem(),module.remove.selectedItem()))},labels:function(){settings.allowAdditions&&(settings.useLabels||(module.error(error.labels),settings.useLabels=!0),module.debug("Restoring selected values"),module.create.userLabels()),module.check.maxSelections()},selected:function(){module.restore.values(),module.is.multiple()?(module.debug("Restoring previously selected values and labels"),module.restore.labels()):module.debug("Restoring previously selected values")},values:function(){module.set.initialLoad(),settings.apiSettings&&settings.saveRemoteData&&module.get.remoteValues()?module.restore.remoteValues():module.set.selected(),module.remove.initialLoad()},remoteValues:function(){var values=module.get.remoteValues();module.debug("Recreating selected from session data",values),values&&(module.is.single()?$.each(values,(function(value,name){module.set.text(name)})):$.each(values,(function(value,name){module.add.label(value,name)})))}},read:{remoteData:function(value){var name;if(void 0!==window.Storage){ return void 0!==(name=sessionStorage.getItem(value))&&name; }module.error(error.noStorage)}},save:{defaults:function(){module.save.defaultText(),module.save.placeholderText(),module.save.defaultValue()},defaultValue:function(){var value=module.get.value();module.verbose("Saving default value as",value),$module.data(metadata.defaultValue,value)},defaultText:function(){var text=module.get.text();module.verbose("Saving default text as",text),$module.data(metadata.defaultText,text)},placeholderText:function(){var text;!1!==settings.placeholder&&$text.hasClass(className.placeholder)&&(text=module.get.text(),module.verbose("Saving placeholder text as",text),$module.data(metadata.placeholderText,text))},remoteData:function(name,value){void 0!==window.Storage?(module.verbose("Saving remote data to session storage",value,name),sessionStorage.setItem(value,name)):module.error(error.noStorage)}},clear:function(){module.is.multiple()&&settings.useLabels?module.remove.labels():(module.remove.activeItem(),module.remove.selectedItem()),module.set.placeholderText(),module.clearValue()},clearValue:function(){module.set.value("")},scrollPage:function(direction,$selectedItem){var $nextSelectedItem,elementIndex,$currentItem=$selectedItem||module.get.selectedItem(),$menu=$currentItem.closest(selector.menu),menuHeight=$menu.outerHeight(),currentScroll=$menu.scrollTop(),itemHeight=$item.eq(0).outerHeight(),itemsPerPage=Math.floor(menuHeight/itemHeight),newScroll=($menu.prop("scrollHeight"),"up"==direction?currentScroll-itemHeight*itemsPerPage:currentScroll+itemHeight*itemsPerPage),$selectableItem=$item.not(selector.unselectable);elementIndex="up"==direction?$selectableItem.index($currentItem)-itemsPerPage:$selectableItem.index($currentItem)+itemsPerPage,($nextSelectedItem=("up"==direction?elementIndex>=0:elementIndex<$selectableItem.length)?$selectableItem.eq(elementIndex):"up"==direction?$selectableItem.first():$selectableItem.last()).length>0&&(module.debug("Scrolling page",direction,$nextSelectedItem),$currentItem.removeClass(className.selected),$nextSelectedItem.addClass(className.selected),settings.selectOnKeydown&&module.is.single()&&module.set.selectedItem($nextSelectedItem),$menu.scrollTop(newScroll))},set:{filtered:function(){var isMultiple=module.is.multiple(),isSearch=module.is.searchSelection(),isSearchMultiple=isMultiple&&isSearch,searchValue=isSearch?module.get.query():"",hasSearchValue="string"==typeof searchValue&&searchValue.length>0,searchWidth=module.get.searchWidth(),valueIsSet=""!==searchValue;isMultiple&&hasSearchValue&&(module.verbose("Adjusting input width",searchWidth,settings.glyphWidth),$search.css("width",searchWidth)),hasSearchValue||isSearchMultiple&&valueIsSet?(module.verbose("Hiding placeholder text"),$text.addClass(className.filtered)):(!isMultiple||isSearchMultiple&&!valueIsSet)&&(module.verbose("Showing placeholder text"),$text.removeClass(className.filtered))},empty:function(){$module.addClass(className.empty)},loading:function(){$module.addClass(className.loading)},placeholderText:function(text){text=text||module.get.placeholderText(),module.debug("Setting placeholder text",text),module.set.text(text),$text.addClass(className.placeholder)},tabbable:function(){module.is.searchSelection()?(module.debug("Added tabindex to searchable dropdown"),$search.val("").attr("tabindex",0),$menu.attr("tabindex",-1)):(module.debug("Added tabindex to dropdown"),void 0===$module.attr("tabindex")&&($module.attr("tabindex",0),$menu.attr("tabindex",-1)))},initialLoad:function(){module.verbose("Setting initial load"),initialLoad=!0},activeItem:function($item){settings.allowAdditions&&$item.filter(selector.addition).length>0?$item.addClass(className.filtered):$item.addClass(className.active)},partialSearch:function(text){var length=module.get.query().length;$search.val(text.substr(0,length))},scrollPosition:function($item,forceScroll){var $menu,hasActive,offset,menuScroll,abovePage,belowPage;$menu=($item=$item||module.get.selectedItem()).closest(selector.menu),hasActive=$item&&$item.length>0,forceScroll=void 0!==forceScroll&&forceScroll,$item&&$menu.length>0&&hasActive&&($item.position().top,$menu.addClass(className.loading),offset=(menuScroll=$menu.scrollTop())-$menu.offset().top+$item.offset().top,forceScroll||(belowPage=menuScroll+$menu.height()<offset+5,abovePage=offset-5<menuScroll),module.debug("Scrolling to active item",offset),(forceScroll||abovePage||belowPage)&&$menu.scrollTop(offset),$menu.removeClass(className.loading))},text:function(text){"select"!==settings.action&&("combo"==settings.action?(module.debug("Changing combo button text",text,$combo),settings.preserveHTML?$combo.html(text):$combo.text(text)):(text!==module.get.placeholderText()&&$text.removeClass(className.placeholder),module.debug("Changing text",text,$text),$text.removeClass(className.filtered),settings.preserveHTML?$text.html(text):$text.text(text)))},selectedItem:function($item){var value=module.get.choiceValue($item),searchText=module.get.choiceText($item,!1),text=module.get.choiceText($item,!0);module.debug("Setting user selection to item",$item),module.remove.activeItem(),module.set.partialSearch(searchText),module.set.activeItem($item),module.set.selected(value,$item),module.set.text(text)},selectedLetter:function(letter){var $nextItem,$selectedItem=$item.filter("."+className.selected),$nextValue=!1;$selectedItem.length>0&&module.has.firstLetter($selectedItem,letter)&&($nextItem=$selectedItem.nextAll($item).eq(0),module.has.firstLetter($nextItem,letter)&&($nextValue=$nextItem)),$nextValue||$item.each((function(){if(module.has.firstLetter($(this),letter)){ return $nextValue=$(this),!1 }})),$nextValue&&(module.verbose("Scrolling to next value with letter",letter),module.set.scrollPosition($nextValue),$selectedItem.removeClass(className.selected),$nextValue.addClass(className.selected),settings.selectOnKeydown&&module.is.single()&&module.set.selectedItem($nextValue))},direction:function($menu){"auto"==settings.direction?(module.remove.upward(),module.can.openDownward($menu)?module.remove.upward($menu):module.set.upward($menu),module.is.leftward($menu)||module.can.openRightward($menu)||module.set.leftward($menu)):"upward"==settings.direction&&module.set.upward($menu)},upward:function($currentMenu){($currentMenu||$module).addClass(className.upward)},leftward:function($currentMenu){($currentMenu||$menu).addClass(className.leftward)},value:function(value,text,$selected){var escapedValue=module.escape.value(value),hasInput=$input.length>0,currentValue=module.get.values(),stringValue=void 0!==value?String(value):value;if(hasInput){if(!settings.allowReselection&&stringValue==currentValue&&(module.verbose("Skipping value update already same value",value,currentValue),!module.is.initialLoad())){ return; }module.is.single()&&module.has.selectInput()&&module.can.extendSelect()&&(module.debug("Adding user option",value),module.add.optionValue(value)),module.debug("Updating input value",escapedValue,currentValue),internalChange=!0,$input.val(escapedValue),!1===settings.fireOnInit&&module.is.initialLoad()?module.debug("Input native change event ignored on initial load"):module.trigger.change(),internalChange=!1}else { module.verbose("Storing value in metadata",escapedValue,$input),escapedValue!==currentValue&&$module.data(metadata.value,stringValue); }!1===settings.fireOnInit&&module.is.initialLoad()?module.verbose("No callback on initial load",settings.onChange):settings.onChange.call(element,value,text,$selected)},active:function(){$module.addClass(className.active)},multiple:function(){$module.addClass(className.multiple)},visible:function(){$module.addClass(className.visible)},exactly:function(value,$selectedItem){module.debug("Setting selected to exact values"),module.clear(),module.set.selected(value,$selectedItem)},selected:function(value,$selectedItem){var isMultiple=module.is.multiple();($selectedItem=settings.allowAdditions?$selectedItem||module.get.itemWithAdditions(value):$selectedItem||module.get.item(value))&&(module.debug("Setting selected menu item to",$selectedItem),module.is.multiple()&&module.remove.searchWidth(),module.is.single()?(module.remove.activeItem(),module.remove.selectedItem()):settings.useLabels&&module.remove.selectedItem(),$selectedItem.each((function(){var $selected=$(this),selectedText=module.get.choiceText($selected),selectedValue=module.get.choiceValue($selected,selectedText),isFiltered=$selected.hasClass(className.filtered),isActive=$selected.hasClass(className.active),isUserValue=$selected.hasClass(className.addition),shouldAnimate=isMultiple&&1==$selectedItem.length;isMultiple?!isActive||isUserValue?(settings.apiSettings&&settings.saveRemoteData&&module.save.remoteData(selectedText,selectedValue),settings.useLabels?(module.add.label(selectedValue,selectedText,shouldAnimate),module.add.value(selectedValue,selectedText,$selected),module.set.activeItem($selected),module.filterActive(),module.select.nextAvailable($selectedItem)):(module.add.value(selectedValue,selectedText,$selected),module.set.text(module.add.variables(message.count)),module.set.activeItem($selected))):isFiltered||(module.debug("Selected active value, removing label"),module.remove.selected(selectedValue)):(settings.apiSettings&&settings.saveRemoteData&&module.save.remoteData(selectedText,selectedValue),module.set.text(selectedText),module.set.value(selectedValue,selectedText,$selected),$selected.addClass(className.active).addClass(className.selected))})))}},add:{label:function(value,text,shouldAnimate){var $label,$next=module.is.searchSelection()?$search:$text,escapedValue=module.escape.value(value);$label=$("<a />").addClass(className.label).attr("data-"+metadata.value,escapedValue).html(templates.label(escapedValue,text)),$label=settings.onLabelCreate.call($label,escapedValue,text),module.has.value(value)?module.debug("User selection already exists, skipping",escapedValue):(settings.label.variation&&$label.addClass(settings.label.variation),!0===shouldAnimate?(module.debug("Animating in label",$label),$label.addClass(className.hidden).insertBefore($next).transition(settings.label.transition,settings.label.duration)):(module.debug("Adding selection label",$label),$label.insertBefore($next)))},message:function(message){var $message=$menu.children(selector.message),html=settings.templates.message(module.add.variables(message));$message.length>0?$message.html(html):$message=$("<div/>").html(html).addClass(className.message).appendTo($menu)},optionValue:function(value){var escapedValue=module.escape.value(value);$input.find('option[value="'+module.escape.string(escapedValue)+'"]').length>0||(module.disconnect.selectObserver(),module.is.single()&&(module.verbose("Removing previous user addition"),$input.find("option."+className.addition).remove()),$("<option/>").prop("value",escapedValue).addClass(className.addition).html(value).appendTo($input),module.verbose("Adding user addition as an <option>",value),module.observe.select())},userSuggestion:function(value){var html,$addition=$menu.children(selector.addition),$existingItem=module.get.item(value),alreadyHasValue=$existingItem&&$existingItem.not(selector.addition).length,hasUserSuggestion=$addition.length>0;settings.useLabels&&module.has.maxSelections()||(""===value||alreadyHasValue?$addition.remove():(hasUserSuggestion?($addition.data(metadata.value,value).data(metadata.text,value).attr("data-"+metadata.value,value).attr("data-"+metadata.text,value).removeClass(className.filtered),settings.hideAdditions||(html=settings.templates.addition(module.add.variables(message.addResult,value)),$addition.html(html)),module.verbose("Replacing user suggestion with new value",$addition)):(($addition=module.create.userChoice(value)).prependTo($menu),module.verbose("Adding item choice to menu corresponding with user choice addition",$addition)),settings.hideAdditions&&!module.is.allFiltered()||$addition.addClass(className.selected).siblings().removeClass(className.selected),module.refreshItems()))},variables:function(message,term){var count,query,hasCount=-1!==message.search("{count}"),hasMaxCount=-1!==message.search("{maxCount}"),hasTerm=-1!==message.search("{term}");return module.verbose("Adding templated variables to message",message),hasCount&&(count=module.get.selectionCount(),message=message.replace("{count}",count)),hasMaxCount&&(count=module.get.selectionCount(),message=message.replace("{maxCount}",settings.maxSelections)),hasTerm&&(query=term||module.get.query(),message=message.replace("{term}",query)),message},value:function(addedValue,addedText,$selectedItem){var newValue,currentValue=module.get.values();module.has.value(addedValue)?module.debug("Value already selected"):""!==addedValue?($.isArray(currentValue)?(newValue=currentValue.concat([addedValue]),newValue=module.get.uniqueArray(newValue)):newValue=[addedValue],module.has.selectInput()?module.can.extendSelect()&&(module.debug("Adding value to select",addedValue,newValue,$input),module.add.optionValue(addedValue)):(newValue=newValue.join(settings.delimiter),module.debug("Setting hidden input to delimited value",newValue,$input)),!1===settings.fireOnInit&&module.is.initialLoad()?module.verbose("Skipping onadd callback on initial load",settings.onAdd):settings.onAdd.call(element,addedValue,addedText,$selectedItem),module.set.value(newValue,addedValue,addedText,$selectedItem),module.check.maxSelections()):module.debug("Cannot select blank values from multiselect")}},remove:{active:function(){$module.removeClass(className.active)},activeLabel:function(){$module.find(selector.label).removeClass(className.active)},empty:function(){$module.removeClass(className.empty)},loading:function(){$module.removeClass(className.loading)},initialLoad:function(){initialLoad=!1},upward:function($currentMenu){($currentMenu||$module).removeClass(className.upward)},leftward:function($currentMenu){($currentMenu||$menu).removeClass(className.leftward)},visible:function(){$module.removeClass(className.visible)},activeItem:function(){$item.removeClass(className.active)},filteredItem:function(){settings.useLabels&&module.has.maxSelections()||(settings.useLabels&&module.is.multiple()?$item.not("."+className.active).removeClass(className.filtered):$item.removeClass(className.filtered),module.remove.empty())},optionValue:function(value){var escapedValue=module.escape.value(value),$option=$input.find('option[value="'+module.escape.string(escapedValue)+'"]');$option.length>0&&$option.hasClass(className.addition)&&(selectObserver&&(selectObserver.disconnect(),module.verbose("Temporarily disconnecting mutation observer")),$option.remove(),module.verbose("Removing user addition as an <option>",escapedValue),selectObserver&&selectObserver.observe($input[0],{childList:!0,subtree:!0}))},message:function(){$menu.children(selector.message).remove()},searchWidth:function(){$search.css("width","")},searchTerm:function(){module.verbose("Cleared search term"),$search.val(""),module.set.filtered()},userAddition:function(){$item.filter(selector.addition).remove()},selected:function(value,$selectedItem){if(!($selectedItem=settings.allowAdditions?$selectedItem||module.get.itemWithAdditions(value):$selectedItem||module.get.item(value))){ return!1; }$selectedItem.each((function(){var $selected=$(this),selectedText=module.get.choiceText($selected),selectedValue=module.get.choiceValue($selected,selectedText);module.is.multiple()?settings.useLabels?(module.remove.value(selectedValue,selectedText,$selected),module.remove.label(selectedValue)):(module.remove.value(selectedValue,selectedText,$selected),0===module.get.selectionCount()?module.set.placeholderText():module.set.text(module.add.variables(message.count))):module.remove.value(selectedValue,selectedText,$selected),$selected.removeClass(className.filtered).removeClass(className.active),settings.useLabels&&$selected.removeClass(className.selected)}))},selectedItem:function(){$item.removeClass(className.selected)},value:function(removedValue,removedText,$removedItem){var newValue,values=module.get.values();module.has.selectInput()?(module.verbose("Input is <select> removing selected option",removedValue),newValue=module.remove.arrayValue(removedValue,values),module.remove.optionValue(removedValue)):(module.verbose("Removing from delimited values",removedValue),newValue=(newValue=module.remove.arrayValue(removedValue,values)).join(settings.delimiter)),!1===settings.fireOnInit&&module.is.initialLoad()?module.verbose("No callback on initial load",settings.onRemove):settings.onRemove.call(element,removedValue,removedText,$removedItem),module.set.value(newValue,removedText,$removedItem),module.check.maxSelections()},arrayValue:function(removedValue,values){return $.isArray(values)||(values=[values]),values=$.grep(values,(function(value){return removedValue!=value})),module.verbose("Removed value from delimited string",removedValue,values),values},label:function(value,shouldAnimate){var $removedLabel=$module.find(selector.label).filter("[data-"+metadata.value+'="'+module.escape.string(value)+'"]');module.verbose("Removing label",$removedLabel),$removedLabel.remove()},activeLabels:function($activeLabels){$activeLabels=$activeLabels||$module.find(selector.label).filter("."+className.active),module.verbose("Removing active label selections",$activeLabels),module.remove.labels($activeLabels)},labels:function($labels){$labels=$labels||$module.find(selector.label),module.verbose("Removing labels",$labels),$labels.each((function(){var $label=$(this),value=$label.data(metadata.value),stringValue=void 0!==value?String(value):value,isUserValue=module.is.userValue(stringValue);!1!==settings.onLabelRemove.call($label,value)?(module.remove.message(),isUserValue?(module.remove.value(stringValue),module.remove.label(stringValue)):module.remove.selected(stringValue)):module.debug("Label remove callback cancelled removal")}))},tabbable:function(){module.is.searchSelection()?(module.debug("Searchable dropdown initialized"),$search.removeAttr("tabindex"),$menu.removeAttr("tabindex")):(module.debug("Simple selection dropdown initialized"),$module.removeAttr("tabindex"),$menu.removeAttr("tabindex"))}},has:{menuSearch:function(){return module.has.search()&&$search.closest($menu).length>0},search:function(){return $search.length>0},sizer:function(){return $sizer.length>0},selectInput:function(){return $input.is("select")},minCharacters:function(searchTerm){return!settings.minCharacters||(searchTerm=void 0!==searchTerm?String(searchTerm):String(module.get.query())).length>=settings.minCharacters},firstLetter:function($item,letter){var text;return!(!$item||0===$item.length||"string"!=typeof letter)&&(text=module.get.choiceText($item,!1),(letter=letter.toLowerCase())==String(text).charAt(0).toLowerCase())},input:function(){return $input.length>0},items:function(){return $item.length>0},menu:function(){return $menu.length>0},message:function(){return 0!==$menu.children(selector.message).length},label:function(value){var escapedValue=module.escape.value(value);return $module.find(selector.label).filter("[data-"+metadata.value+'="'+module.escape.string(escapedValue)+'"]').length>0},maxSelections:function(){return settings.maxSelections&&module.get.selectionCount()>=settings.maxSelections},allResultsFiltered:function(){var $normalResults=$item.not(selector.addition);return $normalResults.filter(selector.unselectable).length===$normalResults.length},userSuggestion:function(){return $menu.children(selector.addition).length>0},query:function(){return""!==module.get.query()},value:function(value){return settings.ignoreCase?module.has.valueIgnoringCase(value):module.has.valueMatchingCase(value)},valueMatchingCase:function(value){var values=module.get.values();return!!($.isArray(values)?values&&-1!==$.inArray(value,values):values==value)},valueIgnoringCase:function(value){var values=module.get.values(),hasValue=!1;return $.isArray(values)||(values=[values]),$.each(values,(function(index,existingValue){if(String(value).toLowerCase()==String(existingValue).toLowerCase()){ return hasValue=!0,!1 }})),hasValue}},is:{active:function(){return $module.hasClass(className.active)},animatingInward:function(){return $menu.transition("is inward")},animatingOutward:function(){return $menu.transition("is outward")},bubbledLabelClick:function(event){return $(event.target).is("select, input")&&$module.closest("label").length>0},bubbledIconClick:function(event){return $(event.target).closest($icon).length>0},alreadySetup:function(){return $module.is("select")&&void 0!==$module.parent(selector.dropdown).data(moduleNamespace)&&0===$module.prev().length},animating:function($subMenu){return $subMenu?$subMenu.transition&&$subMenu.transition("is animating"):$menu.transition&&$menu.transition("is animating")},leftward:function($subMenu){return($subMenu||$menu).hasClass(className.leftward)},disabled:function(){return $module.hasClass(className.disabled)},focused:function(){return document.activeElement===$module[0]},focusedOnSearch:function(){return document.activeElement===$search[0]},allFiltered:function(){return(module.is.multiple()||module.has.search())&&!(0==settings.hideAdditions&&module.has.userSuggestion())&&!module.has.message()&&module.has.allResultsFiltered()},hidden:function($subMenu){return!module.is.visible($subMenu)},initialLoad:function(){return initialLoad},inObject:function(needle,object){var found=!1;return $.each(object,(function(index,property){if(property==needle){ return found=!0,!0 }})),found},multiple:function(){return $module.hasClass(className.multiple)},remote:function(){return settings.apiSettings&&module.can.useAPI()},single:function(){return!module.is.multiple()},selectMutation:function(mutations){var selectChanged=!1;return $.each(mutations,(function(index,mutation){if(mutation.target&&$(mutation.target).is("select")){ return selectChanged=!0,!0 }})),selectChanged},search:function(){return $module.hasClass(className.search)},searchSelection:function(){return module.has.search()&&1===$search.parent(selector.dropdown).length},selection:function(){return $module.hasClass(className.selection)},userValue:function(value){return-1!==$.inArray(value,module.get.userValues())},upward:function($menu){return($menu||$module).hasClass(className.upward)},visible:function($subMenu){return $subMenu?$subMenu.hasClass(className.visible):$menu.hasClass(className.visible)},verticallyScrollableContext:function(){var overflowY=$context.get(0)!==window&&$context.css("overflow-y");return"auto"==overflowY||"scroll"==overflowY},horizontallyScrollableContext:function(){var overflowX=$context.get(0)!==window&&$context.css("overflow-X");return"auto"==overflowX||"scroll"==overflowX}},can:{activate:function($item){return!!settings.useLabels||(!module.has.maxSelections()||!(!module.has.maxSelections()||!$item.hasClass(className.active)))},openDownward:function($subMenu){var onScreen,calculations,$currentMenu=$subMenu||$menu,canOpenDownward=!0;return $currentMenu.addClass(className.loading),calculations={context:{offset:$context.get(0)===window?{top:0,left:0}:$context.offset(),scrollTop:$context.scrollTop(),height:$context.outerHeight()},menu:{offset:$currentMenu.offset(),height:$currentMenu.outerHeight()}},module.is.verticallyScrollableContext()&&(calculations.menu.offset.top+=calculations.context.scrollTop),(onScreen={above:calculations.context.scrollTop<=calculations.menu.offset.top-calculations.context.offset.top-calculations.menu.height,below:calculations.context.scrollTop+calculations.context.height>=calculations.menu.offset.top-calculations.context.offset.top+calculations.menu.height}).below?(module.verbose("Dropdown can fit in context downward",onScreen),canOpenDownward=!0):onScreen.below||onScreen.above?(module.verbose("Dropdown cannot fit below, opening upward",onScreen),canOpenDownward=!1):(module.verbose("Dropdown cannot fit in either direction, favoring downward",onScreen),canOpenDownward=!0),$currentMenu.removeClass(className.loading),canOpenDownward},openRightward:function($subMenu){var isOffscreenRight,calculations,$currentMenu=$subMenu||$menu,canOpenRightward=!0;return $currentMenu.addClass(className.loading),calculations={context:{offset:$context.get(0)===window?{top:0,left:0}:$context.offset(),scrollLeft:$context.scrollLeft(),width:$context.outerWidth()},menu:{offset:$currentMenu.offset(),width:$currentMenu.outerWidth()}},module.is.horizontallyScrollableContext()&&(calculations.menu.offset.left+=calculations.context.scrollLeft),(isOffscreenRight=calculations.menu.offset.left-calculations.context.offset.left+calculations.menu.width>=calculations.context.scrollLeft+calculations.context.width)&&(module.verbose("Dropdown cannot fit in context rightward",isOffscreenRight),canOpenRightward=!1),$currentMenu.removeClass(className.loading),canOpenRightward},click:function(){return hasTouch||"click"==settings.on},extendSelect:function(){return settings.allowAdditions||settings.apiSettings},show:function(){return!module.is.disabled()&&(module.has.items()||module.has.message())},useAPI:function(){return void 0!==$.fn.api}},animate:{show:function(callback,$subMenu){var transition,$currentMenu=$subMenu||$menu,start=$subMenu?function(){}:function(){module.hideSubMenus(),module.hideOthers(),module.set.active()};callback=$.isFunction(callback)?callback:function(){},module.verbose("Doing menu show animation",$currentMenu),module.set.direction($subMenu),transition=module.get.transition($subMenu),module.is.selection()&&module.set.scrollPosition(module.get.selectedItem(),!0),(module.is.hidden($currentMenu)||module.is.animating($currentMenu))&&("none"==transition?(start(),$currentMenu.transition("show"),callback.call(element)):void 0!==$.fn.transition&&$module.transition("is supported")?$currentMenu.transition({animation:transition+" in",debug:settings.debug,verbose:settings.verbose,duration:settings.duration,queue:!0,onStart:start,onComplete:function(){callback.call(element)}}):module.error(error.noTransition,transition))},hide:function(callback,$subMenu){var $currentMenu=$subMenu||$menu,start=($subMenu?settings.duration:settings.duration,$subMenu?function(){}:function(){module.can.click()&&module.unbind.intent(),module.remove.active()}),transition=module.get.transition($subMenu);callback=$.isFunction(callback)?callback:function(){},(module.is.visible($currentMenu)||module.is.animating($currentMenu))&&(module.verbose("Doing menu hide animation",$currentMenu),"none"==transition?(start(),$currentMenu.transition("hide"),callback.call(element)):void 0!==$.fn.transition&&$module.transition("is supported")?$currentMenu.transition({animation:transition+" out",duration:settings.duration,debug:settings.debug,verbose:settings.verbose,queue:!1,onStart:start,onComplete:function(){callback.call(element)}}):module.error(error.transition))}},hideAndClear:function(){module.remove.searchTerm(),module.has.maxSelections()||(module.has.search()?module.hide((function(){module.remove.filteredItem()})):module.hide())},delay:{show:function(){module.verbose("Delaying show event to ensure user intent"),clearTimeout(module.timer),module.timer=setTimeout(module.show,settings.delay.show)},hide:function(){module.verbose("Delaying hide event to ensure user intent"),clearTimeout(module.timer),module.timer=setTimeout(module.hide,settings.delay.hide)}},escape:{value:function(value){var multipleValues=$.isArray(value),stringValue="string"==typeof value,isUnparsable=!stringValue&&!multipleValues,hasQuotes=stringValue&&-1!==value.search(regExp.quote),values=[];return isUnparsable||!hasQuotes?value:(module.debug("Encoding quote values for use in select",value),multipleValues?($.each(value,(function(index,value){values.push(value.replace(regExp.quote,"&quot;"))})),values):value.replace(regExp.quote,"&quot;"))},string:function(text){return(text=String(text)).replace(regExp.escape,"\\$&")}},setting:function(name,value){if(module.debug("Changing setting",name,value),$.isPlainObject(name)){ $.extend(!0,settings,name); }else{if(void 0===value){ return settings[name]; }$.isPlainObject(settings[name])?$.extend(!0,settings[name],value):settings[name]=value}},internal:function(name,value){if($.isPlainObject(name)){ $.extend(!0,module,name); }else{if(void 0===value){ return module[name]; }module[name]=value}},debug:function(){!settings.silent&&settings.debug&&(settings.performance?module.performance.log(arguments):(module.debug=Function.prototype.bind.call(console.info,console,settings.name+":"),module.debug.apply(console,arguments)))},verbose:function(){!settings.silent&&settings.verbose&&settings.debug&&(settings.performance?module.performance.log(arguments):(module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":"),module.verbose.apply(console,arguments)))},error:function(){settings.silent||(module.error=Function.prototype.bind.call(console.error,console,settings.name+":"),module.error.apply(console,arguments))},performance:{log:function(message){var currentTime,executionTime;settings.performance&&(executionTime=(currentTime=(new Date).getTime())-(time||currentTime),time=currentTime,performance.push({Name:message[0],Arguments:[].slice.call(message,1)||"",Element:element,"Execution Time":executionTime})),clearTimeout(module.performance.timer),module.performance.timer=setTimeout(module.performance.display,500)},display:function(){var title=settings.name+":",totalTime=0;time=!1,clearTimeout(module.performance.timer),$.each(performance,(function(index,data){totalTime+=data["Execution Time"]})),title+=" "+totalTime+"ms",moduleSelector&&(title+=" '"+moduleSelector+"'"),(void 0!==console.group||void 0!==console.table)&&performance.length>0&&(console.groupCollapsed(title),console.table?console.table(performance):$.each(performance,(function(index,data){console.log(data.Name+": "+data["Execution Time"]+"ms")})),console.groupEnd()),performance=[]}},invoke:function(query,passedArguments,context){var maxDepth,found,response,object=instance;return passedArguments=passedArguments||queryArguments,context=element||context,"string"==typeof query&&void 0!==object&&(query=query.split(/[\. ]/),maxDepth=query.length-1,$.each(query,(function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){ object=object[camelCaseValue]; }else{if(void 0!==object[camelCaseValue]){ return found=object[camelCaseValue],!1; }if(!$.isPlainObject(object[value])||depth==maxDepth){ return void 0!==object[value]?(found=object[value],!1):(module.error(error.method,query),!1); }object=object[value]}}))),$.isFunction(found)?response=found.apply(context,passedArguments):void 0!==found&&(response=found),$.isArray(returnedValue)?returnedValue.push(response):void 0!==returnedValue?returnedValue=[returnedValue,response]:void 0!==response&&(returnedValue=response),found}},methodInvoked?(void 0===instance&&module.initialize(),module.invoke(query)):(void 0!==instance&&instance.invoke("destroy"),module.initialize())})),void 0!==returnedValue?returnedValue:$allModules},$.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:window,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,ignoreCase:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(value,text,$selected){},onAdd:function(value,text,$selected){},onRemove:function(value,text,$selected){},onLabelSelect:function($selectedLabels){},onLabelCreate:function(value,text){return $(this)},onLabelRemove:function(value){return!0},onNoResults:function(searchTerm){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},$.fn.dropdown.settings.templates={dropdown:function(select){var placeholder=select.placeholder||!1,html=(select.values,"");return html+='<i class="dropdown icon"></i>',select.placeholder?html+='<div class="default text">'+placeholder+"</div>":html+='<div class="text"></div>',html+='<div class="menu">',$.each(select.values,(function(index,option){html+=option.disabled?'<div class="disabled item" data-value="'+option.value+'">'+option.name+"</div>":'<div class="item" data-value="'+option.value+'">'+option.name+"</div>"})),html+="</div>"},menu:function(response,fields){var values=response[fields.values]||{},html="";return $.each(values,(function(index,option){var maybeText=option[fields.text]?'data-text="'+option[fields.text]+'"':"",maybeDisabled=option[fields.disabled]?"disabled ":"";html+='<div class="'+maybeDisabled+'item" data-value="'+option[fields.value]+'"'+maybeText+">",html+=option[fields.name],html+="</div>"})),html},label:function(value,text){return text+'<i class="delete icon"></i>'},message:function(message){return message},addition:function(choice){return choice}}})(jQuery,window,document),(function(e,n,t,i){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(t){var o,a=e(this),s=(new Date).getTime(),l=[],r=arguments[0],c="string"==typeof r,u=[].slice.call(arguments,1);return n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,a.each((function(){var d,g,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.accordion.settings,t):e.extend({},e.fn.accordion.settings),m=f.className,p=f.namespace,h=f.selector,v=f.error,b="."+p,y="module-"+p,C=a.selector||"",O=e(this),x=O.find(h.title),F=O.find(h.content),A=this,q=O.data(y);g={initialize:function(){g.debug("Initializing",O),g.bind.events(),f.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){q=g,O.data(y,g)},destroy:function(){g.debug("Destroying previous instance",O),O.off(b).removeData(y)},refresh:function(){x=O.find(h.title),F=O.find(h.content)},observeChanges:function(){"MutationObserver"in n&&((d=new MutationObserver(function(e){g.debug("DOM tree modified, updating selector cache"),g.refresh()})).observe(A,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",d))},bind:{events:function(){g.debug("Binding delegated events"),O.on(f.on+b,h.trigger,g.event.click)}},event:{click:function(){g.toggle.call(this)}},toggle:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating),s=o.hasClass(m.active),l=s&&!a,r=!s&&a;g.debug("Toggling visibility of content",t),l||r?f.collapsible?g.close.call(t):g.debug("Cannot close accordion content collapsing is disabled"):g.open.call(t)},open:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating);o.hasClass(m.active)||a?g.debug("Accordion already open, skipping",o):(g.debug("Opening accordion content",t),f.onOpening.call(o),f.onChanging.call(o),f.exclusive&&g.closeOthers.call(t),t.addClass(m.active),o.stop(!0,!0).addClass(m.animating),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?o.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:1},f.duration,g.resetOpacity)),o.slideDown(f.duration,f.easing,(function(){o.removeClass(m.animating).addClass(m.active),g.reset.display.call(this),f.onOpen.call(this),f.onChange.call(this)})))},close:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating),s=o.hasClass(m.active);!s&&(s||!a)||s&&a||(g.debug("Closing accordion content",o),f.onClosing.call(o),f.onChanging.call(o),t.removeClass(m.active),o.stop(!0,!0).addClass(m.animating),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?o.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:0},f.duration,g.resetOpacity)),o.slideUp(f.duration,f.easing,(function(){o.removeClass(m.animating).removeClass(m.active),g.reset.display.call(this),f.onClose.call(this),f.onChange.call(this)})))},closeOthers:function(n){var t,o,a,s=n!==i?x.eq(n):e(this).closest(h.title),l=s.parents(h.content).prev(h.title),r=s.closest(h.accordion),c=h.title+"."+m.active+":visible",u=h.content+"."+m.active+":visible";f.closeNested?a=(t=r.find(c).not(l)).next(F):(t=r.find(c).not(l),o=r.find(u).find(c).not(l),a=(t=t.not(o)).next(F)),t.length>0&&(g.debug("Exclusive enabled, closing other content",t),t.removeClass(m.active),a.removeClass(m.animating).stop(!0,!0),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?a.children().transition({animation:"fade out",useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):a.children().stop(!0,!0).animate({opacity:0},f.duration,g.resetOpacity)),a.slideUp(f.duration,f.easing,(function(){e(this).removeClass(m.active),g.reset.display.call(this)})))},reset:{display:function(){g.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){g.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(n,t){if(g.debug("Changing setting",n,t),e.isPlainObject(n)){ e.extend(!0,f,n); }else{if(t===i){ return f[n]; }e.isPlainObject(f[n])?e.extend(!0,f[n],t):f[n]=t}},internal:function(n,t){if(g.debug("Changing internal",n,t),t===i){ return g[n]; }e.isPlainObject(n)?e.extend(!0,g,n):g[n]=t},debug:function(){!f.silent&&f.debug&&(f.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,f.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),g.verbose.apply(console,arguments)))},error:function(){f.silent||(g.error=Function.prototype.bind.call(console.error,console,f.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var n,t;f.performance&&(t=(n=(new Date).getTime())-(s||n),s=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":t})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var n=f.name+":",t=0;s=!1,clearTimeout(g.performance.timer),e.each(l,(function(e,n){t+=n["Execution Time"]})),n+=" "+t+"ms",C&&(n+=" '"+C+"'"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,(function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(n,t,a){var s,l,r,c=q;return t=t||u,a=A||a,"string"==typeof n&&c!==i&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,(function(t,o){var a=t!=s?o+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(c[a])&&t!=s){ c=c[a]; }else{if(c[a]!==i){ return l=c[a],!1; }if(!e.isPlainObject(c[o])||t==s){ return c[o]!==i?(l=c[o],!1):(g.error(v.method,n),!1); }c=c[o]}}))),e.isFunction(l)?r=l.apply(a,t):l!==i&&(r=l),e.isArray(o)?o.push(r):o!==i?o=[o,r]:r!==i&&(o=r),l}},c?(q===i&&g.initialize(),g.invoke(r)):(q!==i&&q.invoke("destroy"),g.initialize())})),o!==i?o:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onClosing:function(){},onChanging:function(){},onOpen:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,n,t,i,o){return-i*(n/=o)*(n-2)+t}})})(jQuery,window,document),(function(e,t,r,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.api=e.fn.api=function(r){var o,s=e.isFunction(this)?e(t):e(this),i=s.selector||"",a=(new Date).getTime(),u=[],c=arguments[0],d="string"==typeof c,l=[].slice.call(arguments,1);return s.each((function(){var s,g,f,p,m,b,v=e.isPlainObject(r)?e.extend(!0,{},e.fn.api.settings,r):e.extend({},e.fn.api.settings),h=v.namespace,y=v.metadata,q=v.selector,R=v.error,x=v.className,S="."+h,A="module-"+h,k=e(this),T=k.closest(q.form),P=v.stateContext?e(v.stateContext):k,j=this,O=P[0],w=k.data(A);b={initialize:function(){d||b.bind.events(),b.instantiate()},instantiate:function(){b.verbose("Storing instance of module",b),w=b,k.data(A,w)},destroy:function(){b.verbose("Destroying previous module for",j),k.removeData(A).off(S)},bind:{events:function(){var e=b.get.event();e?(b.verbose("Attaching API events to element",e),k.on(e+S,b.event.trigger)):"now"==v.on&&(b.debug("Querying API endpoint immediately"),b.query())}},decode:{json:function(e){if(e!==n&&"string"==typeof e){ try{e=JSON.parse(e)}catch(e){} }return e}},read:{cachedResponse:function(e){var r;if(t.Storage!==n){ return r=sessionStorage.getItem(e),b.debug("Using cached response",e,r),b.decode.json(r); }b.error(R.noStorage)}},write:{cachedResponse:function(r,o){o&&""===o?b.debug("Response empty, not caching",o):t.Storage!==n?(e.isPlainObject(o)&&(o=JSON.stringify(o)),sessionStorage.setItem(r,o),b.verbose("Storing cached response for url",r,o)):b.error(R.noStorage)}},query:function(){if(b.is.disabled()){ b.debug("Element is disabled API request aborted"); }else{if(b.is.loading()){if(!v.interruptRequests){ return void b.debug("Cancelling request, previous request is still pending"); }b.debug("Interrupting previous request"),b.abort()}if(v.defaultData&&e.extend(!0,v.urlData,b.get.defaultData()),v.serializeForm&&(v.data=b.add.formData(v.data)),!1===(g=b.get.settings())){ return b.cancelled=!0,void b.error(R.beforeSend); }if(b.cancelled=!1,(f=b.get.templatedURL())||b.is.mocked()){if((f=b.add.urlData(f))||b.is.mocked()){if(g.url=v.base+f,s=e.extend(!0,{},v,{type:v.method||v.type,data:p,url:v.base+f,beforeSend:v.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),b.debug("Querying URL",s.url),b.verbose("Using AJAX settings",s),"local"===v.cache&&b.read.cachedResponse(f)){ return b.debug("Response returned from local cache"),b.request=b.create.request(),void b.request.resolveWith(O,[b.read.cachedResponse(f)]); }v.throttle?v.throttleFirstRequest||b.timer?(b.debug("Throttling request",v.throttle),clearTimeout(b.timer),b.timer=setTimeout((function(){b.timer&&delete b.timer,b.debug("Sending throttled request",p,s.method),b.send.request()}),v.throttle)):(b.debug("Sending request",p,s.method),b.send.request(),b.timer=setTimeout((function(){}),v.throttle)):(b.debug("Sending request",p,s.method),b.send.request())}}else { b.error(R.missingURL) }}},should:{removeError:function(){return!0===v.hideError||"auto"===v.hideError&&!b.is.form()}},is:{disabled:function(){return k.filter(q.disabled).length>0},expectingJSON:function(){return"json"===v.dataType||"jsonp"===v.dataType},form:function(){return k.is("form")||P.is("form")},mocked:function(){return v.mockResponse||v.mockResponseAsync||v.response||v.responseAsync},input:function(){return k.is("input")},loading:function(){return!!b.request&&"pending"==b.request.state()},abortedRequest:function(e){return e&&e.readyState!==n&&0===e.readyState?(b.verbose("XHR request determined to be aborted"),!0):(b.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return b.is.expectingJSON()&&e.isFunction(v.successTest)?(b.debug("Checking JSON returned success",v.successTest,t),v.successTest(t)?(b.debug("Response passed success test",t),!0):(b.debug("Response failed success test",t),!1)):(b.verbose("Response is not JSON, skipping validation",v.successTest,t),!0)}},was:{cancelled:function(){return b.cancelled||!1},succesful:function(){return b.request&&"resolved"==b.request.state()},failure:function(){return b.request&&"rejected"==b.request.state()},complete:function(){return b.request&&("resolved"==b.request.state()||"rejected"==b.request.state())}},add:{urlData:function(t,r){var o,s;return t&&(o=t.match(v.regExp.required),s=t.match(v.regExp.optional),r=r||v.urlData,o&&(b.debug("Looking for required URL variables",o),e.each(o,(function(o,s){var i=-1!==s.indexOf("$")?s.substr(2,s.length-3):s.substr(1,s.length-2),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];if(a===n){ return b.error(R.requiredParameter,i,t),t=!1,!1; }b.verbose("Found required variable",i,a),a=v.encodeParameters?b.get.urlEncodedValue(a):a,t=t.replace(s,a)}))),s&&(b.debug("Looking for optional URL variables",o),e.each(s,(function(o,s){var i=-1!==s.indexOf("$")?s.substr(3,s.length-4):s.substr(2,s.length-3),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];a!==n?(b.verbose("Optional variable Found",i,a),t=t.replace(s,a)):(b.verbose("Optional variable not found",i),t=-1!==t.indexOf("/"+s)?t.replace("/"+s,""):t.replace(s,""))})))),t},formData:function(t){var r=e.fn.serializeObject!==n,o=r?T.serializeObject():T.serialize();return t=t||v.data,e.isPlainObject(t)?r?(b.debug("Extending existing data with form data",t,o),t=e.extend(!0,{},t,o)):(b.error(R.missingSerialize),b.debug("Cant extend data. Replacing data with form data",t,o),t=o):(b.debug("Adding form data",o),t=o),t}},send:{request:function(){b.set.loading(),b.request=b.create.request(),b.is.mocked()?b.mockedXHR=b.create.mockedXHR():b.xhr=b.create.xhr(),v.onRequest.call(O,b.request,b.xhr)}},event:{trigger:function(e){b.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,r,n){var o=this,s=(new Date).getTime()-m,i=v.loadingDuration-s,a=!!e.isFunction(v.onResponse)&&(b.is.expectingJSON()?v.onResponse.call(o,e.extend(!0,{},t)):v.onResponse.call(o,t));i=i>0?i:0,a&&(b.debug("Modified API response in onResponse callback",v.onResponse,a,t),t=a),i>0&&b.debug("Response completed early delaying state change by",i),setTimeout((function(){b.is.validResponse(t)?b.request.resolveWith(o,[t,n]):b.request.rejectWith(o,[n,"invalid"])}),i)},fail:function(e,t,r){var n=this,o=(new Date).getTime()-m,s=v.loadingDuration-o;(s=s>0?s:0)>0&&b.debug("Response completed early delaying state change by",s),setTimeout((function(){b.is.abortedRequest(e)?b.request.rejectWith(n,[e,"aborted",r]):b.request.rejectWith(n,[e,"error",t,r])}),s)}},request:{done:function(e,t){b.debug("Successful API Response",e),"local"===v.cache&&f&&(b.write.cachedResponse(f,e),b.debug("Saving server response locally",b.cache)),v.onSuccess.call(O,e,k,t)},complete:function(e,t){var r,n;b.was.succesful()?(n=e,r=t):(r=e,n=b.get.responseFromXHR(r)),b.remove.loading(),v.onComplete.call(O,n,k,r)},fail:function(e,t,r){var o=b.get.responseFromXHR(e),i=b.get.errorFromRequest(o,t,r);if("aborted"==t){ return b.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,r),v.onAbort.call(O,t,k,e),!0; }"invalid"==t?b.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&e!==n&&(b.debug("XHR produced a server error",t,r),200!=e.status&&r!==n&&""!==r&&b.error(R.statusMessage+r,s.url),v.onError.call(O,i,k,e)),v.errorDuration&&"aborted"!==t&&(b.debug("Adding error state"),b.set.error(),b.should.removeError()&&setTimeout(b.remove.error,v.errorDuration)),b.debug("API Request failed",i,e),v.onFailure.call(O,o,k,e)}}},create:{request:function(){return e.Deferred().always(b.event.request.complete).done(b.event.request.done).fail(b.event.request.fail)},mockedXHR:function(){var t,r,n,o=v.mockResponse||v.response,s=v.mockResponseAsync||v.responseAsync;return n=e.Deferred().always(b.event.xhr.complete).done(b.event.xhr.done).fail(b.event.xhr.fail),o?(e.isFunction(o)?(b.debug("Using specified synchronous callback",o),r=o.call(O,g)):(b.debug("Using settings specified response",o),r=o),n.resolveWith(O,[r,!1,{responseText:r}])):e.isFunction(s)&&(t=function(e){b.debug("Async callback returned response",e),e?n.resolveWith(O,[e,!1,{responseText:e}]):n.rejectWith(O,[{responseText:e},!1,!1])},b.debug("Using specified async response callback",s),s.call(O,g,t)),n},xhr:function(){var t;return t=e.ajax(s).always(b.event.xhr.always).done(b.event.xhr.done).fail(b.event.xhr.fail),b.verbose("Created server request",t,s),t}},set:{error:function(){b.verbose("Adding error state to element",P),P.addClass(x.error)},loading:function(){b.verbose("Adding loading state to element",P),P.addClass(x.loading),m=(new Date).getTime()}},remove:{error:function(){b.verbose("Removing error state from element",P),P.removeClass(x.error)},loading:function(){b.verbose("Removing loading state from element",P),P.removeClass(x.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(b.is.expectingJSON()?b.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,r,o){return e.isPlainObject(t)&&t.error!==n?t.error:v.error[r]!==n?v.error[r]:o},request:function(){return b.request||!1},xhr:function(){return b.xhr||!1},settings:function(){var t;return(t=v.beforeSend.call(O,v))&&(t.success!==n&&(b.debug("Legacy success callback detected",t),b.error(R.legacyParameters,t.success),t.onSuccess=t.success),t.failure!==n&&(b.debug("Legacy failure callback detected",t),b.error(R.legacyParameters,t.failure),t.onFailure=t.failure),t.complete!==n&&(b.debug("Legacy complete callback detected",t),b.error(R.legacyParameters,t.complete),t.onComplete=t.complete)),t===n&&b.error(R.noReturnedValue),!1===t?t:t!==n?e.extend(!0,{},t):e.extend(!0,{},v)},urlEncodedValue:function(e){var r=t.decodeURIComponent(e),n=t.encodeURIComponent(e);return r!==e?(b.debug("URL value is already encoded, avoiding double encoding",e),e):(b.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var t={};return e.isWindow(j)||(b.is.input()?t.value=k.val():b.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow(j)||"now"==v.on?(b.debug("API called without element, no events attached"),!1):"auto"==v.on?k.is("input")?j.oninput!==n?"input":j.onpropertychange!==n?"propertychange":"keyup":k.is("form")?"submit":"click":v.on},templatedURL:function(e){if(e=e||k.data(y.action)||v.action||!1,f=k.data(y.url)||v.url||!1){ return b.debug("Using specified url",f),f; }if(e){if(b.debug("Looking up url for action",e,v.api),v.api[e]===n&&!b.is.mocked()){ return void b.error(R.missingAction,v.action,v.api); }f=v.api[e]}else { b.is.form()&&(f=k.attr("action")||P.attr("action")||!1,b.debug("No url or action specified, defaulting to form action",f)); }return f}},abort:function(){var e=b.get.xhr();e&&"resolved"!==e.state()&&(b.debug("Cancelling API request"),e.abort())},reset:function(){b.remove.error(),b.remove.loading()},setting:function(t,r){if(b.debug("Changing setting",t,r),e.isPlainObject(t)){ e.extend(!0,v,t); }else{if(r===n){ return v[t]; }e.isPlainObject(v[t])?e.extend(!0,v[t],r):v[t]=r}},internal:function(t,r){if(e.isPlainObject(t)){ e.extend(!0,b,t); }else{if(r===n){ return b[t]; }b[t]=r}},debug:function(){!v.silent&&v.debug&&(v.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,v.name+":"),b.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),b.verbose.apply(console,arguments)))},error:function(){v.silent||(b.error=Function.prototype.bind.call(console.error,console,v.name+":"),b.error.apply(console,arguments))},performance:{log:function(e){var t,r;v.performance&&(r=(t=(new Date).getTime())-(a||t),a=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":r})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var t=v.name+":",r=0;a=!1,clearTimeout(b.performance.timer),e.each(u,(function(e,t){r+=t["Execution Time"]})),t+=" "+r+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),u=[]}},invoke:function(t,r,s){var i,a,u,c=w;return r=r||l,s=j||s,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,(function(r,o){var s=r!=i?o+t[r+1].charAt(0).toUpperCase()+t[r+1].slice(1):t;if(e.isPlainObject(c[s])&&r!=i){ c=c[s]; }else{if(c[s]!==n){ return a=c[s],!1; }if(!e.isPlainObject(c[o])||r==i){ return c[o]!==n?(a=c[o],!1):(b.error(R.method,t),!1); }c=c[o]}}))),e.isFunction(a)?u=a.apply(s,r):a!==n&&(u=a),e.isArray(o)?o.push(u):o!==n?o=[o,u]:u!==n&&(o=u),a}},d?(w===n&&b.initialize(),b.invoke(c)):(w!==n&&w.invoke("destroy"),b.initialize())})),o!==n?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}})(jQuery,window,document),(function(e,n,t,i){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(o){var a,c=e(this),r=c.selector||"",l=(new Date).getTime(),d=[],s=arguments[0],u="string"==typeof s,b=[].slice.call(arguments,1);return c.each((function(){var c,h,g=e.extend(!0,{},e.fn.checkbox.settings,o),f=g.className,p=g.namespace,k=g.selector,m=g.error,v="."+p,y="module-"+p,C=e(this),x=e(this).children(k.label),w=e(this).children(k.input),I=w[0],D=!1,S=!1,E=C.data(y),O=this;h={initialize:function(){h.verbose("Initializing checkbox",g),h.create.label(),h.bind.events(),h.set.tabbable(),h.hide.input(),h.observeChanges(),h.instantiate(),h.setup()},instantiate:function(){h.verbose("Storing instance of module",h),E=h,C.data(y,h)},destroy:function(){h.verbose("Destroying module"),h.unbind.events(),h.show.input(),C.removeData(y)},fix:{reference:function(){C.is(k.input)&&(h.debug("Behavior called on <input> adjusting invoked element"),C=C.closest(k.checkbox),h.refresh())}},setup:function(){h.set.initialLoad(),h.is.indeterminate()?(h.debug("Initial value is indeterminate"),h.indeterminate()):h.is.checked()?(h.debug("Initial value is checked"),h.check()):(h.debug("Initial value is unchecked"),h.uncheck()),h.remove.initialLoad()},refresh:function(){x=C.children(k.label),w=C.children(k.input),I=w[0]},hide:{input:function(){h.verbose("Modifying <input> z-index to be unselectable"),w.addClass(f.hidden)}},show:{input:function(){h.verbose("Modifying <input> z-index to be selectable"),w.removeClass(f.hidden)}},observeChanges:function(){"MutationObserver"in n&&((c=new MutationObserver(function(e){h.debug("DOM tree modified, updating selector cache"),h.refresh()})).observe(O,{childList:!0,subtree:!0}),h.debug("Setting up mutation observer",c))},attachEvents:function(n,t){var i=e(n);t=e.isFunction(h[t])?h[t]:h.toggle,i.length>0?(h.debug("Attaching checkbox events to element",n,t),i.on("click"+v,t)):h.error(m.notFound)},event:{click:function(n){var t=e(n.target);t.is(k.input)?h.verbose("Using default check action on initialized checkbox"):t.is(k.link)?h.debug("Clicking link inside checkbox, skipping toggle"):(h.toggle(),w.focus(),n.preventDefault())},keydown:function(e){var n=e.which;27==n?(h.verbose("Escape key pressed blurring field"),w.blur(),S=!0):e.ctrlKey||32!=n&&13!=n?S=!1:(h.verbose("Enter/space key pressed, toggling checkbox"),h.toggle(),S=!0)},keyup:function(e){S&&e.preventDefault()}},check:function(){h.should.allowCheck()&&(h.debug("Checking checkbox",w),h.set.checked(),h.should.ignoreCallbacks()||(g.onChecked.call(I),g.onChange.call(I)))},uncheck:function(){h.should.allowUncheck()&&(h.debug("Unchecking checkbox"),h.set.unchecked(),h.should.ignoreCallbacks()||(g.onUnchecked.call(I),g.onChange.call(I)))},indeterminate:function(){h.should.allowIndeterminate()?h.debug("Checkbox is already indeterminate"):(h.debug("Making checkbox indeterminate"),h.set.indeterminate(),h.should.ignoreCallbacks()||(g.onIndeterminate.call(I),g.onChange.call(I)))},determinate:function(){h.should.allowDeterminate()?h.debug("Checkbox is already determinate"):(h.debug("Making checkbox determinate"),h.set.determinate(),h.should.ignoreCallbacks()||(g.onDeterminate.call(I),g.onChange.call(I)))},enable:function(){h.is.enabled()?h.debug("Checkbox is already enabled"):(h.debug("Enabling checkbox"),h.set.enabled(),g.onEnable.call(I),g.onEnabled.call(I))},disable:function(){h.is.disabled()?h.debug("Checkbox is already disabled"):(h.debug("Disabling checkbox"),h.set.disabled(),g.onDisable.call(I),g.onDisabled.call(I))},get:{radios:function(){var n=h.get.name();return e('input[name="'+n+'"]').closest(k.checkbox)},otherRadios:function(){return h.get.radios().not(C)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return D},radio:function(){return w.hasClass(f.radio)||"radio"==w.attr("type")},indeterminate:function(){return w.prop("indeterminate")!==i&&w.prop("indeterminate")},checked:function(){return w.prop("checked")!==i&&w.prop("checked")},disabled:function(){return w.prop("disabled")!==i&&w.prop("disabled")},enabled:function(){return!h.is.disabled()},determinate:function(){return!h.is.indeterminate()},unchecked:function(){return!h.is.checked()}},should:{allowCheck:function(){return h.is.determinate()&&h.is.checked()&&!h.should.forceCallbacks()?(h.debug("Should not allow check, checkbox is already checked"),!1):!1!==g.beforeChecked.apply(I)||(h.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return h.is.determinate()&&h.is.unchecked()&&!h.should.forceCallbacks()?(h.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!1!==g.beforeUnchecked.apply(I)||(h.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return h.is.indeterminate()&&!h.should.forceCallbacks()?(h.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1!==g.beforeIndeterminate.apply(I)||(h.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return h.is.determinate()&&!h.should.forceCallbacks()?(h.debug("Should not allow determinate, checkbox is already determinate"),!1):!1!==g.beforeDeterminate.apply(I)||(h.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return h.is.initialLoad()&&g.fireOnInit},ignoreCallbacks:function(){return D&&!g.fireOnInit}},can:{change:function(){return!(C.hasClass(f.disabled)||C.hasClass(f.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof g.uncheckable?g.uncheckable:!h.is.radio()}},set:{initialLoad:function(){D=!0},checked:function(){h.verbose("Setting class to checked"),C.removeClass(f.indeterminate).addClass(f.checked),h.is.radio()&&h.uncheckOthers(),h.is.indeterminate()||!h.is.checked()?(h.verbose("Setting state to checked",I),w.prop("indeterminate",!1).prop("checked",!0),h.trigger.change()):h.debug("Input is already checked, skipping input property change")},unchecked:function(){h.verbose("Removing checked class"),C.removeClass(f.indeterminate).removeClass(f.checked),h.is.indeterminate()||!h.is.unchecked()?(h.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),h.trigger.change()):h.debug("Input is already unchecked")},indeterminate:function(){h.verbose("Setting class to indeterminate"),C.addClass(f.indeterminate),h.is.indeterminate()?h.debug("Input is already indeterminate, skipping input property change"):(h.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),h.trigger.change())},determinate:function(){h.verbose("Removing indeterminate class"),C.removeClass(f.indeterminate),h.is.determinate()?h.debug("Input is already determinate, skipping input property change"):(h.debug("Setting state to determinate"),w.prop("indeterminate",!1))},disabled:function(){h.verbose("Setting class to disabled"),C.addClass(f.disabled),h.is.disabled()?h.debug("Input is already disabled, skipping input property change"):(h.debug("Setting state to disabled"),w.prop("disabled","disabled"),h.trigger.change())},enabled:function(){h.verbose("Removing disabled class"),C.removeClass(f.disabled),h.is.enabled()?h.debug("Input is already enabled, skipping input property change"):(h.debug("Setting state to enabled"),w.prop("disabled",!1),h.trigger.change())},tabbable:function(){h.verbose("Adding tabindex to checkbox"),w.attr("tabindex")===i&&w.attr("tabindex",0)}},remove:{initialLoad:function(){D=!1}},trigger:{change:function(){var e=t.createEvent("HTMLEvents"),n=w[0];n&&(h.verbose("Triggering native change event"),e.initEvent("change",!0,!1),n.dispatchEvent(e))}},create:{label:function(){w.prevAll(k.label).length>0?(w.prev(k.label).detach().insertAfter(w),h.debug("Moving existing label",x)):h.has.label()||(x=e("<label>").insertAfter(w),h.debug("Creating label",x))}},has:{label:function(){return x.length>0}},bind:{events:function(){h.verbose("Attaching checkbox events"),C.on("click"+v,h.event.click).on("keydown"+v,k.input,h.event.keydown).on("keyup"+v,k.input,h.event.keyup)}},unbind:{events:function(){h.debug("Removing events"),C.off(v)}},uncheckOthers:function(){var e=h.get.otherRadios();h.debug("Unchecking other radios",e),e.removeClass(f.checked)},toggle:function(){h.can.change()?h.is.indeterminate()||h.is.unchecked()?(h.debug("Currently unchecked"),h.check()):h.is.checked()&&h.can.uncheck()&&(h.debug("Currently checked"),h.uncheck()):h.is.radio()||h.debug("Checkbox is read-only or disabled, ignoring toggle")},setting:function(n,t){if(h.debug("Changing setting",n,t),e.isPlainObject(n)){ e.extend(!0,g,n); }else{if(t===i){ return g[n]; }e.isPlainObject(g[n])?e.extend(!0,g[n],t):g[n]=t}},internal:function(n,t){if(e.isPlainObject(n)){ e.extend(!0,h,n); }else{if(t===i){ return h[n]; }h[n]=t}},debug:function(){!g.silent&&g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){g.silent||(h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var n,t;g.performance&&(t=(n=(new Date).getTime())-(l||n),l=n,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":t})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var n=g.name+":",t=0;l=!1,clearTimeout(h.performance.timer),e.each(d,(function(e,n){t+=n["Execution Time"]})),n+=" "+t+"ms",r&&(n+=" '"+r+"'"),(console.group!==i||console.table!==i)&&d.length>0&&(console.groupCollapsed(n),console.table?console.table(d):e.each(d,(function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")})),console.groupEnd()),d=[]}},invoke:function(n,t,o){var c,r,l,d=E;return t=t||b,o=O||o,"string"==typeof n&&d!==i&&(n=n.split(/[\. ]/),c=n.length-1,e.each(n,(function(t,o){var a=t!=c?o+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(d[a])&&t!=c){ d=d[a]; }else{if(d[a]!==i){ return r=d[a],!1; }if(!e.isPlainObject(d[o])||t==c){ return d[o]!==i?(r=d[o],!1):(h.error(m.method,n),!1); }d=d[o]}}))),e.isFunction(r)?l=r.apply(o,t):r!==i&&(l=r),e.isArray(a)?a.push(l):a!==i?a=[a,l]:l!==i&&(a=l),r}},u?(E===i&&h.initialize(),h.invoke(s)):(E!==i&&E.invoke("destroy"),h.initialize())})),a!==i?a:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}})(jQuery,window,document),(function(e,i,n,t){"use strict";i=void 0!==i&&i.Math==Math?i:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(i){var o,a=e(this),r=(new Date).getTime(),s=[],m=arguments[0],d="string"==typeof m,c=[].slice.call(arguments,1);return a.each((function(){var u,l,f,g=e.isPlainObject(i)?e.extend(!0,{},e.fn.dimmer.settings,i):e.extend({},e.fn.dimmer.settings),p=g.selector,h=g.namespace,b=g.className,v=g.error,y="."+h,C="module-"+h,w=a.selector||"",S="ontouchstart"in n.documentElement?"touchstart":"click",T=e(this),D=this,N=T.data(C);(f={preinitialize:function(){f.is.dimmer()?(l=T.parent(),u=T):(l=T,u=f.has.dimmer()?g.dimmerName?l.find(p.dimmer).filter("."+g.dimmerName):l.find(p.dimmer):f.create(),f.set.variation())},initialize:function(){f.debug("Initializing dimmer",g),f.bind.events(),f.set.dimmable(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),N=f,T.data(C,N)},destroy:function(){f.verbose("Destroying previous module",u),f.unbind.events(),f.remove.variation(),l.off(y)},bind:{events:function(){"hover"==g.on?l.on("mouseenter"+y,f.show).on("mouseleave"+y,f.hide):"click"==g.on&&l.on(S+y,f.toggle),f.is.page()&&(f.debug("Setting as a page dimmer",l),f.set.pageDimmer()),f.is.closable()&&(f.verbose("Adding dimmer close event",u),l.on(S+y,p.dimmer,f.event.click))}},unbind:{events:function(){T.removeData(C),l.off(y)}},event:{click:function(i){f.verbose("Determining if event occured on dimmer",i),(0===u.find(i.target).length||e(i.target).is(p.content))&&(f.hide(),i.stopImmediatePropagation())}},addContent:function(i){var n=e(i);f.debug("Add content to dimmer",n),n.parent()[0]!==u[0]&&n.detach().appendTo(u)},create:function(){var i=e(g.template.dimmer());return g.dimmerName&&(f.debug("Creating named dimmer",g.dimmerName),i.addClass(g.dimmerName)),i.appendTo(l),i},show:function(i){i=e.isFunction(i)?i:function(){},f.debug("Showing dimmer",u,g),f.is.dimmed()&&!f.is.animating()||!f.is.enabled()?f.debug("Dimmer is already shown or disabled"):(f.animate.show(i),g.onShow.call(D),g.onChange.call(D))},hide:function(i){i=e.isFunction(i)?i:function(){},f.is.dimmed()||f.is.animating()?(f.debug("Hiding dimmer",u),f.animate.hide(i),g.onHide.call(D),g.onChange.call(D)):f.debug("Dimmer is not visible")},toggle:function(){f.verbose("Toggling dimmer visibility",u),f.is.dimmed()?f.hide():f.show()},animate:{show:function(i){i=e.isFunction(i)?i:function(){},g.useCSS&&e.fn.transition!==t&&u.transition("is supported")?("auto"!==g.opacity&&f.set.opacity(),u.transition({displayType:"flex",animation:g.transition+" in",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.set.dimmed()},onComplete:function(){f.set.active(),i()}})):(f.verbose("Showing dimmer animation with javascript"),f.set.dimmed(),"auto"==g.opacity&&(g.opacity=.8),u.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(f.get.duration(),g.opacity,(function(){u.removeAttr("style"),f.set.active(),i()})))},hide:function(i){i=e.isFunction(i)?i:function(){},g.useCSS&&e.fn.transition!==t&&u.transition("is supported")?(f.verbose("Hiding dimmer with css"),u.transition({displayType:"flex",animation:g.transition+" out",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.remove.dimmed()},onComplete:function(){f.remove.active(),i()}})):(f.verbose("Hiding dimmer with javascript"),f.remove.dimmed(),u.stop().fadeOut(f.get.duration(),(function(){f.remove.active(),u.removeAttr("style"),i()})))}},get:{dimmer:function(){return u},duration:function(){return"object"==typeof g.duration?f.is.active()?g.duration.hide:g.duration.show:g.duration}},has:{dimmer:function(){return g.dimmerName?T.find(p.dimmer).filter("."+g.dimmerName).length>0:T.find(p.dimmer).length>0}},is:{active:function(){return u.hasClass(b.active)},animating:function(){return u.is(":animated")||u.hasClass(b.animating)},closable:function(){return"auto"==g.closable?"hover"!=g.on:g.closable},dimmer:function(){return T.hasClass(b.dimmer)},dimmable:function(){return T.hasClass(b.dimmable)},dimmed:function(){return l.hasClass(b.dimmed)},disabled:function(){return l.hasClass(b.disabled)},enabled:function(){return!f.is.disabled()},page:function(){return l.is("body")},pageDimmer:function(){return u.hasClass(b.pageDimmer)}},can:{show:function(){return!u.hasClass(b.disabled)}},set:{opacity:function(e){var i=u.css("background-color"),n=i.split(","),t=n&&3==n.length,o=n&&4==n.length;e=0===g.opacity?0:g.opacity||e,t||o?(n[3]=e+")",i=n.join(",")):i="rgba(0, 0, 0, "+e+")",f.debug("Setting opacity to",e),u.css("background-color",i)},active:function(){u.addClass(b.active)},dimmable:function(){l.addClass(b.dimmable)},dimmed:function(){l.addClass(b.dimmed)},pageDimmer:function(){u.addClass(b.pageDimmer)},disabled:function(){u.addClass(b.disabled)},variation:function(e){(e=e||g.variation)&&u.addClass(e)}},remove:{active:function(){u.removeClass(b.active)},dimmed:function(){l.removeClass(b.dimmed)},disabled:function(){u.removeClass(b.disabled)},variation:function(e){(e=e||g.variation)&&u.removeClass(e)}},setting:function(i,n){if(f.debug("Changing setting",i,n),e.isPlainObject(i)){ e.extend(!0,g,i); }else{if(n===t){ return g[i]; }e.isPlainObject(g[i])?e.extend(!0,g[i],n):g[i]=n}},internal:function(i,n){if(e.isPlainObject(i)){ e.extend(!0,f,i); }else{if(n===t){ return f[i]; }f[i]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){g.silent||(f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var i,n;g.performance&&(n=(i=(new Date).getTime())-(r||i),r=i,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:D,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var i=g.name+":",n=0;r=!1,clearTimeout(f.performance.timer),e.each(s,(function(e,i){n+=i["Execution Time"]})),i+=" "+n+"ms",w&&(i+=" '"+w+"'"),a.length>1&&(i+=" ("+a.length+")"),(console.group!==t||console.table!==t)&&s.length>0&&(console.groupCollapsed(i),console.table?console.table(s):e.each(s,(function(e,i){console.log(i.Name+": "+i["Execution Time"]+"ms")})),console.groupEnd()),s=[]}},invoke:function(i,n,a){var r,s,m,d=N;return n=n||c,a=D||a,"string"==typeof i&&d!==t&&(i=i.split(/[\. ]/),r=i.length-1,e.each(i,(function(n,o){var a=n!=r?o+i[n+1].charAt(0).toUpperCase()+i[n+1].slice(1):i;if(e.isPlainObject(d[a])&&n!=r){ d=d[a]; }else{if(d[a]!==t){ return s=d[a],!1; }if(!e.isPlainObject(d[o])||n==r){ return d[o]!==t?(s=d[o],!1):(f.error(v.method,i),!1); }d=d[o]}}))),e.isFunction(s)?m=s.apply(a,n):s!==t&&(m=s),e.isArray(o)?o.push(m):o!==t?o=[o,m]:m!==t&&(o=m),s}}).preinitialize(),d?(N===t&&f.initialize(),f.invoke(m)):(N!==t&&N.invoke("destroy"),f.initialize())})),o!==t?o:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}})(jQuery,window,document),(function(e,n,o,t){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(o){var r,a=e(this),i=a.selector||"",c=(new Date).getTime(),l=[],d=arguments[0],u="string"==typeof d,s=[].slice.call(arguments,1);return a.each((function(){var m,p=e.isPlainObject(o)?e.extend(!0,{},e.fn.embed.settings,o):e.extend({},e.fn.embed.settings),f=p.selector,h=p.className,b=p.sources,g=p.error,v=p.metadata,y=p.namespace,w=p.templates,P="."+y,C="module-"+y,E=(e(n),e(this)),U=(E.find(f.placeholder),E.find(f.icon),E.find(f.embed)),j=this,S=E.data(C);m={initialize:function(){m.debug("Initializing embed"),m.determine.autoplay(),m.create(),m.bind.events(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),S=m,E.data(C,m)},destroy:function(){m.verbose("Destroying previous instance of embed"),m.reset(),E.removeData(C).off(P)},refresh:function(){m.verbose("Refreshing selector cache"),E.find(f.placeholder),E.find(f.icon),U=E.find(f.embed)},bind:{events:function(){m.has.placeholder()&&(m.debug("Adding placeholder events"),E.on("click"+P,f.placeholder,m.createAndShow).on("click"+P,f.icon,m.createAndShow))}},create:function(){m.get.placeholder()?m.createPlaceholder():m.createAndShow()},createPlaceholder:function(e){var n=m.get.icon(),o=m.get.url();m.generate.embed(o),e=e||m.get.placeholder(),E.html(w.placeholder(e,n)),m.debug("Creating placeholder for embed",e,n)},createEmbed:function(n){m.refresh(),n=n||m.get.url(),U=e("<div/>").addClass(h.embed).html(m.generate.embed(n)).appendTo(E),p.onCreate.call(j,n),m.debug("Creating embed object",U)},changeEmbed:function(e){U.html(m.generate.embed(e))},createAndShow:function(){m.createEmbed(),m.show()},change:function(e,n,o){m.debug("Changing video to ",e,n,o),E.data(v.source,e).data(v.id,n),o?E.data(v.url,o):E.removeData(v.url),m.has.embed()?m.changeEmbed():m.create()},reset:function(){m.debug("Clearing embed and showing placeholder"),m.remove.active(),m.remove.embed(),m.showPlaceholder(),p.onReset.call(j)},show:function(){m.debug("Showing embed"),m.set.active(),p.onDisplay.call(j)},hide:function(){m.debug("Hiding embed"),m.showPlaceholder()},showPlaceholder:function(){m.debug("Showing placeholder image"),m.remove.active(),p.onPlaceholderDisplay.call(j)},get:{id:function(){return p.id||E.data(v.id)},placeholder:function(){return p.placeholder||E.data(v.placeholder)},icon:function(){return p.icon?p.icon:E.data(v.icon)!==t?E.data(v.icon):m.determine.icon()},source:function(e){return p.source?p.source:E.data(v.source)!==t?E.data(v.source):m.determine.source()},type:function(){var e=m.get.source();return b[e]!==t&&b[e].type},url:function(){return p.url?p.url:E.data(v.url)!==t?E.data(v.url):m.determine.url()}},determine:{autoplay:function(){m.should.autoplay()&&(p.autoplay=!0)},source:function(n){var o=!1;return(n=n||m.get.url())&&e.each(b,(function(e,t){if(-1!==n.search(t.domain)){ return o=e,!1 }})),o},icon:function(){var e=m.get.source();return b[e]!==t&&b[e].icon},url:function(){var e,n=p.id||E.data(v.id),o=p.source||E.data(v.source);return(e=b[o]!==t&&b[o].url.replace("{id}",n))&&E.data(v.url,e),e}},set:{active:function(){E.addClass(h.active)}},remove:{active:function(){E.removeClass(h.active)},embed:function(){U.empty()}},encode:{parameters:function(e){var n,o=[];for(n in e){ o.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])); }return o.join("&amp;")}},generate:{embed:function(e){m.debug("Generating embed html");var n,o,t=m.get.source();return(e=m.get.url(e))?(o=m.generate.parameters(t),n=w.iframe(e,o)):m.error(g.noURL,E),n},parameters:function(n,o){var r=b[n]&&b[n].parameters!==t?b[n].parameters(p):{};return(o=o||p.parameters)&&(r=e.extend({},r,o)),r=p.onEmbed(r),m.encode.parameters(r)}},has:{embed:function(){return U.length>0},placeholder:function(){return p.placeholder||E.data(v.placeholder)}},should:{autoplay:function(){return"auto"===p.autoplay?p.placeholder||E.data(v.placeholder)!==t:p.autoplay}},is:{video:function(){return"video"==m.get.type()}},setting:function(n,o){if(m.debug("Changing setting",n,o),e.isPlainObject(n)){ e.extend(!0,p,n); }else{if(o===t){ return p[n]; }e.isPlainObject(p[n])?e.extend(!0,p[n],o):p[n]=o}},internal:function(n,o){if(e.isPlainObject(n)){ e.extend(!0,m,n); }else{if(o===t){ return m[n]; }m[n]=o}},debug:function(){!p.silent&&p.debug&&(p.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,p.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),m.verbose.apply(console,arguments)))},error:function(){p.silent||(m.error=Function.prototype.bind.call(console.error,console,p.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var n,o;p.performance&&(o=(n=(new Date).getTime())-(c||n),c=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":o})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var n=p.name+":",o=0;c=!1,clearTimeout(m.performance.timer),e.each(l,(function(e,n){o+=n["Execution Time"]})),n+=" "+o+"ms",i&&(n+=" '"+i+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==t||console.table!==t)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,(function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(n,o,a){var i,c,l,d=S;return o=o||s,a=j||a,"string"==typeof n&&d!==t&&(n=n.split(/[\. ]/),i=n.length-1,e.each(n,(function(o,r){var a=o!=i?r+n[o+1].charAt(0).toUpperCase()+n[o+1].slice(1):n;if(e.isPlainObject(d[a])&&o!=i){ d=d[a]; }else{if(d[a]!==t){ return c=d[a],!1; }if(!e.isPlainObject(d[r])||o==i){ return d[r]!==t?(c=d[r],!1):(m.error(g.method,n),!1); }d=d[r]}}))),e.isFunction(c)?l=c.apply(a,o):c!==t&&(l=c),e.isArray(r)?r.push(l):r!==t?r=[r,l]:l!==t&&(r=l),c}},u?(S===t&&m.initialize(),m.invoke(d)):(S!==t&&S.invoke("destroy"),m.initialize())})),r!==t?r:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||t,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||t,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,n){var o=e;return n&&(o+="?"+n),'<iframe src="'+o+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,n){var o="";return n&&(o+='<i class="'+n+' icon"></i>'),e&&(o+='<img class="placeholder" src="'+e+'">'),o}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}})(jQuery,window,document),(function(e,t,n,r){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.form=function(t){var i,a=e(this),o=a.selector||"",l=(new Date).getTime(),s=[],u=arguments[0],c=arguments[1],d="string"==typeof u,f=[].slice.call(arguments,1);return a.each((function(){var p,m,g,h,v,b,y,x,k,E,w,C,V,R,F,S,A=e(this),T=this,D=[],O=!1;(S={initialize:function(){S.get.settings(),d?(F===r&&S.instantiate(),S.invoke(u)):(F!==r&&F.invoke("destroy"),S.verbose("Initializing form validation",A,v),S.bindEvents(),S.set.defaults(),S.instantiate())},instantiate:function(){S.verbose("Storing instance of module",S),F=S,A.data(V,S)},destroy:function(){S.verbose("Destroying previous module",F),S.removeEvents(),A.removeData(V)},refresh:function(){S.verbose("Refreshing selector cache"),p=A.find(x.field),m=A.find(x.group),g=A.find(x.message),A.find(x.prompt),h=A.find(x.submit),A.find(x.clear),A.find(x.reset)},submit:function(){S.verbose("Submitting form",A),A.submit()},attachEvents:function(t,n){n=n||"submit",e(t).on("click"+R,(function(e){S[n](),e.preventDefault()}))},bindEvents:function(){S.verbose("Attaching form events"),A.on("submit"+R,S.validate.form).on("blur"+R,x.field,S.event.field.blur).on("click"+R,x.submit,S.submit).on("click"+R,x.reset,S.reset).on("click"+R,x.clear,S.clear),v.keyboardShortcuts&&A.on("keydown"+R,x.field,S.event.field.keydown),p.each((function(){var t=e(this),n=t.prop("type"),r=S.get.changeEvent(n,t);e(this).on(r+R,S.event.field.change)}))},clear:function(){p.each((function(){var t=e(this),n=t.parent(),r=t.closest(m),i=r.find(x.prompt),a=t.data(y.defaultValue)||"",o=n.is(x.uiCheckbox),l=n.is(x.uiDropdown);r.hasClass(k.error)&&(S.verbose("Resetting error on field",r),r.removeClass(k.error),i.remove()),l?(S.verbose("Resetting dropdown value",n,a),n.dropdown("clear")):o?t.prop("checked",!1):(S.verbose("Resetting field value",t,a),t.val(""))}))},reset:function(){p.each((function(){var t=e(this),n=t.parent(),i=t.closest(m),a=i.find(x.prompt),o=t.data(y.defaultValue),l=n.is(x.uiCheckbox),s=n.is(x.uiDropdown),u=i.hasClass(k.error);o!==r&&(u&&(S.verbose("Resetting error on field",i),i.removeClass(k.error),a.remove()),s?(S.verbose("Resetting dropdown value",n,o),n.dropdown("restore defaults")):l?(S.verbose("Resetting checkbox value",n,o),t.prop("checked",o)):(S.verbose("Resetting field value",t,o),t.val(o)))}))},determine:{isValid:function(){var t=!0;return e.each(b,(function(e,n){S.validate.field(n,e,!0)||(t=!1)})),t}},is:{bracketedRule:function(e){return e.type&&e.type.match(v.regExp.bracket)},shorthandFields:function(e){var t=e[Object.keys(e)[0]];return S.is.shorthandRules(t)},shorthandRules:function(t){return"string"==typeof t||e.isArray(t)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):S.is.blank(e))},blank:function(t){return""===e.trim(t.val())},valid:function(t){var n=!0;return t?(S.verbose("Checking if field is valid",t),S.validate.field(b[t],t,!1)):(S.verbose("Checking if form is valid"),e.each(b,(function(e,t){S.is.valid(e)||(n=!1)})),n)}},removeEvents:function(){A.off(R),p.off(R),h.off(R),p.off(R)},event:{field:{keydown:function(t){var n=e(this),r=t.which,i=n.is(x.input),a=n.is(x.checkbox),o=n.closest(x.uiDropdown).length>0;27==r&&(S.verbose("Escape key pressed blurring field"),n.blur()),t.ctrlKey||13!=r||!i||o||a||(O||(n.one("keyup"+R,S.event.field.keyup),S.submit(),S.debug("Enter pressed on input submitting form")),O=!0)},keyup:function(){O=!1},blur:function(t){var n=e(this),r=n.closest(m),i=S.get.validation(n);r.hasClass(k.error)?(S.debug("Revalidating field",n,i),i&&S.validate.field(i)):"blur"==v.on&&i&&S.validate.field(i)},change:function(t){var n=e(this),r=n.closest(m),i=S.get.validation(n);i&&("change"==v.on||r.hasClass(k.error)&&v.revalidate)&&(clearTimeout(S.timer),S.timer=setTimeout((function(){S.debug("Revalidating field",n,S.get.validation(n)),S.validate.field(i)}),v.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!S.is.bracketedRule(e))&&(e.value!==r?e.value:e.type.match(v.regExp.bracket)[1]+"")},ruleName:function(e){return S.is.bracketedRule(e)?e.type.replace(e.type.match(v.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":S.get.inputEvent()},inputEvent:function(){return n.createElement("input").oninput!==r?"input":n.createElement("input").onpropertychange!==r?"propertychange":"keyup"},fieldsFromShorthand:function(t){var n={};return e.each(t,(function(t,r){"string"==typeof r&&(r=[r]),n[t]={rules:[]},e.each(r,(function(e,r){n[t].rules.push({type:r})}))})),n},prompt:function(t,n){var r,i,a=S.get.ruleName(t),o=S.get.ancillaryValue(t),l=S.get.field(n.identifier),s=l.val(),u=e.isFunction(t.prompt)?t.prompt(s):t.prompt||v.prompt[a]||v.text.unspecifiedRule,c=-1!==u.search("{value}"),d=-1!==u.search("{name}");return c&&(u=u.replace("{value}",l.val())),d&&(i=1==(r=l.closest(x.group).find("label").eq(0)).length?r.text():l.prop("placeholder")||v.text.unspecifiedField,u=u.replace("{name}",i)),u=(u=u.replace("{identifier}",n.identifier)).replace("{ruleValue}",o),t.prompt||S.verbose("Using default validation prompt for type",u,a),u},settings:function(){if(e.isPlainObject(t)){var n=Object.keys(t);n.length>0&&t[n[0]].identifier!==r&&t[n[0]].rules!==r?(v=e.extend(!0,{},e.fn.form.settings,c),b=e.extend({},e.fn.form.settings.defaults,t),S.error(v.error.oldSyntax,T),S.verbose("Extending settings from legacy parameters",b,v)):(t.fields&&S.is.shorthandFields(t.fields)&&(t.fields=S.get.fieldsFromShorthand(t.fields)),v=e.extend(!0,{},e.fn.form.settings,t),b=e.extend({},e.fn.form.settings.defaults,v.fields),S.verbose("Extending settings",b,v))}else { v=e.fn.form.settings,b=e.fn.form.settings.defaults,S.verbose("Using default form validation",b,v); }C=v.namespace,y=v.metadata,x=v.selector,k=v.className,E=v.regExp,w=v.error,V="module-"+C,R="."+C,F=A.data(V),S.refresh()},field:function(t){return S.verbose("Finding field with identifier",t),t=S.escape.string(t),p.filter("#"+t).length>0?p.filter("#"+t):p.filter('[name="'+t+'"]').length>0?p.filter('[name="'+t+'"]'):p.filter('[name="'+t+'[]"]').length>0?p.filter('[name="'+t+'[]"]'):p.filter("[data-"+y.validate+'="'+t+'"]').length>0?p.filter("[data-"+y.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var n=e();return e.each(t,(function(e,t){n=n.add(S.get.field(t))})),n},validation:function(t){var n,r;return!!b&&(e.each(b,(function(e,i){r=i.identifier||e,S.get.field(r)[0]==t[0]&&(i.identifier=r,n=i)})),n||!1)},value:function(e){var t=[];return t.push(e),S.get.values.call(T,t)[e]},values:function(t){var n={};return(e.isArray(t)?S.get.fields(t):p).each((function(t,i){var a=e(i),o=(a.prop("type"),a.prop("name")),l=a.val(),s=a.is(x.checkbox),u=a.is(x.radio),c=-1!==o.indexOf("[]"),d=!!s&&a.is(":checked");o&&(c?(o=o.replace("[]",""),n[o]||(n[o]=[]),s?d?n[o].push(l||!0):n[o].push(!1):n[o].push(l)):u?n[o]!==r&&0!=n[o]||(n[o]=!!d&&(l||!0)):n[o]=s?!!d&&(l||!0):l)})),n}},has:{field:function(e){return S.verbose("Checking for existence of a field with identifier",e),"string"!=typeof(e=S.escape.string(e))&&S.error(w.identifier,e),p.filter("#"+e).length>0||p.filter('[name="'+e+'"]').length>0||p.filter("[data-"+y.validate+'="'+e+'"]').length>0}},escape:{string:function(e){return(e=String(e)).replace(E.escape,"\\$&")}},add:{rule:function(e,t){S.add.field(e,t)},field:function(t,n){var r={};S.is.shorthandRules(n)?(n=e.isArray(n)?n:[n],r[t]={rules:[]},e.each(n,(function(e,n){r[t].rules.push({type:n})}))):r[t]=n,b=e.extend({},b,r),S.debug("Adding rules",r,b)},fields:function(t){var n;n=t&&S.is.shorthandFields(t)?S.get.fieldsFromShorthand(t):t,b=e.extend({},b,n)},prompt:function(t,n){var i=S.get.field(t).closest(m),a=i.children(x.prompt),o=0!==a.length;n="string"==typeof n?[n]:n,S.verbose("Adding field error state",t),i.addClass(k.error),v.inline&&(o||(a=v.templates.prompt(n)).appendTo(i),a.html(n[0]),o?S.verbose("Inline errors are disabled, no inline error added",t):v.transition&&e.fn.transition!==r&&A.transition("is supported")?(S.verbose("Displaying error with css transition",v.transition),a.transition(v.transition+" in",v.duration)):(S.verbose("Displaying error with fallback javascript animation"),a.fadeIn(v.duration)))},errors:function(e){S.debug("Adding form error messages",e),S.set.error(),g.html(v.templates.error(e))}},remove:{rule:function(t,n){var i=e.isArray(n)?n:[n];if(n==r){ return S.debug("Removed all rules"),void(b[t].rules=[]); }b[t]!=r&&e.isArray(b[t].rules)&&e.each(b[t].rules,(function(e,n){-1!==i.indexOf(n.type)&&(S.debug("Removed rule",n.type),b[t].rules.splice(e,1))}))},field:function(t){var n=e.isArray(t)?t:[t];e.each(n,(function(e,t){S.remove.rule(t)}))},rules:function(t,n){e.isArray(t)?e.each(fields,(function(e,t){S.remove.rule(t,n)})):S.remove.rule(t,n)},fields:function(e){S.remove.field(e)},prompt:function(t){var n=S.get.field(t).closest(m),i=n.children(x.prompt);n.removeClass(k.error),v.inline&&i.is(":visible")&&(S.verbose("Removing prompt for field",t),v.transition&&e.fn.transition!==r&&A.transition("is supported")?i.transition(v.transition+" out",v.duration,(function(){i.remove()})):i.fadeOut(v.duration,(function(){i.remove()})))}},set:{success:function(){A.removeClass(k.error).addClass(k.success)},defaults:function(){p.each((function(){var t=e(this),n=t.filter(x.checkbox).length>0?t.is(":checked"):t.val();t.data(y.defaultValue,n)}))},error:function(){A.removeClass(k.success).addClass(k.error)},value:function(e,t){var n={};return n[e]=t,S.set.values.call(T,n)},values:function(t){e.isEmptyObject(t)||e.each(t,(function(t,n){var r,i=S.get.field(t),a=i.parent(),o=e.isArray(n),l=a.is(x.uiCheckbox),s=a.is(x.uiDropdown),u=i.is(x.radio)&&l;i.length>0&&(o&&l?(S.verbose("Selecting multiple",n,i),a.checkbox("uncheck"),e.each(n,(function(e,t){r=i.filter('[value="'+t+'"]'),a=r.parent(),r.length>0&&a.checkbox("check")}))):u?(S.verbose("Selecting radio value",n,i),i.filter('[value="'+n+'"]').parent(x.uiCheckbox).checkbox("check")):l?(S.verbose("Setting checkbox value",n,a),!0===n?a.checkbox("check"):a.checkbox("uncheck")):s?(S.verbose("Setting dropdown value",n,a),a.dropdown("set selected",n)):(S.verbose("Setting field value",n,i),i.val(n)))}))}},validate:{form:function(e,t){var n=S.get.values();if(O){ return!1; }if(D=[],S.determine.isValid()){if(S.debug("Form has no validation errors, submitting"),S.set.success(),!0!==t){ return v.onSuccess.call(T,e,n) }}else if(S.debug("Form has errors"),S.set.error(),v.inline||S.add.errors(D),A.data("moduleApi")!==r&&e.stopImmediatePropagation(),!0!==t){ return v.onFailure.call(T,D,n) }},field:function(t,n,i){i=i===r||i,"string"==typeof t&&(S.verbose("Validating field",t),n=t,t=b[t]);var a=t.identifier||n,o=S.get.field(a),l=!!t.depends&&S.get.field(t.depends),s=!0,u=[];return t.identifier||(S.debug("Using field name as identifier",a),t.identifier=a),o.prop("disabled")?(S.debug("Field is disabled. Skipping",a),s=!0):t.optional&&S.is.blank(o)?(S.debug("Field is optional and blank. Skipping",a),s=!0):t.depends&&S.is.empty(l)?(S.debug("Field depends on another value that is not present or empty. Skipping",l),s=!0):t.rules!==r&&e.each(t.rules,(function(e,n){S.has.field(a)&&!S.validate.rule(t,n)&&(S.debug("Field is invalid",a,n.type),u.push(S.get.prompt(n,t)),s=!1)})),s?(i&&(S.remove.prompt(a,u),v.onValid.call(o)),!0):(i&&(D=D.concat(u),S.add.prompt(a,u),v.onInvalid.call(o,u)),!1)},rule:function(t,n){var i=S.get.field(t.identifier),a=(n.type,i.val()),o=S.get.ancillaryValue(n),l=S.get.ruleName(n),s=v.rules[l];if(e.isFunction(s)){ return a=a===r||""===a||null===a?"":e.trim(a+""),s.call(i,a,o); }S.error(w.noRule,l)}},setting:function(t,n){if(e.isPlainObject(t)){ e.extend(!0,v,t); }else{if(n===r){ return v[t]; }v[t]=n}},internal:function(t,n){if(e.isPlainObject(t)){ e.extend(!0,S,t); }else{if(n===r){ return S[t]; }S[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,v.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),S.verbose.apply(console,arguments)))},error:function(){v.silent||(S.error=Function.prototype.bind.call(console.error,console,v.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var t,n;v.performance&&(n=(t=(new Date).getTime())-(l||t),l=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=v.name+":",n=0;l=!1,clearTimeout(S.performance.timer),e.each(s,(function(e,t){n+=t["Execution Time"]})),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==r||console.table!==r)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),s=[]}},invoke:function(t,n,a){var o,l,s,u=F;return n=n||f,a=T||a,"string"==typeof t&&u!==r&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,(function(n,i){var a=n!=o?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[a])&&n!=o){ u=u[a]; }else{if(u[a]!==r){ return l=u[a],!1; }if(!e.isPlainObject(u[i])||n==o){ return u[i]!==r&&(l=u[i],!1); }u=u[i]}}))),e.isFunction(l)?s=l.apply(a,n):l!==r&&(s=l),e.isArray(i)?i.push(s):i!==r?i=[i,s]:s!==r&&(i=s),l}}).initialize()})),i!==r?i:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} must contain "{ruleValue}"',containExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain  "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,(function(e,t){n+="<li>"+t+"</li>"})),e(n+="</ul>")},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(t===r||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){return e.fn.form.settings.regExp.email.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,n){if(n instanceof RegExp){ return t.match(n); }var r,i=n.match(e.fn.form.settings.regExp.flags);return i&&(n=i.length>=2?i[1]:n,r=i.length>=3?i[2]:""),t.match(new RegExp(n,r))},integer:function(t,n){var i,a,o,l=e.fn.form.settings.regExp.integer;return n&&-1===["",".."].indexOf(n)&&(-1==n.indexOf("..")?l.test(n)&&(i=a=n-0):(o=n.split("..",2),l.test(o[0])&&(i=o[0]-0),l.test(o[1])&&(a=o[1]-0))),l.test(t)&&(i===r||t>=i)&&(a===r||t<=a)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return(e="string"==typeof e?e.toLowerCase():e)!=("string"==typeof t?t.toLowerCase():t)},notExactly:function(e,t){return e!=t},contains:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n,"i"))},containsExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n))},doesntContain:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n,"i"))},doesntContainExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n))},minLength:function(e,t){return e!==r&&e.length>=t},length:function(e,t){return e!==r&&e.length>=t},exactLength:function(e,t){return e!==r&&e.length==t},maxLength:function(e,t){return e!==r&&e.length<=t},match:function(t,n){var i;return e(this),e('[data-validate="'+n+'"]').length>0?i=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?i=e("#"+n).val():e('[name="'+n+'"]').length>0?i=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(i=e('[name="'+n+'[]"]')),i!==r&&t.toString()==i.toString()},different:function(t,n){var i;return e(this),e('[data-validate="'+n+'"]').length>0?i=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?i=e("#"+n).val():e('[name="'+n+'"]').length>0?i=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(i=e('[name="'+n+'[]"]')),i!==r&&t.toString()!==i.toString()},creditCard:function(t,n){var r,i,a={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},o={},l=!1,s="string"==typeof n&&n.split(",");if("string"==typeof t&&0!==t.length){if(t=t.replace(/[\-]/g,""),s&&(e.each(s,(function(n,r){(i=a[r])&&(o={length:-1!==e.inArray(t.length,i.length),pattern:-1!==t.search(i.pattern)}).length&&o.pattern&&(l=!0)})),!l)){ return!1; }if((r={number:-1!==e.inArray(t.length,a.unionPay.length),pattern:-1!==t.search(a.unionPay.pattern)}).number&&r.pattern){ return!0; }for(var u=t.length,c=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],f=0;u--;){ f+=d[c][parseInt(t.charAt(u),10)],c^=1; }return f%10==0&&f>0}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?-1===e.search(","):e.split(",").length<=t)}}}})(jQuery,window,document),(function(e,i,n,t){"use strict";i=void 0!==i&&i.Math==Math?i:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(o){var a,r=e(this),s=e(i),c=e(n),l=e("body"),d=r.selector||"",u=(new Date).getTime(),m=[],f=arguments[0],g="string"==typeof f,h=[].slice.call(arguments,1),v=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each((function(){var r,b,p,y,k,w,S,C,M,H=e.isPlainObject(o)?e.extend(!0,{},e.fn.modal.settings,o):e.extend({},e.fn.modal.settings),F=H.selector,D=H.className,A=H.namespace,x=H.error,T="."+A,O="module-"+A,z=e(this),q=e(H.context),E=z.find(F.close),j=this,N=z.data(O),P=!1;M={initialize:function(){M.verbose("Initializing dimmer",q),M.create.id(),M.create.dimmer(),M.refreshModals(),M.bind.events(),H.observeChanges&&M.observeChanges(),M.instantiate()},instantiate:function(){M.verbose("Storing instance of modal"),N=M,z.data(O,N)},create:{dimmer:function(){var i={debug:H.debug,variation:!H.centered&&"top aligned",dimmerName:"modals"},n=e.extend(!0,i,H.dimmerSettings);e.fn.dimmer!==t?(M.debug("Creating dimmer"),y=q.dimmer(n),H.detachable?(M.verbose("Modal is detachable, moving content into dimmer"),y.dimmer("add content",z)):M.set.undetached(),k=y.dimmer("get dimmer")):M.error(x.dimmer)},id:function(){S=(Math.random().toString(16)+"000000000").substr(2,8),w="."+S,M.verbose("Creating unique id for element",S)}},destroy:function(){M.verbose("Destroying previous modal"),z.removeData(O).off(T),s.off(w),k.off(w),E.off(T),q.dimmer("destroy")},observeChanges:function(){"MutationObserver"in i&&((C=new MutationObserver(function(e){M.debug("DOM tree modified, refreshing"),M.refresh()})).observe(j,{childList:!0,subtree:!0}),M.debug("Setting up mutation observer",C))},refresh:function(){M.remove.scrolling(),M.cacheSizes(),M.set.screenHeight(),M.set.type()},refreshModals:function(){b=z.siblings(F.modal),r=b.add(z)},attachEvents:function(i,n){var t=e(i);n=e.isFunction(M[n])?M[n]:M.toggle,t.length>0?(M.debug("Attaching modal events to element",i,n),t.off(T).on("click"+T,n)):M.error(x.notFound,i)},bind:{events:function(){M.verbose("Attaching events"),z.on("click"+T,F.close,M.event.close).on("click"+T,F.approve,M.event.approve).on("click"+T,F.deny,M.event.deny),s.on("resize"+w,M.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){P||!1===H.onApprove.call(j,e(this))?M.verbose("Approve callback returned false cancelling hide"):(P=!0,M.hide((function(){P=!1})))},deny:function(){P||!1===H.onDeny.call(j,e(this))?M.verbose("Deny callback returned false cancelling hide"):(P=!0,M.hide((function(){P=!1})))},close:function(){M.hide()},click:function(i){if(H.closable){var t=e(i.target).closest(F.modal).length>0,o=e.contains(n.documentElement,i.target);!t&&o&&M.is.active()&&(M.debug("Dimmer clicked, hiding all modals"),M.remove.clickaway(),H.allowMultiple?M.hide():M.hideAll())}else { M.verbose("Dimmer clicked but closable setting is disabled") }},debounce:function(e,i){clearTimeout(M.timer),M.timer=setTimeout(e,i)},keyboard:function(e){27==e.which&&(H.closable?(M.debug("Escape key pressed hiding modal"),M.hide()):M.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){y.dimmer("is active")&&(M.is.animating()||M.is.active())&&v(M.refresh)}},toggle:function(){M.is.active()||M.is.animating()?M.hide():M.show()},show:function(i){i=e.isFunction(i)?i:function(){},M.refreshModals(),M.set.dimmerSettings(),M.showModal(i)},hide:function(i){i=e.isFunction(i)?i:function(){},M.refreshModals(),M.hideModal(i)},showModal:function(i){i=e.isFunction(i)?i:function(){},M.is.animating()||!M.is.active()?(M.showDimmer(),M.cacheSizes(),M.set.screenHeight(),M.set.type(),M.set.clickaway(),!H.allowMultiple&&M.others.active()?M.hideOthers(M.showModal):(H.allowMultiple&&H.detachable&&z.detach().appendTo(k),H.onShow.call(j),H.transition&&e.fn.transition!==t&&z.transition("is supported")?(M.debug("Showing modal with css animations"),z.transition({debug:H.debug,animation:H.transition+" in",queue:H.queue,duration:H.duration,useFailSafe:!0,onComplete:function(){H.onVisible.apply(j),H.keyboardShortcuts&&M.add.keyboardShortcuts(),M.save.focus(),M.set.active(),H.autofocus&&M.set.autofocus(),i()}})):M.error(x.noTransition))):M.debug("Modal is already visible")},hideModal:function(i,n){i=e.isFunction(i)?i:function(){},M.debug("Hiding modal"),!1!==H.onHide.call(j,e(this))?(M.is.animating()||M.is.active())&&(H.transition&&e.fn.transition!==t&&z.transition("is supported")?(M.remove.active(),z.transition({debug:H.debug,animation:H.transition+" out",queue:H.queue,duration:H.duration,useFailSafe:!0,onStart:function(){M.others.active()||n||M.hideDimmer(),H.keyboardShortcuts&&M.remove.keyboardShortcuts()},onComplete:function(){H.onHidden.call(j),M.restore.focus(),i()}})):M.error(x.noTransition)):M.verbose("Hide callback returned false cancelling hide")},showDimmer:function(){y.dimmer("is animating")||!y.dimmer("is active")?(M.debug("Showing dimmer"),y.dimmer("show")):M.debug("Dimmer already visible")},hideDimmer:function(){y.dimmer("is animating")||y.dimmer("is active")?y.dimmer("hide",(function(){M.remove.clickaway(),M.remove.screenHeight()})):M.debug("Dimmer is not visible cannot hide")},hideAll:function(i){var n=r.filter("."+D.active+", ."+D.animating);i=e.isFunction(i)?i:function(){},n.length>0&&(M.debug("Hiding all visible modals"),M.hideDimmer(),n.modal("hide modal",i))},hideOthers:function(i){var n=b.filter("."+D.active+", ."+D.animating);i=e.isFunction(i)?i:function(){},n.length>0&&(M.debug("Hiding other modals",b),n.modal("hide modal",i,!0))},others:{active:function(){return b.filter("."+D.active).length>0},animating:function(){return b.filter("."+D.animating).length>0}},add:{keyboardShortcuts:function(){M.verbose("Adding keyboard shortcuts"),c.on("keyup"+T,M.event.keyboard)}},save:{focus:function(){e(n.activeElement).closest(z).length>0||(p=e(n.activeElement).blur())}},restore:{focus:function(){p&&p.length>0&&p.focus()}},remove:{active:function(){z.removeClass(D.active)},clickaway:function(){k.off("click"+w)},bodyStyle:function(){""===l.attr("style")&&(M.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){M.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){M.verbose("Removing keyboard shortcuts"),c.off("keyup"+T)},scrolling:function(){y.removeClass(D.scrolling),z.removeClass(D.scrolling)}},cacheSizes:function(){z.addClass(D.loading);var o=z.prop("scrollHeight"),a=z.outerHeight();M.cache!==t&&0===a||(M.cache={pageHeight:e(n).outerHeight(),height:a+H.offset,scrollHeight:o+H.offset,contextHeight:"body"==H.context?e(i).height():y.height()},M.cache.topOffset=-M.cache.height/2),z.removeClass(D.loading),M.debug("Caching modal and container sizes",M.cache)},can:{fit:function(){var e=M.cache.contextHeight,i=M.cache.contextHeight/2,n=M.cache.topOffset,t=M.cache.scrollHeight,o=M.cache.height,a=H.padding;return t>o?i+n+t+a<e:o+2*a<e}},is:{active:function(){return z.hasClass(D.active)},animating:function(){return z.transition("is supported")?z.transition("is animating"):z.is(":visible")},scrolling:function(){return y.hasClass(D.scrolling)},modernBrowser:function(){return!(i.ActiveXObject||"ActiveXObject"in i)}},set:{autofocus:function(){var e=z.find("[tabindex], :input").filter(":visible"),i=e.filter("[autofocus]"),n=i.length>0?i.first():e.first();n.length>0&&n.focus()},clickaway:function(){k.on("click"+w,M.event.click)},dimmerSettings:function(){if(e.fn.dimmer!==t){var i={debug:H.debug,dimmerName:"modals",closable:"auto",variation:!H.centered&&"top aligned",duration:{show:H.duration,hide:H.duration}},n=e.extend(!0,i,H.dimmerSettings);H.inverted?(n.variation=n.variation!==t?n.variation+" inverted":"inverted",k.addClass(D.inverted)):k.removeClass(D.inverted),H.blurring?y.addClass(D.blurring):y.removeClass(D.blurring),q.dimmer("setting",n)}else { M.error(x.dimmer) }},screenHeight:function(){M.can.fit()?l.css("height",""):(M.debug("Modal is taller than page content, resizing page height"),l.css("height",M.cache.height+2*H.padding))},active:function(){z.addClass(D.active)},scrolling:function(){y.addClass(D.scrolling),z.addClass(D.scrolling)},type:function(){M.can.fit()?(M.verbose("Modal fits on screen"),M.others.active()||M.others.animating()||M.remove.scrolling()):(M.verbose("Modal cannot fit on screen setting to scrolling"),M.set.scrolling())},undetached:function(){y.addClass(D.undetached)}},setting:function(i,n){if(M.debug("Changing setting",i,n),e.isPlainObject(i)){ e.extend(!0,H,i); }else{if(n===t){ return H[i]; }e.isPlainObject(H[i])?e.extend(!0,H[i],n):H[i]=n}},internal:function(i,n){if(e.isPlainObject(i)){ e.extend(!0,M,i); }else{if(n===t){ return M[i]; }M[i]=n}},debug:function(){!H.silent&&H.debug&&(H.performance?M.performance.log(arguments):(M.debug=Function.prototype.bind.call(console.info,console,H.name+":"),M.debug.apply(console,arguments)))},verbose:function(){!H.silent&&H.verbose&&H.debug&&(H.performance?M.performance.log(arguments):(M.verbose=Function.prototype.bind.call(console.info,console,H.name+":"),M.verbose.apply(console,arguments)))},error:function(){H.silent||(M.error=Function.prototype.bind.call(console.error,console,H.name+":"),M.error.apply(console,arguments))},performance:{log:function(e){var i,n;H.performance&&(n=(i=(new Date).getTime())-(u||i),u=i,m.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(M.performance.timer),M.performance.timer=setTimeout(M.performance.display,500)},display:function(){var i=H.name+":",n=0;u=!1,clearTimeout(M.performance.timer),e.each(m,(function(e,i){n+=i["Execution Time"]})),i+=" "+n+"ms",d&&(i+=" '"+d+"'"),(console.group!==t||console.table!==t)&&m.length>0&&(console.groupCollapsed(i),console.table?console.table(m):e.each(m,(function(e,i){console.log(i.Name+": "+i["Execution Time"]+"ms")})),console.groupEnd()),m=[]}},invoke:function(i,n,o){var r,s,c,l=N;return n=n||h,o=j||o,"string"==typeof i&&l!==t&&(i=i.split(/[\. ]/),r=i.length-1,e.each(i,(function(n,o){var a=n!=r?o+i[n+1].charAt(0).toUpperCase()+i[n+1].slice(1):i;if(e.isPlainObject(l[a])&&n!=r){ l=l[a]; }else{if(l[a]!==t){ return s=l[a],!1; }if(!e.isPlainObject(l[o])||n==r){ return l[o]!==t&&(s=l[o],!1); }l=l[o]}}))),e.isFunction(s)?c=s.apply(o,n):s!==t&&(c=s),e.isArray(a)?a.push(c):a!==t?a=[a,c]:c!==t&&(a=c),s}},g?(N===t&&M.initialize(),M.invoke(f)):(N!==t&&N.invoke("destroy"),M.initialize())})),a!==t?a:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,centered:!0,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}})(jQuery,window,document),(function(e,o,t,n){"use strict";o=void 0!==o&&o.Math==Math?o:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(t){var i,s=e(this),a=s.selector||"",r=(new Date).getTime(),l=[],c=arguments[0],g="string"==typeof c,u=[].slice.call(arguments,1);return s.each((function(){var s,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.nag.settings,t):e.extend({},e.fn.nag.settings),m=(d.className,d.selector),f=d.error,p=d.namespace,h="."+p,b=p+"-module",v=e(this),y=(v.find(m.close),d.context?e(d.context):e("body")),k=this,S=v.data(b);o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,s={initialize:function(){s.verbose("Initializing element"),v.on("click"+h,m.close,s.dismiss).data(b,s),d.detachable&&v.parent()[0]!==y[0]&&v.detach().prependTo(y),d.displayTime>0&&setTimeout(s.hide,d.displayTime),s.show()},destroy:function(){s.verbose("Destroying instance"),v.removeData(b).off(h)},show:function(){s.should.show()&&!v.is(":visible")&&(s.debug("Showing nag",d.animation.show),"fade"==d.animation.show?v.fadeIn(d.duration,d.easing):v.slideDown(d.duration,d.easing))},hide:function(){s.debug("Showing nag",d.animation.hide),"fade"==d.animation.show?v.fadeIn(d.duration,d.easing):v.slideUp(d.duration,d.easing)},onHide:function(){s.debug("Removing nag",d.animation.hide),v.remove(),d.onHide&&d.onHide()},dismiss:function(e){d.storageMethod&&s.storage.set(d.key,d.value),s.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return d.persist?(s.debug("Persistent nag is set, can show nag"),!0):s.storage.get(d.key)!=d.value.toString()?(s.debug("Stored value is not set, can show nag",s.storage.get(d.key)),!0):(s.debug("Stored value is set, cannot show nag",s.storage.get(d.key)),!1)}},get:{storageOptions:function(){var e={};return d.expires&&(e.expires=d.expires),d.domain&&(e.domain=d.domain),d.path&&(e.path=d.path),e}},clear:function(){s.storage.remove(d.key)},storage:{set:function(t,i){var a=s.get.storageOptions();if("localstorage"==d.storageMethod&&o.localStorage!==n){ o.localStorage.setItem(t,i),s.debug("Value stored using local storage",t,i); }else if("sessionstorage"==d.storageMethod&&o.sessionStorage!==n){ o.sessionStorage.setItem(t,i),s.debug("Value stored using session storage",t,i); }else{if(e.cookie===n){ return void s.error(f.noCookieStorage); }e.cookie(t,i,a),s.debug("Value stored using cookie",t,i,a)}},get:function(t,i){var a;return"localstorage"==d.storageMethod&&o.localStorage!==n?a=o.localStorage.getItem(t):"sessionstorage"==d.storageMethod&&o.sessionStorage!==n?a=o.sessionStorage.getItem(t):e.cookie!==n?a=e.cookie(t):s.error(f.noCookieStorage),"undefined"!=a&&"null"!=a&&a!==n&&null!==a||(a=n),a},remove:function(t){var i=s.get.storageOptions();"localstorage"==d.storageMethod&&o.localStorage!==n?o.localStorage.removeItem(t):"sessionstorage"==d.storageMethod&&o.sessionStorage!==n?o.sessionStorage.removeItem(t):e.cookie!==n?e.removeCookie(t,i):s.error(f.noStorage)}},setting:function(o,t){if(s.debug("Changing setting",o,t),e.isPlainObject(o)){ e.extend(!0,d,o); }else{if(t===n){ return d[o]; }e.isPlainObject(d[o])?e.extend(!0,d[o],t):d[o]=t}},internal:function(o,t){if(e.isPlainObject(o)){ e.extend(!0,s,o); }else{if(t===n){ return s[o]; }s[o]=t}},debug:function(){!d.silent&&d.debug&&(d.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,d.name+":"),s.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),s.verbose.apply(console,arguments)))},error:function(){d.silent||(s.error=Function.prototype.bind.call(console.error,console,d.name+":"),s.error.apply(console,arguments))},performance:{log:function(e){var o,t;d.performance&&(t=(o=(new Date).getTime())-(r||o),r=o,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":t})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var o=d.name+":",t=0;r=!1,clearTimeout(s.performance.timer),e.each(l,(function(e,o){t+=o["Execution Time"]})),o+=" "+t+"ms",a&&(o+=" '"+a+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(o),console.table?console.table(l):e.each(l,(function(e,o){console.log(o.Name+": "+o["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(o,t,a){var r,l,c,g=S;return t=t||u,a=k||a,"string"==typeof o&&g!==n&&(o=o.split(/[\. ]/),r=o.length-1,e.each(o,(function(t,i){var a=t!=r?i+o[t+1].charAt(0).toUpperCase()+o[t+1].slice(1):o;if(e.isPlainObject(g[a])&&t!=r){ g=g[a]; }else{if(g[a]!==n){ return l=g[a],!1; }if(!e.isPlainObject(g[i])||t==r){ return g[i]!==n?(l=g[i],!1):(s.error(f.method,o),!1); }g=g[i]}}))),e.isFunction(l)?c=l.apply(a,t):l!==n&&(c=l),e.isArray(i)?i.push(c):i!==n?i=[i,c]:c!==n&&(i=c),l}},g?(S===n&&s.initialize(),s.invoke(c)):(S!==n&&S.invoke("destroy"),s.initialize())})),i!==n?i:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,o,t,n,i){return-n*(o/=i)*(o-2)+t}})})(jQuery,window,document),(function(t,e,o,n){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t.fn.popup=function(i){var r,a=t(this),s=t(o),p=t(e),l=t("body"),u=a.selector||"",c=(new Date).getTime(),d=[],f=arguments[0],g="string"==typeof f,h=[].slice.call(arguments,1);return a.each((function(){var a,m,v,b,w,y,P=t.isPlainObject(i)?t.extend(!0,{},t.fn.popup.settings,i):t.extend({},t.fn.popup.settings),C=P.selector,T=P.className,x=P.error,k=P.metadata,E=P.namespace,S="."+P.namespace,A="module-"+E,F=t(this),O=t(P.context),D=t(P.scrollContext),j=t(P.boundary),H=P.target?t(P.target):F,R=0,N=!1,V=!1,W=this,M=F.data(A);y={initialize:function(){y.debug("Initializing",F),y.createID(),y.bind.events(),!y.exists()&&P.preserve&&y.create(),P.observeChanges&&y.observeChanges(),y.instantiate()},instantiate:function(){y.verbose("Storing instance",y),M=y,F.data(A,M)},observeChanges:function(){"MutationObserver"in e&&((v=new MutationObserver(y.event.documentChanged)).observe(o,{childList:!0,subtree:!0}),y.debug("Setting up mutation observer",v))},refresh:function(){P.popup?a=t(P.popup).eq(0):P.inline&&(a=H.nextAll(C.popup).eq(0),P.popup=a),P.popup?(a.addClass(T.loading),m=y.get.offsetParent(),a.removeClass(T.loading),P.movePopup&&y.has.popup()&&y.get.offsetParent(a)[0]!==m[0]&&(y.debug("Moving popup to the same offset parent as target"),a.detach().appendTo(m))):m=P.inline?y.get.offsetParent(H):y.has.popup()?y.get.offsetParent(a):l,m.is("html")&&m[0]!==l[0]&&(y.debug("Setting page as offset parent"),m=l),y.get.variation()&&y.set.variation()},reposition:function(){y.refresh(),y.set.position()},destroy:function(){y.debug("Destroying previous module"),v&&v.disconnect(),a&&!P.preserve&&y.removePopup(),clearTimeout(y.hideTimer),clearTimeout(y.showTimer),y.unbind.close(),y.unbind.events(),F.removeData(A)},event:{start:function(e){var o=t.isPlainObject(P.delay)?P.delay.show:P.delay;clearTimeout(y.hideTimer),V||(y.showTimer=setTimeout(y.show,o))},end:function(){var e=t.isPlainObject(P.delay)?P.delay.hide:P.delay;clearTimeout(y.showTimer),y.hideTimer=setTimeout(y.hide,e)},touchstart:function(t){V=!0,y.show()},resize:function(){y.is.visible()&&y.set.position()},documentChanged:function(e){[].forEach.call(e,(function(e){e.removedNodes&&[].forEach.call(e.removedNodes,(function(e){(e==W||t(e).find(W).length>0)&&(y.debug("Element removed from DOM, tearing down events"),y.destroy())}))}))},hideGracefully:function(e){var n=t(e.target),i=t.contains(o.documentElement,e.target),r=n.closest(C.popup).length>0;e&&!r&&i?(y.debug("Click occurred outside popup hiding popup"),y.hide()):y.debug("Click was inside popup, keeping popup open")}},create:function(){var e=y.get.html(),o=y.get.title(),n=y.get.content();e||n||o?(y.debug("Creating pop-up html"),e||(e=P.templates.popup({title:o,content:n})),a=t("<div/>").addClass(T.popup).data(k.activator,F).html(e),P.inline?(y.verbose("Inserting popup element inline",a),a.insertAfter(F)):(y.verbose("Appending popup element to body",a),a.appendTo(O)),y.refresh(),y.set.variation(),P.hoverable&&y.bind.popup(),P.onCreate.call(a,W)):0!==H.next(C.popup).length?(y.verbose("Pre-existing popup found"),P.inline=!0,P.popup=H.next(C.popup).data(k.activator,F),y.refresh(),P.hoverable&&y.bind.popup()):P.popup?(t(P.popup).data(k.activator,F),y.verbose("Used popup specified in settings"),y.refresh(),P.hoverable&&y.bind.popup()):y.debug("No content specified skipping display",W)},createID:function(){w=(Math.random().toString(16)+"000000000").substr(2,8),b="."+w,y.verbose("Creating unique id for element",w)},toggle:function(){y.debug("Toggling pop-up"),y.is.hidden()?(y.debug("Popup is hidden, showing pop-up"),y.unbind.close(),y.show()):(y.debug("Popup is visible, hiding pop-up"),y.hide())},show:function(t){if(t=t||function(){},y.debug("Showing pop-up",P.transition),y.is.hidden()&&(!y.is.active()||!y.is.dropdown())){if(y.exists()||y.create(),!1===P.onShow.call(a,W)){ return void y.debug("onShow callback returned false, cancelling popup animation"); }P.preserve||P.popup||y.refresh(),a&&y.set.position()&&(y.save.conditions(),P.exclusive&&y.hideAll(),y.animate.show(t))}},hide:function(t){if(t=t||function(){},y.is.visible()||y.is.animating()){if(!1===P.onHide.call(a,W)){ return void y.debug("onHide callback returned false, cancelling popup animation"); }y.remove.visible(),y.unbind.close(),y.restore.conditions(),y.animate.hide(t)}},hideAll:function(){t(C.popup).filter("."+T.popupVisible).each((function(){t(this).data(k.activator).popup("hide")}))},exists:function(){return!!a&&(P.inline||P.popup?y.has.popup():a.closest(O).length>=1)},removePopup:function(){y.has.popup()&&!P.popup&&(y.debug("Removing popup",a),a.remove(),a=n,P.onRemove.call(a,W))},save:{conditions:function(){y.cache={title:F.attr("title")},y.cache.title&&F.removeAttr("title"),y.verbose("Saving original attributes",y.cache.title)}},restore:{conditions:function(){return y.cache&&y.cache.title&&(F.attr("title",y.cache.title),y.verbose("Restoring original attributes",y.cache.title)),!0}},supports:{svg:function(){return"undefined"==typeof SVGGraphicsElement}},animate:{show:function(e){e=t.isFunction(e)?e:function(){},P.transition&&t.fn.transition!==n&&F.transition("is supported")?(y.set.visible(),a.transition({animation:P.transition+" in",queue:!1,debug:P.debug,verbose:P.verbose,duration:P.duration,onComplete:function(){y.bind.close(),e.call(a,W),P.onVisible.call(a,W)}})):y.error(x.noTransition)},hide:function(e){e=t.isFunction(e)?e:function(){},y.debug("Hiding pop-up"),!1!==P.onHide.call(a,W)?P.transition&&t.fn.transition!==n&&F.transition("is supported")?a.transition({animation:P.transition+" out",queue:!1,duration:P.duration,debug:P.debug,verbose:P.verbose,onComplete:function(){y.reset(),e.call(a,W),P.onHidden.call(a,W)}}):y.error(x.noTransition):y.debug("onHide callback returned false, cancelling popup animation")}},change:{content:function(t){a.html(t)}},get:{html:function(){return F.removeData(k.html),F.data(k.html)||P.html},title:function(){return F.removeData(k.title),F.data(k.title)||P.title},content:function(){return F.removeData(k.content),F.data(k.content)||P.content||F.attr("title")},variation:function(){return F.removeData(k.variation),F.data(k.variation)||P.variation},popup:function(){return a},popupOffset:function(){return a.offset()},calculations:function(){var t,o=y.get.offsetParent(a),n=H[0],i=j[0]==e,r=P.inline||P.popup&&P.movePopup?H.position():H.offset(),s=i?{top:0,left:0}:j.offset(),l={},u=i?{top:p.scrollTop(),left:p.scrollLeft()}:{top:0,left:0};if(l={target:{element:H[0],width:H.outerWidth(),height:H.outerHeight(),top:r.top,left:r.left,margin:{}},popup:{width:a.outerWidth(),height:a.outerHeight()},parent:{width:m.outerWidth(),height:m.outerHeight()},screen:{top:s.top,left:s.left,scroll:{top:u.top,left:u.left},width:j.width(),height:j.height()}},o.get(0)!==m.get(0)){var c=o.offset();l.target.top-=c.top,l.target.left-=c.left,l.parent.width=o.outerWidth(),l.parent.height=o.outerHeight()}return P.setFluidWidth&&y.is.fluid()&&(l.container={width:a.parent().outerWidth()},l.popup.width=l.container.width),l.target.margin.top=P.inline?parseInt(e.getComputedStyle(n).getPropertyValue("margin-top"),10):0,l.target.margin.left=P.inline?y.is.rtl()?parseInt(e.getComputedStyle(n).getPropertyValue("margin-right"),10):parseInt(e.getComputedStyle(n).getPropertyValue("margin-left"),10):0,t=l.screen,l.boundary={top:t.top+t.scroll.top,bottom:t.top+t.scroll.top+t.height,left:t.left+t.scroll.left,right:t.left+t.scroll.left+t.width},l},id:function(){return w},startEvent:function(){return"hover"==P.on?"mouseenter":"focus"==P.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==P.on?"mouseleave":"focus"==P.on&&"blur"},distanceFromBoundary:function(t,e){var o,n,i={};return o=(e=e||y.get.calculations()).popup,n=e.boundary,t&&(i={top:t.top-n.top,left:t.left-n.left,right:n.right-(t.left+o.width),bottom:n.bottom-(t.top+o.height)},y.verbose("Distance from boundaries determined",t,i)),i},offsetParent:function(e){var o=(e!==n?e[0]:H[0]).parentNode,i=t(o);if(o){ for(var r="none"===i.css("transform"),a="static"===i.css("position"),s=i.is("body");o&&!s&&a&&r;){ o=o.parentNode,r="none"===(i=t(o)).css("transform"),a="static"===i.css("position"),s=i.is("body"); } }return i&&i.length>0?i:t()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(t){var e=t.split(" "),o=e[0],n=e[1],i="top"==o||"bottom"==o,r=!1,a=!1,s=!1;return N||(y.verbose("All available positions available"),N=y.get.positions()),y.debug("Recording last position tried",t),N[t]=!0,"opposite"===P.prefer&&(s=(s=[{top:"bottom",bottom:"top",left:"right",right:"left"}[o],n]).join(" "),r=!0===N[s],y.debug("Trying opposite strategy",s)),"adjacent"===P.prefer&&i&&(s=(s=[o,{left:"center",center:"right",right:"left"}[n]]).join(" "),a=!0===N[s],y.debug("Trying adjacent strategy",s)),(a||r)&&(y.debug("Using backup position",s),s={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"}[t]),s}},set:{position:function(t,e){if(0!==H.length&&0!==a.length){var o,i,r,s,p,l,u,c;if(e=e||y.get.calculations(),t=t||F.data(k.position)||P.position,o=F.data(k.offset)||P.offset,i=P.distanceAway,r=e.target,s=e.popup,p=e.parent,y.should.centerArrow(e)&&(y.verbose("Adjusting offset to center arrow on small target element"),"top left"!=t&&"bottom left"!=t||(o+=r.width/2,o-=P.arrowPixelsFromEdge),"top right"!=t&&"bottom right"!=t||(o-=r.width/2,o+=P.arrowPixelsFromEdge)),0===r.width&&0===r.height&&!y.is.svg(r.element)){ return y.debug("Popup target is hidden, no action taken"),!1; }switch(P.inline&&(y.debug("Adding margin to calculation",r.margin),"left center"==t||"right center"==t?(o+=r.margin.top,i+=-r.margin.left):"top left"==t||"top center"==t||"top right"==t?(o+=r.margin.left,i-=r.margin.top):(o+=r.margin.left,i+=r.margin.top)),y.debug("Determining popup position from calculations",t,e),y.is.rtl()&&(t=t.replace(/left|right/g,(function(t){return"left"==t?"right":"left"})),y.debug("RTL: Popup position updated",t)),R==P.maxSearchDepth&&"string"==typeof P.lastResort&&(t=P.lastResort),t){case"top left":l={top:"auto",bottom:p.height-r.top+i,left:r.left+o,right:"auto"};break;case"top center":l={bottom:p.height-r.top+i,left:r.left+r.width/2-s.width/2+o,top:"auto",right:"auto"};break;case"top right":l={bottom:p.height-r.top+i,right:p.width-r.left-r.width-o,top:"auto",left:"auto"};break;case"left center":l={top:r.top+r.height/2-s.height/2+o,right:p.width-r.left+i,left:"auto",bottom:"auto"};break;case"right center":l={top:r.top+r.height/2-s.height/2+o,left:r.left+r.width+i,bottom:"auto",right:"auto"};break;case"bottom left":l={top:r.top+r.height+i,left:r.left+o,bottom:"auto",right:"auto"};break;case"bottom center":l={top:r.top+r.height+i,left:r.left+r.width/2-s.width/2+o,bottom:"auto",right:"auto"};break;case"bottom right":l={top:r.top+r.height+i,right:p.width-r.left-r.width-o,left:"auto",bottom:"auto"}}if(l===n&&y.error(x.invalidPosition,t),y.debug("Calculated popup positioning values",l),a.css(l).removeClass(T.position).addClass(t).addClass(T.loading),u=y.get.popupOffset(),c=y.get.distanceFromBoundary(u,e),y.is.offstage(c,t)){if(y.debug("Position is outside viewport",t),R<P.maxSearchDepth){ return R++,t=y.get.nextPosition(t),y.debug("Trying new position",t),!!a&&y.set.position(t,e); }if(!P.lastResort){ return y.debug("Popup could not find a position to display",a),y.error(x.cannotPlace,W),y.remove.attempts(),y.remove.loading(),y.reset(),P.onUnplaceable.call(a,W),!1; }y.debug("No position found, showing with last position")}return y.debug("Position is on stage",t),y.remove.attempts(),y.remove.loading(),P.setFluidWidth&&y.is.fluid()&&y.set.fluidWidth(e),!0}y.error(x.notFound)},fluidWidth:function(t){t=t||y.get.calculations(),y.debug("Automatically setting element width to parent width",t.parent.width),a.css("width",t.container.width)},variation:function(t){(t=t||y.get.variation())&&y.has.popup()&&(y.verbose("Adding variation to popup",t),a.addClass(t))},visible:function(){F.addClass(T.visible)}},remove:{loading:function(){a.removeClass(T.loading)},variation:function(t){(t=t||y.get.variation())&&(y.verbose("Removing variation",t),a.removeClass(t))},visible:function(){F.removeClass(T.visible)},attempts:function(){y.verbose("Resetting all searched positions"),R=0,N=!1}},bind:{events:function(){y.debug("Binding popup events to module"),"click"==P.on&&F.on("click"+S,y.toggle),"hover"==P.on&&F.on("touchstart"+S,y.event.touchstart),y.get.startEvent()&&F.on(y.get.startEvent()+S,y.event.start).on(y.get.endEvent()+S,y.event.end),P.target&&y.debug("Target set to element",H),p.on("resize"+b,y.event.resize)},popup:function(){y.verbose("Allowing hover events on popup to prevent closing"),a&&y.has.popup()&&a.on("mouseenter"+S,y.event.start).on("mouseleave"+S,y.event.end)},close:function(){(!0===P.hideOnScroll||"auto"==P.hideOnScroll&&"click"!=P.on)&&y.bind.closeOnScroll(),"hover"==P.on&&V&&y.bind.touchClose(),"click"==P.on&&P.closable&&y.bind.clickaway()},closeOnScroll:function(){y.verbose("Binding scroll close event to document"),D.one(y.get.scrollEvent()+b,y.event.hideGracefully)},touchClose:function(){y.verbose("Binding popup touchclose event to document"),s.on("touchstart"+b,(function(t){y.verbose("Touched away from popup"),y.event.hideGracefully.call(W,t)}))},clickaway:function(){y.verbose("Binding popup close event to document"),s.on("click"+b,(function(t){y.verbose("Clicked away from popup"),y.event.hideGracefully.call(W,t)}))}},unbind:{events:function(){p.off(b),F.off(S)},close:function(){s.off(b),D.off(b)}},has:{popup:function(){return a&&a.length>0}},should:{centerArrow:function(t){return!y.is.basic()&&t.target.width<=2*P.arrowPixelsFromEdge}},is:{offstage:function(e,o){var n=[];return t.each(e,(function(t,e){e<-P.jitter&&(y.debug("Position exceeds allowable distance from edge",t,e,o),n.push(t))})),n.length>0},svg:function(t){return y.supports.svg()&&t instanceof SVGGraphicsElement},basic:function(){return F.hasClass(T.basic)},active:function(){return F.hasClass(T.active)},animating:function(){return a!==n&&a.hasClass(T.animating)},fluid:function(){return a!==n&&a.hasClass(T.fluid)},visible:function(){return a!==n&&a.hasClass(T.popupVisible)},dropdown:function(){return F.hasClass(T.dropdown)},hidden:function(){return!y.is.visible()},rtl:function(){return"rtl"==F.css("direction")}},reset:function(){y.remove.visible(),P.preserve?t.fn.transition!==n&&a.transition("remove transition"):y.removePopup()},setting:function(e,o){if(t.isPlainObject(e)){ t.extend(!0,P,e); }else{if(o===n){ return P[e]; }P[e]=o}},internal:function(e,o){if(t.isPlainObject(e)){ t.extend(!0,y,e); }else{if(o===n){ return y[e]; }y[e]=o}},debug:function(){!P.silent&&P.debug&&(P.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,P.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!P.silent&&P.verbose&&P.debug&&(P.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,P.name+":"),y.verbose.apply(console,arguments)))},error:function(){P.silent||(y.error=Function.prototype.bind.call(console.error,console,P.name+":"),y.error.apply(console,arguments))},performance:{log:function(t){var e,o;P.performance&&(o=(e=(new Date).getTime())-(c||e),c=e,d.push({Name:t[0],Arguments:[].slice.call(t,1)||"",Element:W,"Execution Time":o})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var e=P.name+":",o=0;c=!1,clearTimeout(y.performance.timer),t.each(d,(function(t,e){o+=e["Execution Time"]})),e+=" "+o+"ms",u&&(e+=" '"+u+"'"),(console.group!==n||console.table!==n)&&d.length>0&&(console.groupCollapsed(e),console.table?console.table(d):t.each(d,(function(t,e){console.log(e.Name+": "+e["Execution Time"]+"ms")})),console.groupEnd()),d=[]}},invoke:function(e,o,i){var a,s,p,l=M;return o=o||h,i=W||i,"string"==typeof e&&l!==n&&(e=e.split(/[\. ]/),a=e.length-1,t.each(e,(function(o,i){var r=o!=a?i+e[o+1].charAt(0).toUpperCase()+e[o+1].slice(1):e;if(t.isPlainObject(l[r])&&o!=a){ l=l[r]; }else{if(l[r]!==n){ return s=l[r],!1; }if(!t.isPlainObject(l[i])||o==a){ return l[i]!==n&&(s=l[i],!1); }l=l[i]}}))),t.isFunction(s)?p=s.apply(i,o):s!==n&&(p=s),t.isArray(r)?r.push(p):r!==n?r=[r,p]:p!==n&&(r=p),s}},g?(M===n&&y.initialize(),y.invoke(f)):(M!==n&&M.invoke("destroy"),y.initialize())})),r!==n?r:this},t.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:e,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:e,prefer:"opposite",lastResort:!1,arrowPixelsFromEdge:20,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",basic:"basic",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(t)?t.replace(/[&<>"'`]/g,(function(t){return e[t]})):t},popup:function(e){var o="",i=t.fn.popup.settings.templates.escape;return typeof e!==n&&(typeof e.title!==n&&e.title&&(e.title=i(e.title),o+='<div class="header">'+e.title+"</div>"),typeof e.content!==n&&e.content&&(e.content=i(e.content),o+='<div class="content">'+e.content+"</div>")),o}}}})(jQuery,window,document),(function(e,t,n,r){"use strict";void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")()),e.fn.progress=function(t){var a,o=e(this),i=o.selector||"",s=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return o.each((function(){var o,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),v=g.className,p=g.metadata,f=g.namespace,m=g.selector,b=g.error,h="."+f,x="module-"+f,w=e(this),y=e(this).find(m.bar),V=e(this).find(m.progress),C=e(this).find(m.label),E=this,P=w.data(x),T=!1;o={initialize:function(){o.debug("Initializing progress bar",g),o.set.duration(),o.set.transitionEvent(),o.read.metadata(),o.read.settings(),o.instantiate()},instantiate:function(){o.verbose("Storing instance of progress",o),P=o,w.data(x,o)},destroy:function(){o.verbose("Destroying previous progress for",w),clearInterval(P.interval),o.remove.state(),w.removeData(x),P=r},reset:function(){o.remove.nextValue(),o.update.progress(0)},complete:function(){(o.percent===r||o.percent<100)&&(o.remove.progressPoll(),o.set.percent(100))},read:{metadata:function(){var e={percent:w.data(p.percent),total:w.data(p.total),value:w.data(p.value)};e.percent&&(o.debug("Current percent value set from metadata",e.percent),o.set.percent(e.percent)),e.total&&(o.debug("Total value set from metadata",e.total),o.set.total(e.total)),e.value&&(o.debug("Current value set from metadata",e.value),o.set.value(e.value),o.set.progress(e.value))},settings:function(){!1!==g.total&&(o.debug("Current total set in settings",g.total),o.set.total(g.total)),!1!==g.value&&(o.debug("Current value set in settings",g.value),o.set.value(g.value),o.set.progress(o.value)),!1!==g.percent&&(o.debug("Current percent set in settings",g.percent),o.set.percent(g.percent))}},bind:{transitionEnd:function(e){var t=o.get.transitionEnd();y.one(t+h,(function(t){clearTimeout(o.failSafeTimer),e.call(this,t)})),o.failSafeTimer=setTimeout((function(){y.triggerHandler(t)}),g.duration+g.failSafeDelay),o.verbose("Adding fail safe timer",o.timer)}},increment:function(e){var t,n;o.has.total()?n=(t=o.get.value())+(e=e||1):(n=(t=o.get.percent())+(e=e||o.get.randomValue()),o.debug("Incrementing percentage by",t,n)),n=o.get.normalizedValue(n),o.set.progress(n)},decrement:function(e){var t,n;o.get.total()?(n=(t=o.get.value())-(e=e||1),o.debug("Decrementing value by",e,t)):(n=(t=o.get.percent())-(e=e||o.get.randomValue()),o.debug("Decrementing percentage by",e,t)),n=o.get.normalizedValue(n),o.set.progress(n)},has:{progressPoll:function(){return o.progressPoll},total:function(){return!1!==o.get.total()}},get:{text:function(e){var t=o.value||0,n=o.total||0,r=T?o.get.displayPercent():o.percent||0,a=o.total>0?n-t:100-r;return e=(e=e||"").replace("{value}",t).replace("{total}",n).replace("{left}",a).replace("{percent}",r),o.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0){ return o.debug("Value cannot decrement below 0"),0; }if(o.has.total()){if(e>o.total){ return o.debug("Value cannot increment above total",o.total),o.total }}else if(e>100){ return o.debug("Value cannot increment above 100 percent"),100; }return e},updateInterval:function(){return"auto"==g.updateInterval?g.duration:g.updateInterval},randomValue:function(){return o.debug("Generating random increment percentage"),Math.floor(Math.random()*g.random.max+g.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a){ if(t.style[e]!==r){ return a[e] } }},displayPercent:function(){var e=y.width(),t=w.width(),n=e>parseInt(y.css("min-width"),10)?e/t*100:o.percent;return g.precision>0?Math.round(n*(10*g.precision))/(10*g.precision):Math.round(n)},percent:function(){return o.percent||0},value:function(){return o.nextValue||o.value||0},total:function(){return o.total||!1}},create:{progressPoll:function(){o.progressPoll=setTimeout((function(){o.update.toNextValue(),o.remove.progressPoll()}),o.get.updateInterval())}},is:{complete:function(){return o.is.success()||o.is.warning()||o.is.error()},success:function(){return w.hasClass(v.success)},warning:function(){return w.hasClass(v.warning)},error:function(){return w.hasClass(v.error)},active:function(){return w.hasClass(v.active)},visible:function(){return w.is(":visible")}},remove:{progressPoll:function(){o.verbose("Removing progress poll timer"),o.progressPoll&&(clearTimeout(o.progressPoll),delete o.progressPoll)},nextValue:function(){o.verbose("Removing progress value stored for next update"),delete o.nextValue},state:function(){o.verbose("Removing stored state"),delete o.total,delete o.percent,delete o.value},active:function(){o.verbose("Removing active state"),w.removeClass(v.active)},success:function(){o.verbose("Removing success state"),w.removeClass(v.success)},warning:function(){o.verbose("Removing warning state"),w.removeClass(v.warning)},error:function(){o.verbose("Removing error state"),w.removeClass(v.error)}},set:{barWidth:function(e){e>100?o.error(b.tooHigh,e):e<0?o.error(b.tooLow,e):(y.css("width",e+"%"),w.attr("data-percent",parseInt(e,10)))},duration:function(e){e="number"==typeof(e=e||g.duration)?e+"ms":e,o.verbose("Setting progress bar transition duration",e),y.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=g.precision>0?Math.round(e*(10*g.precision))/(10*g.precision):Math.round(e),o.percent=e,o.has.total()||(o.value=g.precision>0?Math.round(e/100*o.total*(10*g.precision))/(10*g.precision):Math.round(e/100*o.total*10)/10,g.limitValues&&(o.value=o.value>100?100:o.value<0?0:o.value)),o.set.barWidth(e),o.set.labelInterval(),o.set.labels(),g.onChange.call(E,e,o.value,o.total)},labelInterval:function(){clearInterval(o.interval),o.bind.transitionEnd((function(){o.verbose("Bar finished animating, removing continuous label updates"),clearInterval(o.interval),T=!1,o.set.labels()})),T=!0,o.interval=setInterval((function(){e.contains(n.documentElement,E)||(clearInterval(o.interval),T=!1),o.set.labels()}),g.framerate)},labels:function(){o.verbose("Setting both bar progress and outer label text"),o.set.barLabel(),o.set.state()},label:function(e){(e=e||"")&&(e=o.get.text(e),o.verbose("Setting label to text",e),C.text(e))},state:function(e){100===(e=e!==r?e:o.percent)?g.autoSuccess&&!(o.is.warning()||o.is.error()||o.is.success())?(o.set.success(),o.debug("Automatically triggering success at 100%")):(o.verbose("Reached 100% removing active state"),o.remove.active(),o.remove.progressPoll()):e>0?(o.verbose("Adjusting active progress bar label",e),o.set.active()):(o.remove.active(),o.set.label(g.text.active))},barLabel:function(e){e!==r?V.text(o.get.text(e)):"ratio"==g.label&&o.total?(o.verbose("Adding ratio to bar label"),V.text(o.get.text(g.text.ratio))):"percent"==g.label&&(o.verbose("Adding percentage to bar label"),V.text(o.get.text(g.text.percent)))},active:function(e){e=e||g.text.active,o.debug("Setting active state"),g.showActivity&&!o.is.active()&&w.addClass(v.active),o.remove.warning(),o.remove.error(),o.remove.success(),(e=g.onLabelUpdate("active",e,o.value,o.total))&&o.set.label(e),o.bind.transitionEnd((function(){g.onActive.call(E,o.value,o.total)}))},success:function(e){e=e||g.text.success||g.text.active,o.debug("Setting success state"),w.addClass(v.success),o.remove.active(),o.remove.warning(),o.remove.error(),o.complete(),g.text.success?(e=g.onLabelUpdate("success",e,o.value,o.total),o.set.label(e)):(e=g.onLabelUpdate("active",e,o.value,o.total),o.set.label(e)),o.bind.transitionEnd((function(){g.onSuccess.call(E,o.total)}))},warning:function(e){e=e||g.text.warning,o.debug("Setting warning state"),w.addClass(v.warning),o.remove.active(),o.remove.success(),o.remove.error(),o.complete(),(e=g.onLabelUpdate("warning",e,o.value,o.total))&&o.set.label(e),o.bind.transitionEnd((function(){g.onWarning.call(E,o.value,o.total)}))},error:function(e){e=e||g.text.error,o.debug("Setting error state"),w.addClass(v.error),o.remove.active(),o.remove.success(),o.remove.warning(),o.complete(),(e=g.onLabelUpdate("error",e,o.value,o.total))&&o.set.label(e),o.bind.transitionEnd((function(){g.onError.call(E,o.value,o.total)}))},transitionEvent:function(){o.get.transitionEnd()},total:function(e){o.total=e},value:function(e){o.value=e},progress:function(e){o.has.progressPoll()?(o.debug("Updated within interval, setting next update to use new value",e),o.set.nextValue(e)):(o.debug("First update in progress update interval, immediately updating",e),o.update.progress(e),o.create.progressPoll())},nextValue:function(e){o.nextValue=e}},update:{toNextValue:function(){var e=o.nextValue;e&&(o.debug("Update interval complete using last updated value",e),o.update.progress(e),o.remove.nextValue())},progress:function(e){var t;!1===(e=o.get.numericValue(e))&&o.error(b.nonNumeric,e),e=o.get.normalizedValue(e),o.has.total()?(o.set.value(e),t=e/o.total*100,o.debug("Calculating percent complete from total",t),o.set.percent(t)):(t=e,o.debug("Setting value to exact percentage value",t),o.set.percent(t))}},setting:function(t,n){if(o.debug("Changing setting",t,n),e.isPlainObject(t)){ e.extend(!0,g,t); }else{if(n===r){ return g[t]; }e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t)){ e.extend(!0,o,t); }else{if(n===r){ return o[t]; }o[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,g.name+":"),o.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),o.verbose.apply(console,arguments)))},error:function(){g.silent||(o.error=Function.prototype.bind.call(console.error,console,g.name+":"),o.error.apply(console,arguments))},performance:{log:function(e){var t,n;g.performance&&(n=(t=(new Date).getTime())-(s||t),s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,500)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(o.performance.timer),e.each(l,(function(e,t){n+=t["Execution Time"]})),t+=" "+n+"ms",i&&(t+=" '"+i+"'"),(console.group!==r||console.table!==r)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,n,i){var s,l,c,u=P;return n=n||d,i=E||i,"string"==typeof t&&u!==r&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,(function(n,a){var i=n!=s?a+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[i])&&n!=s){ u=u[i]; }else{if(u[i]!==r){ return l=u[i],!1; }if(!e.isPlainObject(u[a])||n==s){ return u[a]!==r?(l=u[a],!1):(o.error(b.method,t),!1); }u=u[a]}}))),e.isFunction(l)?c=l.apply(i,n):l!==r&&(c=l),e.isArray(a)?a.push(c):a!==r?a=[a,c]:c!==r&&(a=c),l}},u?(P===r&&o.initialize(),o.invoke(c)):(P!==r&&P.invoke("destroy"),o.initialize())})),a!==r?a:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}})(jQuery,window,document),(function(e,n,t,i){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(n){var t,a=e(this),o=a.selector||"",r=(new Date).getTime(),s=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return a.each((function(){var d,g,m=e.isPlainObject(n)?e.extend(!0,{},e.fn.rating.settings,n):e.extend({},e.fn.rating.settings),f=m.namespace,v=m.className,p=m.metadata,b=m.selector,h=(m.error,"."+f),y="module-"+f,x=this,R=e(this).data(y),C=e(this),T=C.find(b.icon);g={initialize:function(){g.verbose("Initializing rating module",m),0===T.length&&g.setup.layout(),m.interactive?g.enable():g.disable(),g.set.initialLoad(),g.set.rating(g.get.initialRating()),g.remove.initialLoad(),g.instantiate()},instantiate:function(){g.verbose("Instantiating module",m),R=g,C.data(y,g)},destroy:function(){g.verbose("Destroying previous instance",R),g.remove.events(),C.removeData(y)},refresh:function(){T=C.find(b.icon)},setup:{layout:function(){var n=g.get.maxRating(),t=e.fn.rating.settings.templates.icon(n);g.debug("Generating icon html dynamically"),C.html(t),g.refresh()}},event:{mouseenter:function(){var n=e(this);n.nextAll().removeClass(v.selected),C.addClass(v.selected),n.addClass(v.selected).prevAll().addClass(v.selected)},mouseleave:function(){C.removeClass(v.selected),T.removeClass(v.selected)},click:function(){var n=e(this),t=g.get.rating(),i=T.index(n)+1;("auto"==m.clearable?1===T.length:m.clearable)&&t==i?g.clearRating():g.set.rating(i)}},clearRating:function(){g.debug("Clearing current rating"),g.set.rating(0)},bind:{events:function(){g.verbose("Binding events"),C.on("mouseenter"+h,b.icon,g.event.mouseenter).on("mouseleave"+h,b.icon,g.event.mouseleave).on("click"+h,b.icon,g.event.click)}},remove:{events:function(){g.verbose("Removing events"),C.off(h)},initialLoad:function(){d=!1}},enable:function(){g.debug("Setting rating to interactive mode"),g.bind.events(),C.removeClass(v.disabled)},disable:function(){g.debug("Setting rating to read-only mode"),g.remove.events(),C.addClass(v.disabled)},is:{initialLoad:function(){return d}},get:{initialRating:function(){return C.data(p.rating)!==i?(C.removeData(p.rating),C.data(p.rating)):m.initialRating},maxRating:function(){return C.data(p.maxRating)!==i?(C.removeData(p.maxRating),C.data(p.maxRating)):m.maxRating},rating:function(){var e=T.filter("."+v.active).length;return g.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=e-1>=0?e-1:0,t=T.eq(n);C.removeClass(v.selected),T.removeClass(v.selected).removeClass(v.active),e>0&&(g.verbose("Setting current rating to",e),t.prevAll().addBack().addClass(v.active)),g.is.initialLoad()||m.onRate.call(x,e)},initialLoad:function(){d=!0}},setting:function(n,t){if(g.debug("Changing setting",n,t),e.isPlainObject(n)){ e.extend(!0,m,n); }else{if(t===i){ return m[n]; }e.isPlainObject(m[n])?e.extend(!0,m[n],t):m[n]=t}},internal:function(n,t){if(e.isPlainObject(n)){ e.extend(!0,g,n); }else{if(t===i){ return g[n]; }g[n]=t}},debug:function(){!m.silent&&m.debug&&(m.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,m.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),g.verbose.apply(console,arguments)))},error:function(){m.silent||(g.error=Function.prototype.bind.call(console.error,console,m.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var n,t;m.performance&&(t=(n=(new Date).getTime())-(r||n),r=n,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":t})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var n=m.name+":",t=0;r=!1,clearTimeout(g.performance.timer),e.each(s,(function(e,n){t+=n["Execution Time"]})),n+=" "+t+"ms",o&&(n+=" '"+o+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(n),console.table?console.table(s):e.each(s,(function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")})),console.groupEnd()),s=[]}},invoke:function(n,a,o){var r,s,l,c=R;return a=a||u,o=x||o,"string"==typeof n&&c!==i&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,(function(t,a){var o=t!=r?a+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(c[o])&&t!=r){ c=c[o]; }else{if(c[o]!==i){ return s=c[o],!1; }if(!e.isPlainObject(c[a])||t==r){ return c[a]!==i&&(s=c[a],!1); }c=c[a]}}))),e.isFunction(s)?l=s.apply(o,a):s!==i&&(l=s),e.isArray(t)?t.push(l):t!==i?t=[t,l]:l!==i&&(t=l),s}},c?(R===i&&g.initialize(),g.invoke(l)):(R!==i&&R.invoke("destroy"),g.initialize())})),t!==i?t:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var n=1,t="";n<=e;){ t+='<i class="icon"></i>',n++; }return t}}}})(jQuery,window,document),(function(e,t,s,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(r){var i,a=e(this),c=a.selector||"",o=(new Date).getTime(),u=[],l=arguments[0],d="string"==typeof l,f=[].slice.call(arguments,1);return e(this).each((function(){var g,h=e.isPlainObject(r)?e.extend(!0,{},e.fn.search.settings,r):e.extend({},e.fn.search.settings),p=h.className,m=h.metadata,v=h.regExp,y=h.fields,b=h.selector,R=h.error,C=h.namespace,x="."+C,w=C+"-module",S=e(this),F=S.find(b.prompt),j=S.find(b.searchButton),T=S.find(b.results),k=S.find(b.result),q=(S.find(b.category),this),A=S.data(w),E=!1,D=!1;g={initialize:function(){g.verbose("Initializing module"),g.get.settings(),g.determine.searchFields(),g.bind.events(),g.set.type(),g.create.results(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),A=g,S.data(w,g)},destroy:function(){g.verbose("Destroying instance"),S.off(x).removeData(w)},refresh:function(){g.debug("Refreshing selector cache"),F=S.find(b.prompt),j=S.find(b.searchButton),S.find(b.category),T=S.find(b.results),k=S.find(b.result)},refreshResults:function(){T=S.find(b.results),k=S.find(b.result)},bind:{events:function(){g.verbose("Binding events to search"),h.automatic&&(S.on(g.get.inputEvent()+x,b.prompt,g.event.input),F.attr("autocomplete","off")),S.on("focus"+x,b.prompt,g.event.focus).on("blur"+x,b.prompt,g.event.blur).on("keydown"+x,b.prompt,g.handleKeyboard).on("click"+x,b.searchButton,g.query).on("mousedown"+x,b.results,g.event.result.mousedown).on("mouseup"+x,b.results,g.event.result.mouseup).on("click"+x,b.result,g.event.result.click)}},determine:{searchFields:function(){r&&r.searchFields!==n&&(h.searchFields=r.searchFields)}},event:{input:function(){h.searchDelay?(clearTimeout(g.timer),g.timer=setTimeout((function(){g.is.focused()&&g.query()}),h.searchDelay)):g.query()},focus:function(){g.set.focus(),h.searchOnFocus&&g.has.minimumCharacters()&&g.query((function(){g.can.show()&&g.showResults()}))},blur:function(e){var t=function(){g.cancel.query(),g.remove.focus(),g.timer=setTimeout(g.hideResults,h.hideDelay)};s.activeElement===this||(D=!1,g.resultsClicked?(g.debug("Determining if user action caused search to close"),S.one("click.close"+x,b.results,(function(e){g.is.inMessage(e)||E?F.focus():(E=!1,g.is.animating()||g.is.hidden()||t())}))):(g.debug("Input blurred without user action, closing results"),t()))},result:{mousedown:function(){g.resultsClicked=!0},mouseup:function(){g.resultsClicked=!1},click:function(s){g.debug("Search result selected");var n=e(this),r=n.find(b.title).eq(0),i=n.is("a[href]")?n:n.find("a[href]").eq(0),a=i.attr("href")||!1,c=i.attr("target")||!1,o=(r.html(),r.length>0&&r.text()),u=g.get.results(),l=n.data(m.result)||g.get.result(o,u);if(e.isFunction(h.onSelect)&&!1===h.onSelect.call(q,l,u)){ return g.debug("Custom onSelect callback cancelled default select action"),void(E=!0); }g.hideResults(),o&&g.set.value(o),a&&(g.verbose("Opening search link found in result",i),"_blank"==c||s.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,s=S.find(b.result),n=S.find(b.category),r=s.filter("."+p.active),i=s.index(r),a=s.length,c=r.length>0,o=e.which;if(27==o&&(g.verbose("Escape key pressed, blurring search field"),g.hideResults(),D=!0),g.is.visible()){ if(13==o){if(g.verbose("Enter key pressed, selecting active result"),s.filter("."+p.active).length>0){ return g.event.result.click.call(s.filter("."+p.active),e),e.preventDefault(),!1 }}else { 38==o&&c?(g.verbose("Up key pressed, changing active result"),t=i-1<0?i:i-1,n.removeClass(p.active),s.removeClass(p.active).eq(t).addClass(p.active).closest(n).addClass(p.active),e.preventDefault()):40==o&&(g.verbose("Down key pressed, changing active result"),t=i+1>=a?i:i+1,n.removeClass(p.active),s.removeClass(p.active).eq(t).addClass(p.active).closest(n).addClass(p.active),e.preventDefault()); } }else { 13==o&&(g.verbose("Enter key pressed, executing query"),g.query(),g.set.buttonPressed(),F.one("keyup",g.remove.buttonFocus)) }},setup:{api:function(t,s){var n={debug:h.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){g.parse.response.call(q,e,t),s()},onFailure:function(){g.displayMessage(R.serverError),s()},onAbort:function(e){},onError:g.error};e.extend(!0,n,h.apiSettings),g.verbose("Setting up API request",n),S.api(n)}},can:{useAPI:function(){return e.fn.api!==n},show:function(){return g.is.focused()&&!g.is.visible()&&!g.is.empty()},transition:function(){return h.transition&&e.fn.transition!==n&&S.transition("is supported")}},is:{animating:function(){return T.hasClass(p.animating)},hidden:function(){return T.hasClass(p.hidden)},inMessage:function(t){if(t.target){var n=e(t.target);return e.contains(s.documentElement,t.target)&&n.closest(b.message).length>0}},empty:function(){return""===T.html()},visible:function(){return T.filter(":visible").length>0},focused:function(){return F.filter(":focus").length>0}},get:{settings:function(){e.isPlainObject(r)&&r.searchFullText&&(h.fullTextSearch=r.searchFullText,g.error(h.error.oldSearchSyntax,q))},inputEvent:function(){var e=F[0];return e!==n&&e.oninput!==n?"input":e!==n&&e.onpropertychange!==n?"propertychange":"keyup"},value:function(){return F.val()},results:function(){return S.data(m.results)},result:function(t,s){var r=["title","id"],i=!1;return t=t!==n?t:g.get.value(),s=s!==n?s:g.get.results(),"category"===h.type?(g.debug("Finding result that matches",t),e.each(s,(function(s,n){if(e.isArray(n.results)&&(i=g.search.object(t,n.results,r)[0])){ return!1 }}))):(g.debug("Finding result in results object",t),i=g.search.object(t,s,r)[0]),i||!1}},select:{firstResult:function(){g.verbose("Selecting first result"),k.first().addClass(p.active)}},set:{focus:function(){S.addClass(p.focus)},loading:function(){S.addClass(p.loading)},value:function(e){g.verbose("Setting search input value",e),F.val(e)},type:function(e){e=e||h.type,"category"==h.type&&S.addClass(h.type)},buttonPressed:function(){j.addClass(p.pressed)}},remove:{loading:function(){S.removeClass(p.loading)},focus:function(){S.removeClass(p.focus)},buttonPressed:function(){j.removeClass(p.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var s=g.get.value(),n=g.read.cache(s);t=t||function(){},g.has.minimumCharacters()?(n?(g.debug("Reading result from cache",s),g.save.results(n.results),g.addResults(n.html),g.inject.id(n.results),t()):(g.debug("Querying for",s),e.isPlainObject(h.source)||e.isArray(h.source)?(g.search.local(s),t()):g.can.useAPI()?g.search.remote(s,t):(g.error(R.source),t())),h.onSearchQuery.call(q,s)):g.hideResults()},search:{local:function(e){var t,s=g.search.object(e,h.content);g.set.loading(),g.save.results(s),g.debug("Returned full local search results",s),h.maxResults>0&&(g.debug("Using specified max results",s),s=s.slice(0,h.maxResults)),"category"==h.type&&(s=g.create.categoryResults(s)),t=g.generateResults({results:s}),g.remove.loading(),g.addResults(t),g.inject.id(s),g.write.cache(e,{html:t,results:s})},remote:function(t,s){s=e.isFunction(s)?s:function(){},S.api("is loading")&&S.api("abort"),g.setup.api(t,s),S.api("query")},object:function(t,s,r){var i=[],a=[],c=[],o=t.toString().replace(v.escape,"\\$&"),u=new RegExp(v.beginsWith+o,"i"),l=function(t,s){var n=-1==e.inArray(s,i),r=-1==e.inArray(s,c),o=-1==e.inArray(s,a);n&&r&&o&&t.push(s)};return s=s||h.source,r=r!==n?r:h.searchFields,e.isArray(r)||(r=[r]),s===n||!1===s?(g.error(R.source),[]):(e.each(r,(function(n,r){e.each(s,(function(e,s){"string"==typeof s[r]&&(-1!==s[r].search(u)?l(i,s):"exact"===h.fullTextSearch&&g.exactSearch(t,s[r])?l(a,s):1==h.fullTextSearch&&g.fuzzySearch(t,s[r])&&l(c,s))}))})),e.merge(a,c),e.merge(i,a),i)}},exactSearch:function(e,t){return e=e.toLowerCase(),(t=t.toLowerCase()).indexOf(e)>-1},fuzzySearch:function(e,t){var s=t.length,n=e.length;if("string"!=typeof e){ return!1; }if(e=e.toLowerCase(),t=t.toLowerCase(),n>s){ return!1; }if(n===s){ return e===t; }e:for(var r=0,i=0;r<n;r++){for(var a=e.charCodeAt(r);i<s;){ if(t.charCodeAt(i++)===a){ continue e; } }return!1}return!0},parse:{response:function(e,t){var s=g.generateResults(e);g.verbose("Parsing server response",e),e!==n&&t!==n&&e[y.results]!==n&&(g.addResults(s),g.inject.id(e[y.results]),g.write.cache(t,{html:s,results:e[y.results]}),g.save.results(e[y.results]))}},cancel:{query:function(){g.can.useAPI()&&S.api("abort")}},has:{minimumCharacters:function(){return g.get.value().length>=h.minCharacters},results:function(){return 0!==T.length&&""!=T.html()}},clear:{cache:function(e){var t=S.data(m.cache);e?e&&t&&t[e]&&(g.debug("Removing value from cache",e),delete t[e],S.data(m.cache,t)):(g.debug("Clearing cache",e),S.removeData(m.cache))}},read:{cache:function(e){var t=S.data(m.cache);return!!h.cache&&(g.verbose("Checking cache for generated html for query",e),"object"==typeof t&&t[e]!==n&&t[e])}},create:{categoryResults:function(t){var s={};return e.each(t,(function(e,t){t.category&&(s[t.category]===n?(g.verbose("Creating new category of results",t.category),s[t.category]={name:t.category,results:[t]}):s[t.category].results.push(t))})),s},id:function(e,t){var s,r=e+1;return t!==n?(s=String.fromCharCode(97+t)+r,g.verbose("Creating category result id",s)):(s=r,g.verbose("Creating result id",s)),s},results:function(){0===T.length&&(T=e("<div />").addClass(p.results).appendTo(S))}},inject:{result:function(e,t,s){g.verbose("Injecting result into results");var r=s!==n?T.children().eq(s).children(b.results).first().children(b.result).eq(t):T.children(b.result).eq(t);g.verbose("Injecting results metadata",r),r.data(m.result,e)},id:function(t){g.debug("Injecting unique ids into results");var s=0,r=0;return"category"===h.type?e.each(t,(function(t,i){r=0,e.each(i.results,(function(e,t){var a=i.results[e];a.id===n&&(a.id=g.create.id(r,s)),g.inject.result(a,r,s),r++})),s++})):e.each(t,(function(e,s){var i=t[e];i.id===n&&(i.id=g.create.id(r)),g.inject.result(i,r),r++})),t}},save:{results:function(e){g.verbose("Saving current search results to metadata",e),S.data(m.results,e)}},write:{cache:function(e,t){var s=S.data(m.cache)!==n?S.data(m.cache):{};h.cache&&(g.verbose("Writing generated html to cache",e,t),s[e]=t,S.data(m.cache,s))}},addResults:function(t){if(e.isFunction(h.onResultsAdd)&&!1===h.onResultsAdd.call(T,t)){ return g.debug("onResultsAdd callback cancelled default action"),!1; }t?(T.html(t),g.refreshResults(),h.selectFirstResult&&g.select.firstResult(),g.showResults()):g.hideResults((function(){T.empty()}))},showResults:function(t){t=e.isFunction(t)?t:function(){},D||!g.is.visible()&&g.has.results()&&(g.can.transition()?(g.debug("Showing results with css animations"),T.transition({animation:h.transition+" in",debug:h.debug,verbose:h.verbose,duration:h.duration,onComplete:function(){t()},queue:!0})):(g.debug("Showing results with javascript"),T.stop().fadeIn(h.duration,h.easing)),h.onResultsOpen.call(T))},hideResults:function(t){t=e.isFunction(t)?t:function(){},g.is.visible()&&(g.can.transition()?(g.debug("Hiding results with css animations"),T.transition({animation:h.transition+" out",debug:h.debug,verbose:h.verbose,duration:h.duration,onComplete:function(){t()},queue:!0})):(g.debug("Hiding results with javascript"),T.stop().fadeOut(h.duration,h.easing)),h.onResultsClose.call(T))},generateResults:function(t){g.debug("Generating html from response",t);var s=h.templates[h.type],n=e.isPlainObject(t[y.results])&&!e.isEmptyObject(t[y.results]),r=e.isArray(t[y.results])&&t[y.results].length>0,i="";return n||r?(h.maxResults>0&&(n?"standard"==h.type&&g.error(R.maxResults):t[y.results]=t[y.results].slice(0,h.maxResults)),e.isFunction(s)?i=s(t,y):g.error(R.noTemplate,!1)):h.showNoResults&&(i=g.displayMessage(R.noResults,"empty")),h.onResults.call(q,t),i},displayMessage:function(e,t){return t=t||"standard",g.debug("Displaying message",e,t),g.addResults(h.templates.message(e,t)),h.templates.message(e,t)},setting:function(t,s){if(e.isPlainObject(t)){ e.extend(!0,h,t); }else{if(s===n){ return h[t]; }h[t]=s}},internal:function(t,s){if(e.isPlainObject(t)){ e.extend(!0,g,t); }else{if(s===n){ return g[t]; }g[t]=s}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,s;h.performance&&(s=(t=(new Date).getTime())-(o||t),o=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:q,"Execution Time":s})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=h.name+":",s=0;o=!1,clearTimeout(g.performance.timer),e.each(u,(function(e,t){s+=t["Execution Time"]})),t+=" "+s+"ms",c&&(t+=" '"+c+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==n||console.table!==n)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),u=[]}},invoke:function(t,s,r){var a,c,o,u=A;return s=s||f,r=q||r,"string"==typeof t&&u!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,(function(s,r){var i=s!=a?r+t[s+1].charAt(0).toUpperCase()+t[s+1].slice(1):t;if(e.isPlainObject(u[i])&&s!=a){ u=u[i]; }else{if(u[i]!==n){ return c=u[i],!1; }if(!e.isPlainObject(u[r])||s==a){ return u[r]!==n&&(c=u[r],!1); }u=u[r]}}))),e.isFunction(c)?o=c.apply(r,s):c!==n&&(o=c),e.isArray(i)?i.push(o):i!==n?i=[i,o]:o!==n&&(i=o),c}},d?(A===n&&g.initialize(),g.invoke(l)):(A!==n&&A.invoke("destroy"),g.initialize())})),i!==n?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",fullTextSearch:"exact",automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",oldSearchSyntax:"searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,(function(e){return t[e]})):e},message:function(e,t){var s="";return e!==n&&t!==n&&(s+='<div class="message '+t+'">',s+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",s+="</div>"),s},category:function(t,s){var r="";return e.fn.search.settings.templates.escape,t[s.categoryResults]!==n&&(e.each(t[s.categoryResults],(function(t,i){i[s.results]!==n&&i.results.length>0&&(r+='<div class="category">',i[s.categoryName]!==n&&(r+='<div class="name">'+i[s.categoryName]+"</div>"),r+='<div class="results">',e.each(i.results,(function(e,t){t[s.url]?r+='<a class="result" href="'+t[s.url]+'">':r+='<a class="result">',t[s.image]!==n&&(r+='<div class="image"> <img src="'+t[s.image]+'"></div>'),r+='<div class="content">',t[s.price]!==n&&(r+='<div class="price">'+t[s.price]+"</div>"),t[s.title]!==n&&(r+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==n&&(r+='<div class="description">'+t[s.description]+"</div>"),r+="</div>",r+="</a>"})),r+="</div>",r+="</div>")})),t[s.action]&&(r+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),r)},standard:function(t,s){var r="";return t[s.results]!==n&&(e.each(t[s.results],(function(e,t){t[s.url]?r+='<a class="result" href="'+t[s.url]+'">':r+='<a class="result">',t[s.image]!==n&&(r+='<div class="image"> <img src="'+t[s.image]+'"></div>'),r+='<div class="content">',t[s.price]!==n&&(r+='<div class="price">'+t[s.price]+"</div>"),t[s.title]!==n&&(r+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==n&&(r+='<div class="description">'+t[s.description]+"</div>"),r+="</div>",r+="</a>"})),t[s.action]&&(r+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),r)}}}})(jQuery,window,document),(function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(a){var o,s=e(this),r=(e("body"),(new Date).getTime()),l=[],d=arguments[0],u="string"==typeof d,c=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each((function(){var t,f,m,h=s.selector||"",p=e.isPlainObject(a)?e.extend(!0,{},e.fn.shape.settings,a):e.extend({},e.fn.shape.settings),v=p.namespace,b=p.selector,x=p.error,y=p.className,S="."+v,w="module-"+v,C=e(this),W=C.find(b.sides),F=C.find(b.side),H=!1,T=this,Z=C.data(w);m={initialize:function(){m.verbose("Initializing module for",T),m.set.defaultSide(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),Z=m,C.data(w,Z)},destroy:function(){m.verbose("Destroying previous module for",T),C.removeData(w).off(S)},refresh:function(){m.verbose("Refreshing selector cache for",T),C=e(T),W=e(this).find(b.shape),F=e(this).find(b.side)},repaint:function(){m.verbose("Forcing repaint event"),(W[0]||i.createElement("div")).offsetWidth},animate:function(e,i){m.verbose("Animating box with properties",e),i=i||function(e){m.verbose("Executing animation callback"),e!==n&&e.stopPropagation(),m.reset(),m.set.active()},p.beforeChange.call(f[0]),m.get.transitionEvent()?(m.verbose("Starting CSS animation"),C.addClass(y.animating),W.css(e).one(m.get.transitionEvent(),i),m.set.duration(p.duration),g((function(){C.addClass(y.animating),t.addClass(y.hidden)}))):i()},queue:function(e){m.debug("Queueing animation of",e),W.one(m.get.transitionEvent(),(function(){m.debug("Executing queued animation"),setTimeout((function(){C.shape(e)}),0)}))},reset:function(){m.verbose("Animating states reset"),C.removeClass(y.animating).attr("style","").removeAttr("style"),W.attr("style","").removeAttr("style"),F.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{complete:function(){return F.filter("."+y.active)[0]==f[0]},animating:function(){return C.hasClass(y.animating)}},set:{defaultSide:function(){t=C.find("."+p.className.active),f=t.next(b.side).length>0?t.next(b.side):C.find(b.side).first(),H=!1,m.verbose("Active side set to",t),m.verbose("Next side set to",f)},duration:function(e){e="number"==typeof(e=e||p.duration)?e+"ms":e,m.verbose("Setting animation duration",e),(p.duration||0===p.duration)&&W.add(F).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=C.find("."+p.className.active),t=e.outerWidth(!0),i=e.outerHeight(!0);C.css({width:t,height:i})},stageSize:function(){var e=C.clone().addClass(y.loading),t=e.find("."+p.className.active),i=H?e.find(b.side).eq(H):t.next(b.side).length>0?t.next(b.side):e.find(b.side).first(),n="next"==p.width?i.outerWidth(!0):"initial"==p.width?C.width():p.width,a="next"==p.height?i.outerHeight(!0):"initial"==p.height?C.height():p.height;t.removeClass(y.active),i.addClass(y.active),e.insertAfter(C),e.remove(),"auto"!=p.width&&(C.css("width",n+p.jitter),m.verbose("Specifying width during animation",n)),"auto"!=p.height&&(C.css("height",a+p.jitter),m.verbose("Specifying height during animation",a))},nextSide:function(e){H=e,f=F.filter(e),H=F.index(f),0===f.length&&(m.set.defaultSide(),m.error(x.side)),m.verbose("Next side manually set to",f)},active:function(){m.verbose("Setting new side to active",f),F.removeClass(y.active),f.addClass(y.active),p.onChange.call(f[0]),m.set.defaultSide()}},flip:{up:function(){if(!m.is.complete()||m.is.animating()||p.allowRepeats){ if(m.is.animating()){ m.queue("flip up"); }else{m.debug("Flipping up",f);var e=m.get.transform.up();m.set.stageSize(),m.stage.above(),m.animate(e)} }else { m.debug("Side already visible",f) }},down:function(){if(!m.is.complete()||m.is.animating()||p.allowRepeats){ if(m.is.animating()){ m.queue("flip down"); }else{m.debug("Flipping down",f);var e=m.get.transform.down();m.set.stageSize(),m.stage.below(),m.animate(e)} }else { m.debug("Side already visible",f) }},left:function(){if(!m.is.complete()||m.is.animating()||p.allowRepeats){ if(m.is.animating()){ m.queue("flip left"); }else{m.debug("Flipping left",f);var e=m.get.transform.left();m.set.stageSize(),m.stage.left(),m.animate(e)} }else { m.debug("Side already visible",f) }},right:function(){if(!m.is.complete()||m.is.animating()||p.allowRepeats){ if(m.is.animating()){ m.queue("flip right"); }else{m.debug("Flipping right",f);var e=m.get.transform.right();m.set.stageSize(),m.stage.right(),m.animate(e)} }else { m.debug("Side already visible",f) }},over:function(){!m.is.complete()||m.is.animating()||p.allowRepeats?m.is.animating()?m.queue("flip over"):(m.debug("Flipping over",f),m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.over())):m.debug("Side already visible",f)},back:function(){!m.is.complete()||m.is.animating()||p.allowRepeats?m.is.animating()?m.queue("flip back"):(m.debug("Flipping back",f),m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.back())):m.debug("Side already visible",f)}},get:{transform:{up:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(-90deg)"}},down:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(90deg)"}},left:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(90deg)"}},right:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=i.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a){ if(t.style[e]!==n){ return a[e] } }},nextSide:function(){return t.next(b.side).length>0?t.next(b.side):C.find(b.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as above",f,e),W.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as below",f,e),W.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};m.verbose("Setting the initial animation position as left",f,n),W.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(y.animating).css({left:n.origin+"px",transform:"rotateY(-90deg) translateZ("+n.depth.next+"px)"})},right:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};m.verbose("Setting the initial animation position as left",f,n),W.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(y.animating).css({left:n.origin+"px",transform:"rotateY(90deg) translateZ("+n.depth.next+"px)"})},behind:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};m.verbose("Setting the initial animation position as behind",f,n),t.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({left:n.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,i){if(m.debug("Changing setting",t,i),e.isPlainObject(t)){ e.extend(!0,p,t); }else{if(i===n){ return p[t]; }e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t)){ e.extend(!0,m,t); }else{if(i===n){ return m[t]; }m[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,p.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),m.verbose.apply(console,arguments)))},error:function(){p.silent||(m.error=Function.prototype.bind.call(console.error,console,p.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i;p.performance&&(i=(t=(new Date).getTime())-(r||t),r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=p.name+":",i=0;r=!1,clearTimeout(m.performance.timer),e.each(l,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",h&&(t+=" '"+h+"'"),s.length>1&&(t+=" ("+s.length+")"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,i,a){var s,r,l,d=Z;return i=i||c,a=T||a,"string"==typeof t&&d!==n&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,(function(i,a){var o=i!=s?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(d[o])&&i!=s){ d=d[o]; }else{if(d[o]!==n){ return r=d[o],!1; }if(!e.isPlainObject(d[a])||i==s){ return d[a]!==n&&(r=d[a],!1); }d=d[a]}}))),e.isFunction(r)?l=r.apply(a,i):r!==n&&(l=r),e.isArray(o)?o.push(l):o!==n?o=[o,l]:l!==n&&(o=l),r}},u?(Z===n&&m.initialize(),m.invoke(d)):(Z!==n&&Z.invoke("destroy"),m.initialize())})),o!==n?o:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document),(function(e,i,n,t){"use strict";i=void 0!==i&&i.Math==Math?i:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(o){var r,s=e(this),a=e(i),l=e(n),c=e("html"),d=e("head"),u=s.selector||"",f=(new Date).getTime(),b=[],h=arguments[0],m="string"==typeof h,g=[].slice.call(arguments,1),v=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each((function(){var s,p,y,C,k,w,T=e.isPlainObject(o)?e.extend(!0,{},e.fn.sidebar.settings,o):e.extend({},e.fn.sidebar.settings),x=T.selector,S=T.className,A=T.namespace,F=T.regExp,O=T.error,P="."+A,E="module-"+A,H=e(this),M=e(T.context),D=H.children(x.sidebar),j=(M.children(x.fixed),M.children(x.pusher)),R=this,z=H.data(E);w={initialize:function(){w.debug("Initializing sidebar",o),w.create.id(),k=w.get.transitionEvent(),T.delaySetup?v(w.setup.layout):w.setup.layout(),v((function(){w.setup.cache()})),w.instantiate()},instantiate:function(){w.verbose("Storing instance of module",w),z=w,H.data(E,w)},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),p="."+y,w.verbose("Creating unique id for element",y)}},destroy:function(){w.verbose("Destroying previous module for",H),H.off(P).removeData(E),w.is.ios()&&w.remove.ios(),M.off(p),a.off(p),l.off(p)},event:{clickaway:function(e){var i=j.find(e.target).length>0||j.is(e.target),n=M.is(e.target);i&&(w.verbose("User clicked on dimmed page"),w.hide()),n&&(w.verbose("User clicked on dimmable context (scaled out page)"),w.hide())},touch:function(e){},containScroll:function(e){R.scrollTop<=0&&(R.scrollTop=1),R.scrollTop+R.offsetHeight>=R.scrollHeight&&(R.scrollTop=R.scrollHeight-R.offsetHeight-1)},scroll:function(i){0===e(i.target).closest(x.sidebar).length&&i.preventDefault()}},bind:{clickaway:function(){w.verbose("Adding clickaway events to context",M),T.closable&&M.on("click"+p,w.event.clickaway).on("touchend"+p,w.event.clickaway)},scrollLock:function(){T.scrollLock&&(w.debug("Disabling page scroll"),a.on("DOMMouseScroll"+p,w.event.scroll)),w.verbose("Adding events to contain sidebar scroll"),l.on("touchmove"+p,w.event.touch),H.on("scroll"+P,w.event.containScroll)}},unbind:{clickaway:function(){w.verbose("Removing clickaway events from context",M),M.off(p)},scrollLock:function(){w.verbose("Removing scroll lock from page"),l.off(p),a.off(p),H.off("scroll"+P)}},add:{inlineCSS:function(){var i,n=w.cache.width||H.outerWidth(),t=w.cache.height||H.outerHeight(),o=w.is.rtl(),r=w.get.direction(),a={left:n,right:-n,top:t,bottom:-t};o&&(w.verbose("RTL detected, flipping widths"),a.left=-n,a.right=n),i="<style>","left"===r||"right"===r?(w.debug("Adding CSS rules for animation distance",n),i+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(i+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),w.is.ie()&&("left"===r||"right"===r?(w.debug("Adding CSS rules for animation distance",n),i+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(i+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),i+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),s=e(i+="</style>").appendTo(d),w.debug("Adding sizing css to head",s)}},refresh:function(){w.verbose("Refreshing selector cache"),M=e(T.context),D=M.children(x.sidebar),j=M.children(x.pusher),M.children(x.fixed),w.clear.cache()},refreshSidebars:function(){w.verbose("Refreshing other sidebars"),D=M.children(x.sidebar)},repaint:function(){w.verbose("Forcing repaint event"),R.style.display="none",R.offsetHeight,R.scrollTop=R.scrollTop,R.style.display=""},setup:{cache:function(){w.cache={width:H.outerWidth(),height:H.outerHeight(),rtl:"rtl"==H.css("direction")}},layout:function(){0===M.children(x.pusher).length&&(w.debug("Adding wrapper element for sidebar"),w.error(O.pusher),j=e('<div class="pusher" />'),M.children().not(x.omitted).not(D).wrapAll(j),w.refresh()),0!==H.nextAll(x.pusher).length&&H.nextAll(x.pusher)[0]===j[0]||(w.debug("Moved sidebar to correct parent element"),w.error(O.movedSidebar,R),H.detach().prependTo(M),w.refresh()),w.clear.cache(),w.set.pushable(),w.set.direction()}},attachEvents:function(i,n){var t=e(i);n=e.isFunction(w[n])?w[n]:w.toggle,t.length>0?(w.debug("Attaching sidebar events to element",i,n),t.on("click"+P,n)):w.error(O.notFound,i)},show:function(i){if(i=e.isFunction(i)?i:function(){},w.is.hidden()){if(w.refreshSidebars(),T.overlay&&(w.error(O.overlay),T.transition="overlay"),w.refresh(),w.othersActive()){ if(w.debug("Other sidebars currently visible"),T.exclusive){if("overlay"!=T.transition){ return void w.hideOthers(w.show); }w.hideOthers()}else { T.transition="overlay"; } }w.pushPage((function(){i.call(R),T.onShow.call(R)})),T.onChange.call(R),T.onVisible.call(R)}else { w.debug("Sidebar is already visible") }},hide:function(i){i=e.isFunction(i)?i:function(){},(w.is.visible()||w.is.animating())&&(w.debug("Hiding sidebar",i),w.refreshSidebars(),w.pullPage((function(){i.call(R),T.onHidden.call(R)})),T.onChange.call(R),T.onHide.call(R))},othersAnimating:function(){return D.not(H).filter("."+S.animating).length>0},othersVisible:function(){return D.not(H).filter("."+S.visible).length>0},othersActive:function(){return w.othersVisible()||w.othersAnimating()},hideOthers:function(e){var i=D.not(H).filter("."+S.visible),n=i.length,t=0;e=e||function(){},i.sidebar("hide",(function(){++t==n&&e()}))},toggle:function(){w.verbose("Determining toggled direction"),w.is.hidden()?w.show():w.hide()},pushPage:function(i){var n,t,o,r=w.get.transition(),s="overlay"===r||w.othersActive()?H:j;i=e.isFunction(i)?i:function(){},"scale down"==T.transition&&w.scrollToTop(),w.set.transition(r),w.repaint(),n=function(){w.bind.clickaway(),w.add.inlineCSS(),w.set.animating(),w.set.visible()},t=function(){w.set.dimmed()},o=function(e){e.target==s[0]&&(s.off(k+p,o),w.remove.animating(),w.bind.scrollLock(),i.call(R))},s.off(k+p),s.on(k+p,o),v(n),T.dimPage&&!w.othersVisible()&&v(t)},pullPage:function(i){var n,t,o=w.get.transition(),r="overlay"==o||w.othersActive()?H:j;i=e.isFunction(i)?i:function(){},w.verbose("Removing context push state",w.get.direction()),w.unbind.clickaway(),w.unbind.scrollLock(),n=function(){w.set.transition(o),w.set.animating(),w.remove.visible(),T.dimPage&&!w.othersVisible()&&j.removeClass(S.dimmed)},t=function(e){e.target==r[0]&&(r.off(k+p,t),w.remove.animating(),w.remove.transition(),w.remove.inlineCSS(),("scale down"==o||T.returnScroll&&w.is.mobile())&&w.scrollBack(),i.call(R))},r.off(k+p),r.on(k+p,t),v(n)},scrollToTop:function(){w.verbose("Scrolling to top of page to avoid animation issues"),C=e(i).scrollTop(),H.scrollTop(0),i.scrollTo(0,0)},scrollBack:function(){w.verbose("Scrolling back to original page position"),i.scrollTo(0,C)},clear:{cache:function(){w.verbose("Clearing cached dimensions"),w.cache={}}},set:{ios:function(){c.addClass(S.ios)},pushed:function(){M.addClass(S.pushed)},pushable:function(){M.addClass(S.pushable)},dimmed:function(){j.addClass(S.dimmed)},active:function(){H.addClass(S.active)},animating:function(){H.addClass(S.animating)},transition:function(e){e=e||w.get.transition(),H.addClass(e)},direction:function(e){e=e||w.get.direction(),H.addClass(S[e])},visible:function(){H.addClass(S.visible)},overlay:function(){H.addClass(S.overlay)}},remove:{inlineCSS:function(){w.debug("Removing inline css styles",s),s&&s.length>0&&s.remove()},ios:function(){c.removeClass(S.ios)},pushed:function(){M.removeClass(S.pushed)},pushable:function(){M.removeClass(S.pushable)},active:function(){H.removeClass(S.active)},animating:function(){H.removeClass(S.animating)},transition:function(e){e=e||w.get.transition(),H.removeClass(e)},direction:function(e){e=e||w.get.direction(),H.removeClass(S[e])},visible:function(){H.removeClass(S.visible)},overlay:function(){H.removeClass(S.overlay)}},get:{direction:function(){return H.hasClass(S.top)?S.top:H.hasClass(S.right)?S.right:H.hasClass(S.bottom)?S.bottom:S.left},transition:function(){var e,i=w.get.direction();return e=w.is.mobile()?"auto"==T.mobileTransition?T.defaultTransition.mobile[i]:T.mobileTransition:"auto"==T.transition?T.defaultTransition.computer[i]:T.transition,w.verbose("Determined transition",e),e},transitionEvent:function(){var e,i=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o){ if(i.style[e]!==t){ return o[e] } }}},is:{ie:function(){return!i.ActiveXObject&&"ActiveXObject"in i||"ActiveXObject"in i},ios:function(){var e=navigator.userAgent,i=e.match(F.ios),n=e.match(F.mobileChrome);return!(!i||n||(w.verbose("Browser was found to be iOS",e),0))},mobile:function(){var e=navigator.userAgent;return e.match(F.mobile)?(w.verbose("Browser was found to be mobile",e),!0):(w.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!w.is.visible()},visible:function(){return H.hasClass(S.visible)},open:function(){return w.is.visible()},closed:function(){return w.is.hidden()},vertical:function(){return H.hasClass(S.top)},animating:function(){return M.hasClass(S.animating)},rtl:function(){return w.cache.rtl===t&&(w.cache.rtl="rtl"==H.css("direction")),w.cache.rtl}},setting:function(i,n){if(w.debug("Changing setting",i,n),e.isPlainObject(i)){ e.extend(!0,T,i); }else{if(n===t){ return T[i]; }e.isPlainObject(T[i])?e.extend(!0,T[i],n):T[i]=n}},internal:function(i,n){if(e.isPlainObject(i)){ e.extend(!0,w,i); }else{if(n===t){ return w[i]; }w[i]=n}},debug:function(){!T.silent&&T.debug&&(T.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,T.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),w.verbose.apply(console,arguments)))},error:function(){T.silent||(w.error=Function.prototype.bind.call(console.error,console,T.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var i,n;T.performance&&(n=(i=(new Date).getTime())-(f||i),f=i,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var i=T.name+":",n=0;f=!1,clearTimeout(w.performance.timer),e.each(b,(function(e,i){n+=i["Execution Time"]})),i+=" "+n+"ms",u&&(i+=" '"+u+"'"),(console.group!==t||console.table!==t)&&b.length>0&&(console.groupCollapsed(i),console.table?console.table(b):e.each(b,(function(e,i){console.log(i.Name+": "+i["Execution Time"]+"ms")})),console.groupEnd()),b=[]}},invoke:function(i,n,o){var s,a,l,c=z;return n=n||g,o=R||o,"string"==typeof i&&c!==t&&(i=i.split(/[\. ]/),s=i.length-1,e.each(i,(function(n,o){var r=n!=s?o+i[n+1].charAt(0).toUpperCase()+i[n+1].slice(1):i;if(e.isPlainObject(c[r])&&n!=s){ c=c[r]; }else{if(c[r]!==t){ return a=c[r],!1; }if(!e.isPlainObject(c[o])||n==s){ return c[o]!==t?(a=c[o],!1):(w.error(O.method,i),!1); }c=c[o]}}))),e.isFunction(a)?l=a.apply(o,n):a!==t&&(l=a),e.isArray(r)?r.push(l):r!==t?r=[r,l]:l!==t&&(r=l),a}},m?(z===t&&w.initialize(),w.invoke(h)):(z!==t&&w.invoke("destroy"),w.initialize())})),r!==t?r:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document),(function(e,n,o,i){e.site=e.fn.site=function(t){var s,r,a=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,m=[].slice.call(arguments,1),d=e.isPlainObject(t)?e.extend(!0,{},e.site.settings,t):e.extend({},e.site.settings),g=d.namespace,f=d.error,b="module-"+g,p=e(o),v=this,h=p.data(b);return s={initialize:function(){s.instantiate()},instantiate:function(){s.verbose("Storing instance of site",s),h=s,p.data(b,s)},normalize:function(){s.fix.console(),s.fix.requestAnimationFrame()},fix:{console:function(){s.debug("Normalizing window.console"),console!==i&&console.log!==i||(s.verbose("Console not available, normalizing events"),s.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(s.verbose("Console group not available, normalizing events"),n.console.group=function(){},n.console.groupEnd=function(){},n.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(s.verbose("Mark timeline not available, normalizing events"),n.console.markTimeline=function(){})},consoleClear:function(){s.debug("Disabling programmatic console clearing"),n.console.clear=function(){}},requestAnimationFrame:function(){s.debug("Normalizing requestAnimationFrame"),n.requestAnimationFrame===i&&(s.debug("RequestAnimationFrame not available, normalizing event"),n.requestAnimationFrame=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(n){return e.fn[n]!==i&&e.fn[n].settings!==i},enabled:{modules:function(n){var o=[];return n=n||d.modules,e.each(n,(function(e,n){s.moduleExists(n)&&o.push(n)})),o}},disabled:{modules:function(n){var o=[];return n=n||d.modules,e.each(n,(function(e,n){s.moduleExists(n)||o.push(n)})),o}},change:{setting:function(n,o,t,r){t="string"==typeof t?"all"===t?d.modules:[t]:t||d.modules,r=r===i||r,e.each(t,(function(i,t){var a,c=!s.moduleExists(t)||e.fn[t].settings.namespace||!1;s.moduleExists(t)&&(s.verbose("Changing default setting",n,o,t),e.fn[t].settings[n]=o,r&&c&&(a=e(":data(module-"+c+")")).length>0&&(s.verbose("Modifying existing settings",a),a[t]("setting",n,o)))}))},settings:function(n,o,t){o="string"==typeof o?[o]:o||d.modules,t=t===i||t,e.each(o,(function(o,i){var r;s.moduleExists(i)&&(s.verbose("Changing default setting",n,i),e.extend(!0,e.fn[i].settings,n),t&&g&&(r=e(":data(module-"+g+")")).length>0&&(s.verbose("Modifying existing settings",r),r[i]("setting",n)))}))}},enable:{console:function(){s.console(!0)},debug:function(e,n){e=e||d.modules,s.debug("Enabling debug for modules",e),s.change.setting("debug",!0,e,n)},verbose:function(e,n){e=e||d.modules,s.debug("Enabling verbose debug for modules",e),s.change.setting("verbose",!0,e,n)}},disable:{console:function(){s.console(!1)},debug:function(e,n){e=e||d.modules,s.debug("Disabling debug for modules",e),s.change.setting("debug",!1,e,n)},verbose:function(e,n){e=e||d.modules,s.debug("Disabling verbose debug for modules",e),s.change.setting("verbose",!1,e,n)}},console:function(e){if(e){if(h.cache.console===i){ return void s.error(f.console); }s.debug("Restoring console function"),n.console=h.cache.console}else { s.debug("Disabling console function"),h.cache.console=n.console,n.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}} }},destroy:function(){s.verbose("Destroying previous site for",p),p.removeData(b)},cache:{},setting:function(n,o){if(e.isPlainObject(n)){ e.extend(!0,d,n); }else{if(o===i){ return d[n]; }d[n]=o}},internal:function(n,o){if(e.isPlainObject(n)){ e.extend(!0,s,n); }else{if(o===i){ return s[n]; }s[n]=o}},debug:function(){d.debug&&(d.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,d.name+":"),s.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,d.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var n,o;d.performance&&(o=(n=(new Date).getTime())-(a||n),a=n,c.push({Element:v,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":o})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var n=d.name+":",o=0;a=!1,clearTimeout(s.performance.timer),e.each(c,(function(e,n){o+=n["Execution Time"]})),n+=" "+o+"ms",(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,(function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")})),console.groupEnd()),c=[]}},invoke:function(n,o,t){var a,c,l,u=h;return o=o||m,t=v||t,"string"==typeof n&&u!==i&&(n=n.split(/[\. ]/),a=n.length-1,e.each(n,(function(o,t){var r=o!=a?t+n[o+1].charAt(0).toUpperCase()+n[o+1].slice(1):n;if(e.isPlainObject(u[r])&&o!=a){ u=u[r]; }else{if(u[r]!==i){ return c=u[r],!1; }if(!e.isPlainObject(u[t])||o==a){ return u[t]!==i?(c=u[t],!1):(s.error(f.method,n),!1); }u=u[t]}}))),e.isFunction(c)?l=c.apply(t,o):c!==i&&(l=c),e.isArray(r)?r.push(l):r!==i?r=[r,l]:l!==i&&(r=l),c}},u?(h===i&&s.initialize(),s.invoke(l)):(h!==i&&s.destroy(),s.initialize()),r!==i?r:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(n){return function(o){return!!e.data(o,n)}})):function(n,o,i){return!!e.data(n,i[3])}})})(jQuery,window,document),(function(e,t,o,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(i){var s,r=e(this),c=r.selector||"",l=(new Date).getTime(),a=[],f=arguments[0],m="string"==typeof f,u=[].slice.call(arguments,1);return r.each((function(){var r,d,h,g,p,b=e.isPlainObject(i)?e.extend(!0,{},e.fn.sticky.settings,i):e.extend({},e.fn.sticky.settings),v=b.className,x=b.namespace,C=b.error,S="."+x,y="module-"+x,k=e(this),z=e(t),T=e(b.scrollContext),w=(k.selector,k.data(y)),B=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},P=this;p={initialize:function(){p.determineContainer(),p.determineContext(),p.verbose("Initializing sticky",b,r),p.save.positions(),p.checkErrors(),p.bind.events(),b.observeChanges&&p.observeChanges(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),w=p,k.data(y,p)},destroy:function(){p.verbose("Destroying previous instance"),p.reset(),h&&h.disconnect(),g&&g.disconnect(),z.off("load"+S,p.event.load).off("resize"+S,p.event.resize),T.off("scrollchange"+S,p.event.scrollchange),k.removeData(y)},observeChanges:function(){"MutationObserver"in t&&(h=new MutationObserver(p.event.documentChanged),g=new MutationObserver(p.event.changed),h.observe(o,{childList:!0,subtree:!0}),g.observe(P,{childList:!0,subtree:!0}),g.observe(d[0],{childList:!0,subtree:!0}),p.debug("Setting up mutation observer",g))},determineContainer:function(){r=b.container?e(b.container):k.offsetParent()},determineContext:function(){0!==(d=b.context?e(b.context):r).length||p.error(C.invalidContext,b.context,k)},checkErrors:function(){if(p.is.hidden()&&p.error(C.visible,k),p.cache.element.height>p.cache.context.height){ return p.reset(),void p.error(C.elementSize,k) }},bind:{events:function(){z.on("load"+S,p.event.load).on("resize"+S,p.event.resize),T.off("scroll"+S).on("scroll"+S,p.event.scroll).on("scrollchange"+S,p.event.scrollchange)}},event:{changed:function(e){clearTimeout(p.timer),p.timer=setTimeout((function(){p.verbose("DOM tree modified, updating sticky menu",e),p.refresh()}),100)},documentChanged:function(t){[].forEach.call(t,(function(t){t.removedNodes&&[].forEach.call(t.removedNodes,(function(t){(t==P||e(t).find(P).length>0)&&(p.debug("Element removed from DOM, tearing down events"),p.destroy())}))}))},load:function(){p.verbose("Page contents finished loading"),B(p.refresh)},resize:function(){p.verbose("Window resized"),B(p.refresh)},scroll:function(){B((function(){T.triggerHandler("scrollchange"+S,T.scrollTop())}))},scrollchange:function(e,t){p.stick(t),b.onScroll.call(P)}},refresh:function(e){p.reset(),b.context||p.determineContext(),e&&p.determineContainer(),p.save.positions(),p.stick(),b.onReposition.call(P)},supports:{sticky:function(){var t=e("<div/>");return t[0],t.addClass(v.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){p.lastScroll=e},elementScroll:function(e){p.elementScroll=e},positions:function(){var e={height:T.height()},t={margin:{top:parseInt(k.css("margin-top"),10),bottom:parseInt(k.css("margin-bottom"),10)},offset:k.offset(),width:k.outerWidth(),height:k.outerHeight()},o={offset:d.offset(),height:d.outerHeight()};r.outerHeight(),p.is.standardScroll()||(p.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=T.scrollTop(),e.left=T.scrollLeft(),t.offset.top+=e.top,o.offset.top+=e.top,t.offset.left+=e.left,o.offset.left+=e.left),p.cache={fits:t.height+b.offset<=e.height,sameHeight:t.height==o.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:o.offset.top,height:o.height,bottom:o.offset.top+o.height}},p.set.containerSize(),p.stick(),p.debug("Caching element positions",p.cache)}},get:{direction:function(e){var t="down";return e=e||T.scrollTop(),p.lastScroll!==n&&(p.lastScroll<e?t="down":p.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||T.scrollTop(),p.lastScroll?e-p.lastScroll:0},currentElementScroll:function(){return p.elementScroll?p.elementScroll:p.is.top()?Math.abs(parseInt(k.css("top"),10))||0:Math.abs(parseInt(k.css("bottom"),10))||0},elementScroll:function(e){e=e||T.scrollTop();var t=p.cache.element,o=p.cache.scrollContext,n=p.get.scrollChange(e),i=t.height-o.height+b.offset,s=p.get.currentElementScroll(),r=s+n;return p.cache.fits||r<0?0:r>i?i:r}},remove:{lastScroll:function(){delete p.lastScroll},elementScroll:function(e){delete p.elementScroll},minimumSize:function(){r.css("min-height","")},offset:function(){k.css("margin-top","")}},set:{offset:function(){p.verbose("Setting offset on element",b.offset),k.css("margin-top",b.offset)},containerSize:function(){var e=r.get(0).tagName;"HTML"===e||"body"==e?p.determineContainer():Math.abs(r.outerHeight()-p.cache.context.height)>b.jitter&&(p.debug("Context has padding, specifying exact height for container",p.cache.context.height),r.css({height:p.cache.context.height}))},minimumSize:function(){var e=p.cache.element;r.css("min-height",e.height)},scroll:function(e){p.debug("Setting scroll on element",e),p.elementScroll!=e&&(p.is.top()&&k.css("bottom","").css("top",-e),p.is.bottom()&&k.css("top","").css("bottom",e))},size:function(){0!==p.cache.element.height&&0!==p.cache.element.width&&(P.style.setProperty("width",p.cache.element.width+"px","important"),P.style.setProperty("height",p.cache.element.height+"px","important"))}},is:{standardScroll:function(){return T[0]==t},top:function(){return k.hasClass(v.top)},bottom:function(){return k.hasClass(v.bottom)},initialPosition:function(){return!p.is.fixed()&&!p.is.bound()},hidden:function(){return!k.is(":visible")},bound:function(){return k.hasClass(v.bound)},fixed:function(){return k.hasClass(v.fixed)}},stick:function(e){var t=e||T.scrollTop(),o=p.cache,n=o.fits,i=o.sameHeight,s=o.element,r=o.scrollContext,c=o.context,l=p.is.bottom()&&b.pushing?b.bottomOffset:b.offset,a=(e={top:t+l,bottom:t+l+r.height},p.get.direction(e.top),n?0:p.get.elementScroll(e.top)),f=!n;0!==s.height&&!i&&(p.is.initialPosition()?e.top>=c.bottom?(p.debug("Initial element position is bottom of container"),p.bindBottom()):e.top>s.top&&(s.height+e.top-a>=c.bottom?(p.debug("Initial element position is bottom of container"),p.bindBottom()):(p.debug("Initial element position is fixed"),p.fixTop())):p.is.fixed()?p.is.top()?e.top<=s.top?(p.debug("Fixed element reached top of container"),p.setInitialPosition()):s.height+e.top-a>=c.bottom?(p.debug("Fixed element reached bottom of container"),p.bindBottom()):f&&(p.set.scroll(a),p.save.lastScroll(e.top),p.save.elementScroll(a)):p.is.bottom()&&(e.bottom-s.height<=s.top?(p.debug("Bottom fixed rail has reached top of container"),p.setInitialPosition()):e.bottom>=c.bottom?(p.debug("Bottom fixed rail has reached bottom of container"),p.bindBottom()):f&&(p.set.scroll(a),p.save.lastScroll(e.top),p.save.elementScroll(a))):p.is.bottom()&&(e.top<=s.top?(p.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),p.setInitialPosition()):b.pushing?p.is.bound()&&e.bottom<=c.bottom&&(p.debug("Fixing bottom attached element to bottom of browser."),p.fixBottom()):p.is.bound()&&e.top<=c.bottom-s.height&&(p.debug("Fixing bottom attached element to top of browser."),p.fixTop())))},bindTop:function(){p.debug("Binding element to top of parent container"),p.remove.offset(),k.css({left:"",top:"",marginBottom:""}).removeClass(v.fixed).removeClass(v.bottom).addClass(v.bound).addClass(v.top),b.onTop.call(P),b.onUnstick.call(P)},bindBottom:function(){p.debug("Binding element to bottom of parent container"),p.remove.offset(),k.css({left:"",top:""}).removeClass(v.fixed).removeClass(v.top).addClass(v.bound).addClass(v.bottom),b.onBottom.call(P),b.onUnstick.call(P)},setInitialPosition:function(){p.debug("Returning to initial position"),p.unfix(),p.unbind()},fixTop:function(){p.debug("Fixing element to top of page"),b.setSize&&p.set.size(),p.set.minimumSize(),p.set.offset(),k.css({left:p.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.bottom).addClass(v.fixed).addClass(v.top),b.onStick.call(P)},fixBottom:function(){p.debug("Sticking element to bottom of page"),b.setSize&&p.set.size(),p.set.minimumSize(),p.set.offset(),k.css({left:p.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.top).addClass(v.fixed).addClass(v.bottom),b.onStick.call(P)},unbind:function(){p.is.bound()&&(p.debug("Removing container bound position on element"),p.remove.offset(),k.removeClass(v.bound).removeClass(v.top).removeClass(v.bottom))},unfix:function(){p.is.fixed()&&(p.debug("Removing fixed position on element"),p.remove.minimumSize(),p.remove.offset(),k.removeClass(v.fixed).removeClass(v.top).removeClass(v.bottom),b.onUnstick.call(P))},reset:function(){p.debug("Resetting elements position"),p.unbind(),p.unfix(),p.resetCSS(),p.remove.offset(),p.remove.lastScroll()},resetCSS:function(){k.css({width:"",height:""}),r.css({height:""})},setting:function(t,o){if(e.isPlainObject(t)){ e.extend(!0,b,t); }else{if(o===n){ return b[t]; }b[t]=o}},internal:function(t,o){if(e.isPlainObject(t)){ e.extend(!0,p,t); }else{if(o===n){ return p[t]; }p[t]=o}},debug:function(){!b.silent&&b.debug&&(b.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,b.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!b.silent&&b.verbose&&b.debug&&(b.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,b.name+":"),p.verbose.apply(console,arguments)))},error:function(){b.silent||(p.error=Function.prototype.bind.call(console.error,console,b.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,o;b.performance&&(o=(t=(new Date).getTime())-(l||t),l=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:P,"Execution Time":o})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,0)},display:function(){var t=b.name+":",o=0;l=!1,clearTimeout(p.performance.timer),e.each(a,(function(e,t){o+=t["Execution Time"]})),t+=" "+o+"ms",c&&(t+=" '"+c+"'"),(console.group!==n||console.table!==n)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),a=[]}},invoke:function(t,o,i){var r,c,l,a=w;return o=o||u,i=P||i,"string"==typeof t&&a!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,(function(o,i){var s=o!=r?i+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(a[s])&&o!=r){ a=a[s]; }else{if(a[s]!==n){ return c=a[s],!1; }if(!e.isPlainObject(a[i])||o==r){ return a[i]!==n&&(c=a[i],!1); }a=a[i]}}))),e.isFunction(c)?l=c.apply(i,o):c!==n&&(l=c),e.isArray(s)?s.push(l):s!==n?s=[s,l]:l!==n&&(s=l),c}},m?(w===n&&p.initialize(),p.invoke(f)):(w!==n&&w.invoke("destroy"),p.initialize())})),s!==n?s:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}})(jQuery,window,document),(function(e,t,a,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(i){var o,r=e.isFunction(this)?e(t):e(this),s=r.selector||"",c=(new Date).getTime(),l=[],d=arguments[0],u="string"==typeof d,b=[].slice.call(arguments,1),g=!1;return r.each((function(){var f,h,p,m,v,y,T=e.isPlainObject(i)?e.extend(!0,{},e.fn.tab.settings,i):e.extend({},e.fn.tab.settings),L=T.className,x=T.metadata,A=T.selector,P=T.error,C="."+T.namespace,F="module-"+T.namespace,S=e(this),j={},E=!0,O=0,w=this,k=S.data(F);v={initialize:function(){v.debug("Initializing tab menu item",S),v.fix.callbacks(),v.determineTabs(),v.debug("Determining tabs",T.context,h),T.auto&&v.set.auto(),v.bind.events(),T.history&&!g&&(v.initializeHistory(),g=!0),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),k=v,S.data(F,v)},destroy:function(){v.debug("Destroying tabs",S),S.removeData(F).off(C)},bind:{events:function(){e.isWindow(w)||(v.debug("Attaching tab activation events to element",S),S.on("click"+C,v.event.click))}},determineTabs:function(){var t;"parent"===T.context?(S.closest(A.ui).length>0?(t=S.closest(A.ui),v.verbose("Using closest UI element as parent",t)):t=S,f=t.parent(),v.verbose("Determined parent element for creating context",f)):T.context?(f=e(T.context),v.verbose("Using selector for tab context",T.context,f)):f=e("body"),T.childrenOnly?(h=f.children(A.tabs),v.debug("Searching tab context children for tabs",f,h)):(h=f.find(A.tabs),v.debug("Searching tab context for tabs",f,h))},fix:{callbacks:function(){e.isPlainObject(i)&&(i.onTabLoad||i.onTabInit)&&(i.onTabLoad&&(i.onLoad=i.onTabLoad,delete i.onTabLoad,v.error(P.legacyLoad,i.onLoad)),i.onTabInit&&(i.onFirstLoad=i.onTabInit,delete i.onTabInit,v.error(P.legacyInit,i.onFirstLoad)),T=e.extend(!0,{},e.fn.tab.settings,i))}},initializeHistory:function(){if(v.debug("Initializing page state"),e.address===n){ return v.error(P.state),!1; }if("state"==T.historyType){if(v.debug("Using HTML5 to manage state"),!1===T.path){ return v.error(P.path),!1; }e.address.history(!0).state(T.path)}e.address.bind("change",v.event.history.change)},event:{click:function(t){var a=e(this).data(x.tab);a!==n?(T.history?(v.verbose("Updating page state",t),e.address.value(a)):(v.verbose("Changing tab",t),v.changeTab(a)),t.preventDefault()):v.debug("No tab specified")},history:{change:function(t){var a=t.pathNames.join("/")||v.get.initialPath(),i=T.templates.determineTitle(a)||!1;v.performance.display(),v.debug("History change event",a,t),y=t,a!==n&&v.changeTab(a),i&&e.address.title(i)}}},refresh:function(){p&&(v.debug("Refreshing tab",p),v.changeTab(p))},cache:{read:function(e){return e!==n&&j[e]},add:function(e,t){e=e||p,v.debug("Adding cached content for",e),j[e]=t},remove:function(e){e=e||p,v.debug("Removing cached content for",e),delete j[e]}},set:{auto:function(){var t="string"==typeof T.path?T.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";v.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(T.apiSettings)?T.apiSettings.url=t:T.apiSettings={url:t}},loading:function(e){var t=v.get.tabElement(e);t.hasClass(L.loading)||(v.verbose("Setting loading state for",t),t.addClass(L.loading).siblings(h).removeClass(L.active+" "+L.loading),t.length>0&&T.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(a){var n=t.history&&t.history.pushState&&T.ignoreFirstLoad&&E,i=T.auto||e.isPlainObject(T.apiSettings),o=i&&!n?v.utilities.pathToArray(a):v.get.defaultPathArray(a);a=v.utilities.arrayToPath(o),e.each(o,(function(t,r){var s,c,l,d,u=o.slice(0,t+1),b=v.utilities.arrayToPath(u),g=v.is.tab(b),h=t+1==o.length,A=v.get.tabElement(b);if(v.verbose("Looking for tab",r),g){if(v.verbose("Tab was found",r),p=b,m=v.utilities.filterArray(o,u),h?d=!0:(c=o.slice(0,t+2),l=v.utilities.arrayToPath(c),(d=!v.is.tab(l))&&v.verbose("Tab parameters found",c)),d&&i){ return n?(v.debug("Ignoring remote content on first tab load",b),E=!1,v.cache.add(a,A.html()),v.activate.all(b),T.onFirstLoad.call(A[0],b,m,y),T.onLoad.call(A[0],b,m,y)):(v.activate.navigation(b),v.fetch.content(b,a)),!1; }v.debug("Opened local tab",b),v.activate.all(b),v.cache.read(b)||(v.cache.add(b,!0),v.debug("First time tab loaded calling tab init"),T.onFirstLoad.call(A[0],b,m,y)),T.onLoad.call(A[0],b,m,y)}else{if(-1!=a.search("/")||""===a){ return v.error(P.missingTab,S,f,b),!1; }if(b=(s=e("#"+a+', a[name="'+a+'"]')).closest("[data-tab]").data(x.tab),A=v.get.tabElement(b),s&&s.length>0&&b){ return v.debug("Anchor link used, opening parent tab",A,s),A.hasClass(L.active)||setTimeout((function(){v.scrollTo(s)}),0),v.activate.all(b),v.cache.read(b)||(v.cache.add(b,!0),v.debug("First time tab loaded calling tab init"),T.onFirstLoad.call(A[0],b,m,y)),T.onLoad.call(A[0],b,m,y),!1 }}}))},scrollTo:function(t){var n=!!(t&&t.length>0)&&t.offset().top;!1!==n&&(v.debug("Forcing scroll to an in-page link in a hidden tab",n,t),e(a).scrollTop(n))},update:{content:function(t,a,i){var o=v.get.tabElement(t),r=o[0];i=i!==n?i:T.evaluateScripts,"string"==typeof T.cacheType&&"dom"==T.cacheType.toLowerCase()&&"string"!=typeof a?o.empty().append(e(a).clone(!0)):i?(v.debug("Updating HTML and evaluating inline scripts",t,a),o.html(a)):(v.debug("Updating HTML",t,a),r.innerHTML=a)}},fetch:{content:function(t,a){var i,o,r=v.get.tabElement(t),s={dataType:"html",encodeParameters:!1,on:"now",cache:T.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==T.cacheType&&v.cache.add(a,e),v.update.content(t,e),t==p?(v.debug("Content loaded",t),v.activate.tab(t)):v.debug("Content loaded in background",t),T.onFirstLoad.call(r[0],t,m,y),T.onLoad.call(r[0],t,m,y),T.loadOnce?v.cache.add(a,!0):"string"==typeof T.cacheType&&"dom"==T.cacheType.toLowerCase()&&r.children().length>0?setTimeout((function(){var e=r.children().clone(!0);e=e.not("script"),v.cache.add(a,e)}),0):v.cache.add(a,r.html())},urlData:{tab:a}},c=r.api("get request")||!1,l=c&&"pending"===c.state();a=a||t,o=v.cache.read(a),T.cache&&o?(v.activate.tab(t),v.debug("Adding cached content",a),T.loadOnce||("once"==T.evaluateScripts?v.update.content(t,o,!1):v.update.content(t,o)),T.onLoad.call(r[0],t,m,y)):l?(v.set.loading(t),v.debug("Content is already loading",a)):e.api!==n?(i=e.extend(!0,{},T.apiSettings,s),v.debug("Retrieving remote content",a,i),v.set.loading(t),r.api(i)):v.error(P.api)}},activate:{all:function(e){v.activate.tab(e),v.activate.navigation(e)},tab:function(e){var t=v.get.tabElement(e),a="siblings"==T.deactivate?t.siblings(h):h.not(t),n=t.hasClass(L.active);v.verbose("Showing tab content for",t),n||(t.addClass(L.active),a.removeClass(L.active+" "+L.loading),t.length>0&&T.onVisible.call(t[0],e))},navigation:function(e){var t=v.get.navElement(e),a="siblings"==T.deactivate?t.siblings(r):r.not(t),n=t.hasClass(L.active);v.verbose("Activating tab navigation for",t,e),n||(t.addClass(L.active),a.removeClass(L.active+" "+L.loading))}},deactivate:{all:function(){v.deactivate.navigation(),v.deactivate.tabs()},navigation:function(){r.removeClass(L.active)},tabs:function(){h.removeClass(L.active+" "+L.loading)}},is:{tab:function(e){return e!==n&&v.get.tabElement(e).length>0}},get:{initialPath:function(){return r.eq(0).data(x.tab)||h.eq(0).data(x.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return v.utilities.pathToArray(v.get.defaultPath(e))},defaultPath:function(e){var t=r.filter("[data-"+x.tab+'^="'+e+'/"]').eq(0).data(x.tab)||!1;if(t){if(v.debug("Found default tab",t),O<T.maxDepth){ return O++,v.get.defaultPath(t); }v.error(P.recursion)}else { v.debug("No default tabs found for",e,h); }return O=0,e},navElement:function(e){return e=e||p,r.filter("[data-"+x.tab+'="'+e+'"]')},tabElement:function(e){var t,a,n,i;return e=e||p,n=v.utilities.pathToArray(e),i=v.utilities.last(n),t=h.filter("[data-"+x.tab+'="'+e+'"]'),a=h.filter("[data-"+x.tab+'="'+i+'"]'),t.length>0?t:a},tab:function(){return p}},utilities:{filterArray:function(t,a){return e.grep(t,(function(t){return-1==e.inArray(t,a)}))},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return e===n&&(e=p),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,a){if(v.debug("Changing setting",t,a),e.isPlainObject(t)){ e.extend(!0,T,t); }else{if(a===n){ return T[t]; }e.isPlainObject(T[t])?e.extend(!0,T[t],a):T[t]=a}},internal:function(t,a){if(e.isPlainObject(t)){ e.extend(!0,v,t); }else{if(a===n){ return v[t]; }v[t]=a}},debug:function(){!T.silent&&T.debug&&(T.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,T.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),v.verbose.apply(console,arguments)))},error:function(){T.silent||(v.error=Function.prototype.bind.call(console.error,console,T.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,a;T.performance&&(a=(t=(new Date).getTime())-(c||t),c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":a})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=T.name+":",a=0;c=!1,clearTimeout(v.performance.timer),e.each(l,(function(e,t){a+=t["Execution Time"]})),t+=" "+a+"ms",s&&(t+=" '"+s+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,a,i){var r,s,c,l=k;return a=a||b,i=w||i,"string"==typeof t&&l!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,(function(a,i){var o=a!=r?i+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(l[o])&&a!=r){ l=l[o]; }else{if(l[o]!==n){ return s=l[o],!1; }if(!e.isPlainObject(l[i])||a==r){ return l[i]!==n?(s=l[i],!1):(v.error(P.method,t),!1); }l=l[i]}}))),e.isFunction(s)?c=s.apply(i,a):s!==n&&(c=s),e.isArray(o)?o.push(c):o!==n?o=[o,c]:c!==n&&(o=c),s}},u?(k===n&&v.initialize(),v.invoke(d)):(k!==n&&k.invoke("destroy"),v.initialize())})),o!==n?o:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,a){},onLoad:function(e,t,a){},onVisible:function(e,t,a){},onRequest:function(e,t,a){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}})(jQuery,window,document),(function(n,e,i,t){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),n.fn.transition=function(){var a,o=n(this),r=o.selector||"",s=(new Date).getTime(),l=[],u=arguments,d=u[0],c=[].slice.call(arguments,1),m="string"==typeof d;return e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,o.each((function(e){var f,p,g,v,b,y,h,w,C,A=n(this),S=this;(C={initialize:function(){f=C.get.settings.apply(S,u),v=f.className,g=f.error,b=f.metadata,w="."+f.namespace,h="module-"+f.namespace,p=A.data(h)||C,y=C.get.animationEndEvent(),m&&(m=C.invoke(d)),!1===m&&(C.verbose("Converted arguments into settings object",f),f.interval?C.delay(f.animate):C.animate(),C.instantiate())},instantiate:function(){C.verbose("Storing instance of module",C),p=C,A.data(h,p)},destroy:function(){C.verbose("Destroying previous module for",S),A.removeData(h)},refresh:function(){C.verbose("Refreshing display type on next animation"),delete C.displayType},forceRepaint:function(){C.verbose("Forcing element repaint");var n=A.parent(),e=A.next();0===e.length?A.detach().appendTo(n):A.detach().insertBefore(e)},repaint:function(){C.verbose("Repainting element"),S.offsetWidth},delay:function(n){var i,a=C.get.animationDirection();a||(a=C.can.transition()?C.get.direction():"static"),n=n!==t?n:f.interval,i="auto"==f.reverse&&a==v.outward||1==f.reverse?(o.length-e)*f.interval:e*f.interval,C.debug("Delaying animation by",i),setTimeout(C.animate,i)},animate:function(n){if(f=n||f,!C.is.supported()){ return C.error(g.support),!1; }if(C.debug("Preparing animation",f.animation),C.is.animating()){if(f.queue){ return!f.allowRepeats&&C.has.direction()&&C.is.occurring()&&!0!==C.queuing?C.debug("Animation is currently occurring, preventing queueing same animation",f.animation):C.queue(f.animation),!1; }if(!f.allowRepeats&&C.is.occurring()){ return C.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1; }C.debug("New animation started, completing previous early",f.animation),p.complete()}C.can.animate()?C.set.animating(f.animation):C.error(g.noAnimation,f.animation,S)},reset:function(){C.debug("Resetting animation to beginning conditions"),C.remove.animationCallbacks(),C.restore.conditions(),C.remove.animating()},queue:function(n){C.debug("Queueing animation of",n),C.queuing=!0,A.one(y+".queue"+w,(function(){C.queuing=!1,C.repaint(),C.animate.apply(this,f)}))},complete:function(n){C.debug("Animation complete",f.animation),C.remove.completeCallback(),C.remove.failSafe(),C.is.looping()||(C.is.outward()?(C.verbose("Animation is outward, hiding element"),C.restore.conditions(),C.hide()):C.is.inward()?(C.verbose("Animation is outward, showing element"),C.restore.conditions(),C.show()):(C.verbose("Static animation completed"),C.restore.conditions(),f.onComplete.call(S)))},force:{visible:function(){var n=A.attr("style"),e=C.get.userStyle(),i=C.get.displayType(),a=e+"display: "+i+" !important;",o=A.css("display"),r=n===t||""===n;o!==i?(C.verbose("Overriding default display to show element",i),A.attr("style",a)):r&&A.removeAttr("style")},hidden:function(){var n=A.attr("style"),e=A.css("display"),i=n===t||""===n;"none"===e||C.is.hidden()?i&&A.removeAttr("style"):(C.verbose("Overriding default display to hide element"),A.css("display","none"))}},has:{direction:function(e){var i=!1;return"string"==typeof(e=e||f.animation)&&(e=e.split(" "),n.each(e,(function(n,e){e!==v.inward&&e!==v.outward||(i=!0)}))),i},inlineDisplay:function(){var e=A.attr("style")||"";return n.isArray(e.match(/display.*?;/,""))}},set:{animating:function(n){var e;C.remove.completeCallback(),n=n||f.animation,e=C.get.animationClass(n),C.save.animation(e),C.force.visible(),C.remove.hidden(),C.remove.direction(),C.start.animation(e)},duration:function(n,e){((e="number"==typeof(e=e||f.duration)?e+"ms":e)||0===e)&&(C.verbose("Setting animation duration",e),A.css({"animation-duration":e}))},direction:function(n){(n=n||C.get.direction())==v.inward?C.set.inward():C.set.outward()},looping:function(){C.debug("Transition set to loop"),A.addClass(v.looping)},hidden:function(){A.addClass(v.transition).addClass(v.hidden)},inward:function(){C.debug("Setting direction to inward"),A.removeClass(v.outward).addClass(v.inward)},outward:function(){C.debug("Setting direction to outward"),A.removeClass(v.inward).addClass(v.outward)},visible:function(){A.addClass(v.transition).addClass(v.visible)}},start:{animation:function(n){n=n||C.get.animationClass(),C.debug("Starting tween",n),A.addClass(n).one(y+".complete"+w,C.complete),f.useFailSafe&&C.add.failSafe(),C.set.duration(f.duration),f.onStart.call(S)}},save:{animation:function(n){C.cache||(C.cache={}),C.cache.animation=n},displayType:function(n){"none"!==n&&A.data(b.displayType,n)},transitionExists:function(e,i){n.fn.transition.exists[e]=i,C.verbose("Saving existence of transition",e,i)}},restore:{conditions:function(){var n=C.get.currentAnimation();n&&(A.removeClass(n),C.verbose("Removing animation class",C.cache)),C.remove.duration()}},add:{failSafe:function(){var n=C.get.duration();C.timer=setTimeout((function(){A.triggerHandler(y)}),n+f.failSafeDelay),C.verbose("Adding fail safe timer",C.timer)}},remove:{animating:function(){A.removeClass(v.animating)},animationCallbacks:function(){C.remove.queueCallback(),C.remove.completeCallback()},queueCallback:function(){A.off(".queue"+w)},completeCallback:function(){A.off(".complete"+w)},display:function(){A.css("display","")},direction:function(){A.removeClass(v.inward).removeClass(v.outward)},duration:function(){A.css("animation-duration","")},failSafe:function(){C.verbose("Removing fail safe timer",C.timer),C.timer&&clearTimeout(C.timer)},hidden:function(){A.removeClass(v.hidden)},visible:function(){A.removeClass(v.visible)},looping:function(){C.debug("Transitions are no longer looping"),C.is.looping()&&(C.reset(),A.removeClass(v.looping))},transition:function(){A.removeClass(v.visible).removeClass(v.hidden)}},get:{settings:function(e,i,t){return"object"==typeof e?n.extend(!0,{},n.fn.transition.settings,e):"function"==typeof t?n.extend({},n.fn.transition.settings,{animation:e,onComplete:t,duration:i}):"string"==typeof i||"number"==typeof i?n.extend({},n.fn.transition.settings,{animation:e,duration:i}):"object"==typeof i?n.extend({},n.fn.transition.settings,i,{animation:e}):"function"==typeof i?n.extend({},n.fn.transition.settings,{animation:e,onComplete:i}):n.extend({},n.fn.transition.settings,{animation:e})},animationClass:function(n){var e=n||f.animation,i=C.can.transition()&&!C.has.direction()?C.get.direction()+" ":"";return v.animating+" "+v.transition+" "+i+e},currentAnimation:function(){return!(!C.cache||C.cache.animation===t)&&C.cache.animation},currentDirection:function(){return C.is.inward()?v.inward:v.outward},direction:function(){return C.is.hidden()||!C.is.visible()?v.inward:v.outward},animationDirection:function(e){var i;return"string"==typeof(e=e||f.animation)&&(e=e.split(" "),n.each(e,(function(n,e){e===v.inward?i=v.inward:e===v.outward&&(i=v.outward)}))),i||!1},duration:function(n){return!1===(n=n||f.duration)&&(n=A.css("animation-duration")||0),"string"==typeof n?n.indexOf("ms")>-1?parseFloat(n):1e3*parseFloat(n):n},displayType:function(n){return n=n===t||n,f.displayType?f.displayType:(n&&A.data(b.displayType)===t&&C.can.transition(!0),A.data(b.displayType))},userStyle:function(n){return(n=n||A.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(e){return n.fn.transition.exists[e]},animationStartEvent:function(){var n,e=i.createElement("div"),a={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(n in a){ if(e.style[n]!==t){ return a[n]; } }return!1},animationEndEvent:function(){var n,e=i.createElement("div"),a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(n in a){ if(e.style[n]!==t){ return a[n]; } }return!1}},can:{transition:function(e){var i,a,o,r,s,l,u=f.animation,d=C.get.transitionExists(u),c=C.get.displayType(!1);if(d===t||e){if(C.verbose("Determining whether animation exists"),i=A.attr("class"),a=A.prop("tagName"),r=(o=n("<"+a+" />").addClass(i).insertAfter(A)).addClass(u).removeClass(v.inward).removeClass(v.outward).addClass(v.animating).addClass(v.transition).css("animationName"),s=o.addClass(v.inward).css("animationName"),c||(c=o.attr("class",i).removeAttr("style").removeClass(v.hidden).removeClass(v.visible).show().css("display"),C.verbose("Determining final display state",c),C.save.displayType(c)),o.remove(),r!=s){ C.debug("Direction exists for animation",u),l=!0; }else{if("none"==r||!r){ return void C.debug("No animation defined in css",u); }C.debug("Static animation found",u,c),l=!1}C.save.transitionExists(u,l)}return d!==t?d:l},animate:function(){return C.can.transition()!==t}},is:{animating:function(){return A.hasClass(v.animating)},inward:function(){return A.hasClass(v.inward)},outward:function(){return A.hasClass(v.outward)},looping:function(){return A.hasClass(v.looping)},occurring:function(n){return n="."+(n=n||f.animation).replace(" ","."),A.filter(n).length>0},visible:function(){return A.is(":visible")},hidden:function(){return"hidden"===A.css("visibility")},supported:function(){return!1!==y}},hide:function(){C.verbose("Hiding element"),C.is.animating()&&C.reset(),S.blur(),C.remove.display(),C.remove.visible(),C.set.hidden(),C.force.hidden(),f.onHide.call(S),f.onComplete.call(S)},show:function(n){C.verbose("Showing element",n),C.remove.hidden(),C.set.visible(),C.force.visible(),f.onShow.call(S),f.onComplete.call(S)},toggle:function(){C.is.visible()?C.hide():C.show()},stop:function(){C.debug("Stopping current animation"),A.triggerHandler(y)},stopAll:function(){C.debug("Stopping all animation"),C.remove.queueCallback(),A.triggerHandler(y)},clear:{queue:function(){C.debug("Clearing animation queue"),C.remove.queueCallback()}},enable:function(){C.verbose("Starting animation"),A.removeClass(v.disabled)},disable:function(){C.debug("Stopping animation"),A.addClass(v.disabled)},setting:function(e,i){if(C.debug("Changing setting",e,i),n.isPlainObject(e)){ n.extend(!0,f,e); }else{if(i===t){ return f[e]; }n.isPlainObject(f[e])?n.extend(!0,f[e],i):f[e]=i}},internal:function(e,i){if(n.isPlainObject(e)){ n.extend(!0,C,e); }else{if(i===t){ return C[e]; }C[e]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,f.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),C.verbose.apply(console,arguments)))},error:function(){f.silent||(C.error=Function.prototype.bind.call(console.error,console,f.name+":"),C.error.apply(console,arguments))},performance:{log:function(n){var e,i;f.performance&&(i=(e=(new Date).getTime())-(s||e),s=e,l.push({Name:n[0],Arguments:[].slice.call(n,1)||"",Element:S,"Execution Time":i})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var e=f.name+":",i=0;s=!1,clearTimeout(C.performance.timer),n.each(l,(function(n,e){i+=e["Execution Time"]})),e+=" "+i+"ms",r&&(e+=" '"+r+"'"),o.length>1&&(e+=" ("+o.length+")"),(console.group!==t||console.table!==t)&&l.length>0&&(console.groupCollapsed(e),console.table?console.table(l):n.each(l,(function(n,e){console.log(e.Name+": "+e["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(e,i,o){var r,s,l,u=p;return i=i||c,o=S||o,"string"==typeof e&&u!==t&&(e=e.split(/[\. ]/),r=e.length-1,n.each(e,(function(i,a){var o=i!=r?a+e[i+1].charAt(0).toUpperCase()+e[i+1].slice(1):e;if(n.isPlainObject(u[o])&&i!=r){ u=u[o]; }else{if(u[o]!==t){ return s=u[o],!1; }if(!n.isPlainObject(u[a])||i==r){ return u[a]!==t&&(s=u[a],!1); }u=u[a]}}))),n.isFunction(s)?l=s.apply(o,i):s!==t&&(l=s),n.isArray(a)?a.push(l):a!==t?a=[a,l]:l!==t&&(a=l),s!==t&&s}}).initialize()})),a!==t?a:this},n.fn.transition.exists={},n.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}})(jQuery,window,document),(function(e,o,n,t){"use strict";o=void 0!==o&&o.Math==Math?o:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(i){var s,c=e(this),r=c.selector||"",a=(new Date).getTime(),l=[],d=arguments[0],u="string"==typeof d,f=[].slice.call(arguments,1),b=c.length,g=0;return c.each((function(){var c,m,p,v,h=e.isPlainObject(i)?e.extend(!0,{},e.fn.visibility.settings,i):e.extend({},e.fn.visibility.settings),P=h.className,x=h.namespace,C=h.error,y=h.metadata,S="."+x,R="module-"+x,V=e(o),k=e(this),T=e(h.context),O=(k.selector,k.data(R)),z=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame||function(e){setTimeout(e,0)},A=this,w=!1;v={initialize:function(){v.debug("Initializing",h),v.setup.cache(),v.should.trackChanges()&&("image"==h.type&&v.setup.image(),"fixed"==h.type&&v.setup.fixed(),h.observeChanges&&v.observeChanges(),v.bind.events()),v.save.position(),v.is.visible()||v.error(C.visible,k),h.initialCheck&&v.checkVisibility(),v.instantiate()},instantiate:function(){v.debug("Storing instance",v),k.data(R,v),O=v},destroy:function(){v.verbose("Destroying previous module"),p&&p.disconnect(),m&&m.disconnect(),V.off("load"+S,v.event.load).off("resize"+S,v.event.resize),T.off("scroll"+S,v.event.scroll).off("scrollchange"+S,v.event.scrollchange),"fixed"==h.type&&(v.resetFixed(),v.remove.placeholder()),k.off(S).removeData(R)},observeChanges:function(){"MutationObserver"in o&&(m=new MutationObserver(v.event.contextChanged),p=new MutationObserver(v.event.changed),m.observe(n,{childList:!0,subtree:!0}),p.observe(A,{childList:!0,subtree:!0}),v.debug("Setting up mutation observer",p))},bind:{events:function(){v.verbose("Binding visibility events to scroll and resize"),h.refreshOnLoad&&V.on("load"+S,v.event.load),V.on("resize"+S,v.event.resize),T.off("scroll"+S).on("scroll"+S,v.event.scroll).on("scrollchange"+S,v.event.scrollchange)}},event:{changed:function(e){v.verbose("DOM tree modified, updating visibility calculations"),v.timer=setTimeout((function(){v.verbose("DOM tree modified, updating sticky menu"),v.refresh()}),100)},contextChanged:function(o){[].forEach.call(o,(function(o){o.removedNodes&&[].forEach.call(o.removedNodes,(function(o){(o==A||e(o).find(A).length>0)&&(v.debug("Element removed from DOM, tearing down events"),v.destroy())}))}))},resize:function(){v.debug("Window resized"),h.refreshOnResize&&z(v.refresh)},load:function(){v.debug("Page finished loading"),z(v.refresh)},scroll:function(){h.throttle?(clearTimeout(v.timer),v.timer=setTimeout((function(){T.triggerHandler("scrollchange"+S,[T.scrollTop()])}),h.throttle)):z((function(){T.triggerHandler("scrollchange"+S,[T.scrollTop()])}))},scrollchange:function(e,o){v.checkVisibility(o)}},precache:function(o,t){o instanceof Array||(o=[o]);for(var i=o.length,s=0,c=[],r=n.createElement("img"),a=function(){++s>=o.length&&e.isFunction(t)&&t()};i--;){ (r=n.createElement("img")).onload=a,r.onerror=a,r.src=o[i],c.push(r) }},enableCallbacks:function(){v.debug("Allowing callbacks to occur"),w=!1},disableCallbacks:function(){v.debug("Disabling all callbacks temporarily"),w=!0},should:{trackChanges:function(){return u?(v.debug("One time query, no need to bind events"),!1):(v.debug("Callbacks being attached"),!0)}},setup:{cache:function(){v.cache={occurred:{},screen:{},element:{}}},image:function(){var e=k.data(y.src);e&&(v.verbose("Lazy loading image",e),h.once=!0,h.observeChanges=!1,h.onOnScreen=function(){v.debug("Image on screen",A),v.precache(e,(function(){v.set.image(e,(function(){++g==b&&h.onAllLoaded.call(this),h.onLoad.call(this)}))}))})},fixed:function(){v.debug("Setting up fixed"),h.once=!1,h.observeChanges=!1,h.initialCheck=!0,h.refreshOnLoad=!0,i.transition||(h.transition=!1),v.create.placeholder(),v.debug("Added placeholder",c),h.onTopPassed=function(){v.debug("Element passed, adding fixed position",k),v.show.placeholder(),v.set.fixed(),h.transition&&e.fn.transition!==t&&k.transition(h.transition,h.duration)},h.onTopPassedReverse=function(){v.debug("Element returned to position, removing fixed",k),v.hide.placeholder(),v.remove.fixed()}}},create:{placeholder:function(){v.verbose("Creating fixed position placeholder"),c=k.clone(!1).css("display","none").addClass(P.placeholder).insertAfter(k)}},show:{placeholder:function(){v.verbose("Showing placeholder"),c.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){v.verbose("Hiding placeholder"),c.css("display","none").css("visibility","")}},set:{fixed:function(){v.verbose("Setting element to fixed position"),k.addClass(P.fixed).css({position:"fixed",top:h.offset+"px",left:"auto",zIndex:h.zIndex}),h.onFixed.call(A)},image:function(o,n){if(k.attr("src",o),h.transition){ if(e.fn.transition!==t){if(k.hasClass(P.visible)){ return void v.debug("Transition already occurred on this image, skipping animation"); }k.transition(h.transition,h.duration,n)}else { k.fadeIn(h.duration,n); } }else { k.show() }}},is:{onScreen:function(){return v.get.elementCalculations().onScreen},offScreen:function(){return v.get.elementCalculations().offScreen},visible:function(){return!(!v.cache||!v.cache.element||0===v.cache.element.width&&0===v.cache.element.offset.top)},verticallyScrollableContext:function(){var e=T.get(0)!==o&&T.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=T.get(0)!==o&&T.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){v.debug("Refreshing constants (width/height)"),"fixed"==h.type&&v.resetFixed(),v.reset(),v.save.position(),h.checkOnRefresh&&v.checkVisibility(),h.onRefresh.call(A)},resetFixed:function(){v.remove.fixed(),v.remove.occurred()},reset:function(){v.verbose("Resetting all cached values"),e.isPlainObject(v.cache)&&(v.cache.screen={},v.cache.element={})},checkVisibility:function(e){v.verbose("Checking visibility of element",v.cache.element),!w&&v.is.visible()&&(v.save.scroll(e),v.save.calculations(),v.passed(),v.passingReverse(),v.topVisibleReverse(),v.bottomVisibleReverse(),v.topPassedReverse(),v.bottomPassedReverse(),v.onScreen(),v.offScreen(),v.passing(),v.topVisible(),v.bottomVisible(),v.topPassed(),v.bottomPassed(),h.onUpdate&&h.onUpdate.call(A,v.get.elementCalculations()))},passed:function(o,n){var i=v.get.elementCalculations();if(o&&n){ h.onPassed[o]=n; }else{if(o!==t){ return v.get.pixelsPassed(o)>i.pixelsPassed; }i.passing&&e.each(h.onPassed,(function(e,o){i.bottomVisible||i.pixelsPassed>v.get.pixelsPassed(e)?v.execute(o,e):h.once||v.remove.occurred(o)}))}},onScreen:function(e){var o=v.get.elementCalculations(),n=e||h.onOnScreen,i="onScreen";if(e&&(v.debug("Adding callback for onScreen",e),h.onOnScreen=e),o.onScreen?v.execute(n,i):h.once||v.remove.occurred(i),e!==t){ return o.onOnScreen }},offScreen:function(e){var o=v.get.elementCalculations(),n=e||h.onOffScreen,i="offScreen";if(e&&(v.debug("Adding callback for offScreen",e),h.onOffScreen=e),o.offScreen?v.execute(n,i):h.once||v.remove.occurred(i),e!==t){ return o.onOffScreen }},passing:function(e){var o=v.get.elementCalculations(),n=e||h.onPassing,i="passing";if(e&&(v.debug("Adding callback for passing",e),h.onPassing=e),o.passing?v.execute(n,i):h.once||v.remove.occurred(i),e!==t){ return o.passing }},topVisible:function(e){var o=v.get.elementCalculations(),n=e||h.onTopVisible,i="topVisible";if(e&&(v.debug("Adding callback for top visible",e),h.onTopVisible=e),o.topVisible?v.execute(n,i):h.once||v.remove.occurred(i),e===t){ return o.topVisible }},bottomVisible:function(e){var o=v.get.elementCalculations(),n=e||h.onBottomVisible,i="bottomVisible";if(e&&(v.debug("Adding callback for bottom visible",e),h.onBottomVisible=e),o.bottomVisible?v.execute(n,i):h.once||v.remove.occurred(i),e===t){ return o.bottomVisible }},topPassed:function(e){var o=v.get.elementCalculations(),n=e||h.onTopPassed,i="topPassed";if(e&&(v.debug("Adding callback for top passed",e),h.onTopPassed=e),o.topPassed?v.execute(n,i):h.once||v.remove.occurred(i),e===t){ return o.topPassed }},bottomPassed:function(e){var o=v.get.elementCalculations(),n=e||h.onBottomPassed,i="bottomPassed";if(e&&(v.debug("Adding callback for bottom passed",e),h.onBottomPassed=e),o.bottomPassed?v.execute(n,i):h.once||v.remove.occurred(i),e===t){ return o.bottomPassed }},passingReverse:function(e){var o=v.get.elementCalculations(),n=e||h.onPassingReverse,i="passingReverse";if(e&&(v.debug("Adding callback for passing reverse",e),h.onPassingReverse=e),o.passing?h.once||v.remove.occurred(i):v.get.occurred("passing")&&v.execute(n,i),e!==t){ return!o.passing }},topVisibleReverse:function(e){var o=v.get.elementCalculations(),n=e||h.onTopVisibleReverse,i="topVisibleReverse";if(e&&(v.debug("Adding callback for top visible reverse",e),h.onTopVisibleReverse=e),o.topVisible?h.once||v.remove.occurred(i):v.get.occurred("topVisible")&&v.execute(n,i),e===t){ return!o.topVisible }},bottomVisibleReverse:function(e){var o=v.get.elementCalculations(),n=e||h.onBottomVisibleReverse,i="bottomVisibleReverse";if(e&&(v.debug("Adding callback for bottom visible reverse",e),h.onBottomVisibleReverse=e),o.bottomVisible?h.once||v.remove.occurred(i):v.get.occurred("bottomVisible")&&v.execute(n,i),e===t){ return!o.bottomVisible }},topPassedReverse:function(e){var o=v.get.elementCalculations(),n=e||h.onTopPassedReverse,i="topPassedReverse";if(e&&(v.debug("Adding callback for top passed reverse",e),h.onTopPassedReverse=e),o.topPassed?h.once||v.remove.occurred(i):v.get.occurred("topPassed")&&v.execute(n,i),e===t){ return!o.onTopPassed }},bottomPassedReverse:function(e){var o=v.get.elementCalculations(),n=e||h.onBottomPassedReverse,i="bottomPassedReverse";if(e&&(v.debug("Adding callback for bottom passed reverse",e),h.onBottomPassedReverse=e),o.bottomPassed?h.once||v.remove.occurred(i):v.get.occurred("bottomPassed")&&v.execute(n,i),e===t){ return!o.bottomPassed }},execute:function(e,o){var n=v.get.elementCalculations(),t=v.get.screenCalculations();(e=e||!1)&&(h.continuous?(v.debug("Callback being called continuously",o,n),e.call(A,n,t)):v.get.occurred(o)||(v.debug("Conditions met",o,n),e.call(A,n,t))),v.save.occurred(o)},remove:{fixed:function(){v.debug("Removing fixed position"),k.removeClass(P.fixed).css({position:"",top:"",left:"",zIndex:""}),h.onUnfixed.call(A)},placeholder:function(){v.debug("Removing placeholder content"),c&&c.remove()},occurred:function(e){if(e){var o=v.cache.occurred;o[e]!==t&&!0===o[e]&&(v.debug("Callback can now be called again",e),v.cache.occurred[e]=!1)}else { v.cache.occurred={} }}},save:{calculations:function(){v.verbose("Saving all calculations necessary to determine positioning"),v.save.direction(),v.save.screenCalculations(),v.save.elementCalculations()},occurred:function(e){e&&(v.cache.occurred[e]!==t&&!0===v.cache.occurred[e]||(v.verbose("Saving callback occurred",e),v.cache.occurred[e]=!0))},scroll:function(e){e=e+h.offset||T.scrollTop()+h.offset,v.cache.scroll=e},direction:function(){var e,o=v.get.scroll(),n=v.get.lastScroll();return e=o>n&&n?"down":o<n&&n?"up":"static",v.cache.direction=e,v.cache.direction},elementPosition:function(){var e=v.cache.element,o=v.get.screenSize();return v.verbose("Saving element position"),e.fits=e.height<o.height,e.offset=k.offset(),e.width=k.outerWidth(),e.height=k.outerHeight(),v.is.verticallyScrollableContext()&&(e.offset.top+=T.scrollTop()-T.offset().top),v.is.horizontallyScrollableContext()&&(e.offset.left+=T.scrollLeft-T.offset().left),v.cache.element=e,e},elementCalculations:function(){var e=v.get.screenCalculations(),o=v.get.elementPosition();return h.includeMargin?(o.margin={},o.margin.top=parseInt(k.css("margin-top"),10),o.margin.bottom=parseInt(k.css("margin-bottom"),10),o.top=o.offset.top-o.margin.top,o.bottom=o.offset.top+o.height+o.margin.bottom):(o.top=o.offset.top,o.bottom=o.offset.top+o.height),o.topPassed=e.top>=o.top,o.bottomPassed=e.top>=o.bottom,o.topVisible=e.bottom>=o.top&&!o.topPassed,o.bottomVisible=e.bottom>=o.bottom&&!o.bottomPassed,o.pixelsPassed=0,o.percentagePassed=0,o.onScreen=(o.topVisible||o.passing)&&!o.bottomPassed,o.passing=o.topPassed&&!o.bottomPassed,o.offScreen=!o.onScreen,o.passing&&(o.pixelsPassed=e.top-o.top,o.percentagePassed=(e.top-o.top)/o.height),v.cache.element=o,v.verbose("Updated element calculations",o),o},screenCalculations:function(){var e=v.get.scroll();return v.save.direction(),v.cache.screen.top=e,v.cache.screen.bottom=e+v.cache.screen.height,v.cache.screen},screenSize:function(){v.verbose("Saving window position"),v.cache.screen={height:T.height()}},position:function(){v.save.screenSize(),v.save.elementPosition()}},get:{pixelsPassed:function(e){var o=v.get.elementCalculations();return e.search("%")>-1?o.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return v.cache.occurred!==t&&v.cache.occurred[e]||!1},direction:function(){return v.cache.direction===t&&v.save.direction(),v.cache.direction},elementPosition:function(){return v.cache.element===t&&v.save.elementPosition(),v.cache.element},elementCalculations:function(){return v.cache.element===t&&v.save.elementCalculations(),v.cache.element},screenCalculations:function(){return v.cache.screen===t&&v.save.screenCalculations(),v.cache.screen},screenSize:function(){return v.cache.screen===t&&v.save.screenSize(),v.cache.screen},scroll:function(){return v.cache.scroll===t&&v.save.scroll(),v.cache.scroll},lastScroll:function(){return v.cache.screen===t?(v.debug("First scroll event, no last scroll could be found"),!1):v.cache.screen.top}},setting:function(o,n){if(e.isPlainObject(o)){ e.extend(!0,h,o); }else{if(n===t){ return h[o]; }h[o]=n}},internal:function(o,n){if(e.isPlainObject(o)){ e.extend(!0,v,o); }else{if(n===t){ return v[o]; }v[o]=n}},debug:function(){!h.silent&&h.debug&&(h.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,h.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),v.verbose.apply(console,arguments)))},error:function(){h.silent||(v.error=Function.prototype.bind.call(console.error,console,h.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var o,n;h.performance&&(n=(o=(new Date).getTime())-(a||o),a=o,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var o=h.name+":",n=0;a=!1,clearTimeout(v.performance.timer),e.each(l,(function(e,o){n+=o["Execution Time"]})),o+=" "+n+"ms",r&&(o+=" '"+r+"'"),(console.group!==t||console.table!==t)&&l.length>0&&(console.groupCollapsed(o),console.table?console.table(l):e.each(l,(function(e,o){console.log(o.Name+": "+o["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(o,n,i){var c,r,a,l=O;return n=n||f,i=A||i,"string"==typeof o&&l!==t&&(o=o.split(/[\. ]/),c=o.length-1,e.each(o,(function(n,i){var s=n!=c?i+o[n+1].charAt(0).toUpperCase()+o[n+1].slice(1):o;if(e.isPlainObject(l[s])&&n!=c){ l=l[s]; }else{if(l[s]!==t){ return r=l[s],!1; }if(!e.isPlainObject(l[i])||n==c){ return l[i]!==t?(r=l[i],!1):(v.error(C.method,o),!1); }l=l[i]}}))),e.isFunction(r)?a=r.apply(i,n):r!==t&&(a=r),e.isArray(s)?s.push(a):s!==t?s=[s,a]:a!==t&&(s=a),r}},u?(O===t&&v.initialize(),O.save.scroll(),O.save.calculations(),v.invoke(d)):(O!==t&&O.invoke("destroy"),v.initialize())})),s!==t?s:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:o,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}})(jQuery,window,document);